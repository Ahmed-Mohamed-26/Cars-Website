"use strict";var M6=Object.defineProperty,P6=Object.defineProperties,O6=Object.getOwnPropertyDescriptors,GV=Object.getOwnPropertySymbols,k6=Object.prototype.hasOwnProperty,F6=Object.prototype.propertyIsEnumerable,qV=(it,Ie,F)=>Ie in it?M6(it,Ie,{enumerable:!0,configurable:!0,writable:!0,value:F}):it[Ie]=F,WV=(it,Ie)=>{for(var F in Ie||(Ie={}))k6.call(Ie,F)&&qV(it,F,Ie[F]);if(GV)for(var F of GV(Ie))F6.call(Ie,F)&&qV(it,F,Ie[F]);return it},zV=(it,Ie)=>P6(it,O6(Ie));(self.webpackChunktest=self.webpackChunktest||[]).push([[179],{2011:(it,Ie,F)=>{F.d(Ie,{hO:()=>We,xv:()=>_e,Dh:()=>de,GT:()=>Ee,cc:()=>xe,on:()=>G,pX:()=>he});var h=F(5e3),$=F(127),O=F(5813);it=F.hmd(it);const se=["ngOnDestroy"],he=(we,ke,Be,je={})=>new Proxy(we,{get:(st,Ne)=>Be.runOutsideAngular(()=>{var at;if(we[Ne])return(null===(at=null==je?void 0:je.spy)||void 0===at?void 0:at.get)&&je.spy.get(Ne,we[Ne]),we[Ne];if(se.indexOf(Ne)>-1)return()=>{};const Xe=ke.toPromise().then(Te=>{const q=Te&&Te[Ne];return"function"==typeof q?q.bind(Te):q&&q.then?q.then(ie=>Be.run(()=>ie)):Be.run(()=>q)});return new Proxy(()=>{},{get:(Te,q)=>Xe[q],apply:(Te,q,ie)=>Xe.then(pe=>{var ve;const Pe=pe&&pe(...ie);return(null===(ve=null==je?void 0:je.spy)||void 0===ve?void 0:ve.apply)&&je.spy.apply(Ne,ie,Pe),Pe})})})}),Ee=(we,ke)=>{ke.forEach(Be=>{Object.getOwnPropertyNames(Be.prototype||Be).forEach(je=>{Object.defineProperty(we.prototype,je,Object.getOwnPropertyDescriptor(Be.prototype||Be,je))})})};class fe{constructor(ke){return ke}}const de=new h.OlP("angularfire2.app.options"),_e=new h.OlP("angularfire2.app.name");function G(we,ke,Be){const st="object"==typeof Be&&Be||{};st.name=st.name||"string"==typeof Be&&Be||"[DEFAULT]";const at=$.Z.apps.filter(Xe=>Xe&&Xe.name===st.name)[0]||ke.runOutsideAngular(()=>$.Z.initializeApp(we,st));try{JSON.stringify(we)!==JSON.stringify(at.options)&&z("error",`${at.name} Firebase App already initialized with different options${it.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Xe){}return new fe(at)}const z=(we,...ke)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[we](...ke)},oe={provide:fe,useFactory:G,deps:[de,h.R0b,[new h.FiY,_e]]};let We=(()=>{class we{constructor(Be){$.Z.registerVersion("angularfire",O.q4.full,"core"),$.Z.registerVersion("angularfire",O.q4.full,"app-compat"),$.Z.registerVersion("angular",h.q4F.full,Be.toString())}static initializeApp(Be,je){return{ngModule:we,providers:[{provide:de,useValue:Be},{provide:_e,useValue:je}]}}}return we.\u0275fac=function(Be){return new(Be||we)(h.LFG(h.Lbi))},we.\u0275mod=h.oAB({type:we}),we.\u0275inj=h.cJS({providers:[oe]}),we})();function xe(we,ke,Be,je,st){const[,Ne,at]=globalThis.\u0275AngularfireInstanceCache.find(Xe=>Xe[0]===we)||[];if(Ne)return function Fe(we,ke){try{return we.toString()===ke.toString()}catch(Be){return we===ke}}(st,at)||(ye("error",`${ke} was already initialized on the ${Be} Firebase App with different settings.${He?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:st,was:at})),Ne;{const Xe=je();return globalThis.\u0275AngularfireInstanceCache.push([we,Xe,st]),Xe}}const He=!!it.hot,ye=(we,...ke)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[we](...ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(it,Ie,F)=>{F.d(Ie,{q4:()=>Wd,iC:()=>xc,fc:()=>Ac,HU:()=>tu,vb:()=>zf,JM:()=>Wf});var h=F(5e3),$=F(5867),O=F(5861),se=F(9681),he=F(2090),Ee=F(4859),fe=F(1877),de=F(8766);const _e="@firebase/installations",G="0.5.11",oe=`w:${G}`,We="FIS_v2",ke=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Be(T){return T instanceof he.ZR&&T.code.includes("request-failed")}function je({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function st(T){return{token:T.token,requestStatus:2,expiresIn:pe(T.expiresIn),creationTime:Date.now()}}function Ne(T,S){return at.apply(this,arguments)}function at(){return(at=(0,O.Z)(function*(T,S){const U=(yield S.json()).error;return ke.create("request-failed",{requestName:T,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function Xe({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function Te(T,{refreshToken:S}){const P=Xe(T);return P.append("Authorization",function ve(T){return`${We} ${T}`}(S)),P}function q(T){return ie.apply(this,arguments)}function ie(){return(ie=(0,O.Z)(function*(T){const S=yield T();return S.status>=500&&S.status<600?T():S})).apply(this,arguments)}function pe(T){return Number(T.replace("s","000"))}function Pe(T,S){return ue.apply(this,arguments)}function ue(){return(ue=(0,O.Z)(function*({appConfig:T,heartbeatServiceProvider:S},{fid:P}){const U=je(T),K=Xe(T),te=S.getImmediate({optional:!0});if(te){const Lt=yield te.getHeartbeatsHeader();Lt&&K.append("x-firebase-client",Lt)}const Qe={method:"POST",headers:K,body:JSON.stringify({fid:P,authVersion:We,appId:T.appId,sdkVersion:oe})},ct=yield q(()=>fetch(U,Qe));if(ct.ok){const Lt=yield ct.json();return{fid:Lt.fid||P,registrationStatus:2,refreshToken:Lt.refreshToken,authToken:st(Lt.authToken)}}throw yield Ne("Create Installation",ct)})).apply(this,arguments)}function St(T){return new Promise(S=>{setTimeout(S,T)})}const Xn=/^[cdef][\w-]{21}$/;function xt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const P=function ar(T){return function Gt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return Xn.test(P)?P:""}catch(T){return""}}function cn(T){return`${T.appName}!${T.appId}`}const gr=new Map;function _n(T,S){const P=cn(T);Un(P,S),function bi(T,S){const P=function En(){return!bn&&"BroadcastChannel"in self&&(bn=new BroadcastChannel("[Firebase] FID Change"),bn.onmessage=T=>{Un(T.data.key,T.data.fid)}),bn}();P&&P.postMessage({key:T,fid:S}),function Ps(){0===gr.size&&bn&&(bn.close(),bn=null)}()}(P,S)}function Un(T,S){const P=gr.get(T);if(P)for(const U of P)U(S)}let bn=null;const Le="firebase-installations-store";let ur=null;function gt(){return ur||(ur=(0,de.X3)("firebase-installations-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(Le)}})),ur}function Yr(T,S){return on.apply(this,arguments)}function on(){return(on=(0,O.Z)(function*(T,S){const P=cn(T),K=(yield gt()).transaction(Le,"readwrite"),te=K.objectStore(Le),Re=yield te.get(P);return yield te.put(S,P),yield K.done,(!Re||Re.fid!==S.fid)&&_n(T,S.fid),S})).apply(this,arguments)}function an(T){return ai.apply(this,arguments)}function ai(){return(ai=(0,O.Z)(function*(T){const S=cn(T),U=(yield gt()).transaction(Le,"readwrite");yield U.objectStore(Le).delete(S),yield U.done})).apply(this,arguments)}function mr(T,S){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,O.Z)(function*(T,S){const P=cn(T),K=(yield gt()).transaction(Le,"readwrite"),te=K.objectStore(Le),Re=yield te.get(P),Qe=S(Re);return void 0===Qe?yield te.delete(P):yield te.put(Qe,P),yield K.done,Qe&&(!Re||Re.fid!==Qe.fid)&&_n(T,Qe.fid),Qe})).apply(this,arguments)}function An(T){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,O.Z)(function*(T){let S;const P=yield mr(T.appConfig,U=>{const K=Co(U),te=zt(T,K);return S=te.registrationPromise,te.installationEntry});return""===P.fid?{installationEntry:yield S}:{installationEntry:P,registrationPromise:S}})).apply(this,arguments)}function Co(T){return Cn(T||{fid:xt(),registrationStatus:0})}function zt(T,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(ke.create("app-offline"))};const P={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},U=function mt(T,S){return _t.apply(this,arguments)}(T,P);return{installationEntry:P,registrationPromise:U}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:ps(T)}:{installationEntry:S}}function _t(){return(_t=(0,O.Z)(function*(T,S){try{const P=yield Pe(T,S);return Yr(T.appConfig,P)}catch(P){throw Be(P)&&409===P.customData.serverCode?yield an(T.appConfig):yield Yr(T.appConfig,{fid:S.fid,registrationStatus:0}),P}})).apply(this,arguments)}function ps(T){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,O.Z)(function*(T){let S=yield Et(T.appConfig);for(;1===S.registrationStatus;)yield St(100),S=yield Et(T.appConfig);if(0===S.registrationStatus){const{installationEntry:P,registrationPromise:U}=yield An(T);return U||P}return S})).apply(this,arguments)}function Et(T){return mr(T,S=>{if(!S)throw ke.create("installation-not-found");return Cn(S)})}function Cn(T){return function _r(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function In(T,S){return yt.apply(this,arguments)}function yt(){return(yt=(0,O.Z)(function*({appConfig:T,heartbeatServiceProvider:S},P){const U=Y(T,P),K=Te(T,P),te=S.getImmediate({optional:!0});if(te){const Lt=yield te.getHeartbeatsHeader();Lt&&K.append("x-firebase-client",Lt)}const Qe={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:oe,appId:T.appId}})},ct=yield q(()=>fetch(U,Qe));if(ct.ok)return st(yield ct.json());throw yield Ne("Generate Auth Token",ct)})).apply(this,arguments)}function Y(T,{fid:S}){return`${je(T)}/${S}/authTokens:generate`}function H(T){return X.apply(this,arguments)}function X(){return(X=(0,O.Z)(function*(T,S=!1){let P;const U=yield mr(T.appConfig,te=>{if(!Ft(te))throw ke.create("not-registered");const Re=te.authToken;if(!S&&ln(Re))return te;if(1===Re.requestStatus)return P=ee(T,S),te;{if(!navigator.onLine)throw ke.create("app-offline");const Qe=Yt(te);return P=qe(T,Qe),Qe}});return P?yield P:U.authToken})).apply(this,arguments)}function ee(T,S){return B.apply(this,arguments)}function B(){return(B=(0,O.Z)(function*(T,S){let P=yield be(T.appConfig);for(;1===P.authToken.requestStatus;)yield St(100),P=yield be(T.appConfig);const U=P.authToken;return 0===U.requestStatus?H(T,S):U})).apply(this,arguments)}function be(T){return mr(T,S=>{if(!Ft(S))throw ke.create("not-registered");return function ae(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function qe(T,S){return ht.apply(this,arguments)}function ht(){return(ht=(0,O.Z)(function*(T,S){try{const P=yield In(T,S),U=Object.assign(Object.assign({},S),{authToken:P});return yield Yr(T.appConfig,U),P}catch(P){if(!Be(P)||401!==P.customData.serverCode&&404!==P.customData.serverCode){const U=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Yr(T.appConfig,U)}else yield an(T.appConfig);throw P}})).apply(this,arguments)}function Ft(T){return void 0!==T&&2===T.registrationStatus}function ln(T){return 2===T.requestStatus&&!function xn(T){const S=Date.now();return S<T.creationTime||T.creationTime+T.expiresIn<S+36e5}(T)}function Yt(T){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:S})}function Z(){return(Z=(0,O.Z)(function*(T){const S=T,{installationEntry:P,registrationPromise:U}=yield An(S);return U?U.catch(console.error):H(S).catch(console.error),P.fid})).apply(this,arguments)}function Ke(){return(Ke=(0,O.Z)(function*(T,S=!1){const P=T;return yield vt(P),(yield H(P,S)).token})).apply(this,arguments)}function vt(T){return bt.apply(this,arguments)}function bt(){return(bt=(0,O.Z)(function*(T){const{registrationPromise:S}=yield An(T);S&&(yield S)})).apply(this,arguments)}function Ga(T){return ke.create("missing-app-config-values",{valueName:T})}const Ii="installations",qt=T=>{const S=T.getProvider("app").getImmediate(),P=function yr(T){if(!T||!T.options)throw Ga("App Configuration");if(!T.name)throw Ga("App Name");const S=["projectId","apiKey","appId"];for(const P of S)if(!T.options[P])throw Ga(P);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(S);return{app:S,appConfig:P,heartbeatServiceProvider:(0,se._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},hn=T=>{const S=T.getProvider("app").getImmediate(),P=(0,se._getProvider)(S,Ii).getImmediate();return{getId:()=>function J(T){return Z.apply(this,arguments)}(P),getToken:K=>function Se(T){return Ke.apply(this,arguments)}(P,K)}};(function tr(){(0,se._registerComponent)(new Ee.wA(Ii,qt,"PUBLIC")),(0,se._registerComponent)(new Ee.wA("installations-internal",hn,"PRIVATE"))})(),(0,se.registerVersion)(_e,G),(0,se.registerVersion)(_e,G,"esm2017");const Qr="@firebase/remote-config",nr=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Lf{constructor(S,P,U,K){this.client=S,this.storage=P,this.storageCache=U,this.logger=K}isCachedDataFresh(S,P){if(!P)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-P,K=U<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${K}.`),K}fetch(S){var P=this;return(0,O.Z)(function*(){const[U,K]=yield Promise.all([P.storage.getLastSuccessfulFetchTimestampMillis(),P.storage.getLastSuccessfulFetchResponse()]);if(K&&P.isCachedDataFresh(S.cacheMaxAgeMillis,U))return K;S.eTag=K&&K.eTag;const te=yield P.client.fetch(S),Re=[P.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&Re.push(P.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(Re),te})()}}function Kg(T=navigator){return T.languages&&T.languages[0]||T.language}class Pi{constructor(S,P,U,K,te,Re){this.firebaseInstallations=S,this.sdkVersion=P,this.namespace=U,this.projectId=K,this.apiKey=te,this.appId=Re}fetch(S){var P=this;return(0,O.Z)(function*(){var U,K,te;const[Re,Qe]=yield Promise.all([P.firebaseInstallations.getId(),P.firebaseInstallations.getToken()]),Lt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${P.projectId}/namespaces/${P.namespace}:fetch?key=${P.apiKey}`,Wt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},Tt={sdk_version:P.sdkVersion,app_instance_id:Re,app_instance_id_token:Qe,app_id:P.appId,language_code:Kg()},Wn={method:"POST",headers:Wt,body:JSON.stringify(Tt)},zn=fetch(Lt,Wn),rs=new Promise((Gs,ko)=>{S.signal.addEventListener(()=>{const ou=new Error("The operation was aborted.");ou.name="AbortError",ko(ou)})});let is;try{yield Promise.race([zn,rs]),is=yield zn}catch(Gs){let ko="fetch-client-network";throw"AbortError"===(null===(U=Gs)||void 0===U?void 0:U.name)&&(ko="fetch-timeout"),nr.create(ko,{originalErrorMessage:null===(K=Gs)||void 0===K?void 0:K.message})}let ss=is.status;const su=is.headers.get("ETag")||void 0;let Oo,ni;if(200===is.status){let Gs;try{Gs=yield is.json()}catch(ko){throw nr.create("fetch-client-parse",{originalErrorMessage:null===(te=ko)||void 0===te?void 0:te.message})}Oo=Gs.entries,ni=Gs.state}if("INSTANCE_STATE_UNSPECIFIED"===ni?ss=500:"NO_CHANGE"===ni?ss=304:("NO_TEMPLATE"===ni||"EMPTY_CONFIG"===ni)&&(Oo={}),304!==ss&&200!==ss)throw nr.create("fetch-status",{httpStatus:ss});return{status:ss,eTag:su,config:Oo}})()}}class Vf{constructor(S,P){this.client=S,this.storage=P}fetch(S){var P=this;return(0,O.Z)(function*(){const U=(yield P.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return P.attemptFetch(S,U)})()}attemptFetch(S,{throttleEndTimeMillis:P,backoffCount:U}){var K=this;return(0,O.Z)(function*(){yield function Yg(T,S){return new Promise((P,U)=>{const K=Math.max(S-Date.now(),0),te=setTimeout(P,K);T.addEventListener(()=>{clearTimeout(te),U(nr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,P);try{const te=yield K.client.fetch(S);return yield K.storage.deleteThrottleMetadata(),te}catch(te){if(!function Wa(T){if(!(T instanceof he.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(te))throw te;const Re={throttleEndTimeMillis:Date.now()+(0,he.$s)(U),backoffCount:U+1};return yield K.storage.setThrottleMetadata(Re),K.attemptFetch(S,Re)}})()}}class Nd{constructor(S,P,U,K,te){this.app=S,this._client=P,this._storageCache=U,this._storage=K,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Xu(T,S){var P;const U=T.target.error||void 0;return nr.create(S,{originalErrorMessage:U&&(null===(P=U)||void 0===P?void 0:P.message)})}const so="app_namespace_store";class Pd{constructor(S,P,U,K=function ec(){return new Promise((T,S)=>{var P;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=K=>{S(Xu(K,"storage-open"))},U.onsuccess=K=>{T(K.target.result)},U.onupgradeneeded=K=>{0===K.oldVersion&&K.target.result.createObjectStore(so,{keyPath:"compositeKey"})}}catch(U){S(nr.create("storage-open",{originalErrorMessage:null===(P=U)||void 0===P?void 0:P.message}))}})}()){this.appId=S,this.appName=P,this.namespace=U,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var P=this;return(0,O.Z)(function*(){const U=yield P.openDbPromise;return new Promise((K,te)=>{var Re;const ct=U.transaction([so],"readonly").objectStore(so),Lt=P.createCompositeKey(S);try{const Wt=ct.get(Lt);Wt.onerror=Tt=>{te(Xu(Tt,"storage-get"))},Wt.onsuccess=Tt=>{const Wn=Tt.target.result;K(Wn?Wn.value:void 0)}}catch(Wt){te(nr.create("storage-get",{originalErrorMessage:null===(Re=Wt)||void 0===Re?void 0:Re.message}))}})})()}set(S,P){var U=this;return(0,O.Z)(function*(){const K=yield U.openDbPromise;return new Promise((te,Re)=>{var Qe;const Lt=K.transaction([so],"readwrite").objectStore(so),Wt=U.createCompositeKey(S);try{const Tt=Lt.put({compositeKey:Wt,value:P});Tt.onerror=Wn=>{Re(Xu(Wn,"storage-set"))},Tt.onsuccess=()=>{te()}}catch(Tt){Re(nr.create("storage-set",{originalErrorMessage:null===(Qe=Tt)||void 0===Qe?void 0:Qe.message}))}})})()}delete(S){var P=this;return(0,O.Z)(function*(){const U=yield P.openDbPromise;return new Promise((K,te)=>{var Re;const ct=U.transaction([so],"readwrite").objectStore(so),Lt=P.createCompositeKey(S);try{const Wt=ct.delete(Lt);Wt.onerror=Tt=>{te(Xu(Tt,"storage-delete"))},Wt.onsuccess=()=>{K()}}catch(Wt){te(nr.create("storage-delete",{originalErrorMessage:null===(Re=Wt)||void 0===Re?void 0:Re.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Jg{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,O.Z)(function*(){const P=S.storage.getLastFetchStatus(),U=S.storage.getLastSuccessfulFetchTimestampMillis(),K=S.storage.getActiveConfig(),te=yield P;te&&(S.lastFetchStatus=te);const Re=yield U;Re&&(S.lastSuccessfulFetchTimestampMillis=Re);const Qe=yield K;Qe&&(S.activeConfig=Qe)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Xg(){return za.apply(this,arguments)}function za(){return(za=(0,O.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch(T){return!1}})).apply(this,arguments)}!function Od(){(0,se._registerComponent)(new Ee.wA("remote-config",function T(S,{instanceIdentifier:P}){const U=S.getProvider("app").getImmediate(),K=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw nr.create("registration-window");if(!(0,he.hl)())throw nr.create("indexed-db-unavailable");const{projectId:te,apiKey:Re,appId:Qe}=U.options;if(!te)throw nr.create("registration-project-id");if(!Re)throw nr.create("registration-api-key");if(!Qe)throw nr.create("registration-app-id");const ct=new Pd(Qe,U.name,P=P||"firebase"),Lt=new Jg(ct),Wt=new fe.Yd(Qr);Wt.logLevel=fe.in.ERROR;const Tt=new Pi(K,se.SDK_VERSION,P,te,Re,Qe),Wn=new Vf(Tt,ct),zn=new Lf(Wn,ct,Lt,Wt),rs=new Nd(U,zn,Lt,ct,Wt);return function Rn(T){const S=(0,he.m9)(T);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(rs),rs},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Qr,"0.3.10"),(0,se.registerVersion)(Qr,"0.3.10","esm2017")}();const em="/firebase-messaging-sw.js",ks="/firebase-cloud-messaging-push-scope",tc="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Za="google.c.a.c_id",nc="google.c.a.c_l",Fl="google.c.a.ts",ms="google.c.a.e";var ta=(()=>{return(T=ta||(ta={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",ta;var T})();function rr(T){const S=new Uint8Array(T);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jf(T){const P=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(P),K=new Uint8Array(U.length);for(let te=0;te<U.length;++te)K[te]=U.charCodeAt(te);return K}const Jr="fcm_token_details_db",Vl="fcm_token_object_Store";function kd(T){return Ul.apply(this,arguments)}function Ul(){return Ul=(0,O.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(Jr))return null;let S=null;return(yield(0,de.X3)(Jr,5,{upgrade:(U=(0,O.Z)(function*(K,te,Re,Qe){var ct;if(te<2||!K.objectStoreNames.contains(Vl))return;const Lt=Qe.objectStore(Vl),Wt=yield Lt.index("fcmSenderId").get(T);if(yield Lt.clear(),Wt)if(2===te){const Tt=Wt;if(!Tt.auth||!Tt.p256dh||!Tt.endpoint)return;S={token:Tt.fcmToken,createTime:null!==(ct=Tt.createTime)&&void 0!==ct?ct:Date.now(),subscriptionOptions:{auth:Tt.auth,p256dh:Tt.p256dh,endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:"string"==typeof Tt.vapidKey?Tt.vapidKey:rr(Tt.vapidKey)}}}else if(3===te){const Tt=Wt;S={token:Tt.fcmToken,createTime:Tt.createTime,subscriptionOptions:{auth:rr(Tt.auth),p256dh:rr(Tt.p256dh),endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:rr(Tt.vapidKey)}}}else if(4===te){const Tt=Wt;S={token:Tt.fcmToken,createTime:Tt.createTime,subscriptionOptions:{auth:rr(Tt.auth),p256dh:rr(Tt.p256dh),endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:rr(Tt.vapidKey)}}}}),function(te,Re,Qe,ct){return U.apply(this,arguments)})})).close(),yield(0,de.Lj)(Jr),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),ic(S)?S:null;var U}),Ul.apply(this,arguments)}function ic(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:S}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const ui="firebase-messaging-store";let Fd=null;function $n(){return Fd||(Fd=(0,de.X3)("firebase-messaging-database",1,{upgrade:(T,S)=>{0===S&&T.createObjectStore(ui)}})),Fd}function na(T){return sc.apply(this,arguments)}function sc(){return(sc=(0,O.Z)(function*(T){const S=Vs(T),U=yield(yield $n()).transaction(ui).objectStore(ui).get(S);if(U)return U;{const K=yield kd(T.appConfig.senderId);if(K)return yield Oi(T,K),K}})).apply(this,arguments)}function Oi(T,S){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,O.Z)(function*(T,S){const P=Vs(T),K=(yield $n()).transaction(ui,"readwrite");return yield K.objectStore(ui).put(S,P),yield K.done,S})).apply(this,arguments)}function Fs(T){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,O.Z)(function*(T){const S=Vs(T),U=(yield $n()).transaction(ui,"readwrite");yield U.objectStore(ui).delete(S),yield U.done})).apply(this,arguments)}function Vs({appConfig:T}){return T.appId}const wr=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ka(T,S){return oo.apply(this,arguments)}function oo(){return(oo=(0,O.Z)(function*(T,S){var P;const U=yield Xr(T),K=Bl(S),te={method:"POST",headers:U,body:JSON.stringify(K)};let Re;try{Re=yield(yield fetch(ao(T.appConfig),te)).json()}catch(Qe){throw wr.create("token-subscribe-failed",{errorInfo:null===(P=Qe)||void 0===P?void 0:P.toString()})}if(Re.error)throw wr.create("token-subscribe-failed",{errorInfo:Re.error.message});if(!Re.token)throw wr.create("token-subscribe-no-token");return Re.token})).apply(this,arguments)}function Yi(T,S){return _s.apply(this,arguments)}function _s(){return(_s=(0,O.Z)(function*(T,S){var P;const U=yield Xr(T),K=Bl(S.subscriptionOptions),te={method:"PATCH",headers:U,body:JSON.stringify(K)};let Re;try{Re=yield(yield fetch(`${ao(T.appConfig)}/${S.token}`,te)).json()}catch(Qe){throw wr.create("token-update-failed",{errorInfo:null===(P=Qe)||void 0===P?void 0:P.toString()})}if(Re.error)throw wr.create("token-update-failed",{errorInfo:Re.error.message});if(!Re.token)throw wr.create("token-update-no-token");return Re.token})).apply(this,arguments)}function Ya(T,S){return At.apply(this,arguments)}function At(){return(At=(0,O.Z)(function*(T,S){var P;const K={method:"DELETE",headers:yield Xr(T)};try{const Re=yield(yield fetch(`${ao(T.appConfig)}/${S}`,K)).json();if(Re.error)throw wr.create("token-unsubscribe-failed",{errorInfo:Re.error.message})}catch(te){throw wr.create("token-unsubscribe-failed",{errorInfo:null===(P=te)||void 0===P?void 0:P.toString()})}})).apply(this,arguments)}function ao({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function Xr(T){return ra.apply(this,arguments)}function ra(){return(ra=(0,O.Z)(function*({appConfig:T,installations:S}){const P=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${P}`})})).apply(this,arguments)}function Bl({p256dh:T,auth:S,endpoint:P,vapidKey:U}){const K={web:{endpoint:P,auth:S,p256dh:T}};return U!==tc&&(K.web.applicationPubKey=U),K}const Qa=6048e5;function Ja(T){return jl.apply(this,arguments)}function jl(){return(jl=(0,O.Z)(function*(T){const S=yield ei(T.swRegistration,T.vapidKey),P={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:S.endpoint,auth:rr(S.getKey("auth")),p256dh:rr(S.getKey("p256dh"))},U=yield na(T.firebaseDependencies);if(U){if(Xa(U.subscriptionOptions,P))return Date.now()>=U.createTime+Qa?$l(T,{token:U.token,createTime:Date.now(),subscriptionOptions:P}):U.token;try{yield Ya(T.firebaseDependencies,U.token)}catch(K){console.warn(K)}return ia(T.firebaseDependencies,P)}return ia(T.firebaseDependencies,P)})).apply(this,arguments)}function Me(T){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,O.Z)(function*(T){const S=yield na(T.firebaseDependencies);S&&(yield Ya(T.firebaseDependencies,S.token),yield Fs(T.firebaseDependencies));const P=yield T.swRegistration.pushManager.getSubscription();return!P||P.unsubscribe()})).apply(this,arguments)}function $l(T,S){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,O.Z)(function*(T,S){try{const P=yield Yi(T.firebaseDependencies,S),U=Object.assign(Object.assign({},S),{token:P,createTime:Date.now()});return yield Oi(T.firebaseDependencies,U),P}catch(P){throw yield Me(T),P}})).apply(this,arguments)}function ia(T,S){return Us.apply(this,arguments)}function Us(){return(Us=(0,O.Z)(function*(T,S){const U={token:yield Ka(T,S),createTime:Date.now(),subscriptionOptions:S};return yield Oi(T,U),U.token})).apply(this,arguments)}function ei(T,S){return lo.apply(this,arguments)}function lo(){return(lo=(0,O.Z)(function*(T,S){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:jf(S)})})).apply(this,arguments)}function Xa(T,S){return S.vapidKey===T.vapidKey&&S.endpoint===T.endpoint&&S.auth===T.auth&&S.p256dh===T.p256dh}function oc(T){const S={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function ac(T,S){if(!S.notification)return;T.notification={};const P=S.notification.title;P&&(T.notification.title=P);const U=S.notification.body;U&&(T.notification.body=U);const K=S.notification.image;K&&(T.notification.image=K)}(S,T),function So(T,S){!S.data||(T.data=S.data)}(S,T),function sa(T,S){var P,U,K,te,Re;if(!S.fcmOptions&&!(null===(P=S.notification)||void 0===P?void 0:P.click_action))return;T.fcmOptions={};const Qe=null!==(K=null===(U=S.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==K?K:null===(te=S.notification)||void 0===te?void 0:te.click_action;Qe&&(T.fcmOptions.link=Qe);const ct=null===(Re=S.fcmOptions)||void 0===Re?void 0:Re.analytics_label;ct&&(T.fcmOptions.analyticsLabel=ct)}(S,T),S}function Rr(T){return"object"==typeof T&&!!T&&Za in T}function ki(T,S){const P=[];for(let U=0;U<T.length;U++)P.push(T.charAt(U)),U<S.length&&P.push(S.charAt(U));return P.join("")}function Qi(T){return wr.create("missing-app-config-values",{valueName:T})}ki("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ki("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Bs{constructor(S,P,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function lc(T){if(!T||!T.options)throw Qi("App Configuration Object");if(!T.name)throw Qi("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:P}=T;for(const U of S)if(!P[U])throw Qi(U);return{appName:T.name,projectId:P.projectId,apiKey:P.apiKey,appId:P.appId,senderId:P.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:K,installations:P,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Hl(T){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,O.Z)(function*(T){var S;try{T.swRegistration=yield navigator.serviceWorker.register(em,{scope:ks}),T.swRegistration.update().catch(()=>{})}catch(P){throw wr.create("failed-service-worker-registration",{browserErrorMessage:null===(S=P)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function uc(T,S){return oa.apply(this,arguments)}function oa(){return(oa=(0,O.Z)(function*(T,S){if(!S&&!T.swRegistration&&(yield Hl(T)),S||!T.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw wr.create("invalid-sw-registration");T.swRegistration=S}})).apply(this,arguments)}function el(T,S){return uo.apply(this,arguments)}function uo(){return(uo=(0,O.Z)(function*(T,S){S?T.vapidKey=S:T.vapidKey||(T.vapidKey=tc)})).apply(this,arguments)}function Ao(){return(Ao=(0,O.Z)(function*(T,S){if(!navigator)throw wr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw wr.create("permission-blocked");return yield el(T,null==S?void 0:S.vapidKey),yield uc(T,null==S?void 0:S.serviceWorkerRegistration),Ja(T)})).apply(this,arguments)}function Ld(T,S,P){return tl.apply(this,arguments)}function tl(){return(tl=(0,O.Z)(function*(T,S,P){const U=ql(S);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:P[Za],message_name:P[nc],message_time:P[Fl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ql(T){switch(T){case ta.NOTIFICATION_CLICKED:return"notification_open";case ta.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Wl(){return(Wl=(0,O.Z)(function*(T,S){const P=S.data;if(!P.isFirebaseMessaging)return;T.onMessageHandler&&P.messageType===ta.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(oc(P)):T.onMessageHandler.next(oc(P)));const U=P.data;Rr(U)&&"1"===U[ms]&&(yield Ld(T,P.messageType,U))})).apply(this,arguments)}const nl="@firebase/messaging",aa=T=>{const S=new Bs(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",P=>function dc(T,S){return Wl.apply(this,arguments)}(S,P)),S},nm=T=>{const S=T.getProvider("messaging").getImmediate();return{getToken:U=>function cc(T,S){return Ao.apply(this,arguments)}(S,U)}};function Nr(){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,O.Z)(function*(){try{yield(0,he.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Vd(){(0,se._registerComponent)(new Ee.wA("messaging",aa,"PUBLIC")),(0,se._registerComponent)(new Ee.wA("messaging-internal",nm,"PRIVATE")),(0,se.registerVersion)(nl,"0.9.15"),(0,se.registerVersion)(nl,"0.9.15","esm2017")}();const la="analytics",ua="firebase_id",rm="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ji="https://www.googletagmanager.com/gtag/js",ir=new fe.Yd("@firebase/analytics");function _c(T){return Promise.all(T.map(S=>S.catch(P=>P)))}function im(T,S){const P=document.createElement("script");P.src=`${Ji}?l=${T}&id=${S}`,P.async=!0,document.head.appendChild(P)}function yc(T,S,P,U,K,te){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,O.Z)(function*(T,S,P,U,K,te){const Re=U[K];try{if(Re)yield S[Re];else{const ct=(yield _c(P)).find(Lt=>Lt.measurementId===K);ct&&(yield S[ct.appId])}}catch(Qe){ir.error(Qe)}T("config",K,te)})).apply(this,arguments)}function sm(T,S,P,U,K){return ca.apply(this,arguments)}function ca(){return(ca=(0,O.Z)(function*(T,S,P,U,K){try{let te=[];if(K&&K.send_to){let Re=K.send_to;Array.isArray(Re)||(Re=[Re]);const Qe=yield _c(P);for(const ct of Re){const Lt=Qe.find(Tt=>Tt.measurementId===ct),Wt=Lt&&S[Lt.appId];if(!Wt){te=[];break}te.push(Wt)}}0===te.length&&(te=Object.values(S)),yield Promise.all(te),T("event",U,K||{})}catch(te){ir.error(te)}})).apply(this,arguments)}function Tn(){const T=window.document.getElementsByTagName("script");for(const S of Object.values(T))if(S.src&&S.src.includes(Ji))return S;return null}const lt=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Hf=new class Er{constructor(S={},P=1e3){this.throttleMetadata=S,this.intervalMillis=P}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,P){this.throttleMetadata[S]=P}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function il(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Bd(T){return sl.apply(this,arguments)}function sl(){return(sl=(0,O.Z)(function*(T){var S;const{appId:P,apiKey:U}=T,K={method:"GET",headers:il(U)},te=rm.replace("{app-id}",P),Re=yield fetch(te,K);if(200!==Re.status&&304!==Re.status){let Qe="";try{const ct=yield Re.json();(null===(S=ct.error)||void 0===S?void 0:S.message)&&(Qe=ct.error.message)}catch(ct){}throw lt.create("config-fetch-failed",{httpStatus:Re.status,responseMessage:Qe})}return Re.json()})).apply(this,arguments)}function om(T){return wc.apply(this,arguments)}function wc(){return(wc=(0,O.Z)(function*(T,S=Hf,P){const{appId:U,apiKey:K,measurementId:te}=T.options;if(!U)throw lt.create("no-app-id");if(!K){if(te)return{measurementId:te,appId:U};throw lt.create("no-api-key")}const Re=S.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Qe=new Yl;return setTimeout((0,O.Z)(function*(){Qe.abort()}),void 0!==P?P:6e4),ys({appId:U,apiKey:K,measurementId:te},Re,Qe,S)})).apply(this,arguments)}function ys(T,S,P){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,O.Z)(function*(T,{throttleEndTimeMillis:S,backoffCount:P},U,K=Hf){var te,Re;const{appId:Qe,measurementId:ct}=T;try{yield Ec(U,S)}catch(Lt){if(ct)return ir.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ct} provided in the "measurementId" field in the local Firebase config. [${null===(te=Lt)||void 0===te?void 0:te.message}]`),{appId:Qe,measurementId:ct};throw Lt}try{const Lt=yield Bd(T);return K.deleteThrottleMetadata(Qe),Lt}catch(Lt){const Wt=Lt;if(!ol(Wt)){if(K.deleteThrottleMetadata(Qe),ct)return ir.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ct} provided in the "measurementId" field in the local Firebase config. [${null==Wt?void 0:Wt.message}]`),{appId:Qe,measurementId:ct};throw Lt}const Tt=503===Number(null===(Re=null==Wt?void 0:Wt.customData)||void 0===Re?void 0:Re.httpStatus)?(0,he.$s)(P,K.intervalMillis,30):(0,he.$s)(P,K.intervalMillis),Wn={throttleEndTimeMillis:Date.now()+Tt,backoffCount:P+1};return K.setThrottleMetadata(Qe,Wn),ir.debug(`Calling attemptFetch again in ${Tt} millis`),ys(T,Wn,U,K)}})).apply(this,arguments)}function Ec(T,S){return new Promise((P,U)=>{const K=Math.max(S-Date.now(),0),te=setTimeout(P,K);T.addEventListener(()=>{clearTimeout(te),U(lt.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function ol(T){if(!(T instanceof he.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Yl{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function Ql(){return jn.apply(this,arguments)}function jn(){return(jn=(0,O.Z)(function*(){var T;if(!(0,he.hl)())return ir.warn(lt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(S){return ir.warn(lt.create("indexeddb-unavailable",{errorInfo:null===(T=S)||void 0===T?void 0:T.toString()}).message),!1}return!0})).apply(this,arguments)}function al(){return(al=(0,O.Z)(function*(T,S,P,U,K,te,Re){var Qe;const ct=om(T);ct.then(zn=>{P[zn.measurementId]=zn.appId,T.options.measurementId&&zn.measurementId!==T.options.measurementId&&ir.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${zn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(zn=>ir.error(zn)),S.push(ct);const Lt=Ql().then(zn=>{if(zn)return U.getId()}),[Wt,Tt]=yield Promise.all([ct,Lt]);Tn()||im(te,Wt.measurementId),K("js",new Date);const Wn=null!==(Qe=null==Re?void 0:Re.config)&&void 0!==Qe?Qe:{};return Wn.origin="firebase",Wn.update=!0,null!=Tt&&(Wn[ua]=Tt),K("config",Wt.measurementId,Wn),Wt.measurementId})).apply(this,arguments)}class jd{constructor(S){this.app=S}_delete(){return delete ci[this.app.options.appId],Promise.resolve()}}let ci={},Jl=[];const ha={};let fa,di,xo="dataLayer",bc=!1;function Qn(T,S,P){!function Cc(){const T=[];if((0,he.ru)()&&T.push("This is a browser extension environment."),(0,he.zI)()||T.push("Cookies are not available."),T.length>0){const S=T.map((U,K)=>`(${K+1}) ${U}`).join(" "),P=lt.create("invalid-analytics-context",{errorInfo:S});ir.warn(P.message)}}();const U=T.options.appId;if(!U)throw lt.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw lt.create("no-api-key");ir.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ci[U])throw lt.create("already-exists",{id:U});if(!bc){!function Zl(T){let S=[];Array.isArray(window[T])?S=window[T]:window[T]=S}(xo);const{wrappedGtag:te,gtagCore:Re}=function vc(T,S,P,U,K){let te=function(...Re){window[U].push(arguments)};return window[K]&&"function"==typeof window[K]&&(te=window[K]),window[K]=function $f(T,S,P,U){function te(){return(te=(0,O.Z)(function*(Re,Qe,ct){try{"event"===Re?yield sm(T,S,P,Qe,ct):"config"===Re?yield yc(T,S,P,U,Qe,ct):T("set",Qe)}catch(Lt){ir.error(Lt)}})).apply(this,arguments)}return function K(Re,Qe,ct){return te.apply(this,arguments)}}(te,T,S,P),{gtagCore:te,wrappedGtag:window[K]}}(ci,Jl,ha,xo,"gtag");di=te,fa=Re,bc=!0}return ci[U]=function da(T,S,P,U,K,te,Re){return al.apply(this,arguments)}(T,Jl,ha,S,fa,xo,P),new jd(T)}function ll(){return(ll=(0,O.Z)(function*(T,S,P,U,K){if(K&&K.global)T("event",P,U);else{const te=yield S;T("event",P,Object.assign(Object.assign({},U),{send_to:te}))}})).apply(this,arguments)}function Xl(){return No.apply(this,arguments)}function No(){return(No=(0,O.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch(T){return!1}})).apply(this,arguments)}const ga="@firebase/analytics";!function Gn(){(0,se._registerComponent)(new Ee.wA(la,(S,{options:P})=>Qn(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),P),"PUBLIC")),(0,se._registerComponent)(new Ee.wA("analytics-internal",function T(S){try{const P=S.getProvider(la).getImmediate();return{logEvent:(U,K,te)=>function hi(T,S,P,U){T=(0,he.m9)(T),function Ro(T,S,P,U,K){return ll.apply(this,arguments)}(di,ci[T.app.options.appId],S,P,U).catch(K=>ir.error(K))}(P,U,K,te)}}catch(P){throw lt.create("interop-component-reg-failed",{reason:P})}},"PRIVATE")),(0,se.registerVersion)(ga,"0.7.11"),(0,se.registerVersion)(ga,"0.7.11","esm2017")}();var Mo=F(4408),ev=F(7565);const Fi=new class Gd extends ev.v{}(class ma extends Mo.o{constructor(S,P){super(S,P),this.scheduler=S,this.work=P}schedule(S,P=0){return P>0?super.schedule(S,P):(this.delay=P,this.state=S,this.scheduler.flush(this),this)}execute(S,P){return P>0||this.closed?super.execute(S,P):this._execute(S,P)}requestAsyncId(S,P,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(S,P,U):S.flush(this)}});var qd=F(4986),_a=F(8505),Po=F(5363),eu=F(9468);const Wd=new h.GfV("7.4.1"),Ic="__angularfire_symbol__analyticsIsSupportedValue",zd="__angularfire_symbol__analyticsIsSupported",ul="__angularfire_symbol__remoteConfigIsSupportedValue",cl="__angularfire_symbol__remoteConfigIsSupported",It="__angularfire_symbol__messagingIsSupportedValue",dl="__angularfire_symbol__messagingIsSupported";function Wf(T,S,P){if(S){if(1===S.length)return S[0];const te=S.filter(Re=>Re.app===P);if(1===te.length)return te[0]}return P.container.getProvider(T).getImmediate({optional:!0})}globalThis[zd]||(globalThis[zd]=Xl().then(T=>globalThis[Ic]=T).catch(()=>globalThis[Ic]=!1)),globalThis[dl]||(globalThis[dl]=Nr().then(T=>globalThis[It]=T).catch(()=>globalThis[It]=!1)),globalThis[cl]||(globalThis[cl]=Xg().then(T=>globalThis[ul]=T).catch(()=>globalThis[ul]=!1));const zf=(T,S)=>{const P=S?[S]:(0,$.C6)(),U=[];return P.forEach(K=>{K.container.getProvider(T).instances.forEach(Re=>{U.includes(Re)||U.push(Re)})}),U};function jr(){}class Dc{constructor(S,P=Fi){this.zone=S,this.delegate=P}now(){return this.delegate.now()}schedule(S,P,U){const K=this.zone;return this.delegate.schedule(function(Re){K.runGuarded(()=>{S.apply(this,[Re])})},P,U)}}class Sc{constructor(S){this.zone=S,this.task=null}call(S,P){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",jr,{},jr,jr)),P.pipe((0,_a.b)({next:U,complete:U,error:U})).subscribe(S).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let tu=(()=>{class T{constructor(P){this.ngZone=P,this.outsideAngular=P.runOutsideAngular(()=>new Dc(Zone.current)),this.insideAngular=P.run(()=>new Dc(Zone.current,qd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(P){return new(P||T)(h.LFG(h.R0b))},T.\u0275prov=h.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function ns(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Ac(T){return T.pipe((0,Po.Q)(ns().outsideAngular))}function xc(T){return ns(),function nu(T){return function(P){return(P=P.lift(new Sc(T.ngZone))).pipe((0,eu.R)(T.outsideAngular),(0,Po.Q)(T.insideAngular))}}(ns())(T)}},1529:(it,Ie,F)=>{F.d(Ie,{$:()=>Gl,A:()=>xt,B:()=>gr,G:()=>Ff,H:()=>Wa,J:()=>rr,L:()=>qi,M:()=>Oi,N:()=>Vs,P:()=>P,Q:()=>Ti,R:()=>Sc,T:()=>wr,U:()=>Ls,V:()=>_s,W:()=>Ya,X:()=>Bl,Y:()=>So,Z:()=>Rr,_:()=>lc,a:()=>co,a0:()=>cc,a1:()=>Ld,a2:()=>ql,a3:()=>Wl,a4:()=>hc,a5:()=>nm,a6:()=>Nr,a7:()=>Mr,a8:()=>fc,a9:()=>pc,aA:()=>Yf,aB:()=>lu,aC:()=>tv,aD:()=>Zd,aE:()=>Bn,aI:()=>Ro,aL:()=>oo,aa:()=>Xy,ab:()=>la,ac:()=>Ud,af:()=>ir,ag:()=>im,ah:()=>Zl,ak:()=>Xt,al:()=>$s,an:()=>ol,ao:()=>jd,ap:()=>xr,aq:()=>gt,ar:()=>Os,as:()=>io,at:()=>bn,au:()=>ym,av:()=>cu,aw:()=>En,ax:()=>Le,ay:()=>on,az:()=>yn,b:()=>di,c:()=>Tt,d:()=>is,e:()=>zn,f:()=>Z0,g:()=>qs,h:()=>Kf,i:()=>Gd,j:()=>K0,k:()=>wm,l:()=>Ac,m:()=>ih,o:()=>Gt,r:()=>xc,s:()=>$r,u:()=>T});var h=F(5861),$=F(2090),O=F(9681);function fe(v,p){var _={};for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&p.indexOf(E)<0&&(_[E]=v[E]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var x=0;for(E=Object.getOwnPropertySymbols(v);x<E.length;x++)p.indexOf(E[x])<0&&Object.prototype.propertyIsEnumerable.call(v,E[x])&&(_[E[x]]=v[E[x]])}return _}var Pe=F(1877),ue=F(4859);const Gt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},xt={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const gr=function ar(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},_n=function cn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},lr=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Un=new Pe.Yd("@firebase/auth");function bi(v,...p){Un.logLevel<=Pe.in.ERROR&&Un.error(`Auth (${O.SDK_VERSION}): ${v}`,...p)}function bn(v,...p){throw Ci(v,...p)}function En(v,...p){return Ci(v,...p)}function Ps(v,p,_){const E=Object.assign(Object.assign({},_n()),{[p]:_});return new $.LL("auth","Firebase",E).create(p,{appName:v.name})}function Vr(v,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&bn(v,"argument-error"),Ps(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ci(v,...p){if("string"!=typeof v){const _=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(_,...E)}return lr.create(v,...p)}function Le(v,p,..._){if(!v)throw Ci(p,..._)}function ur(v){const p="INTERNAL ASSERTION FAILED: "+v;throw bi(p),new Error(p)}function gt(v,p){v||ur(p)}const Yr=new Map;function on(v){gt(v instanceof Function,"Expected a class definition");let p=Yr.get(v);return p?(gt(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,Yr.set(v,p),p)}function mr(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Ar(){return"http:"===An()||"https:"===An()}function An(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class zt{constructor(p,_){this.shortDelay=p,this.longDelay=_,gt(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function Ur(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ar()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mt(v,p){gt(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class _t{static initialize(p,_,E){this.fetchImpl=p,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ps={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Mi=new zt(3e4,6e4);function Et(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function Cn(v,p,_,E){return _r.apply(this,arguments)}function _r(){return(_r=(0,h.Z)(function*(v,p,_,E,x={}){return In(v,x,(0,h.Z)(function*(){let M={},Q={};E&&("GET"===p?Q=E:M={body:JSON.stringify(E)});const me=(0,$.xO)(Object.assign({key:v.config.apiKey},Q)).slice(1),Ze=yield v._getAdditionalHeaders();return Ze["Content-Type"]="application/json",v.languageCode&&(Ze["X-Firebase-Locale"]=v.languageCode),_t.fetch()(X(v,v.config.apiHost,_,me),Object.assign({method:p,headers:Ze,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function In(v,p,_){return yt.apply(this,arguments)}function yt(){return(yt=(0,h.Z)(function*(v,p,_){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},ps),p);try{const x=new ee(v),M=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const Q=yield M.json();if("needConfirmation"in Q)throw B(v,"account-exists-with-different-credential",Q);if(M.ok&&!("errorMessage"in Q))return Q;{const me=M.ok?Q.errorMessage:Q.error.message,[Ze,Ve]=me.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ze)throw B(v,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Ze)throw B(v,"email-already-in-use",Q);if("USER_DISABLED"===Ze)throw B(v,"user-disabled",Q);const ot=E[Ze]||Ze.toLowerCase().replace(/[_\s]+/g,"-");if(Ve)throw Ps(v,ot,Ve);bn(v,ot)}}catch(x){if(x instanceof $.ZR)throw x;bn(v,"network-request-failed")}})).apply(this,arguments)}function Y(v,p,_,E){return H.apply(this,arguments)}function H(){return(H=(0,h.Z)(function*(v,p,_,E,x={}){const M=yield Cn(v,p,_,E,x);return"mfaPendingCredential"in M&&bn(v,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function X(v,p,_,E){const x=`${p}${_}?${E}`;return v.config.emulator?mt(v.config,x):`${v.config.apiScheme}://${x}`}class ee{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(En(this.auth,"network-request-failed")),Mi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function B(v,p,_){const E={appName:v.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const x=En(v,p,E);return x.customData._tokenResponse=_,x}function qe(){return(qe=(0,h.Z)(function*(v,p){return Cn(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function ht(v,p){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,h.Z)(function*(v,p){return Cn(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ln(v,p){return xn.apply(this,arguments)}function xn(){return(xn=(0,h.Z)(function*(v,p){return Cn(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Yt(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Z(){return(Z=(0,h.Z)(function*(v,p=!1){const _=(0,$.m9)(v),E=yield _.getIdToken(p),x=Ke(E);Le(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const M="object"==typeof x.firebase?x.firebase:void 0,Q=null==M?void 0:M.sign_in_provider;return{claims:x,token:E,authTime:Yt(Se(x.auth_time)),issuedAtTime:Yt(Se(x.iat)),expirationTime:Yt(Se(x.exp)),signInProvider:Q||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function Se(v){return 1e3*Number(v)}function Ke(v){var p;const[_,E,x]=v.split(".");if(void 0===_||void 0===E||void 0===x)return bi("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,$.tV)(E);return M?JSON.parse(M):(bi("Failed to decode base64 JWT payload"),null)}catch(M){return bi("Caught error parsing JWT payload as JSON",null===(p=M)||void 0===p?void 0:p.toString()),null}}function bt(v,p){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,h.Z)(function*(v,p,_=!1){if(_)return p;try{return yield p}catch(E){throw E instanceof $.ZR&&nn(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}function nn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class er{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,h.Z)(function*(){yield _.iteration()}),E)}iteration(){var p=this;return(0,h.Z)(function*(){var _;try{yield p.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(_=E)||void 0===_?void 0:_.code)&&p.schedule(!0))}p.schedule()})()}}class li{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yt(this.lastLoginAt),this.creationTime=Yt(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Bt(v){return Br.apply(this,arguments)}function Br(){return(Br=(0,h.Z)(function*(v){var p;const _=v.auth,E=yield v.getIdToken(),x=yield bt(v,ln(_,{idToken:E}));Le(null==x?void 0:x.users.length,_,"internal-error");const M=x.users[0];v._notifyReloadListener(M);const Q=(null===(p=M.providerUserInfo)||void 0===p?void 0:p.length)?Ii(M.providerUserInfo):[],me=Ga(v.providerData,Q),ot=!!v.isAnonymous&&!(v.email&&M.passwordHash||(null==me?void 0:me.length)),tn={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:me,metadata:new li(M.createdAt,M.lastLoginAt),isAnonymous:ot};Object.assign(v,tn)})).apply(this,arguments)}function yr(){return(yr=(0,h.Z)(function*(v){const p=(0,$.m9)(v);yield Bt(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Ga(v,p){return[...v.filter(E=>!p.some(x=>x.providerId===E.providerId)),...p]}function Ii(v){return v.map(p=>{var{providerId:_}=p,E=fe(p,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function qt(){return(qt=(0,h.Z)(function*(v,p){const _=yield In(v,{},(0,h.Z)(function*(){const E=(0,$.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:x,apiKey:M}=v.config,Q=X(v,x,"/v1/token",`key=${M}`),me=yield v._getAdditionalHeaders();return me["Content-Type"]="application/x-www-form-urlencoded",_t.fetch()(Q,{method:"POST",headers:me,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class hn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){Le(p.idToken,"internal-error"),Le(void 0!==p.idToken,"internal-error"),Le(void 0!==p.refreshToken,"internal-error");const _="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function vt(v){const p=Ke(v);return Le(p,"internal-error"),Le(void 0!==p.exp,"internal-error"),Le(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var E=this;return(0,h.Z)(function*(){return Le(!E.accessToken||E.refreshToken,p,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var E=this;return(0,h.Z)(function*(){const{accessToken:x,refreshToken:M,expiresIn:Q}=yield function rt(v,p){return qt.apply(this,arguments)}(p,_);E.updateTokensAndExpiration(x,M,Number(Q))})()}updateTokensAndExpiration(p,_,E){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,_){const{refreshToken:E,accessToken:x,expirationTime:M}=_,Q=new hn;return E&&(Le("string"==typeof E,"internal-error",{appName:p}),Q.refreshToken=E),x&&(Le("string"==typeof x,"internal-error",{appName:p}),Q.accessToken=x),M&&(Le("number"==typeof M,"internal-error",{appName:p}),Q.expirationTime=M),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new hn,this.toJSON())}_performRefresh(){return ur("not implemented")}}function tr(v,p){Le("string"==typeof v||void 0===v,"internal-error",{appName:p})}class Qr{constructor(p){var{uid:_,auth:E,stsTokenManager:x}=p,M=fe(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new er(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new li(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,h.Z)(function*(){const E=yield bt(_,_.stsTokenManager.getToken(_.auth,p));return Le(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(p){return function J(v){return Z.apply(this,arguments)}(this,p)}reload(){return function gs(v){return yr.apply(this,arguments)}(this)}_assign(p){this!==p&&(Le(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Qr(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var E=this;return(0,h.Z)(function*(){let x=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),x=!0),_&&(yield Bt(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,h.Z)(function*(){const _=yield p.getIdToken();return yield bt(p,function be(v,p){return qe.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var E,x,M,Q,me,Ze,Ve,ot;const tn=null!==(E=_.displayName)&&void 0!==E?E:void 0,Dn=null!==(x=_.email)&&void 0!==x?x:void 0,Pr=null!==(M=_.phoneNumber)&&void 0!==M?M:void 0,Zn=null!==(Q=_.photoURL)&&void 0!==Q?Q:void 0,Ea=null!==(me=_.tenantId)&&void 0!==me?me:void 0,kc=null!==(Ze=_._redirectEventId)&&void 0!==Ze?Ze:void 0,Em=null!==(Ve=_.createdAt)&&void 0!==Ve?Ve:void 0,bm=null!==(ot=_.lastLoginAt)&&void 0!==ot?ot:void 0,{uid:sh,emailVerified:oh,isAnonymous:rp,providerData:ah,stsTokenManager:pu}=_;Le(sh&&pu,p,"internal-error");const dv=hn.fromJSON(this.name,pu);Le("string"==typeof sh,p,"internal-error"),tr(tn,p.name),tr(Dn,p.name),Le("boolean"==typeof oh,p,"internal-error"),Le("boolean"==typeof rp,p,"internal-error"),tr(Pr,p.name),tr(Zn,p.name),tr(Ea,p.name),tr(kc,p.name),tr(Em,p.name),tr(bm,p.name);const ip=new Qr({uid:sh,auth:p,email:Dn,emailVerified:oh,displayName:tn,isAnonymous:rp,photoURL:Zn,phoneNumber:Pr,tenantId:Ea,stsTokenManager:dv,createdAt:Em,lastLoginAt:bm});return ah&&Array.isArray(ah)&&(ip.providerData=ah.map(gu=>Object.assign({},gu))),kc&&(ip._redirectEventId=kc),ip}static _fromIdTokenResponse(p,_,E=!1){return(0,h.Z)(function*(){const x=new hn;x.updateFromServerResponse(_);const M=new Qr({uid:_.localId,auth:p,stsTokenManager:x,isAnonymous:E});return yield Bt(M),M})()}}const qi=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(_,E){var x=this;return(0,h.Z)(function*(){x.storage[_]=E})()}_get(_){var E=this;return(0,h.Z)(function*(){const x=E.storage[_];return void 0===x?null:x})()}_remove(_){var E=this;return(0,h.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return v.type="NONE",v})();function yn(v,p,_){return`firebase:${v}:${p}:${_}`}class Wi{constructor(p,_,E){this.persistence=p,this.auth=_,this.userKey=E;const{config:x,name:M}=this.auth;this.fullUserKey=yn(this.userKey,x.apiKey,M),this.fullPersistenceKey=yn("persistence",x.apiKey,M),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?Qr._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,h.Z)(function*(){if(_.persistence===p)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,E="authUser"){return(0,h.Z)(function*(){if(!_.length)return new Wi(on(qi),p,E);const x=(yield Promise.all(_.map(function(){var Ve=(0,h.Z)(function*(ot){if(yield ot._isAvailable())return ot});return function(ot){return Ve.apply(this,arguments)}}()))).filter(Ve=>Ve);let M=x[0]||on(qi);const Q=yn(E,p.config.apiKey,p.name);let me=null;for(const Ve of _)try{const ot=yield Ve._get(Q);if(ot){const tn=Qr._fromJSON(p,ot);Ve!==M&&(me=tn),M=Ve;break}}catch(ot){}const Ze=x.filter(Ve=>Ve._shouldAllowMigration);return M._shouldAllowMigration&&Ze.length?(M=Ze[0],me&&(yield M._set(Q,me.toJSON())),yield Promise.all(_.map(function(){var Ve=(0,h.Z)(function*(ot){if(ot!==M)try{yield ot._remove(Q)}catch(tn){}});return function(ot){return Ve.apply(this,arguments)}}())),new Wi(M,p,E)):new Wi(M,p,E)})()}}function nr(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(qa(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if($t(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(cr(p))return"Blackberry";if(Xo(p))return"Webos";if(Jo(p))return"Safari";if((p.includes("chrome/")||Io(p))&&!p.includes("edge/"))return"Chrome";if(io(p))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function $t(v=(0,$.z$)()){return/firefox\//i.test(v)}function Jo(v=(0,$.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Io(v=(0,$.z$)()){return/crios\//i.test(v)}function qa(v=(0,$.z$)()){return/iemobile/i.test(v)}function io(v=(0,$.z$)()){return/android/i.test(v)}function cr(v=(0,$.z$)()){return/blackberry/i.test(v)}function Xo(v=(0,$.z$)()){return/webos/i.test(v)}function Os(v=(0,$.z$)()){return/iphone|ipad|ipod/i.test(v)}function xr(v=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function ea(v=(0,$.z$)()){return Os(v)||io(v)||Xo(v)||cr(v)||/windows phone/i.test(v)||qa(v)}function Zi(v,p=[]){let _;switch(v){case"Browser":_=nr((0,$.z$)());break;case"Worker":_=`${nr((0,$.z$)())}-${v}`;break;default:_=v}const E=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${O.SDK_VERSION}/${E}`}class Ad{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const E=M=>new Promise((Q,me)=>{try{Q(p(M))}catch(Ze){me(Ze)}});E.onAbort=_,this.queue.push(E);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,h.Z)(function*(){var E;if(_.auth.currentUser===p)return;const x=[];try{for(const M of _.queue)yield M(p),M.onAbort&&x.push(M.onAbort)}catch(M){x.reverse();for(const Q of x)try{Q()}catch(me){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=M)||void 0===E?void 0:E.message})}})()}}class xd{constructor(p,_,E){this.app=p,this.heartbeatServiceProvider=_,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ki(this),this.idTokenSubscription=new Ki(this),this.beforeStateQueue=new Ad(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(p,_){var E=this;return _&&(this._popupRedirectResolver=on(_)),this._initializationPromise=this.queue((0,h.Z)(function*(){var x,M;if(!E._deleted&&(E.persistenceManager=yield Wi.create(E,p),!E._deleted)){if(null===(x=E._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(Q){}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(M=E.currentUser)||void 0===M?void 0:M.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,h.Z)(function*(){var E;const x=yield _.assertedPersistence.getCurrentUser();let M=x,Q=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const me=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,Ze=null==M?void 0:M._redirectEventId,Ve=yield _.tryRedirectSignIn(p);(!me||me===Ze)&&(null==Ve?void 0:Ve.user)&&(M=Ve.user,Q=!0)}if(!M)return _.directlySetCurrentUser(null);if(!M._redirectEventId){if(Q)try{yield _.beforeStateQueue.runMiddleware(M)}catch(me){M=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(me))}return M?_.reloadAndSetCurrentUserOrClear(M):_.directlySetCurrentUser(null)}return Le(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===M._redirectEventId?_.directlySetCurrentUser(M):_.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(p){var _=this;return(0,h.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch(x){yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,h.Z)(function*(){var E;try{yield Bt(p)}catch(x){if("auth/network-request-failed"!==(null===(E=x)||void 0===E?void 0:E.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Co(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,h.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,h.Z)(function*(){const E=p?(0,$.m9)(p):null;return E&&Le(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(p,_=!1){var E=this;return(0,h.Z)(function*(){if(!E._deleted)return p&&Le(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),_||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,h.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,h.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,h.Z)(function*(){yield _.assertedPersistence.setPersistence(on(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new $.LL("auth","Firebase",p())}onAuthStateChanged(p,_,E){return this.registerStateListener(this.authStateSubscription,p,_,E)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,E){return this.registerStateListener(this.idTokenSubscription,p,_,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var E=this;return(0,h.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(_);return null===p?x.removeCurrentUser():x.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,h.Z)(function*(){if(!_.redirectPersistenceManager){const E=p&&on(p)||_._popupRedirectResolver;Le(E,_,"argument-error"),_.redirectPersistenceManager=yield Wi.create(_,[on(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,h.Z)(function*(){var E,x;return _._isInitialized&&(yield _.queue((0,h.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===p?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,h.Z)(function*(){if(p===_.currentUser)return _.queue((0,h.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,E,x){if(this._deleted)return()=>{};const M="function"==typeof _?_:_.next.bind(_),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return Le(Q,this,"internal-error"),Q.then(()=>M(this.currentUser)),"function"==typeof _?p.addObserver(_,E,x):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,h.Z)(function*(){_.currentUser&&_.currentUser!==p&&(_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh()),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Zi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.Z)(function*(){var _;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const x=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(E["X-Firebase-Client"]=x),E})()}}function Bn(v){return(0,$.m9)(v)}class Ki{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ff(v,p,_){const E=Bn(v);Le(E._canInitEmulator,E,"emulator-config-failed"),Le(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const x=!!(null==_?void 0:_.disableWarnings),M=Lf(p),{host:Q,port:me}=function Kg(v){const p=Lf(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const M=x[1];return{host:M,port:Pi(E.substr(M.length+1))}}{const[M,Q]=E.split(":");return{host:M,port:Pi(Q)}}}(p);E.config.emulator={url:`${M}//${Q}${null===me?"":`:${me}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Q,port:me,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Yg(){function v(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Lf(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Pi(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class Wa{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return ur("not implemented")}_getIdTokenResponse(p){return ur("not implemented")}_linkToIdToken(p,_){return ur("not implemented")}_getReauthenticationResolver(p){return ur("not implemented")}}function Vf(v,p){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,h.Z)(function*(v,p){return Cn(v,"POST","/v1/accounts:resetPassword",Et(v,p))})).apply(this,arguments)}function Uf(v,p){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,h.Z)(function*(v,p){return Cn(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Xu(v,p){return so.apply(this,arguments)}function so(){return(so=(0,h.Z)(function*(v,p){return Cn(v,"POST","/v1/accounts:update",Et(v,p))})).apply(this,arguments)}function Md(){return(Md=(0,h.Z)(function*(v,p){return Y(v,"POST","/v1/accounts:signInWithPassword",Et(v,p))})).apply(this,arguments)}function ec(v,p){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,h.Z)(function*(v,p){return Cn(v,"POST","/v1/accounts:sendOobCode",Et(v,p))})).apply(this,arguments)}function Jg(v,p){return Od.apply(this,arguments)}function Od(){return(Od=(0,h.Z)(function*(v,p){return ec(v,p)})).apply(this,arguments)}function Bf(v,p){return To.apply(this,arguments)}function To(){return(To=(0,h.Z)(function*(v,p){return ec(v,p)})).apply(this,arguments)}function Xg(v,p){return za.apply(this,arguments)}function za(){return(za=(0,h.Z)(function*(v,p){return ec(v,p)})).apply(this,arguments)}function em(v,p){return ks.apply(this,arguments)}function ks(){return(ks=(0,h.Z)(function*(v,p){return ec(v,p)})).apply(this,arguments)}function Do(){return(Do=(0,h.Z)(function*(v,p){return Y(v,"POST","/v1/accounts:signInWithEmailLink",Et(v,p))})).apply(this,arguments)}function nc(){return(nc=(0,h.Z)(function*(v,p){return Y(v,"POST","/v1/accounts:signInWithEmailLink",Et(v,p))})).apply(this,arguments)}class Fl extends Wa{constructor(p,_,E,x=null){super("password",E),this._email=p,this._password=_,this._tenantId=x}static _fromEmailAndPassword(p,_){return new Fl(p,_,"password")}static _fromEmailAndCode(p,_,E=null){return new Fl(p,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,h.Z)(function*(){switch(_.signInMethod){case"password":return function Qg(v,p){return Md.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function tc(v,p){return Do.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:bn(p,"internal-error")}})()}_linkToIdToken(p,_){var E=this;return(0,h.Z)(function*(){switch(E.signInMethod){case"password":return Uf(p,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Za(v,p){return nc.apply(this,arguments)}(p,{idToken:_,email:E._email,oobCode:E._password});default:bn(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function ms(v,p){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,h.Z)(function*(v,p){return Y(v,"POST","/v1/accounts:signInWithIdp",Et(v,p))})).apply(this,arguments)}class rr extends Wa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new rr(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):bn("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:x}=_,M=fe(_,["providerId","signInMethod"]);if(!E||!x)return null;const Q=new rr(E,x);return Q.idToken=M.idToken||void 0,Q.accessToken=M.accessToken||void 0,Q.secret=M.secret,Q.nonce=M.nonce,Q.pendingToken=M.pendingToken||null,Q}_getIdTokenResponse(p){return ms(p,this.buildRequest())}_linkToIdToken(p,_){const E=this.buildRequest();return E.idToken=_,ms(p,E)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,ms(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,$.xO)(_)}return p}}function jf(v,p){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,h.Z)(function*(v,p){return Cn(v,"POST","/v1/accounts:sendVerificationCode",Et(v,p))})).apply(this,arguments)}function Vl(){return(Vl=(0,h.Z)(function*(v,p){return Y(v,"POST","/v1/accounts:signInWithPhoneNumber",Et(v,p))})).apply(this,arguments)}function Ul(){return(Ul=(0,h.Z)(function*(v,p){const _=yield Y(v,"POST","/v1/accounts:signInWithPhoneNumber",Et(v,p));if(_.temporaryProof)throw B(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const ic={USER_NOT_FOUND:"user-not-found"};function Pn(){return(Pn=(0,h.Z)(function*(v,p){return Y(v,"POST","/v1/accounts:signInWithPhoneNumber",Et(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),ic)})).apply(this,arguments)}class ui extends Wa{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new ui({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new ui({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function rc(v,p){return Vl.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function kd(v,p){return Ul.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function tm(v,p){return Pn.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:E,verificationCode:x}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:E,code:x}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:E,phoneNumber:x,temporaryProof:M}=p;return E||_||x||M?new ui({verificationId:_,verificationCode:E,phoneNumber:x,temporaryProof:M}):null}}class na{constructor(p){var _,E,x,M,Q,me;const Ze=(0,$.zd)((0,$.pd)(p)),Ve=null!==(_=Ze.apiKey)&&void 0!==_?_:null,ot=null!==(E=Ze.oobCode)&&void 0!==E?E:null,tn=function Fd(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=Ze.mode)&&void 0!==x?x:null);Le(Ve&&ot&&tn,"argument-error"),this.apiKey=Ve,this.operation=tn,this.code=ot,this.continueUrl=null!==(M=Ze.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(Q=Ze.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(me=Ze.tenantId)&&void 0!==me?me:null}static parseLink(p){const _=function $n(v){const p=(0,$.zd)((0,$.pd)(v)).link,_=p?(0,$.zd)((0,$.pd)(p)).deep_link_id:null,E=(0,$.zd)((0,$.pd)(v)).deep_link_id;return(E?(0,$.zd)((0,$.pd)(E)).link:null)||E||_||p||v}(p);try{return new na(_)}catch(E){return null}}}let Oi=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,E){return Fl._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const x=na.parseLink(E);return Le(x,"argument-error"),Fl._fromEmailAndCode(_,x.code,x.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Hn{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Fs extends Hn{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Ls extends Fs{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return Le("providerId"in _&&"signInMethod"in _,"argument-error"),rr._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return Le(p.idToken||p.accessToken,"argument-error"),rr._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Ls.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Ls.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:M,nonce:Q,providerId:me}=p;if(!E&&!x&&!_&&!M||!me)return null;try{return new Ls(me)._credential({idToken:_,accessToken:E,nonce:Q,pendingToken:M})}catch(Ze){return null}}}let Vs=(()=>{class v extends Fs{constructor(){super("facebook.com")}static credential(_){return rr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(E){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Ti=(()=>{class v extends Fs{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return rr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:x}=_;if(!E&&!x)return null;try{return v.credential(E,x)}catch(M){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),wr=(()=>{class v extends Fs{constructor(){super("github.com")}static credential(_){return rr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(E){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class oo extends Wa{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return ms(p,this.buildRequest())}_linkToIdToken(p,_){const E=this.buildRequest();return E.idToken=_,ms(p,E)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,ms(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:x,pendingToken:M}=_;return E&&x&&M&&E===x?new oo(E,M):null}static _create(p,_){return new oo(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class _s extends Hn{constructor(p){Le(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return _s.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return _s.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=oo.fromJSON(p);return Le(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:E}=p;if(!_||!E)return null;try{return oo._create(E,_)}catch(x){return null}}}let Ya=(()=>{class v extends Fs{constructor(){super("twitter.com")}static credential(_,E){return rr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=_;if(!E||!x)return null;try{return v.credential(E,x)}catch(M){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function At(v,p){return ao.apply(this,arguments)}function ao(){return(ao=(0,h.Z)(function*(v,p){return Y(v,"POST","/v1/accounts:signUp",Et(v,p))})).apply(this,arguments)}class Xr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,E,x=!1){return(0,h.Z)(function*(){const M=yield Qr._fromIdTokenResponse(p,E,x),Q=ra(E);return new Xr({user:M,providerId:Q,_tokenResponse:E,operationType:_})})()}static _forOperation(p,_,E){return(0,h.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const x=ra(E);return new Xr({user:p,providerId:x,_tokenResponse:E,operationType:_})})()}}function ra(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Bl(v){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,h.Z)(function*(v){var p;const _=Bn(v);if(yield _._initializationPromise,null===(p=_.currentUser)||void 0===p?void 0:p.isAnonymous)return new Xr({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield At(_,{returnSecureToken:!0}),x=yield Xr._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Ja extends $.ZR{constructor(p,_,E,x){var M;super(_.code,_.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,Ja.prototype),this.customData={appName:p.name,tenantId:null!==(M=p.tenantId)&&void 0!==M?M:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,_,E,x){return new Ja(p,_,E,x)}}function jl(v,p,_,E){return("reauthenticate"===p?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?Ja._fromErrorAndOperation(v,M,p,E):M})}function Me(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function Xt(v,p){return $l.apply(this,arguments)}function $l(){return($l=(0,h.Z)(function*(v,p){const _=(0,$.m9)(v);yield Us(!0,_,p);const{providerUserInfo:E}=yield ht(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),x=Me(E||[]);return _.providerData=_.providerData.filter(M=>x.has(M.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Nn(v,p){return ia.apply(this,arguments)}function ia(){return(ia=(0,h.Z)(function*(v,p,_=!1){const E=yield bt(v,p._linkToIdToken(v.auth,yield v.getIdToken()),_);return Xr._forOperation(v,"link",E)})).apply(this,arguments)}function Us(v,p,_){return ei.apply(this,arguments)}function ei(){return(ei=(0,h.Z)(function*(v,p,_){yield Bt(p);const x=!1===v?"provider-already-linked":"no-such-provider";Le(Me(p.providerData).has(_)===v,p.auth,x)})).apply(this,arguments)}function lo(v,p){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,h.Z)(function*(v,p,_=!1){var E;const{auth:x}=v,M="reauthenticate";try{const Q=yield bt(v,jl(x,M,p,v),_);Le(Q.idToken,x,"internal-error");const me=Ke(Q.idToken);Le(me,x,"internal-error");const{sub:Ze}=me;return Le(v.uid===Ze,x,"user-mismatch"),Xr._forOperation(v,M,Q)}catch(Q){throw"auth/user-not-found"===(null===(E=Q)||void 0===E?void 0:E.code)&&bn(x,"user-mismatch"),Q}})).apply(this,arguments)}function oc(v,p){return ac.apply(this,arguments)}function ac(){return(ac=(0,h.Z)(function*(v,p,_=!1){const E="signIn",x=yield jl(v,E,p),M=yield Xr._fromIdTokenResponse(v,E,x);return _||(yield v._updateCurrentUser(M.user)),M})).apply(this,arguments)}function So(v,p){return sa.apply(this,arguments)}function sa(){return(sa=(0,h.Z)(function*(v,p){return oc(Bn(v),p)})).apply(this,arguments)}function Rr(v,p){return ki.apply(this,arguments)}function ki(){return(ki=(0,h.Z)(function*(v,p){const _=(0,$.m9)(v);return yield Us(!1,_,p.providerId),Nn(_,p)})).apply(this,arguments)}function lc(v,p){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,h.Z)(function*(v,p){return lo((0,$.m9)(v),p)})).apply(this,arguments)}function Bs(v,p){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,h.Z)(function*(v,p){return Y(v,"POST","/v1/accounts:signInWithCustomToken",Et(v,p))})).apply(this,arguments)}function Gl(v,p){return uc.apply(this,arguments)}function uc(){return(uc=(0,h.Z)(function*(v,p){const _=Bn(v),E=yield Bs(_,{token:p,returnSecureToken:!0}),x=yield Xr._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class oa{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?el._fromServerResponse(p,_):bn(p,"internal-error")}}class el extends oa{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new el(_)}}function uo(v,p,_){var E;Le((null===(E=_.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),Le(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Le(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(Le(_.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function cc(v,p,_){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,h.Z)(function*(v,p,_){const E=(0,$.m9)(v),x={requestType:"PASSWORD_RESET",email:p};_&&uo(E,x,_),yield Bf(E,x)})).apply(this,arguments)}function Ld(v,p,_){return tl.apply(this,arguments)}function tl(){return(tl=(0,h.Z)(function*(v,p,_){yield Vf((0,$.m9)(v),{oobCode:p,newPassword:_})})).apply(this,arguments)}function ql(v,p){return dc.apply(this,arguments)}function dc(){return(dc=(0,h.Z)(function*(v,p){yield Xu((0,$.m9)(v),{oobCode:p})})).apply(this,arguments)}function Wl(v,p){return nl.apply(this,arguments)}function nl(){return(nl=(0,h.Z)(function*(v,p){const _=(0,$.m9)(v),E=yield Vf(_,{oobCode:p}),x=E.requestType;switch(Le(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Le(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Le(E.mfaInfo,_,"internal-error");default:Le(E.email,_,"internal-error")}let M=null;return E.mfaInfo&&(M=oa._fromServerResponse(Bn(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:M},operation:x}})).apply(this,arguments)}function hc(v,p){return aa.apply(this,arguments)}function aa(){return(aa=(0,h.Z)(function*(v,p){const{data:_}=yield Wl((0,$.m9)(v),p);return _.email})).apply(this,arguments)}function nm(v,p,_){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,h.Z)(function*(v,p,_){const E=Bn(v),x=yield At(E,{returnSecureToken:!0,email:p,password:_}),M=yield Xr._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(M.user),M})).apply(this,arguments)}function Nr(v,p,_){return So((0,$.m9)(v),Oi.credential(p,_))}function Mr(v,p,_){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,h.Z)(function*(v,p,_){const E=(0,$.m9)(v),x={requestType:"EMAIL_SIGNIN",email:p};Le(_.handleCodeInApp,E,"argument-error"),_&&uo(E,x,_),yield Xg(E,x)})).apply(this,arguments)}function fc(v,p){const _=na.parseLink(p);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function pc(v,p,_){return gc.apply(this,arguments)}function gc(){return(gc=(0,h.Z)(function*(v,p,_){const E=(0,$.m9)(v),x=Oi.credentialWithLink(p,_||mr());return Le(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),So(E,x)})).apply(this,arguments)}function Jy(v,p){return zl.apply(this,arguments)}function zl(){return(zl=(0,h.Z)(function*(v,p){return Cn(v,"POST","/v1/accounts:createAuthUri",Et(v,p))})).apply(this,arguments)}function Xy(v,p){return rl.apply(this,arguments)}function rl(){return(rl=(0,h.Z)(function*(v,p){const E={identifier:p,continueUri:Ar()?mr():"http://localhost"},{signinMethods:x}=yield Jy((0,$.m9)(v),E);return x||[]})).apply(this,arguments)}function la(v,p){return ua.apply(this,arguments)}function ua(){return(ua=(0,h.Z)(function*(v,p){const _=(0,$.m9)(v),x={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&uo(_.auth,x,p);const{email:M}=yield Jg(_.auth,x);M!==v.email&&(yield v.reload())})).apply(this,arguments)}function Ud(v,p,_){return mc.apply(this,arguments)}function mc(){return(mc=(0,h.Z)(function*(v,p,_){const E=(0,$.m9)(v),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};_&&uo(E.auth,M,_);const{email:Q}=yield em(E.auth,M);Q!==v.email&&(yield v.reload())})).apply(this,arguments)}function rm(v,p){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,h.Z)(function*(v,p){return Cn(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ir(v,p){return _c.apply(this,arguments)}function _c(){return(_c=(0,h.Z)(function*(v,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const E=(0,$.m9)(v),M={idToken:yield E.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},Q=yield bt(E,rm(E.auth,M));E.displayName=Q.displayName||null,E.photoURL=Q.photoUrl||null;const me=E.providerData.find(({providerId:Ze})=>"password"===Ze);me&&(me.displayName=E.displayName,me.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Q)})).apply(this,arguments)}function im(v,p){return yc((0,$.m9)(v),p,null)}function Zl(v,p){return yc((0,$.m9)(v),null,p)}function yc(v,p,_){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,h.Z)(function*(v,p,_){const{auth:E}=v,M={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(M.email=p),_&&(M.password=_);const Q=yield bt(v,Uf(E,M));yield v._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class ca{constructor(p,_,E={}){this.isNewUser=p,this.providerId=_,this.profile=E}}class $f extends ca{constructor(p,_,E,x){super(p,_,E),this.username=x}}class vc extends ca{constructor(p,_){super(p,"facebook.com",_)}}class Tn extends $f{constructor(p,_){super(p,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class js extends ca{constructor(p,_){super(p,"google.com",_)}}class lt extends $f{constructor(p,_,E){super(p,"twitter.com",_,E)}}function $s(v){const{user:p,_tokenResponse:_}=v;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function sm(v){var p,_;if(!v)return null;const{providerId:E}=v,x=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},M=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&(null==v?void 0:v.idToken)){const Q=null===(_=null===(p=Ke(v.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(Q)return new ca(M,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!E)return null;switch(E){case"facebook.com":return new vc(M,x);case"github.com":return new Tn(M,x);case"google.com":return new js(M,x);case"twitter.com":return new lt(M,x,v.screenName||null);case"custom":case"anonymous":return new ca(M,null);default:return new ca(M,E,x)}}(_)}class Ct{constructor(p,_){this.type=p,this.credential=_}static _fromIdtoken(p){return new Ct("enroll",p)}static _fromMfaPendingCredential(p){return new Ct("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,E;if(null==p?void 0:p.multiFactorSession){if(null===(_=p.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Ct._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(E=p.multiFactorSession)||void 0===E?void 0:E.idToken)return Ct._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Ec{constructor(p,_,E){this.session=p,this.hints=_,this.signInResolver=E}static _fromError(p,_){const E=Bn(p),x=_.customData._serverResponse,M=(x.mfaInfo||[]).map(me=>oa._fromServerResponse(E,me));Le(x.mfaPendingCredential,E,"internal-error");const Q=Ct._fromMfaPendingCredential(x.mfaPendingCredential);return new Ec(Q,M,function(){var me=(0,h.Z)(function*(Ze){const Ve=yield Ze._process(E,Q);delete x.mfaInfo,delete x.mfaPendingCredential;const ot=Object.assign(Object.assign({},x),{idToken:Ve.idToken,refreshToken:Ve.refreshToken});switch(_.operationType){case"signIn":const tn=yield Xr._fromIdTokenResponse(E,_.operationType,ot);return yield E._updateCurrentUser(tn.user),tn;case"reauthenticate":return Le(_.user,E,"internal-error"),Xr._forOperation(_.user,_.operationType,ot);default:bn(E,"internal-error")}});return function(Ze){return me.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,h.Z)(function*(){return _.signInResolver(p)})()}}function ol(v,p){var _;const E=(0,$.m9)(v),x=p;return Le(p.customData.operationType,E,"argument-error"),Le(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),Ec._fromError(E,x)}function Yl(v,p){return Cn(v,"POST","/v2/accounts/mfaEnrollment:start",Et(v,p))}class da{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>oa._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new da(p)}getSession(){var p=this;return(0,h.Z)(function*(){return Ct._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,_){var E=this;return(0,h.Z)(function*(){const x=p,M=yield E.getSession(),Q=yield bt(E.user,x._process(E.user.auth,M,_));return yield E.user._updateTokensIfNecessary(Q),E.user.reload()})()}unenroll(p){var _=this;return(0,h.Z)(function*(){var E;const x="string"==typeof p?p:p.uid,M=yield _.user.getIdToken(),Q=yield bt(_.user,function jn(v,p){return Cn(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Et(v,p))}(_.user.auth,{idToken:M,mfaEnrollmentId:x}));_.enrolledFactors=_.enrolledFactors.filter(({uid:me})=>me!==x),yield _.user._updateTokensIfNecessary(Q);try{yield _.user.reload()}catch(me){if("auth/user-token-expired"!==(null===(E=me)||void 0===E?void 0:E.code))throw me}})()}}const al=new WeakMap;function jd(v){const p=(0,$.m9)(v);return al.has(p)||al.set(p,da._fromUser(p)),al.get(p)}const ci="__sak";class Jl{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(ci,"1"),this.storage.removeItem(ci),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const di=(()=>{class v extends Jl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ha(){const v=(0,$.z$)();return Jo(v)||Os(v)}()&&function zi(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=ea(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),M=this.localCache[E];x!==M&&_(E,M,x)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((me,Ze,Ve)=>{this.notifyListeners(me,Ve)});const x=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const me=this.storage.getItem(x);if(_.newValue!==me)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!E)return}const M=()=>{const me=this.storage.getItem(x);!E&&this.localCache[x]===me||this.notifyListeners(x,me)},Q=this.storage.getItem(x);!function Sd(){return(0,$.w1)()&&10===document.documentMode}()||Q===_.newValue||_.newValue===_.oldValue?M():setTimeout(M,10)}notifyListeners(_,E){this.localCache[_]=E;const x=this.listeners[_];if(x)for(const M of Array.from(x))M(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var x=()=>super._set,M=this;return(0,h.Z)(function*(){yield x().call(M,_,E),M.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,x=this;return(0,h.Z)(function*(){const M=yield E().call(x,_);return x.localCache[_]=JSON.stringify(M),M})()}_remove(_){var E=()=>super._remove,x=this;return(0,h.Z)(function*(){yield E().call(x,_),delete x.localCache[_]})()}}return v.type="LOCAL",v})(),co=(()=>{class v extends Jl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return v.type="SESSION",v})();let Qn=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(M=>M.isListeningto(_));if(E)return E;const x=new v(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,h.Z)(function*(){const x=_,{eventId:M,eventType:Q,data:me}=x.data,Ze=E.handlersMap[Q];if(!(null==Ze?void 0:Ze.size))return;x.ports[0].postMessage({status:"ack",eventId:M,eventType:Q});const Ve=Array.from(Ze).map(function(){var tn=(0,h.Z)(function*(Dn){return Dn(x.origin,me)});return function(Dn){return tn.apply(this,arguments)}}()),ot=yield function Cc(v){return Promise.all(v.map(function(){var p=(0,h.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return p.apply(this,arguments)}}()))}(Ve);x.ports[0].postMessage({status:"done",eventId:M,eventType:Q,response:ot})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ro(v="",p=10){let _="";for(let E=0;E<p;E++)_+=Math.floor(10*Math.random());return v+_}class ll{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,E=50){var x=this;return(0,h.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let Q,me;return new Promise((Ze,Ve)=>{const ot=Ro("",20);M.port1.start();const tn=setTimeout(()=>{Ve(new Error("unsupported_event"))},E);me={messageChannel:M,onMessage(Dn){const Pr=Dn;if(Pr.data.eventId===ot)switch(Pr.data.status){case"ack":clearTimeout(tn),Q=setTimeout(()=>{Ve(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Ze(Pr.data.response);break;default:clearTimeout(tn),clearTimeout(Q),Ve(new Error("invalid_response"))}}},x.handlers.add(me),M.port1.addEventListener("message",me.onMessage),x.target.postMessage({eventType:p,eventId:ot,data:_},[M.port2])}).finally(()=>{me&&x.removeMessageHandler(me)})})()}}function Zt(){return window}function es(){return void 0!==Zt().WorkerGlobalScope&&"function"==typeof Zt().importScripts}function ws(){return(ws=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const br="firebaseLocalStorageDb",vn="firebaseLocalStorage",Xl="fbase_key";class No{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Hd(v,p){return v.transaction([vn],p?"readwrite":"readonly").objectStore(vn)}function qf(){const v=indexedDB.open(br,1);return new Promise((p,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(vn,{keyPath:Xl})}catch(x){_(x)}}),v.addEventListener("success",(0,h.Z)(function*(){const E=v.result;E.objectStoreNames.contains(vn)?p(E):(E.close(),yield function am(){const v=indexedDB.deleteDatabase(br);return new No(v).toPromise()}(),p(yield qf()))}))})}function pa(v,p,_){return hi.apply(this,arguments)}function hi(){return(hi=(0,h.Z)(function*(v,p,_){const E=Hd(v,!0).put({[Xl]:p,value:_});return new No(E).toPromise()})).apply(this,arguments)}function ts(){return(ts=(0,h.Z)(function*(v,p){const _=Hd(v,!1).get(p),E=yield new No(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Gn(v,p){const _=Hd(v,!0).delete(p);return new No(_).toPromise()}const Gd=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,h.Z)(function*(){return _.db||(_.db=yield qf()),_.db})()}_withRetries(_){var E=this;return(0,h.Z)(function*(){let x=0;for(;;)try{const M=yield E._openDb();return yield _(M)}catch(M){if(x++>3)throw M;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,h.Z)(function*(){return es()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,h.Z)(function*(){_.receiver=Qn._getInstance(function Si(){return es()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,h.Z)(function*(x,M){return{keyProcessed:(yield _._poll()).includes(M.key)}});return function(x,M){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,h.Z)(function*(x,M){return["keyChanged"]});return function(x,M){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,h.Z)(function*(){var E,x;if(_.activeServiceWorker=yield function ho(){return ws.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new ll(_.activeServiceWorker);const M=yield _.sender._send("ping",{},800);!M||(null===(E=M[0])||void 0===E?void 0:E.fulfilled)&&(null===(x=M[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,h.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Di(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const _=yield qf();return yield pa(_,ci,"1"),yield Gn(_,ci),!0}catch(_){}return!1})()}_withPendingWrite(_){var E=this;return(0,h.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var x=this;return(0,h.Z)(function*(){return x._withPendingWrite((0,h.Z)(function*(){return yield x._withRetries(M=>pa(M,_,E)),x.localCache[_]=E,x.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,h.Z)(function*(){const x=yield E._withRetries(M=>function ga(v,p){return ts.apply(this,arguments)}(M,_));return E.localCache[_]=x,x})()}_remove(_){var E=this;return(0,h.Z)(function*(){return E._withPendingWrite((0,h.Z)(function*(){return yield E._withRetries(x=>Gn(x,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,h.Z)(function*(){const E=yield _._withRetries(Q=>{const me=Hd(Q,!1).getAll();return new No(me).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const x=[],M=new Set;for(const{fbase_key:Q,value:me}of E)M.add(Q),JSON.stringify(_.localCache[Q])!==JSON.stringify(me)&&(_.notifyListeners(Q,me),x.push(Q));for(const Q of Object.keys(_.localCache))_.localCache[Q]&&!M.has(Q)&&(_.notifyListeners(Q,null),x.push(Q));return x})()}notifyListeners(_,E){this.localCache[_]=E;const x=this.listeners[_];if(x)for(const M of Array.from(x))M(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Fi(v,p){return Cn(v,"POST","/v2/accounts/mfaSignIn:start",Et(v,p))}function _a(){return(_a=(0,h.Z)(function*(v){return(yield Cn(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function eu(v){return new Promise((p,_)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=p,E.onerror=x=>{const M=En("internal-error");M.customData=x,_(M)},E.type="text/javascript",E.charset="UTF-8",function Po(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(E)})}function Wd(v){return`__${v}${Math.floor(1e6*Math.random())}`}const ul=1e12;class cl{constructor(p){this.auth=p,this.counter=ul,this._widgets=new Map}render(p,_){const E=this.counter;return this._widgets.set(E,new It(p,this.auth.name,_||{})),this.counter++,E}reset(p){var _;const E=p||ul;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(p){var _;return(null===(_=this._widgets.get(p||ul))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,h.Z)(function*(){var E;return null===(E=_._widgets.get(p||ul))||void 0===E||E.execute(),""})()}}class It{constructor(p,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof p?document.getElementById(p):p;Le(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function dl(v){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ti=Wd("rcb"),lm=new zt(3e4,6e4);class um{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Zt().grecaptcha}load(p,_=""){return Le(function Wf(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Zt().grecaptcha):new Promise((E,x)=>{const M=Zt().setTimeout(()=>{x(En(p,"network-request-failed"))},lm.get());Zt()[ti]=()=>{Zt().clearTimeout(M),delete Zt()[ti];const me=Zt().grecaptcha;if(!me)return void x(En(p,"internal-error"));const Ze=me.render;me.render=(Ve,ot)=>{const tn=Ze(Ve,ot);return this.counter++,tn},this.hostLanguage=_,E(me)},eu(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:ti,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(M),x(En(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!Zt().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class zf{load(p){return(0,h.Z)(function*(){return new cl(p)})()}clearedOneInstance(){}}const jr="recaptcha",Dc={theme:"light",type:"image"};class Sc{constructor(p,_=Object.assign({},Dc),E){this.parameters=_,this.type=jr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Bn(E),this.isInvisible="invisible"===this.parameters.size,Le("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof p?document.getElementById(p):p;Le(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new zf:new um,this.validateStartingState()}verify(){var p=this;return(0,h.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(_)||new Promise(M=>{const Q=me=>{!me||(p.tokenChangeListeners.delete(Q),M(me))};p.tokenChangeListeners.add(Q),p.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){Le(!this.parameters.sitekey,this.auth,"argument-error"),Le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Le("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof p)p(_);else if("string"==typeof p){const E=Zt()[p];"function"==typeof E&&E(_)}}}assertNotDestroyed(){Le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.Z)(function*(){Le(Ar()&&!es(),p.auth,"internal-error"),yield function tu(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function qd(v){return _a.apply(this,arguments)}(p.auth);Le(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return Le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ns{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=ui._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function $r(v,p,_){return qn.apply(this,arguments)}function qn(){return(qn=(0,h.Z)(function*(v,p,_){const E=Bn(v),x=yield ru(E,p,(0,$.m9)(_));return new ns(x,M=>So(E,M))})).apply(this,arguments)}function Ac(v,p,_){return hl.apply(this,arguments)}function hl(){return(hl=(0,h.Z)(function*(v,p,_){const E=(0,$.m9)(v);yield Us(!1,E,"phone");const x=yield ru(E.auth,p,(0,$.m9)(_));return new ns(x,M=>Rr(E,M))})).apply(this,arguments)}function xc(v,p,_){return nu.apply(this,arguments)}function nu(){return(nu=(0,h.Z)(function*(v,p,_){const E=(0,$.m9)(v),x=yield ru(E.auth,p,(0,$.m9)(_));return new ns(x,M=>lc(E,M))})).apply(this,arguments)}function ru(v,p,_){return iu.apply(this,arguments)}function iu(){return(iu=(0,h.Z)(function*(v,p,_){var E;const x=yield _.verify();try{let M;if(Le("string"==typeof x,v,"argument-error"),Le(_.type===jr,v,"argument-error"),M="string"==typeof p?{phoneNumber:p}:p,"session"in M){const Q=M.session;if("phoneNumber"in M)return Le("enroll"===Q.type,v,"internal-error"),(yield Yl(v,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{Le("signin"===Q.type,v,"internal-error");const me=(null===(E=M.multiFactorHint)||void 0===E?void 0:E.uid)||M.multiFactorUid;return Le(me,v,"missing-multi-factor-info"),(yield Fi(v,{mfaPendingCredential:Q.credential,mfaEnrollmentId:me,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield jf(v,{phoneNumber:M.phoneNumber,recaptchaToken:x});return Q}}finally{_._reset()}})).apply(this,arguments)}function T(v,p){return S.apply(this,arguments)}function S(){return(S=(0,h.Z)(function*(v,p){yield Nn((0,$.m9)(v),p)})).apply(this,arguments)}let P=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=Bn(_)}verifyPhoneNumber(_,E){return ru(this.auth,_,(0,$.m9)(E))}static credential(_,E){return ui._fromVerification(_,E)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:x}=_;return E&&x?ui._fromTokenResponse(E,x):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function U(v,p){return p?on(p):(Le(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class K extends Wa{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return ms(p,this._buildIdpRequest())}_linkToIdToken(p,_){return ms(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return ms(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function te(v){return oc(v.auth,new K(v),v.bypassAuthState)}function Re(v){const{auth:p,user:_}=v;return Le(_,p,"internal-error"),lo(_,new K(v),v.bypassAuthState)}function Qe(v){return ct.apply(this,arguments)}function ct(){return(ct=(0,h.Z)(function*(v){const{auth:p,user:_}=v;return Le(_,p,"internal-error"),Nn(_,new K(v),v.bypassAuthState)})).apply(this,arguments)}class Lt{constructor(p,_,E,x,M=!1){this.auth=p,this.resolver=E,this.user=x,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,h.Z)(function*(E,x){p.pendingPromise={resolve:E,reject:x};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(M){p.reject(M)}});return function(E,x){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,h.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:M,tenantId:Q,error:me,type:Ze}=p;if(me)return void _.reject(me);const Ve={auth:_.auth,requestUri:E,sessionId:x,tenantId:Q||void 0,postBody:M||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Ze)(Ve))}catch(ot){_.reject(ot)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return te;case"linkViaPopup":case"linkViaRedirect":return Qe;case"reauthViaPopup":case"reauthViaRedirect":return Re;default:bn(this.auth,"internal-error")}}resolve(p){gt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){gt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Wt=new zt(2e3,1e4);function Tt(v,p,_){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,h.Z)(function*(v,p,_){const E=Bn(v);Vr(v,p,Hn);const x=U(E,_);return new su(E,"signInViaPopup",p,x).executeNotNull()})).apply(this,arguments)}function zn(v,p,_){return rs.apply(this,arguments)}function rs(){return(rs=(0,h.Z)(function*(v,p,_){const E=(0,$.m9)(v);Vr(E.auth,p,Hn);const x=U(E.auth,_);return new su(E.auth,"reauthViaPopup",p,x,E).executeNotNull()})).apply(this,arguments)}function is(v,p,_){return ss.apply(this,arguments)}function ss(){return(ss=(0,h.Z)(function*(v,p,_){const E=(0,$.m9)(v);Vr(E.auth,p,Hn);const x=U(E.auth,_);return new su(E.auth,"linkViaPopup",p,x,E).executeNotNull()})).apply(this,arguments)}let su=(()=>{class v extends Lt{constructor(_,E,x,M,Q){super(_,E,M,Q),this.provider=x,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,h.Z)(function*(){const E=yield _.execute();return Le(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,h.Z)(function*(){gt(1===_.filter.length,"Popup operations only handle one event");const E=Ro();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(En(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(En(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,x;this.pollId=(null===(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(En(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Wt.get())};_()}}return v.currentPopupAction=null,v})();const ni=new Map;class Gs extends Lt{constructor(p,_,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,h.Z)(function*(){let E=ni.get(_.auth._key());if(!E){try{const M=(yield function ko(v,p){return ou.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;E=()=>Promise.resolve(M)}catch(x){E=()=>Promise.reject(x)}ni.set(_.auth._key(),E)}return _.bypassAuthState||ni.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,E=this;return(0,h.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(E,p);if("unknown"!==p.type){if(p.eventId){const x=yield E.auth._redirectUserForId(p.eventId);if(x)return E.user=x,_().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function ou(){return(ou=(0,h.Z)(function*(v,p){const _=cm(p),E=Zf(v);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(_));return yield E._remove(_),x})).apply(this,arguments)}function ya(v,p){return fl.apply(this,arguments)}function fl(){return(fl=(0,h.Z)(function*(v,p){return Zf(v)._set(cm(p),"true")})).apply(this,arguments)}function Zd(){ni.clear()}function tv(v,p){ni.set(v._key(),p)}function Zf(v){return on(v._redirectPersistence)}function cm(v){return yn("pendingRedirect",v.config.apiKey,v.name)}function Z0(v,p,_){return function nv(v,p,_){return Kd.apply(this,arguments)}(v,p,_)}function Kd(){return(Kd=(0,h.Z)(function*(v,p,_){const E=Bn(v);Vr(v,p,Hn);const x=U(E,_);return yield ya(x,E),x._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function Kf(v,p,_){return function au(v,p,_){return os.apply(this,arguments)}(v,p,_)}function os(){return(os=(0,h.Z)(function*(v,p,_){const E=(0,$.m9)(v);Vr(E.auth,p,Hn);const x=U(E.auth,_);yield ya(x,E.auth);const M=yield uu(E);return x._openRedirect(E.auth,p,"reauthViaRedirect",M)})).apply(this,arguments)}function qs(v,p,_){return function dm(v,p,_){return Yd.apply(this,arguments)}(v,p,_)}function Yd(){return(Yd=(0,h.Z)(function*(v,p,_){const E=(0,$.m9)(v);Vr(E.auth,p,Hn);const x=U(E.auth,_);yield Us(!1,E,p.providerId),yield ya(x,E.auth);const M=yield uu(E);return x._openRedirect(E.auth,p,"linkViaRedirect",M)})).apply(this,arguments)}function K0(v,p){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,h.Z)(function*(v,p){return yield Bn(v)._initializationPromise,lu(v,p,!1)})).apply(this,arguments)}function lu(v,p){return Qd.apply(this,arguments)}function Qd(){return(Qd=(0,h.Z)(function*(v,p,_=!1){const E=Bn(v),x=U(E,p),Q=yield new Gs(E,x,_).execute();return Q&&!_&&(delete Q.user._redirectEventId,yield E._persistUserIfCurrent(Q.user),yield E._setRedirectUser(null,p)),Q})).apply(this,arguments)}function uu(v){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,h.Z)(function*(v){const p=Ro(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class Yf{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(_=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function rv(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eh(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var E;if(p.error&&!eh(p)){const x=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(En(this.auth,x))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const E=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xd(p))}saveEventToCache(p){this.cachedEventUids.add(Xd(p)),this.lastProcessedEventTime=Date.now()}}function Xd(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function eh({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===(null==p?void 0:p.code)}function cu(v){return fo.apply(this,arguments)}function fo(){return(fo=(0,h.Z)(function*(v,p={}){return Cn(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Nc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iv=/^https?/;function du(){return(du=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield cu(v);for(const _ of p)try{if(hm(_))return}catch(E){}bn(v,"unauthorized-domain")})).apply(this,arguments)}function hm(v){const p=mr(),{protocol:_,hostname:E}=new URL(p);if(v.startsWith("chrome-extension://")){const Q=new URL(v);return""===Q.hostname&&""===E?"chrome-extension:"===_&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&Q.hostname===E}if(!iv.test(_))return!1;if(Nc.test(v))return E===v;const x=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const sv=new zt(3e4,6e4);function fm(){const v=Zt().___jsl;if(null==v?void 0:v.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let hu=null;function ov(v){return hu=hu||function pm(v){return new Promise((p,_)=>{var E,x,M;function Q(){fm(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{fm(),_(En(v,"network-request-failed"))},timeout:sv.get()})}if(null===(x=null===(E=Zt().gapi)||void 0===E?void 0:E.iframes)||void 0===x?void 0:x.Iframe)p(gapi.iframes.getContext());else{if(!(null===(M=Zt().gapi)||void 0===M?void 0:M.load)){const me=Wd("iframefcb");return Zt()[me]=()=>{gapi.load?Q():_(En(v,"network-request-failed"))},eu(`https://apis.google.com/js/api.js?onload=${me}`).catch(Ze=>_(Ze))}Q()}}).catch(p=>{throw hu=null,p})}(v),hu}const av=new zt(5e3,15e3),th={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rh(v){const p=v.config;Le(p.authDomain,v,"auth-domain-config-required");const _=p.emulator?mt(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,E={apiKey:p.apiKey,appName:v.name,v:O.SDK_VERSION},x=nh.get(v.config.apiHost);x&&(E.eid=x);const M=v._getFrameworks();return M.length&&(E.fw=M.join(",")),`${_}?${(0,$.xO)(E).slice(1)}`}function va(){return va=(0,h.Z)(function*(v){const p=yield ov(v),_=Zt().gapi;return Le(_,v,"internal-error"),p.open({where:document.body,url:rh(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:th,dontclear:!0},E=>new Promise(function(){var x=(0,h.Z)(function*(M,Q){yield E.restyle({setHideOnLeave:!1});const me=En(v,"network-request-failed"),Ze=Zt().setTimeout(()=>{Q(me)},av.get());function Ve(){Zt().clearTimeout(Ze),M(E)}E.ping(Ve).then(Ve,()=>{Q(me)})});return function(M,Q){return x.apply(this,arguments)}}()))}),va.apply(this,arguments)}const Jf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class wa{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function ym(v,p,_,E,x,M){Le(v.config.authDomain,v,"auth-domain-config-required"),Le(v.config.apiKey,v,"invalid-api-key");const Q={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:E,v:O.SDK_VERSION,eventId:x};if(p instanceof Hn){p.setDefaultLanguage(v.languageCode),Q.providerId=p.providerId||"",(0,$.xb)(p.getCustomParameters())||(Q.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Ze,Ve]of Object.entries(M||{}))Q[Ze]=Ve}if(p instanceof Fs){const Ze=p.getScopes().filter(Ve=>""!==Ve);Ze.length>0&&(Q.scopes=Ze.join(","))}v.tenantId&&(Q.tid=v.tenantId);const me=Q;for(const Ze of Object.keys(me))void 0===me[Ze]&&delete me[Ze];return`${function vm({config:v}){return v.emulator?mt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,$.xO)(me).slice(1)}`}const pl="webStorageSupport",wm=class Mc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=co,this._completeRedirectFn=lu,this._overrideRedirectResult=tv}_openPopup(p,_,E,x){var M=this;return(0,h.Z)(function*(){var Q;gt(null===(Q=M.eventManagers[p._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const me=ym(p,_,E,mr(),x);return function Xf(v,p,_,E=500,x=600){const M=Math.max((window.screen.availHeight-x)/2,0).toString(),Q=Math.max((window.screen.availWidth-E)/2,0).toString();let me="";const Ze=Object.assign(Object.assign({},Jf),{width:E.toString(),height:x.toString(),top:M,left:Q}),Ve=(0,$.z$)().toLowerCase();_&&(me=Io(Ve)?"_blank":_),$t(Ve)&&(p=p||"http://localhost",Ze.scrollbars="yes");const ot=Object.entries(Ze).reduce((Dn,[Pr,Zn])=>`${Dn}${Pr}=${Zn},`,"");if(function Rn(v=(0,$.z$)()){var p;return Os(v)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Ve)&&"_self"!==me)return function Fo(v,p){const _=document.createElement("a");_.href=v,_.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(p||"",me),new wa(null);const tn=window.open(p||"",me,ot);Le(tn,v,"popup-blocked");try{tn.focus()}catch(Dn){}return new wa(tn)}(p,me,Ro())})()}_openRedirect(p,_,E,x){var M=this;return(0,h.Z)(function*(){return yield M._originValidation(p),function vs(v){Zt().location.href=v}(ym(p,_,E,mr(),x)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:x,promise:M}=this.eventManagers[_];return x?Promise.resolve(x):(gt(M,"If manager is not set, promise should be"),M)}const E=this.initAndGetManager(p);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(p){var _=this;return(0,h.Z)(function*(){const E=yield function po(v){return va.apply(this,arguments)}(p),x=new Yf(p);return E.register("authEvent",M=>(Le(null==M?void 0:M.authEvent,p,"invalid-auth-event"),{status:x.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:x},_.iframes[p._key()]=E,x})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(pl,{type:pl},x=>{var M;const Q=null===(M=null==x?void 0:x[0])||void 0===M?void 0:M[pl];void 0!==Q&&_(!!Q),bn(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Qf(v){return du.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return ea()||Jo()||Os()}};class fu extends class Pc{constructor(p){this.factorId=p}_process(p,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,E);case"signin":return this._finalizeSignIn(p,_.credential);default:return ur("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new fu(p)}_finalizeEnroll(p,_,E){return function Ql(v,p){return Cn(v,"POST","/v2/accounts/mfaEnrollment:finalize",Et(v,p))}(p,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function Hs(v,p){return Cn(v,"POST","/v2/accounts/mfaSignIn:finalize",Et(v,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ih=(()=>{class v{constructor(){}static assertion(_){return fu._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var tp="@firebase/auth";class cv{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,h.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(E=>{var x;p((null===(x=E)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function np(v){(0,O._registerComponent)(new ue.wA("auth",(p,{options:_})=>{const E=p.getProvider("app").getImmediate(),x=p.getProvider("heartbeat"),{apiKey:M,authDomain:Q}=E.options;return((me,Ze)=>{Le(M&&!M.includes(":"),"invalid-api-key",{appName:me.name}),Le(!(null==Q?void 0:Q.includes(":")),"argument-error",{appName:me.name});const Ve={apiKey:M,authDomain:Q,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zi(v)},ot=new xd(me,Ze,Ve);return function ai(v,p){const _=(null==p?void 0:p.persistence)||[],E=(Array.isArray(_)?_:[_]).map(on);(null==p?void 0:p.errorMap)&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(E,null==p?void 0:p.popupRedirectResolver)}(ot,_),ot})(E,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,E)=>{p.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new ue.wA("auth-internal",p=>{const _=Bn(p.getProvider("auth").getImmediate());return new cv(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(tp,"0.20.4",function Cr(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,O.registerVersion)(tp,"0.20.4","esm2017")}("Browser")},2090:(it,Ie,F)=>{F.d(Ie,{BH:()=>We,LL:()=>ue,ZR:()=>Pe,gQ:()=>Le,zI:()=>ie,hu:()=>$,g5:()=>O,US:()=>Ee,tV:()=>_e,h$:()=>fe,L:()=>de,$s:()=>Cn,r3:()=>lr,Sg:()=>xe,ne:()=>ur,p$:()=>G,vZ:()=>bn,ZB:()=>z,gK:()=>mr,pd:()=>Ci,m9:()=>yt,z$:()=>Fe,GJ:()=>_n,jU:()=>we,ru:()=>ke,d:()=>je,xb:()=>Un,w1:()=>st,hl:()=>Te,uI:()=>He,UG:()=>ye,Yr:()=>at,b$:()=>Be,G6:()=>Xe,Mn:()=>Ne,w9:()=>gr,cI:()=>Xn,UI:()=>bi,xO:()=>Ps,zd:()=>Vr,DV:()=>Ei,ug:()=>zt,dS:()=>Co,Pz:()=>ut,Dv:()=>ai,Wj:()=>An,lb:()=>Ur,eu:()=>q});const $=function(Y,H){if(!Y)throw O(H)},O=function(Y){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Y)},se=function(Y){const H=[];let X=0;for(let ee=0;ee<Y.length;ee++){let B=Y.charCodeAt(ee);B<128?H[X++]=B:B<2048?(H[X++]=B>>6|192,H[X++]=63&B|128):55296==(64512&B)&&ee+1<Y.length&&56320==(64512&Y.charCodeAt(ee+1))?(B=65536+((1023&B)<<10)+(1023&Y.charCodeAt(++ee)),H[X++]=B>>18|240,H[X++]=B>>12&63|128,H[X++]=B>>6&63|128,H[X++]=63&B|128):(H[X++]=B>>12|224,H[X++]=B>>6&63|128,H[X++]=63&B|128)}return H},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Y,H){if(!Array.isArray(Y))throw Error("encodeByteArray takes an array as a parameter");this.init_();const X=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,ee=[];for(let B=0;B<Y.length;B+=3){const be=Y[B],qe=B+1<Y.length,ht=qe?Y[B+1]:0,Ft=B+2<Y.length,ln=Ft?Y[B+2]:0;let ae=(15&ht)<<2|ln>>6,J=63&ln;Ft||(J=64,qe||(ae=64)),ee.push(X[be>>2],X[(3&be)<<4|ht>>4],X[ae],X[J])}return ee.join("")},encodeString(Y,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(Y):this.encodeByteArray(se(Y),H)},decodeString(Y,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(Y):function(Y){const H=[];let X=0,ee=0;for(;X<Y.length;){const B=Y[X++];if(B<128)H[ee++]=String.fromCharCode(B);else if(B>191&&B<224){const be=Y[X++];H[ee++]=String.fromCharCode((31&B)<<6|63&be)}else if(B>239&&B<365){const Ft=((7&B)<<18|(63&Y[X++])<<12|(63&Y[X++])<<6|63&Y[X++])-65536;H[ee++]=String.fromCharCode(55296+(Ft>>10)),H[ee++]=String.fromCharCode(56320+(1023&Ft))}else{const be=Y[X++],qe=Y[X++];H[ee++]=String.fromCharCode((15&B)<<12|(63&be)<<6|63&qe)}}return H.join("")}(this.decodeStringToByteArray(Y,H))},decodeStringToByteArray(Y,H){this.init_();const X=H?this.charToByteMapWebSafe_:this.charToByteMap_,ee=[];for(let B=0;B<Y.length;){const be=X[Y.charAt(B++)],ht=B<Y.length?X[Y.charAt(B)]:0;++B;const ln=B<Y.length?X[Y.charAt(B)]:64;++B;const Yt=B<Y.length?X[Y.charAt(B)]:64;if(++B,null==be||null==ht||null==ln||null==Yt)throw Error();ee.push(be<<2|ht>>4),64!==ln&&(ee.push(ht<<4&240|ln>>2),64!==Yt&&ee.push(ln<<6&192|Yt))}return ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Y=0;Y<this.ENCODED_VALS.length;Y++)this.byteToCharMap_[Y]=this.ENCODED_VALS.charAt(Y),this.charToByteMap_[this.byteToCharMap_[Y]]=Y,this.byteToCharMapWebSafe_[Y]=this.ENCODED_VALS_WEBSAFE.charAt(Y),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Y]]=Y,Y>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Y)]=Y,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Y)]=Y)}}},fe=function(Y){const H=se(Y);return Ee.encodeByteArray(H,!0)},de=function(Y){return fe(Y).replace(/\./g,"")},_e=function(Y){try{return Ee.decodeString(Y,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function G(Y){return z(void 0,Y)}function z(Y,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===Y&&(Y={});break;case Array:Y=[];break;default:return H}for(const X in H)!H.hasOwnProperty(X)||!oe(X)||(Y[X]=z(Y[X],H[X]));return Y}function oe(Y){return"__proto__"!==Y}class We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,X)=>{this.resolve=H,this.reject=X})}wrapCallback(H){return(X,ee)=>{X?this.reject(X):this.resolve(ee),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(X):H(X,ee))}}}function xe(Y,H){if(Y.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ee=H||"demo-project",B=Y.iat||0,be=Y.sub||Y.user_id;if(!be)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const qe=Object.assign({iss:`https://securetoken.google.com/${ee}`,aud:ee,iat:B,exp:B+3600,auth_time:B,sub:be,user_id:be,firebase:{sign_in_provider:"custom",identities:{}}},Y);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(qe)),""].join(".")}function Fe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function He(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function ye(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Y){return!1}}function we(){return"object"==typeof self&&self.self===self}function ke(){const Y="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Y&&void 0!==Y.id}function Be(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function je(){return Fe().indexOf("Electron/")>=0}function st(){const Y=Fe();return Y.indexOf("MSIE ")>=0||Y.indexOf("Trident/")>=0}function Ne(){return Fe().indexOf("MSAppHost/")>=0}function at(){return!1}function Xe(){return!ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Te(){return"object"==typeof indexedDB}function q(){return new Promise((Y,H)=>{try{let X=!0;const ee="validate-browser-context-for-indexeddb-analytics-module",B=self.indexedDB.open(ee);B.onsuccess=()=>{B.result.close(),X||self.indexedDB.deleteDatabase(ee),Y(!0)},B.onupgradeneeded=()=>{X=!1},B.onerror=()=>{var be;H((null===(be=B.error)||void 0===be?void 0:be.message)||"")}}catch(X){H(X)}})}function ie(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Pe extends Error{constructor(H,X,ee){super(X),this.code=H,this.customData=ee,this.name="FirebaseError",Object.setPrototypeOf(this,Pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ue.prototype.create)}}class ue{constructor(H,X,ee){this.service=H,this.serviceName=X,this.errors=ee}create(H,...X){const ee=X[0]||{},B=`${this.service}/${H}`,be=this.errors[H],qe=be?function St(Y,H){return Y.replace(Gt,(X,ee)=>{const B=H[ee];return null!=B?String(B):`<${ee}?>`})}(be,ee):"Error";return new Pe(B,`${this.serviceName}: ${qe} (${B}).`,ee)}}const Gt=/\{\$([^}]+)}/g;function Xn(Y){return JSON.parse(Y)}function ut(Y){return JSON.stringify(Y)}const xt=function(Y){let H={},X={},ee={},B="";try{const be=Y.split(".");H=Xn(_e(be[0])||""),X=Xn(_e(be[1])||""),B=be[2],ee=X.d||{},delete X.d}catch(be){}return{header:H,claims:X,data:ee,signature:B}},gr=function(Y){const X=xt(Y).claims;return!!X&&"object"==typeof X&&X.hasOwnProperty("iat")},_n=function(Y){const H=xt(Y).claims;return"object"==typeof H&&!0===H.admin};function lr(Y,H){return Object.prototype.hasOwnProperty.call(Y,H)}function Ei(Y,H){if(Object.prototype.hasOwnProperty.call(Y,H))return Y[H]}function Un(Y){for(const H in Y)if(Object.prototype.hasOwnProperty.call(Y,H))return!1;return!0}function bi(Y,H,X){const ee={};for(const B in Y)Object.prototype.hasOwnProperty.call(Y,B)&&(ee[B]=H.call(X,Y[B],B,Y));return ee}function bn(Y,H){if(Y===H)return!0;const X=Object.keys(Y),ee=Object.keys(H);for(const B of X){if(!ee.includes(B))return!1;const be=Y[B],qe=H[B];if(En(be)&&En(qe)){if(!bn(be,qe))return!1}else if(be!==qe)return!1}for(const B of ee)if(!X.includes(B))return!1;return!0}function En(Y){return null!==Y&&"object"==typeof Y}function Ps(Y){const H=[];for(const[X,ee]of Object.entries(Y))Array.isArray(ee)?ee.forEach(B=>{H.push(encodeURIComponent(X)+"="+encodeURIComponent(B))}):H.push(encodeURIComponent(X)+"="+encodeURIComponent(ee));return H.length?"&"+H.join("&"):""}function Vr(Y){const H={};return Y.replace(/^\?/,"").split("&").forEach(ee=>{if(ee){const[B,be]=ee.split("=");H[decodeURIComponent(B)]=decodeURIComponent(be)}}),H}function Ci(Y){const H=Y.indexOf("?");if(!H)return"";const X=Y.indexOf("#",H);return Y.substring(H,X>0?X:void 0)}class Le{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,X){X||(X=0);const ee=this.W_;if("string"==typeof H)for(let Yt=0;Yt<16;Yt++)ee[Yt]=H.charCodeAt(X)<<24|H.charCodeAt(X+1)<<16|H.charCodeAt(X+2)<<8|H.charCodeAt(X+3),X+=4;else for(let Yt=0;Yt<16;Yt++)ee[Yt]=H[X]<<24|H[X+1]<<16|H[X+2]<<8|H[X+3],X+=4;for(let Yt=16;Yt<80;Yt++){const ae=ee[Yt-3]^ee[Yt-8]^ee[Yt-14]^ee[Yt-16];ee[Yt]=4294967295&(ae<<1|ae>>>31)}let ln,xn,B=this.chain_[0],be=this.chain_[1],qe=this.chain_[2],ht=this.chain_[3],Ft=this.chain_[4];for(let Yt=0;Yt<80;Yt++){Yt<40?Yt<20?(ln=ht^be&(qe^ht),xn=1518500249):(ln=be^qe^ht,xn=1859775393):Yt<60?(ln=be&qe|ht&(be|qe),xn=2400959708):(ln=be^qe^ht,xn=3395469782);const ae=(B<<5|B>>>27)+ln+Ft+xn+ee[Yt]&4294967295;Ft=ht,ht=qe,qe=4294967295&(be<<30|be>>>2),be=B,B=ae}this.chain_[0]=this.chain_[0]+B&4294967295,this.chain_[1]=this.chain_[1]+be&4294967295,this.chain_[2]=this.chain_[2]+qe&4294967295,this.chain_[3]=this.chain_[3]+ht&4294967295,this.chain_[4]=this.chain_[4]+Ft&4294967295}update(H,X){if(null==H)return;void 0===X&&(X=H.length);const ee=X-this.blockSize;let B=0;const be=this.buf_;let qe=this.inbuf_;for(;B<X;){if(0===qe)for(;B<=ee;)this.compress_(H,B),B+=this.blockSize;if("string"==typeof H){for(;B<X;)if(be[qe]=H.charCodeAt(B),++qe,++B,qe===this.blockSize){this.compress_(be),qe=0;break}}else for(;B<X;)if(be[qe]=H[B],++qe,++B,qe===this.blockSize){this.compress_(be),qe=0;break}}this.inbuf_=qe,this.total_+=X}digest(){const H=[];let X=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let B=this.blockSize-1;B>=56;B--)this.buf_[B]=255&X,X/=256;this.compress_(this.buf_);let ee=0;for(let B=0;B<5;B++)for(let be=24;be>=0;be-=8)H[ee]=this.chain_[B]>>be&255,++ee;return H}}function ur(Y,H){const X=new gt(Y,H);return X.subscribe.bind(X)}class gt{constructor(H,X){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=X,this.task.then(()=>{H(this)}).catch(ee=>{this.error(ee)})}next(H){this.forEachObserver(X=>{X.next(H)})}error(H){this.forEachObserver(X=>{X.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,X,ee){let B;if(void 0===H&&void 0===X&&void 0===ee)throw new Error("Missing Observer.");B=function on(Y,H){if("object"!=typeof Y||null===Y)return!1;for(const X of H)if(X in Y&&"function"==typeof Y[X])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:X,complete:ee},void 0===B.next&&(B.next=an),void 0===B.error&&(B.error=an),void 0===B.complete&&(B.complete=an);const be=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?B.error(this.finalError):B.complete()}catch(qe){}}),this.observers.push(B),be}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let X=0;X<this.observers.length;X++)this.sendOne(X,H)}sendOne(H,X){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{X(this.observers[H])}catch(ee){"undefined"!=typeof console&&console.error&&console.error(ee)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function an(){}const ai=function(Y,H,X,ee){let B;if(ee<H?B="at least "+H:ee>X&&(B=0===X?"none":"no more than "+X),B)throw new Error(Y+" failed: Was called with "+ee+(1===ee?" argument.":" arguments.")+" Expects "+B+".")};function mr(Y,H){return`${Y} failed: ${H} argument `}function An(Y,H,X,ee){if((!ee||X)&&"function"!=typeof X)throw new Error(mr(Y,H)+"must be a valid function.")}function Ur(Y,H,X,ee){if((!ee||X)&&("object"!=typeof X||null===X))throw new Error(mr(Y,H)+"must be a valid context object.")}const Co=function(Y){const H=[];let X=0;for(let ee=0;ee<Y.length;ee++){let B=Y.charCodeAt(ee);if(B>=55296&&B<=56319){const be=B-55296;ee++,$(ee<Y.length,"Surrogate pair missing trail surrogate."),B=65536+(be<<10)+(Y.charCodeAt(ee)-56320)}B<128?H[X++]=B:B<2048?(H[X++]=B>>6|192,H[X++]=63&B|128):B<65536?(H[X++]=B>>12|224,H[X++]=B>>6&63|128,H[X++]=63&B|128):(H[X++]=B>>18|240,H[X++]=B>>12&63|128,H[X++]=B>>6&63|128,H[X++]=63&B|128)}return H},zt=function(Y){let H=0;for(let X=0;X<Y.length;X++){const ee=Y.charCodeAt(X);ee<128?H++:ee<2048?H+=2:ee>=55296&&ee<=56319?(H+=4,X++):H+=3}return H};function Cn(Y,H=1e3,X=2){const ee=H*Math.pow(X,Y),B=Math.round(.5*ee*(Math.random()-.5)*2);return Math.min(144e5,ee+B)}function yt(Y){return Y&&Y._delegate?Y._delegate:Y}},7345:(it,Ie,F)=>{var h=F(5e3);let $=null;function O(){return $}const fe=new h.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function _e(){return(0,h.LFG)(z)}()},providedIn:"platform"}),n})();const G=new h.OlP("Location Initialized");let z=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){oe()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){oe()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function We(){return new z((0,h.LFG)(fe))}()},providedIn:"platform"}),n})();function oe(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Fe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function He(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function we(n){const e=(0,h.LFG)(fe).location;return new Be((0,h.LFG)(de),e&&e.origin||"")}()},providedIn:"root"}),n})();const ke=new h.OlP("appBaseHref");let Be=(()=>{class n extends ye{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+He(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const u=this.prepareExternalUrl(i+He(a));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){const u=this.prepareExternalUrl(i+He(a));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de),h.LFG(ke,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),je=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let u=this.prepareExternalUrl(i+He(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){let u=this.prepareExternalUrl(i+He(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de),h.LFG(ke,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),st=(()=>{class n{constructor(t,r){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Fe(Xe(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+He(r))}normalize(t){return n.stripTrailingSlash(function at(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Xe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=He,n.joinWithSlash=xe,n.stripTrailingSlash=Fe,n.\u0275fac=function(t){return new(t||n)(h.LFG(ye),h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ne(){return new st((0,h.LFG)(ye),(0,h.LFG)(de))}()},providedIn:"root"}),n})();function Xe(n){return n.replace(/\/index.html$/,"")}const Te={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var q=(()=>((q=q||{})[q.Decimal=0]="Decimal",q[q.Percent=1]="Percent",q[q.Currency=2]="Currency",q[q.Scientific=3]="Scientific",q))(),ie=(()=>((ie=ie||{})[ie.Zero=0]="Zero",ie[ie.One=1]="One",ie[ie.Two=2]="Two",ie[ie.Few=3]="Few",ie[ie.Many=4]="Many",ie[ie.Other=5]="Other",ie))(),ue=(()=>((ue=ue||{})[ue.Decimal=0]="Decimal",ue[ue.Group=1]="Group",ue[ue.List=2]="List",ue[ue.PercentSign=3]="PercentSign",ue[ue.PlusSign=4]="PlusSign",ue[ue.MinusSign=5]="MinusSign",ue[ue.Exponential=6]="Exponential",ue[ue.SuperscriptingExponent=7]="SuperscriptingExponent",ue[ue.PerMille=8]="PerMille",ue[ue.Infinity=9]="Infinity",ue[ue.NaN=10]="NaN",ue[ue.TimeSeparator=11]="TimeSeparator",ue[ue.CurrencyDecimal=12]="CurrencyDecimal",ue[ue.CurrencyGroup=13]="CurrencyGroup",ue))();function Un(n,e){const t=(0,h.cg1)(n),r=t[h.wAp.NumberSymbols][e];if(void 0===r){if(e===ue.CurrencyDecimal)return t[h.wAp.NumberSymbols][ue.Decimal];if(e===ue.CurrencyGroup)return t[h.wAp.NumberSymbols][ue.Group]}return r}const Ci=h.kL8;const bt=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Ii(n,e,t,r,i){const u=function hn(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],a=r[1],u=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],d=u[0],g=u[1]||"";t.posPre=d.substr(0,d.indexOf("#"));for(let C=0;C<g.length;C++){const D=g.charAt(C);"0"===D?t.minFrac=t.maxFrac=C+1:"#"===D?t.maxFrac=C+1:t.posSuf+=D}const y=d.split(",");if(t.gSize=y[1]?y[1].length:0,t.lgSize=y[2]||y[1]?(y[2]||y[1]).length:0,a){const C=i.length-t.posPre.length-t.posSuf.length,D=a.indexOf("#");t.negPre=a.substr(0,D).replace(/'/g,""),t.negSuf=a.substr(D+C).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function bi(n,e){return(0,h.cg1)(n)[h.wAp.NumberFormats][e]}(e,q.Currency),Un(e,ue.MinusSign));return u.minFrac=function Ar(n){let e;const t=Te[n];return t&&(e=t[2]),"number"==typeof e?e:2}(r),u.maxFrac=u.minFrac,function Ga(n,e,t,r,i,a,u=!1){let d="",g=!1;if(isFinite(n)){let y=function Qr(n){let r,i,a,u,d,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(a=e.search(/e/i))>0?(i<0&&(i=a),i+=+e.slice(a+1),e=e.substring(0,a)):i<0&&(i=e.length),a=0;"0"===e.charAt(a);a++);if(a===(d=e.length))r=[0],i=1;else{for(d--;"0"===e.charAt(d);)d--;for(i-=a,r=[],u=0;a<=d;a++,u++)r[u]=Number(e.charAt(a))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);u&&(y=function tr(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(y));let C=e.minInt,D=e.minFrac,N=e.maxFrac;if(a){const Je=a.match(bt);if(null===Je)throw new Error(`${a} is not a valid digit info`);const Ye=Je[1],ze=Je[3],Nt=Je[5];null!=Ye&&(C=qi(Ye)),null!=ze&&(D=qi(ze)),null!=Nt?N=qi(Nt):null!=ze&&D>N&&(N=D)}!function vr(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const a=Math.min(Math.max(e,i),t);let u=a+n.integerLen,d=r[u];if(u>0){r.splice(Math.max(n.integerLen,u));for(let D=u;D<r.length;D++)r[D]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,u=a+1),r[0]=0;for(let D=1;D<u;D++)r[D]=0}if(d>=5)if(u-1<0){for(let D=0;D>u;D--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[u-1]++;for(;i<Math.max(0,a);i++)r.push(0);let g=0!==a;const y=e+n.integerLen,C=r.reduceRight(function(D,N,L,j){return j[L]=(N+=D)<10?N:N-10,g&&(0===j[L]&&L>=y?j.pop():g=!1),N>=10?1:0},0);C&&(r.unshift(C),n.integerLen++)}(y,D,N);let L=y.digits,j=y.integerLen;const ne=y.exponent;let le=[];for(g=L.every(Je=>!Je);j<C;j++)L.unshift(0);for(;j<0;j++)L.unshift(0);j>0?le=L.splice(j,L.length):(le=L,L=[0]);const Ge=[];for(L.length>=e.lgSize&&Ge.unshift(L.splice(-e.lgSize,L.length).join(""));L.length>e.gSize;)Ge.unshift(L.splice(-e.gSize,L.length).join(""));L.length&&Ge.unshift(L.join("")),d=Ge.join(Un(t,r)),le.length&&(d+=Un(t,i)+le.join("")),ne&&(d+=Un(t,ue.Exponential)+"+"+ne)}else d=Un(t,ue.Infinity);return d=n<0&&!g?e.negPre+d+e.negSuf:e.posPre+d+e.posSuf,d}(n,u,e,ue.CurrencyGroup,ue.CurrencyDecimal,i).replace("\xa4",t).replace("\xa4","").trim()}function qi(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class yn{}let nr=(()=>{class n extends yn{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Ci(r||this.locale)(t)){case ie.Zero:return"zero";case ie.One:return"one";case ie.Two:return"two";case ie.Few:return"few";case ie.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.soG))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class io{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let cr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new io(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===a?void 0:a);else if(null!==a){const d=r.get(a);r.move(d,u),Xo(d,i)}});for(let i=0,a=r.length;i<a;i++){const d=r.get(i).context;d.index=i,d.count=a,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Xo(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Xo(n,e){n.context.$implicit=e.item}let xr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Rn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Sd("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Sd("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Rn{constructor(){this.$implicit=null,this.ngIf=null}}function Sd(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let tc=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",a,u){if(!function Do(n){return!(null==n||""===n||n!=n)}(t))return null;u=u||this._locale,"boolean"==typeof i&&(i=i?"symbol":"code");let d=r||this._defaultCurrencyCode;"code"!==i&&(d="symbol"===i||"symbol-narrow"===i?function ai(n,e,t="en"){const r=function Vr(n){return(0,h.cg1)(n)[h.wAp.Currencies]}(t)[n]||Te[n]||[],i=r[1];return"narrow"===e&&"string"==typeof i?i:r[0]||n}(d,"symbol"===i?"wide":"narrow",u):i);try{return Ii(function Za(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),u,d,r,a)}catch(g){throw function Pi(n,e){return new h.vHH(2100,"")}()}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.soG,16),h.Y36(h.EJc,16))},n.\u0275pipe=h.Yjl({name:"currency",type:n,pure:!0}),n})();let ms=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[{provide:yn,useClass:nr}]}),n})();function rc(n){return"server"===n}let ic=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new tm((0,h.LFG)(fe),window)}),n})();class tm{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ui(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const u=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Pn(this.window.history)||Pn(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Pn(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class sc extends class na extends class Ee{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function he(n){$||($=n)}(new sc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Hn(){return Oi=Oi||document.querySelector("base"),Oi?Oi.getAttribute("href"):null}();return null==t?null:function Ls(n){Fs=Fs||document.createElement("a"),Fs.setAttribute("href",n);const e=Fs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Oi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Jo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Fs,Oi=null;const Vs=new h.OlP("TRANSITION_ID"),wr=[{provide:h.ip1,useFactory:function Ti(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Vs,fe,h.zs3],multi:!0}];class Ka{static init(){(0,h.VLi)(new Ka)}addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let a=i.length,u=!1;const d=function(g){u=u||g,a--,0==a&&r(u)};i.forEach(function(g){g.whenStable(d)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let oo=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Yi=new h.OlP("EventManagerPlugins");let _s=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const u=i[a];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Yi),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Ya{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let At=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),ao=(()=>{class n extends At{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const u=this._doc.createElement("style");u.textContent=a,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Xr),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Xr))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Xr(n){O().remove(n)}const ra={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Bl=/%COMP%/g;function Nn(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Nn(n,i,t):(i=i.replace(Bl,n),t.push(i))}return t}function ia(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ei=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new lo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ac(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new So(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Nn(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_s),h.LFG(ao),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class lo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ra[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=ra[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ra[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ia(r)):this.eventManager.addEventListener(e,t,ia(r))}}class ac extends lo{constructor(e,t,r,i){super(e),this.component=r;const a=Nn(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Xt(n){return"_ngcontent-%COMP%".replace(Bl,n)}(i+"-"+r.id),this.hostAttr=function $l(n){return"_nghost-%COMP%".replace(Bl,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class So extends lo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Nn(i.id,i.styles,[]);for(let u=0;u<a.length;u++){const d=document.createElement("style");d.textContent=a[u],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let sa=(()=>{class n extends Ya{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Rr=["alt","control","meta","shift"],lc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qi={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Bs={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Hl=(()=>{class n extends Ya{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let u="";if(Rr.forEach(g=>{const y=r.indexOf(g);y>-1&&(r.splice(y,1),u+=g+".")}),u+=a,0!=r.length||0===a.length)return null;const d={};return d.domEventName=i,d.fullKey=u,d}static getEventFullKey(t){let r="",i=function Gl(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Qi.hasOwnProperty(e)&&(e=Qi[e]))}return lc[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Rr.forEach(a=>{a!=i&&Bs[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const cc=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function uc(){sc.makeCurrent(),Ka.init()},multi:!0},{provide:fe,useFactory:function el(){return(0,h.RDi)(document),document},deps:[]}]),Ao=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function oa(){return new h.qLn},deps:[]},{provide:Yi,useClass:sa,multi:!0,deps:[fe,h.R0b,h.Lbi]},{provide:Yi,useClass:Hl,multi:!0,deps:[fe]},{provide:ei,useClass:ei,deps:[_s,ao,h.AFp]},{provide:h.FYo,useExisting:ei},{provide:At,useExisting:ao},{provide:ao,useClass:ao,deps:[fe]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:_s,useClass:_s,deps:[Yi,h.R0b]},{provide:class $n{},useClass:oo,deps:[]}];let Ld=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Vs,useExisting:h.AFp},wr]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:Ao,imports:[ms,h.hGG]}),n})();"undefined"!=typeof window&&window;var Tn=F(8996),js=F(7669);function lt(...n){const e=(0,js.yG)(n);return(0,Tn.D)(n,e)}var $s=F(7579);class Xi extends $s.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Er=F(8306);const{isArray:Hf}=Array,{getPrototypeOf:il,prototype:Bd,keys:sl}=Object;function om(n){if(1===n.length){const e=n[0];if(Hf(e))return{args:e,keys:null};if(function wc(n){return n&&"object"==typeof n&&il(n)===Bd}(e)){const t=sl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ys=F(4671),Ct=F(4004);const{isArray:Ec}=Array;function Yl(n){return(0,Ct.U)(e=>function ol(n,e){return Ec(e)?n(...e):n(e)}(n,e))}function Ql(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var jn=F(5403),da=F(9672);function ci(n,e,t){n?(0,da.f)(t,n,e):e()}const ha=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var xo=F(8189);function fa(...n){return function $d(){return(0,xo.J)(1)}()((0,Tn.D)(n,(0,js.yG)(n)))}var di=F(8421);function bc(n){return new Er.y(e=>{(0,di.Xf)(n()).subscribe(e)})}var co=F(515),Cc=F(727),Qn=F(4482);function Ro(){return(0,Qn.e)((n,e)=>{let t=null;n._refCount++;const r=new jn.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ll extends Er.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Qn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Cc.w0;const t=this.getSubject();e.add(this.source.subscribe(new jn.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Cc.w0.EMPTY)}return e}refCount(){return Ro()(this)}}function Zt(n,e){return(0,Qn.e)((t,r)=>{let i=null,a=0,u=!1;const d=()=>u&&!i&&r.complete();t.subscribe(new jn.Q(r,g=>{null==i||i.unsubscribe();let y=0;const C=a++;(0,di.Xf)(n(g,C)).subscribe(i=new jn.Q(r,D=>r.next(e?e(g,D,C,y++):D),()=>{i=null,d()}))},()=>{u=!0,d()}))})}var vs=F(5698);function es(...n){const e=(0,js.yG)(n);return(0,Qn.e)((t,r)=>{(e?fa(n,t,e):fa(n,t)).subscribe(r)})}function ho(n,e,t,r,i){return(a,u)=>{let d=t,g=e,y=0;a.subscribe(new jn.Q(u,C=>{const D=y++;g=d?n(g,C,D):(d=!0,C),r&&u.next(g)},i&&(()=>{d&&u.next(g),u.complete()})))}}function ws(n,e){return(0,Qn.e)(ho(n,e,arguments.length>=2,!0))}function Di(n,e){return(0,Qn.e)((t,r)=>{let i=0;t.subscribe(new jn.Q(r,a=>n.call(e,a,i++)&&r.next(a)))})}function Si(n){return(0,Qn.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe(new jn.Q(t,void 0,void 0,u=>{a=(0,di.Xf)(n(u,Si(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var br=F(5577),Gf=F(576);function vn(n,e){return(0,Gf.m)(e)?(0,br.z)(n,e,1):(0,br.z)(n,1)}function Xl(n){return n<=0?()=>co.E:(0,Qn.e)((e,t)=>{let r=[];e.subscribe(new jn.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function No(n=Hd){return(0,Qn.e)((e,t)=>{let r=!1;e.subscribe(new jn.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Hd(){return new ha}function am(n){return(0,Qn.e)((e,t)=>{let r=!1;e.subscribe(new jn.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function pa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Di((i,a)=>n(i,a,r)):ys.y,(0,vs.q)(1),t?am(e):No(()=>new ha))}var hi=F(8505);class ts{constructor(e,t){this.id=e,this.url=t}}class Gn extends ts{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mo extends ts{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ma extends ts{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ev extends ts{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Gd extends ts{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fi extends ts{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hs extends ts{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qd extends ts{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _a extends ts{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Po{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class eu{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Wd{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ic{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zd{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ul{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const It="primary";class dl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ti(n){return new dl(n)}const lm="ngNavigationCancelingError";function Tc(n){const e=Error("NavigationCancelingError: "+n);return e[lm]=!0,e}function Wf(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const u=r[a],d=n[a];if(u.startsWith(":"))i[u.substring(1)]=d;else if(u!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function jr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Dc(n[i],e[i]))return!1;return!0}function Dc(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Sc(n){return Array.prototype.concat.apply([],n)}function tu(n){return n.length>0?n[n.length-1]:null}function $r(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function qn(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,Tn.D)(Promise.resolve(n)):lt(n)}const hl={exact:function iu(n,e,t){if(!ct(n.segments,e.segments)||!U(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!iu(n.children[r],e.children[r],t))return!1;return!0},subset:S},xc={exact:function ru(n,e){return jr(n,e)},subset:function T(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Dc(n[t],e[t]))},ignored:()=>!0};function nu(n,e,t){return hl[t.paths](n.root,e.root,t.matrixParams)&&xc[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function S(n,e,t){return P(n,e,e.segments,t)}function P(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ct(i,t)||e.hasChildren()||!U(i,t,r))}if(n.segments.length===t.length){if(!ct(n.segments,t)||!U(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!S(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(ct(n.segments,i)&&U(n.segments,i,r)&&n.children[It])&&P(n.children[It],e,a,r)}}function U(n,e,t){return e.every((r,i)=>xc[t](n[i].parameters,r.parameters))}class K{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ti(this.queryParams)),this._queryParamMap}toString(){return Wn.serialize(this)}}class te{constructor(e,t){this.segments=e,this.children=t,this.parent=null,$r(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zn(this)}}class Re{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ti(this.parameters)),this._parameterMap}toString(){return ko(this)}}function ct(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Wt{}class Tt{parse(e){const t=new nv(e);return new K(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${rs(e.root,!0)}`,r=function ya(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${ss(t)}=${ss(i)}`).join("&"):`${ss(t)}=${ss(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function su(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Wn=new Tt;function zn(n){return n.segments.map(e=>ko(e)).join("/")}function rs(n,e){if(!n.hasChildren())return zn(n);if(e){const t=n.children[It]?rs(n.children[It],!1):"",r=[];return $r(n.children,(i,a)=>{a!==It&&r.push(`${a}:${rs(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Lt(n,e){let t=[];return $r(n.children,(r,i)=>{i===It&&(t=t.concat(e(r,i)))}),$r(n.children,(r,i)=>{i!==It&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===It?[rs(n.children[It],!1)]:[`${i}:${rs(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[It]?`${zn(n)}/${t[0]}`:`${zn(n)}/(${t.join("//")})`}}function is(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ss(n){return is(n).replace(/%3B/gi,";")}function Oo(n){return is(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ni(n){return decodeURIComponent(n)}function Gs(n){return ni(n.replace(/\+/g,"%20"))}function ko(n){return`${Oo(n.path)}${function ou(n){return Object.keys(n).map(e=>`;${Oo(e)}=${Oo(n[e])}`).join("")}(n.parameters)}`}const fl=/^[^\/()?;=#]+/;function Zd(n){const e=n.match(fl);return e?e[0]:""}const tv=/^[^=?&#]+/,cm=/^[^&#]+/;class nv{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new te([],{}):new te([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[It]=new te(e,t)),r}parseSegment(){const e=Zd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Re(ni(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Zd(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Zd(this.remaining);i&&(r=i,this.capture(r))}e[ni(t)]=ni(r)}parseQueryParam(e){const t=function Zf(n){const e=n.match(tv);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function Z0(n){const e=n.match(cm);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=Gs(t),a=Gs(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Zd(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=It);const u=this.parseChildren();t[a]=1===Object.keys(u).length?u[It]:new te([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Kd{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Kf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Kf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=au(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return au(e,this._root).map(t=>t.value)}}function Kf(n,e){if(n===e.value)return e;for(const t of e.children){const r=Kf(n,t);if(r)return r}return null}function au(n,e){if(n===e.value)return[e];for(const t of e.children){const r=au(n,t);if(r.length)return r.unshift(e),r}return[]}class os{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function qs(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class dm extends Kd{constructor(e,t){super(e),this.snapshot=t,Jd(this,e)}toString(){return this.snapshot.toString()}}function Yd(n,e){const t=function K0(n,e){const u=new uu([],{},{},"",{},It,e,null,n.root,-1,{});return new Rc("",new os(u,[]))}(n,e),r=new Xi([new Re("",{})]),i=new Xi({}),a=new Xi({}),u=new Xi({}),d=new Xi(""),g=new Ws(r,i,u,d,a,It,e,t.root);return g.snapshot=t.root,new dm(new os(g,[]),t)}class Ws{constructor(e,t,r,i,a,u,d,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=d,this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ct.U)(e=>ti(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ct.U)(e=>ti(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function lu(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Qd(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class uu{constructor(e,t,r,i,a,u,d,g,y,C,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=d,this.routeConfig=g,this._urlSegment=y,this._lastPathIndex=C,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ti(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ti(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Rc extends Kd{constructor(e,t){super(t),this.url=e,Jd(this,t)}toString(){return Yf(this._root)}}function Jd(n,e){e.value._routerState=n,e.children.forEach(t=>Jd(n,t))}function Yf(n){const e=n.children.length>0?` { ${n.children.map(Yf).join(", ")} } `:"";return`${n.value}${e}`}function Xd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,jr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),jr(e.params,t.params)||n.params.next(t.params),function zf(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!jr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),jr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function eh(n,e){const t=jr(n.params,e.params)&&function Qe(n,e){return ct(n,e)&&n.every((t,r)=>jr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||eh(n.parent,e.parent))}function cu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function fo(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return cu(n,r,i);return cu(n,r)})}(n,e,t);return new os(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(d=>cu(n,d)),u}}const r=function Nc(n){return new Ws(new Xi(n.url),new Xi(n.params),new Xi(n.queryParams),new Xi(n.fragment),new Xi(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>cu(n,a));return new os(r,i)}}function Qf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function du(n){return"object"==typeof n&&null!=n&&n.outlets}function hm(n,e,t,r,i){let a={};return r&&$r(r,(u,d)=>{a[d]=Array.isArray(u)?u.map(g=>`${g}`):`${u}`}),new K(t.root===n?e:sv(t.root,n,e),a,i)}function sv(n,e,t){const r={};return $r(n.children,(i,a)=>{r[a]=i===e?t:sv(i,e,t)}),new te(n.segments,r)}class fm{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Qf(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(du);if(i&&i!==tu(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class hu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function uv(n,e,t){if(n||(n=new te([],{})),0===n.segments.length&&n.hasChildren())return th(n,e,t);const r=function nh(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const u=n.segments[i],d=t[r];if(du(d))break;const g=`${d}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&y&&"object"==typeof y&&void 0===y.outlets){if(!Jf(g,y,u))return a;r+=2}else{if(!Jf(g,{},u))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new te(n.segments.slice(0,r.pathIndex),{});return a.children[It]=new te(n.segments.slice(r.pathIndex),n.children),th(a,0,i)}return r.match&&0===i.length?new te(n.segments,{}):r.match&&!n.hasChildren()?rh(n,e,t):r.match?th(n,0,i):rh(n,e,t)}function th(n,e,t){if(0===t.length)return new te(n.segments,{});{const r=function lv(n){return du(n[0])?n[0].outlets:{[It]:n}}(t),i={};return $r(r,(a,u)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[u]=uv(n.children[u],e,a))}),$r(n.children,(a,u)=>{void 0===r[u]&&(i[u]=a)}),new te(n.segments,i)}}function rh(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(du(a)){const g=po(a.outlets);return new te(r,g)}if(0===i&&Qf(t[0])){r.push(new Re(n.segments[e].path,va(t[0]))),i++;continue}const u=du(a)?a.outlets[It]:`${a}`,d=i<t.length-1?t[i+1]:null;u&&d&&Qf(d)?(r.push(new Re(u,va(d))),i+=2):(r.push(new Re(u,{})),i++)}return new te(r,{})}function po(n){const e={};return $r(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=rh(new te([],{}),0,t))}),e}function va(n){const e={};return $r(n,(t,r)=>e[r]=`${t}`),e}function Jf(n,e,t){return n==t.path&&jr(e,t.parameters)}class mm{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Xd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=qs(t);e.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,i[u],r),delete i[u]}),$r(i,(a,u)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=qs(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);if(r&&r.outlet){const u=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=qs(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=qs(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new ul(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Ic(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Xd(i),i===a)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(d.contexts),u.attachRef=d.componentRef,u.route=d.route.value,u.outlet&&u.outlet.attach(d.componentRef,d.route.value),Xd(d.route.value),this.activateChildRoutes(e,null,u.children)}else{const d=function Y0(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),g=d?d.module.componentFactoryResolver:null;u.attachRef=null,u.route=i,u.resolver=g,u.outlet&&u.outlet.activateWith(i,g),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class _m{constructor(e,t){this.routes=e,this.module=t}}function wa(n){return"function"==typeof n}function Fo(n){return n instanceof K}const pl=Symbol("INITIAL_VALUE");function Mc(){return Zt(n=>function al(...n){const e=(0,js.yG)(n),t=(0,js.jO)(n),{args:r,keys:i}=om(n);if(0===r.length)return(0,Tn.D)([],e);const a=new Er.y(function jd(n,e,t=ys.y){return r=>{ci(e,()=>{const{length:i}=n,a=new Array(i);let u=i,d=i;for(let g=0;g<i;g++)ci(e,()=>{const y=(0,Tn.D)(n[g],e);let C=!1;y.subscribe(new jn.Q(r,D=>{a[g]=D,C||(C=!0,d--),d||r.next(t(a.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>Ql(i,u):ys.y));return t?a.pipe(Yl(t)):a}(n.map(e=>e.pipe((0,vs.q)(1),es(pl)))).pipe(ws((e,t)=>{let r=!1;return t.reduce((i,a,u)=>i!==pl?i:(a===pl&&(r=!0),r||!1!==a&&u!==t.length-1&&!Fo(a)?i:a),e)},pl),Di(e=>e!==pl),(0,Ct.U)(e=>Fo(e)?e:!0===e),(0,vs.q)(1)))}class wm{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Pc,this.attachRef=null}}class Pc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new wm,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let fu=(()=>{class n{constructor(t,r,i,a,u){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=a||It,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const u=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,g=new ih(t,d,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,g),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Pc),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class ih{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ws?this.route:e===Pc?this.childContexts:this.parent.get(e,t)}}let tp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[fu],encapsulation:2}),n})();function Oc(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];cv(r,Cr(e,r))}}function cv(n,e){n.children&&Oc(n.children,e)}function Cr(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function np(n){const e=n.children&&n.children.map(np),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==It&&(t.component=tp),t}function zs(n){return n.outlet||It}function v(n,e){const t=n.filter(r=>zs(r)===e);return t.push(...n.filter(r=>zs(r)!==e)),t}const p={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function _(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},p):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(e.matcher||Wf)(t,n,e);if(!a)return Object.assign({},p);const u={};$r(a.posParams,(g,y)=>{u[y]=g.path});const d=a.consumed.length>0?Object.assign(Object.assign({},u),a.consumed[a.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:d,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function E(n,e,t,r,i="corrected"){if(t.length>0&&function Q(n,e,t){return t.some(r=>Ze(n,e,r)&&zs(r)!==It)}(n,t,r)){const u=new te(e,function M(n,e,t,r){const i={};i[It]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&zs(a)!==It){const u=new te([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[zs(a)]=u}return i}(n,e,r,new te(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function me(n,e,t){return t.some(r=>Ze(n,e,r))}(n,t,r)){const u=new te(n.segments,function x(n,e,t,r,i,a){const u={};for(const d of r)if(Ze(n,t,d)&&!i[zs(d)]){const g=new te([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===a?n.segments.length:e.length,u[zs(d)]=g}return Object.assign(Object.assign({},i),u)}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const a=new te(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Ze(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ve(n,e,t,r){return!!(zs(n)===r||r!==It&&Ze(e,t,n))&&("**"===n.path||_(e,n,t).matched)}function ot(n,e,t){return 0===e.length&&!n.children[t]}class tn{constructor(e){this.segmentGroup=e||null}}class Dn{constructor(e){this.urlTree=e}}function Pr(n){return new Er.y(e=>e.error(new tn(n)))}function Zn(n){return new Er.y(e=>e.error(new Dn(n)))}function Ea(n){return new Er.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class bm{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=E(this.urlTree.root,[],[],this.config).segmentGroup,t=new te(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,It).pipe((0,Ct.U)(a=>this.createUrlTree(oh(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Si(a=>{if(a instanceof Dn)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof tn?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,It).pipe((0,Ct.U)(i=>this.createUrlTree(oh(i),e.queryParams,e.fragment))).pipe(Si(i=>{throw i instanceof tn?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new te([],{[It]:e}):e;return new K(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ct.U)(a=>new te([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Tn.D)(i).pipe(vn(a=>{const u=r.children[a],d=v(t,a);return this.expandSegmentGroup(e,d,u,a).pipe((0,Ct.U)(g=>({segment:g,outlet:a})))}),ws((a,u)=>(a[u.outlet]=u.segment,a),{}),function qf(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Di((i,a)=>n(i,a,r)):ys.y,Xl(1),t?am(e):No(()=>new ha))}())}expandSegment(e,t,r,i,a,u){return(0,Tn.D)(r).pipe(vn(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,a,u).pipe(Si(y=>{if(y instanceof tn)return lt(null);throw y}))),pa(d=>!!d),Si((d,g)=>{if(d instanceof ha||"EmptyError"===d.name){if(ot(t,i,a))return lt(new te([],{}));throw new tn(t)}throw d}))}expandSegmentAgainstRoute(e,t,r,i,a,u,d){return Ve(i,t,a,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,u):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u):Pr(t):Pr(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Zn(a):this.lineralizeSegments(r,a).pipe((0,br.z)(u=>{const d=new te(u,{});return this.expandSegment(e,d,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){const{matched:d,consumedSegments:g,lastChild:y,positionalParamSegments:C}=_(t,i,a);if(!d)return Pr(t);const D=this.applyRedirectCommands(g,i.redirectTo,C);return i.redirectTo.startsWith("/")?Zn(D):this.lineralizeSegments(i,D).pipe((0,br.z)(N=>this.expandSegment(e,t,r,N.concat(a.slice(y)),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?lt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Ct.U)(N=>(r._loadedConfig=N,new te(i,{})))):lt(new te(i,{}));const{matched:u,consumedSegments:d,lastChild:g}=_(t,r,i);if(!u)return Pr(t);const y=i.slice(g);return this.getChildConfig(e,r,i).pipe((0,br.z)(D=>{const N=D.module,L=D.routes,{segmentGroup:j,slicedSegments:ne}=E(t,d,y,L),le=new te(j.segments,j.children);if(0===ne.length&&le.hasChildren())return this.expandChildren(N,L,le).pipe((0,Ct.U)(ze=>new te(d,ze)));if(0===L.length&&0===ne.length)return lt(new te(d,{}));const Ge=zs(r)===a;return this.expandSegment(N,le,L,ne,Ge?It:a,!0).pipe((0,Ct.U)(Ye=>new te(d.concat(Ye.segments),Ye.children)))}))}getChildConfig(e,t,r){return t.children?lt(new _m(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?lt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,br.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Ct.U)(a=>(t._loadedConfig=a,a))):function kc(n){return new Er.y(e=>e.error(Tc(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):lt(new _m([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?lt(i.map(u=>{const d=e.get(u);let g;if(function ep(n){return n&&wa(n.canLoad)}(d))g=d.canLoad(t,r);else{if(!wa(d))throw new Error("Invalid CanLoad guard");g=d(t,r)}return qn(g)})).pipe(Mc(),(0,hi.b)(u=>{if(!Fo(u))return;const d=Tc(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw d.url=u,d}),(0,Ct.U)(u=>!0===u)):lt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return lt(r);if(i.numberOfChildren>1||!i.children[It])return Ea(e.redirectTo);i=i.children[It]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new K(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return $r(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[a]=t[d]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let u={};return $r(t.children,(d,g)=>{u[g]=this.createSegmentGroup(e,d,r,i)}),new te(a,u)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function oh(n){const e={};for(const r of Object.keys(n.children)){const a=oh(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function sh(n){if(1===n.numberOfChildren&&n.children[It]){const e=n.children[It];return new te(n.segments.concat(e.segments),e.children)}return n}(new te(n.segments,e))}class ah{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class pu{constructor(e,t){this.component=e,this.route=t}}function dv(n,e,t){const r=n._root;return sp(r,e?e._root:null,t,[r.value])}function gu(n,e,t){const r=function KD(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function sp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=qs(e);return n.children.forEach(u=>{(function hv(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,u=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const g=function YD(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ct(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ct(n.url,e.url)||!jr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!eh(n,e)||!jr(n.queryParams,e.queryParams);default:return!eh(n,e)}}(u,a,a.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new ah(r)):(a.data=u.data,a._resolvedData=u._resolvedData),sp(n,e,a.component?d?d.children:null:t,r,i),g&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new pu(d.outlet.component,u))}else u&&op(e,d,i),i.canActivateChecks.push(new ah(r)),sp(n,null,a.component?d?d.children:null:t,r,i)})(u,a[u.value.outlet],t,r.concat([u.value]),i),delete a[u.value.outlet]}),$r(a,(u,d)=>op(u,t.getContext(d),i)),i}function op(n,e,t){const r=qs(n),i=n.value;$r(r,(a,u)=>{op(a,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new pu(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class rS{}function X0(n){return new Er.y(e=>e.error(n))}class eb{constructor(e,t,r,i,a,u){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=u}recognize(){const e=E(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,It);if(null===t)return null;const r=new uu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},It,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new os(r,t),a=new Rc(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=lu(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const u=t.children[a],d=v(e,a),g=this.processSegmentGroup(d,u,a);if(null===g)return null;r.push(...g)}const i=Fc(r);return function sS(n){n.sort((e,t)=>e.value.outlet===It?-1:t.value.outlet===It?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const u=this.processSegmentAgainstRoute(a,t,r,i);if(null!==u)return u}return ot(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Ve(e,t,r,i))return null;let a,u=[],d=[];if("**"===e.path){const L=r.length>0?tu(r).parameters:{};a=new uu(r,L,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fv(e),zs(e),e.component,e,lS(t),uS(t)+r.length,cS(e))}else{const L=_(t,e,r);if(!L.matched)return null;u=L.consumedSegments,d=r.slice(L.lastChild),a=new uu(u,L.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fv(e),zs(e),e.component,e,lS(t),uS(t)+u.length,cS(e))}const g=function oS(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:y,slicedSegments:C}=E(t,u,d,g.filter(L=>void 0===L.redirectTo),this.relativeLinkResolution);if(0===C.length&&y.hasChildren()){const L=this.processChildren(g,y);return null===L?null:[new os(a,L)]}if(0===g.length&&0===C.length)return[new os(a,[])];const D=zs(e)===i,N=this.processSegment(g,y,C,D?It:i);return null===N?null:[new os(a,N)]}}function aS(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Fc(n){const e=[],t=new Set;for(const r of n){if(!aS(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Fc(r.children);e.push(new os(r.value,i))}return e.filter(r=>!t.has(r))}function lS(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function uS(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function fv(n){return n.data||{}}function cS(n){return n.resolve||{}}function Lc(n){return Zt(e=>{const t=n(e);return t?(0,Tn.D)(t).pipe((0,Ct.U)(()=>e)):lt(e)})}class mv extends class rb{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const lp=new h.OlP("ROUTES");class _v{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Ct.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const u=a.create(e);return new _m(Sc(u.injector.get(lp,void 0,h.XFs.Self|h.XFs.Optional)).map(np),u)}),Si(a=>{throw t._loader$=void 0,a}));return t._loader$=new ll(i,()=>new $s.x).pipe(Ro()),t._loader$}loadModuleFactory(e){return qn(e()).pipe((0,br.z)(t=>t instanceof h.YKP?lt(t):(0,Tn.D)(this.compiler.compileModuleAsync(t))))}}class lh{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function yv(n){throw n}function ib(n,e,t){return e.parse("/")}function sb(n,e){return lt(null)}const vv={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ri=(()=>{class n{constructor(t,r,i,a,u,d,g){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new $s.x,this.errorHandler=yv,this.malformedUriErrorHandler=ib,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:sb,afterPreactivation:sb},this.urlHandlingStrategy=new lh,this.routeReuseStrategy=new mv,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(h.h0i),this.console=u.get(h.c2e);const D=u.get(h.R0b);this.isNgZoneEnabled=D instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function Ac(){return new K(new te([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new _v(u,d,N=>this.triggerEvent(new Po(N)),N=>this.triggerEvent(new eu(N))),this.routerState=Yd(this.currentUrlTree,this.rootComponentType),this.transitions=new Xi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Di(i=>0!==i.id),(0,Ct.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Zt(i=>{let a=!1,u=!1;return lt(i).pipe((0,hi.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Zt(d=>{const g=this.browserUrlTree.toString(),y=!this.navigated||d.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return Cm(d.source)&&(this.browserUrlTree=d.extractedUrl),lt(d).pipe(Zt(D=>{const N=this.transitions.getValue();return r.next(new Gn(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),N!==this.transitions.getValue()?co.E:Promise.resolve(D)}),function rp(n,e,t,r){return Zt(i=>function Em(n,e,t,r,i){return new bm(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Ct.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,hi.b)(D=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function ba(n,e,t,r,i){return(0,br.z)(a=>function iS(n,e,t,r,i="emptyOnly",a="legacy"){try{const u=new eb(n,e,t,r,i,a).recognize();return null===u?X0(new rS):lt(u)}catch(u){return X0(u)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,Ct.U)(u=>Object.assign(Object.assign({},a),{targetSnapshot:u}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,hi.b)(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const L=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(L,D)}this.browserUrlTree=D.urlAfterRedirects}const N=new Gd(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(N)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:L,source:j,restoredState:ne,extras:le}=d,Ge=new Gn(N,this.serializeUrl(L),j,ne);r.next(Ge);const Je=Yd(L,this.rootComponentType).snapshot;return lt(Object.assign(Object.assign({},d),{targetSnapshot:Je,urlAfterRedirects:L,extras:Object.assign(Object.assign({},le),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),co.E}),Lc(d=>{const{targetSnapshot:g,id:y,extractedUrl:C,rawUrl:D,extras:{skipLocationChange:N,replaceUrl:L}}=d;return this.hooks.beforePreactivation(g,{navigationId:y,appliedUrlTree:C,rawUrlTree:D,skipLocationChange:!!N,replaceUrl:!!L})}),(0,hi.b)(d=>{const g=new Fi(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(g)}),(0,Ct.U)(d=>Object.assign(Object.assign({},d),{guards:dv(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function ap(n,e){return(0,br.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=t;return 0===u.length&&0===a.length?lt(Object.assign(Object.assign({},t),{guardsResult:!0})):function QD(n,e,t,r){return(0,Tn.D)(n).pipe((0,br.z)(i=>function nS(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?lt(a.map(d=>{const g=gu(d,e,i);let y;if(function vm(n){return n&&wa(n.canDeactivate)}(g))y=qn(g.canDeactivate(n,e,t,r));else{if(!wa(g))throw new Error("Invalid CanDeactivate guard");y=qn(g(n,e,t,r))}return y.pipe(pa())})).pipe(Mc()):lt(!0)}(i.component,i.route,t,e,r)),pa(i=>!0!==i,!0))}(u,r,i,n).pipe((0,br.z)(d=>d&&function Xf(n){return"boolean"==typeof n}(d)?function JD(n,e,t,r){return(0,Tn.D)(e).pipe(vn(i=>fa(function eS(n,e){return null!==n&&e&&e(new Wd(n)),lt(!0)}(i.route.parent,r),function XD(n,e){return null!==n&&e&&e(new zd(n)),lt(!0)}(i.route,r),function J0(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(u=>function ip(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>bc(()=>lt(u.guards.map(g=>{const y=gu(g,u.node,t);let C;if(function ym(n){return n&&wa(n.canActivateChild)}(y))C=qn(y.canActivateChild(r,n));else{if(!wa(y))throw new Error("Invalid CanActivateChild guard");C=qn(y(r,n))}return C.pipe(pa())})).pipe(Mc())));return lt(a).pipe(Mc())}(n,i.path,t),function tS(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return lt(!0);const i=r.map(a=>bc(()=>{const u=gu(a,e,t);let d;if(function Q0(n){return n&&wa(n.canActivate)}(u))d=qn(u.canActivate(e,n));else{if(!wa(u))throw new Error("Invalid CanActivate guard");d=qn(u(e,n))}return d.pipe(pa())}));return lt(i).pipe(Mc())}(n,i.route,t))),pa(i=>!0!==i,!0))}(r,a,n,e):lt(d)),(0,Ct.U)(d=>Object.assign(Object.assign({},t),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,hi.b)(d=>{if(Fo(d.guardsResult)){const y=Tc(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw y.url=d.guardsResult,y}const g=new Hs(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(g)}),Di(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),Lc(d=>{if(d.guards.canActivateChecks.length)return lt(d).pipe((0,hi.b)(g=>{const y=new qd(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}),Zt(g=>{let y=!1;return lt(g).pipe(function pv(n,e){return(0,br.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return lt(t);let a=0;return(0,Tn.D)(i).pipe(vn(u=>function gv(n,e,t,r){return function dS(n,e,t,r){const i=Object.keys(n);if(0===i.length)return lt({});const a={};return(0,Tn.D)(i).pipe((0,br.z)(u=>function tb(n,e,t,r){const i=gu(n,e,r);return qn(i.resolve?i.resolve(e,t):i(e,t))}(n[u],e,t,r).pipe((0,hi.b)(d=>{a[u]=d}))),Xl(1),(0,br.z)(()=>Object.keys(a).length===i.length?lt(a):co.E))}(n._resolve,n,e,r).pipe((0,Ct.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),lu(n,t).resolve),null)))}(u.route,r,n,e)),(0,hi.b)(()=>a++),Xl(1),(0,br.z)(u=>a===i.length?lt(t):co.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,hi.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(g),this.cancelNavigationTransition(g,"At least one route resolver didn't emit any value."))}}))}),(0,hi.b)(g=>{const y=new _a(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}))}),Lc(d=>{const{targetSnapshot:g,id:y,extractedUrl:C,rawUrl:D,extras:{skipLocationChange:N,replaceUrl:L}}=d;return this.hooks.afterPreactivation(g,{navigationId:y,appliedUrlTree:C,rawUrlTree:D,skipLocationChange:!!N,replaceUrl:!!L})}),(0,Ct.U)(d=>{const g=function rv(n,e,t){const r=cu(n,e._root,t?t._root:void 0);return new dm(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return Object.assign(Object.assign({},d),{targetRouterState:g})}),(0,hi.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,Ct.U)(r=>(new mm(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,hi.b)({next(){a=!0},complete(){a=!0}}),function ga(n){return(0,Qn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var d;a||u||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(d=this.currentNavigation)||void 0===d?void 0:d.id)===i.id&&(this.currentNavigation=null)}),Si(d=>{if(u=!0,function um(n){return n&&n[lm]}(d)){const g=Fo(d.url);g||(this.navigated=!0,this.restoreHistory(i,!0));const y=new ma(i.id,this.serializeUrl(i.extractedUrl),d.message);r.next(y),g?setTimeout(()=>{const C=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Cm(i.source)};this.scheduleNavigation(C,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new ev(i.id,this.serializeUrl(i.extractedUrl),d);r.next(g);try{i.resolve(this.errorHandler(d))}catch(y){i.reject(y)}}return co.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},u=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(u){const g=Object.assign({},u);delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(a.state=g)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Oc(t),this.config=t.map(np),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:u,queryParamsHandling:d,preserveFragment:g}=r,y=i||this.routerState.root,C=g?this.currentUrlTree.fragment:u;let D=null;switch(d){case"merge":D=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=a||null}return null!==D&&(D=this.removeEmptyProps(D)),function iv(n,e,t,r,i){if(0===t.length)return hm(e.root,e.root,e,r,i);const a=function pm(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new fm(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const d={};return $r(a.outlets,(g,y)=>{d[y]="string"==typeof g?g.split("/"):g}),[...i,{outlets:d}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===u?(a.split("/").forEach((d,g)=>{0==g&&"."===d||(0==g&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,a]},[]);return new fm(t,e,r)}(t);if(a.toRoot())return hm(e.root,new te([],{}),e,r,i);const u=function ov(n,e,t){if(n.isAbsolute)return new hu(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new hu(a,a===e.root,0)}const r=Qf(n.commands[0])?0:1;return function av(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new hu(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),d=u.processChildren?th(u.segmentGroup,u.index,a.commands):uv(u.segmentGroup,u.index,a.commands);return hm(u.segmentGroup,d,e,r,i)}(y,this.currentUrlTree,t,D,null!=C?C:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Fo(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function fS(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},vv):!1===r?Object.assign({},hS):r,Fo(t))return nu(this.currentUrlTree,t,i);const a=this.parseUrl(t);return nu(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Mo(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,u){var d,g,y;if(this.disposed)return Promise.resolve(!1);const C=this.transitions.value,D=Cm(r)&&C&&!Cm(C.source),N=C.rawUrl.toString()===t.toString(),L=C.id===(null===(d=this.currentNavigation)||void 0===d?void 0:d.id);if(D&&N&&L)return Promise.resolve(!0);let ne,le,Ge;u?(ne=u.resolve,le=u.reject,Ge=u.promise):Ge=new Promise((ze,Nt)=>{ne=ze,le=Nt});const Je=++this.navigationId;let Ye;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),Ye=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):Ye=0,this.setTransition({id:Je,targetPageId:Ye,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:ne,reject:le,promise:Ge,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ge.catch(ze=>Promise.reject(ze))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===u?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new ma(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Cm(n){return"imperative"!==n}let Im=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new $s.x,this.subscription=t.events.subscribe(a=>{a instanceof Mo&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,u){if(0!==t||r||i||a||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const d={skipLocationChange:Vc(this.skipLocationChange),replaceUrl:Vc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,d),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Vc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ri),h.Y36(Ws),h.Y36(ye))},n.\u0275dir=h.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&h.uIk("target",r.target)("href",r.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),n})();function Vc(n){return""===n||!!n}class Tm{}class ab{preload(e,t){return lt(null)}}let bv=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new _v(i,r,g=>t.triggerEvent(new Po(g)),g=>t.triggerEvent(new eu(g)))}setUpPreloading(){this.subscription=this.router.events.pipe(Di(t=>t instanceof Mo),vn(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const u=a._loadedConfig;i.push(this.processRoutes(u.module,u.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,Tn.D)(i).pipe((0,xo.J)(),(0,Ct.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?lt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,br.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ri),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(Tm))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Dm=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Gn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Mo&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof cl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new cl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const mu=new h.OlP("ROUTER_CONFIGURATION"),Cv=new h.OlP("ROUTER_FORROOT_GUARD"),gS=[st,{provide:Wt,useClass:Tt},{provide:ri,useFactory:function hb(n,e,t,r,i,a,u={},d,g){const y=new ri(null,n,e,t,r,i,Sc(a));return d&&(y.urlHandlingStrategy=d),g&&(y.routeReuseStrategy=g),function xm(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,y),u.enableTracing&&y.events.subscribe(C=>{var D,N;null===(D=console.group)||void 0===D||D.call(console,`Router Event: ${C.constructor.name}`),console.log(C.toString()),console.log(C),null===(N=console.groupEnd)||void 0===N||N.call(console)}),y},deps:[Wt,Pc,st,h.zs3,h.Sil,lp,mu,[class eP{},new h.FiY],[class nb{},new h.FiY]]},Pc,{provide:Ws,useFactory:function Rm(n){return n.routerState.root},deps:[ri]},bv,ab,class pS{preload(e,t){return t().pipe(Si(()=>lt(null)))}},{provide:mu,useValue:{enableTracing:!1}}];function Sm(){return new h.PXZ("Router",ri)}let lb=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[gS,Am(t),{provide:Cv,useFactory:db,deps:[[ri,new h.FiY,new h.tp0]]},{provide:mu,useValue:r||{}},{provide:ye,useFactory:cb,deps:[de,[new h.tBr(ke),new h.FiY],mu]},{provide:Dm,useFactory:ub,deps:[ri,ic,mu]},{provide:Tm,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:ab},{provide:h.PXZ,multi:!0,useFactory:Sm},[Nm,{provide:h.ip1,multi:!0,useFactory:Iv,deps:[Nm]},{provide:Mm,useFactory:fb,deps:[Nm]},{provide:h.tb,multi:!0,useExisting:Mm}]]}}static forChild(t){return{ngModule:n,providers:[Am(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Cv,8),h.LFG(ri,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function ub(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Dm(n,e,t)}function cb(n,e,t={}){return t.useHash?new je(n,e):new Be(n,e)}function db(n){return"guarded"}function Am(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:lp,multi:!0,useValue:n}]}let Nm=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new $s.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(d=>r=d),a=this.injector.get(ri),u=this.injector.get(mu);return"disabled"===u.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?lt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(mu),i=this.injector.get(bv),a=this.injector.get(Dm),u=this.injector.get(ri),d=this.injector.get(h.z2F);t===d.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&u.initialNavigation(),i.setUpPreloading(),a.init(),u.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Iv(n){return n.appInitializer.bind(n)}function fb(n){return n.bootstrapListener.bind(n)}const Mm=new h.OlP("Router Initializer");let gb=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Uc=(()=>{class n extends gb{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const Lo=new h.OlP("NgValueAccessor"),nP={provide:Lo,useExisting:(0,h.Gpc)(()=>_u),multi:!0},mS=new h.OlP("CompositionEventMode");let _u=(()=>{class n extends gb{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function mb(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(mS,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[h._Bn([nP]),h.qOj]}),n})();function yu(n){return null==n||0===n.length}function _b(n){return null!=n&&"number"==typeof n.length}const Kn=new h.OlP("NgValidators"),vu=new h.OlP("NgAsyncValidators"),yb=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class fi{static min(e){return function vb(n){return e=>{if(yu(e.value)||yu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function wb(n){return e=>{if(yu(e.value)||yu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return Eb(e)}static requiredTrue(e){return function Sv(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function bb(n){return yu(n.value)||yb.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Cb(n){return e=>yu(e.value)||!_b(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Ib(n){return e=>_b(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Ht(n){if(!n)return ch;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(yu(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Pm(e)}static composeAsync(e){return Om(e)}}function Eb(n){return yu(n.value)?{required:!0}:null}function ch(n){return null}function Av(n){return null!=n}function xv(n){const e=(0,h.QGY)(n)?(0,Tn.D)(n):n;return(0,h.CqO)(e),e}function cp(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function go(n,e){return e.map(t=>t(n))}function Db(n){return n.map(e=>function Tb(n){return!n.validate}(e)?e:t=>e.validate(t))}function Pm(n){if(!n)return null;const e=n.filter(Av);return 0==e.length?null:function(t){return cp(go(t,e))}}function Vo(n){return null!=n?Pm(Db(n)):null}function Om(n){if(!n)return null;const e=n.filter(Av);return 0==e.length?null:function(t){return function pb(...n){const e=(0,js.jO)(n),{args:t,keys:r}=om(n),i=new Er.y(a=>{const{length:u}=t;if(!u)return void a.complete();const d=new Array(u);let g=u,y=u;for(let C=0;C<u;C++){let D=!1;(0,di.Xf)(t[C]).subscribe(new jn.Q(a,N=>{D||(D=!0,y--),d[C]=N},()=>g--,void 0,()=>{(!g||!D)&&(y||a.next(r?Ql(r,d):d),a.complete())}))}});return e?i.pipe(Yl(e)):i}(go(t,e).map(xv)).pipe((0,Ct.U)(cp))}}function km(n){return null!=n?Om(Db(n)):null}function Fm(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function _S(n){return n._rawValidators}function Rv(n){return n._rawAsyncValidators}function Sb(n){return n?Array.isArray(n)?n:[n]:[]}function Bc(n,e){return Array.isArray(n)?n.includes(e):n===e}function dp(n,e){const t=Sb(e);return Sb(n).forEach(i=>{Bc(t,i)||t.push(i)}),t}function Lm(n,e){return Sb(e).filter(t=>!Bc(n,t))}class Vm{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Vo(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=km(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ca extends Vm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Es extends Vm{get formDirective(){return null}get path(){return null}}class Ab{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let hp=(()=>{class n extends Ab{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ca,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[h.qOj]}),n})(),fp=(()=>{class n extends Ab{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Es,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[h.qOj]}),n})();function Nv(n,e){return[...e.path,n]}function mo(n,e){pp(n,e),e.valueAccessor.writeValue(n.value),function Mv(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ml(n,e)})}(n,e),function Pb(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function vS(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ml(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Mb(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function dh(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),gp(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function jm(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function pp(n,e){const t=_S(n);null!==e.validator?n.setValidators(Fm(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Rv(n);null!==e.asyncValidator?n.setAsyncValidators(Fm(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();jm(e._rawValidators,i),jm(e._rawAsyncValidators,i)}function gp(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=_S(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(u=>u!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=Rv(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(u=>u!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return jm(e._rawValidators,r),jm(e._rawAsyncValidators,r),t}function ml(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Ov(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function wu(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===_u?t=a:function wS(n){return Object.getPrototypeOf(n.constructor)===Uc}(a)?r=a:i=a}),i||r||t||null}function fh(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Ia="VALID",$m="INVALID",$c="PENDING",ph="DISABLED";function _p(n){return(Hm(n)?n.validators:n)||null}function Fv(n){return Array.isArray(n)?Vo(n):n||null}function gh(n,e){return(Hm(e)?e.asyncValidators:n)||null}function Fb(n){return Array.isArray(n)?km(n):n||null}function Hm(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const ES=n=>n instanceof Yn,Gm=n=>n instanceof mh;function Vb(n){return ES(n)?n.value:n.getRawValue()}function Lv(n,e){const t=Gm(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[e])throw new h.vHH(1001,"")}function Ub(n,e){Gm(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new h.vHH(1002,"")})}class Vv{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Fv(this._rawValidators),this._composedAsyncValidatorFn=Fb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ia}get invalid(){return this.status===$m}get pending(){return this.status==$c}get disabled(){return this.status===ph}get enabled(){return this.status!==ph}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Fv(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Fb(e)}addValidators(e){this.setValidators(dp(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(dp(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Lm(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Lm(e,this._rawAsyncValidators))}hasValidator(e){return Bc(this._rawValidators,e)}hasAsyncValidator(e){return Bc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=$c,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ph,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ia,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ia||this.status===$c)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ph:Ia}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=$c,this._hasOwnPendingAsyncValidator=!0;const t=xv(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function kv(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Gm(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof bS)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?ph:this.errors?$m:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($c)?$c:this._anyControlsHaveStatus($m)?$m:Ia}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Hm(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Yn extends Vv{constructor(e=null,t,r){super(_p(t),gh(r,t)),this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){fh(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){fh(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class mh extends Vv{constructor(e,t,r){super(_p(t),gh(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Ub(this,e),Object.keys(e).forEach(r=>{Lv(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=Vb(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class bS extends Vv{constructor(e,t,r){super(_p(t),gh(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Ub(this,e),e.forEach((r,i)=>{Lv(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>Vb(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const $b={provide:Ca,useExisting:(0,h.Gpc)(()=>zm)},Hb=(()=>Promise.resolve(null))();let zm=(()=>{class n extends Ca{constructor(t,r,i,a){super(),this.control=new Yn,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=wu(0,a)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),Ov(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?Nv(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){mo(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Hb.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;Hb.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Es,9),h.Y36(Kn,10),h.Y36(vu,10),h.Y36(Lo,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([$b]),h.qOj,h.TTD]}),n})(),Zm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const DS={provide:Lo,useExisting:(0,h.Gpc)(()=>_h),multi:!0};let _h=(()=>{class n extends Uc{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[h._Bn([DS]),h.qOj]}),n})(),Uo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Km=new h.OlP("NgModelWithFormControlWarning"),RS={provide:Es,useExisting:(0,h.Gpc)(()=>Eu)};let Eu=(()=>{class n extends Es{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(gp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return mo(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){dh(t.control||null,t,!1),fh(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function hh(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(dh(r||null,t),ES(i)&&(mo(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Ob(n,e){pp(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Pv(n,e){return gp(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){pp(this.form,this),this._oldForm&&gp(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Kn,10),h.Y36(vu,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([RS]),h.qOj,h.TTD]}),n})();const jv={provide:Ca,useExisting:(0,h.Gpc)(()=>Hc)};let Hc=(()=>{class n extends Ca{constructor(t,r,i,a,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=wu(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),Ov(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Nv(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(Es,13),h.Y36(Kn,10),h.Y36(vu,10),h.Y36(Lo,10),h.Y36(Km,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([jv]),h.qOj,h.TTD]}),n})();const qv={provide:Kn,useExisting:(0,h.Gpc)(()=>Jm),multi:!0};let Jm=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?Eb(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[h._Bn([qv])]}),n})(),nC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Uo]]}),n})(),yh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[nC]}),n})(),US=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Km,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[nC]}),n})();var bs=F(4986),fn=F(5813);function e_(){return(0,Qn.e)((n,e)=>{let t,r=!1;n.subscribe(new jn.Q(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function Kv(n,e=ys.y){return n=null!=n?n:rC,(0,Qn.e)((t,r)=>{let i,a=!0;t.subscribe(new jn.Q(r,u=>{const d=e(u);(a||!n(i,d))&&(a=!1,i=d,r.next(u))}))})}function rC(n,e){return n===e}var ft,Hr=F(2011),Yv=(F(5881),F(3942)),Ce=F(5861),as=F(9681),_o=F(4859),Da=F(1877),k=F(2090),BS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_l={},iC=iC||{},Vt=BS||self;function t_(){}function n_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function vh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Zs="closure_uid_"+(1e9*Math.random()>>>0),CP=0;function IP(n,e,t){return n.call.apply(n.bind,arguments)}function sC(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function pi(n,e,t){return(pi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?IP:sC).apply(null,arguments)}function Ip(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ai(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var u=Array(arguments.length-2),d=2;d<arguments.length;d++)u[d-2]=arguments[d];return e.prototype[i].apply(r,u)}}function Gc(){this.s=this.s,this.o=this.o}var Qv={};Gc.prototype.s=!1,Gc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function bP(n){return Object.prototype.hasOwnProperty.call(n,Zs)&&n[Zs]||(n[Zs]=++CP)}(this);delete Qv[n]}},Gc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const aC=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},r_=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function lC(n){return Array.prototype.concat.apply([],arguments)}function Jv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function i_(n){return/^[\s\xa0]*$/.test(n)}var Gr,uC=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ls(n,e){return-1!=n.indexOf(e)}function wh(n,e){return n<e?-1:n>e?1:0}e:{var cC=Vt.navigator;if(cC){var Eh=cC.userAgent;if(Eh){Gr=Eh;break e}}Gr=""}function Xv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function dC(n){const e={};for(const t in n)e[t]=n[t];return e}var s_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bo(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<s_.length;a++)t=s_[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function qc(n){return qc[" "](n),n}qc[" "]=t_;var vl,n,Wc=ls(Gr,"Opera"),yl=ls(Gr,"Trident")||ls(Gr,"MSIE"),Ks=ls(Gr,"Edge"),Tp=Ks||yl,zc=ls(Gr,"Gecko")&&!(ls(Gr.toLowerCase(),"webkit")&&!ls(Gr,"Edge"))&&!(ls(Gr,"Trident")||ls(Gr,"MSIE"))&&!ls(Gr,"Edge"),bh=ls(Gr.toLowerCase(),"webkit")&&!ls(Gr,"Edge");function Zc(){var n=Vt.document;return n?n.documentMode:void 0}e:{var bu="",Cu=(n=Gr,zc?/rv:([^\);]+)(\)|;)/.exec(n):Ks?/Edge\/([\d\.]+)/.exec(n):yl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):bh?/WebKit\/(\S+)/.exec(n):Wc?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Cu&&(bu=Cu?Cu[1]:""),yl){var Iu=Zc();if(null!=Iu&&Iu>parseFloat(bu)){vl=String(Iu);break e}}vl=bu}var Ch={};var hC=Vt.document&&yl&&(Zc()||parseInt(vl,10))||void 0,fC=function(){if(!Vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Vt.addEventListener("test",t_,e),Vt.removeEventListener("test",t_,e)}catch(t){}return n}();function xi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Th(n,e){if(xi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(zc){e:{try{qc(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:pC[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Th.Z.h.call(this)}}xi.prototype.h=function(){this.defaultPrevented=!0},Ai(Th,xi);var pC={2:"touch",3:"pen",4:"mouse"};Th.prototype.h=function(){Th.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Dh="closure_listenable_"+(1e6*Math.random()|0),gC=0;function $S(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++gC,this.ca=this.fa=!1}function Dp(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function a_(n){this.src=n,this.g={},this.h=0}function l_(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=aC(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Dp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function u_(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}a_.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=u_(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new $S(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var tw="closure_lm_"+(1e6*Math.random()|0),nw={};function rw(n,e,t,r,i){if(r&&r.once)return yC(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)rw(n,e[a],t,r,i);return null}return t=bC(t),n&&n[Dh]?n.N(e,t,vh(r)?!!r.capture:!!r,i):mC(n,e,t,!1,r,i)}function mC(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var u=vh(i)?!!i.capture:!!i,d=Sp(n);if(d||(n[tw]=d=new a_(n)),(t=d.add(e,t,r,u,a)).proxy)return t;if(r=function _C(){var e=iw;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)fC||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(EC(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function yC(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)yC(n,e[a],t,r,i);return null}return t=bC(t),n&&n[Dh]?n.O(e,t,vh(r)?!!r.capture:!!r,i):mC(n,e,t,!0,r,i)}function vC(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)vC(n,e[a],t,r,i);else r=vh(r)?!!r.capture:!!r,t=bC(t),n&&n[Dh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=u_(a=n.g[e],t,r,i))&&(Dp(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Sp(n))&&(e=n.g[e.toString()],n=-1,e&&(n=u_(e,t,r,i)),(t=-1<n?e[n]:null)&&wC(t))}function wC(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Dh])l_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(EC(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Sp(e))?(l_(t,n),0==t.h&&(t.src=null,e[tw]=null)):Dp(n)}}}function EC(n){return n in nw?nw[n]:nw[n]="on"+n}function iw(n,e){if(n.ca)n=!0;else{e=new Th(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&wC(n),n=t.call(r,e)}return n}function Sp(n){return(n=n[tw])instanceof a_?n:null}var sw="__closure_events_fn_"+(1e9*Math.random()>>>0);function bC(n){return"function"==typeof n?n:(n[sw]||(n[sw]=function(e){return n.handleEvent(e)}),n[sw])}function Ri(){Gc.call(this),this.i=new a_(this),this.P=this,this.I=null}function Vi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new xi(e,n);else if(e instanceof xi)e.target=e.target||n;else{var i=e;Bo(e=new xi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];i=c_(u,r,!0,e)&&i}if(i=c_(u=e.g=n,r,!0,e)&&i,i=c_(u,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=c_(u=e.g=t[a],r,!1,e)&&i}function c_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.ca&&u.capture==t){var d=u.listener,g=u.ia||u.src;u.fa&&l_(n.i,u),i=!1!==d.call(g,r)&&i}}return i&&!r.defaultPrevented}Ai(Ri,Gc),Ri.prototype[Dh]=!0,Ri.prototype.removeEventListener=function(n,e,t,r){vC(this,n,e,t,r)},Ri.prototype.M=function(){if(Ri.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Dp(t[r]);delete n.g[e],n.h--}}this.I=null},Ri.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ri.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var d_=Vt.JSON.stringify;function TP(){var n=lw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var h_,Kc=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new GS,n=>n.reset());class GS{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function CC(n){Vt.setTimeout(()=>{throw n},0)}function ow(n,e){h_||function f_(){var n=Vt.Promise.resolve(void 0);h_=function(){n.then(qS)}}(),aw||(h_(),aw=!0),lw.add(n,e)}var aw=!1,lw=new class HS{constructor(){this.h=this.g=null}add(e,t){const r=Kc.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function qS(){for(var n;n=TP();){try{n.h.call(n.g)}catch(t){CC(t)}var e=Kc;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}aw=!1}function p_(n,e){Ri.call(this),this.h=n||1,this.g=e||Vt,this.j=pi(this.kb,this),this.l=Date.now()}function uw(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function cw(n,e,t){if("function"==typeof n)t&&(n=pi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=pi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Vt.setTimeout(n,e||0)}function IC(n){n.g=cw(()=>{n.g=null,n.i&&(n.i=!1,IC(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ai(p_,Ri),(ft=p_.prototype).da=!1,ft.S=null,ft.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Vi(this,"tick"),this.da&&(uw(this),this.start()))}},ft.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ft.M=function(){p_.Z.M.call(this),uw(this),delete this.g};class TC extends Gc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:IC(this)}M(){super.M(),this.g&&(Vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ap(n){Gc.call(this),this.h=n,this.g={}}Ai(Ap,Gc);var dw=[];function hw(n,e,t,r){Array.isArray(t)||(t&&(dw[0]=t.toString()),t=dw);for(var i=0;i<t.length;i++){var a=rw(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function g_(n){Xv(n.g,function(e,t){this.g.hasOwnProperty(t)&&wC(e)},n),n.g={}}function fw(){this.g=!0}function xp(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function DC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return d_(t)}catch(d){return e}}(n,t)+(r?" "+r:"")})}Ap.prototype.M=function(){Ap.Z.M.call(this),g_(this)},Ap.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fw.prototype.Aa=function(){this.g=!1},fw.prototype.info=function(){};var wl={},m_=null;function __(){return m_=m_||new Ri}function y_(n){xi.call(this,wl.Ma,n)}function Yc(n){const e=__();Vi(e,new y_(e,n))}function gw(n,e){xi.call(this,wl.STAT_EVENT,n),this.stat=e}function Cs(n){const e=__();Vi(e,new gw(e,n))}function SC(n,e){xi.call(this,wl.Na,n),this.size=e}function Sh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Vt.setTimeout(function(){n()},e)}wl.Ma="serverreachability",Ai(y_,xi),wl.STAT_EVENT="statevent",Ai(gw,xi),wl.Na="timingevent",Ai(SC,xi);var Np={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},AC={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function v_(){}function mw(){}v_.prototype.h=null;var _w,Ah={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Mp(){xi.call(this,"d")}function E_(){xi.call(this,"c")}function Pp(){}function xh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Ap(this),this.P=xC,this.W=new p_(n=Tp?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new b_}function b_(){this.i=null,this.g="",this.h=!1}Ai(Mp,xi),Ai(E_,xi),Ai(Pp,v_),Pp.prototype.g=function(){return new XMLHttpRequest},Pp.prototype.i=function(){return{}},_w=new Pp;var xC=45e3,yw={},C_={};function vw(n,e,t){n.K=1,n.v=A_(El(e)),n.s=t,n.U=!0,ww(n,null)}function ww(n,e){n.F=Date.now(),Rh(n),n.A=El(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Aw(t.h,"t",r),n.C=0,t=n.l.H,n.h=new b_,n.g=F_(n.l,t?e:null,!n.s),0<n.O&&(n.L=new TC(pi(n.Ia,n,n.g),n.O)),hw(n.V,n.g,"readystatechange",n.gb),e=n.H?dC(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Yc(1),function pw(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var u="",d=a.split("&"),g=0;g<d.length;g++){var y=d[g].split("=");if(1<y.length){var C=y[0];y=y[1];var D=C.split("_");u=2<=D.length&&"type"==D[1]?u+(C+"=")+y+"&":u+(C+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function I_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Ew(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=RC(n,t),i==C_){4==e&&(n.o=4,Cs(14),r=!1),xp(n.j,n.m,null,"[Incomplete Response]");break}if(i==yw){n.o=4,Cs(15),xp(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}xp(n.j,n.m,i,null),T_(n,i)}I_(n)&&i!=C_&&i!=yw&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Cs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),k_(e),e.L=!0,Cs(11))):(xp(n.j,n.m,t,"[Invalid Chunked Response]"),Tu(n),Nh(n))}function RC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?C_:(t=Number(e.substring(t,r)),isNaN(t)?yw:(r+=1)+t>e.length?C_:(e=e.substr(r,t),n.C=r+t,e))}function Rh(n){n.Y=Date.now()+n.P,bw(n,n.P)}function bw(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Sh(pi(n.eb,n),e)}function Op(n){n.B&&(Vt.clearTimeout(n.B),n.B=null)}function Nh(n){0==n.l.G||n.I||Su(n.l,n)}function Tu(n){Op(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,uw(n.W),g_(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function T_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||x_(t.i,n)))if(t.I=n.N,!n.J&&x_(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Sh(pi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;jp(t),M_(t)}O_(t),Cs(18)}if(1>=OC(t.i)&&t.ka){try{t.ka()}catch(y){}t.ka=void 0}}else Xc(t,11)}else if((n.J||t.g==n)&&jp(t),!i_(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const C=y[3];null!=C&&(t.ma=C,t.h.info("VER="+t.ma));const D=y[4];null!=D&&(t.za=D,t.h.info("SVER="+t.za));const N=y[5];null!=N&&"number"==typeof N&&0<N&&(t.K=r=1.5*N,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const L=n.g;if(L){const j=L.g?L.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var a=r.i;!a.g&&(ls(j,"spdy")||ls(j,"quic")||ls(j,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(Rw(a,a.h),a.h=null))}if(r.D){const ne=L.g?L.g.getResponseHeader("X-HTTP-Session-Id"):null;ne&&(r.sa=ne,On(r.F,r.D,ne))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=iA(r,r.H?r.la:null,r.W),u.J){Nw(r.i,u);var d=u,g=r.K;g&&d.setTimeout(g),d.B&&(Op(d),Rh(d)),r.g=u}else Uw(r);0<t.l.length&&Bp(t)}else"stop"!=y[0]&&"close"!=y[0]||Xc(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Xc(t,7):Fw(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}Yc(4)}catch(y){}}function Cw(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(n_(n)||"string"==typeof n)r_(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(n_(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function DP(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(n_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Mh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Mh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function D_(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Qc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Qc(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Qc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ft=xh.prototype).setTimeout=function(n){this.P=n},ft.gb=function(n){n=n.target;const e=this.L;e&&3==bl(n)?e.l():this.Ia(n)},ft.Ia=function(n){try{if(n==this.g)e:{const C=bl(this.g);var e=this.g.Da();const D=this.g.ba();if(!(3>C)&&(3!=C||Tp||this.g&&(this.h.h||this.g.ga()||$C(this.g)))){this.I||4!=C||7==e||Yc(8==e||0>=D?3:2),Op(this);var t=this.g.ba();this.N=t;t:if(I_(this)){var r=$C(this.g);n="";var i=r.length,a=4==bl(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Tu(this),Nh(this);var u="";break t}this.h.i=new Vt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function WS(n,e,t,r,i,a,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.X,C,t),this.i){if(this.$&&!this.J){t:{if(this.g){var d,g=this.g;if((d=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!i_(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Cs(12),Tu(this),Nh(this);break e}xp(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,T_(this,t)}this.U?(Ew(this,C,u),Tp&&this.i&&3==C&&(hw(this.V,this.W,"tick",this.fb),this.W.start())):(xp(this.j,this.m,u,null),T_(this,u)),4==C&&Tu(this),this.i&&!this.I&&(4==C?Su(this.l,this):(this.i=!1,Rh(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Cs(12)):(this.o=0,Cs(13)),Tu(this),Nh(this)}}}catch(C){}},ft.fb=function(){if(this.g){var n=bl(this.g),e=this.g.ga();this.C<e.length&&(Op(this),Ew(this,n,e),this.i&&4!=n&&Rh(this))}},ft.cancel=function(){this.I=!0,Tu(this)},ft.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Rp(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Yc(3),Cs(17)),Tu(this),this.o=2,Nh(this)):bw(this,this.Y-n)},(ft=Mh.prototype).R=function(){D_(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ft.T=function(){return D_(this),this.g.concat()},ft.get=function(n,e){return Qc(this.h,n)?this.h[n]:e},ft.set=function(n,e){Qc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ft.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var qr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Jc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Jc){this.g=void 0!==e?e:n.g,kp(this,n.j),this.s=n.s,S_(this,n.i),Fp(this,n.m),this.l=n.l,e=n.h;var t=new Is;t.i=e.i,e.g&&(t.g=new Mh(e.g),t.h=e.h),Iw(this,t),this.o=n.o}else n&&(t=String(n).match(qr))?(this.g=!!e,kp(this,t[1]||"",!0),this.s=Lp(t[2]||""),S_(this,t[3]||"",!0),Fp(this,t[4]),this.l=Lp(t[5]||"",!0),Iw(this,t[6]||"",!0),this.o=Lp(t[7]||"")):(this.g=!!e,this.h=new Is(null,this.g))}function El(n){return new Jc(n)}function kp(n,e,t){n.j=t?Lp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function S_(n,e,t){n.i=t?Lp(e,!0):e}function Fp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Iw(n,e,t){e instanceof Is?(n.h=e,function YS(n,e){e&&!n.j&&(gi(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(yo(this,r),Aw(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Ph(e,ZS)),n.h=new Is(e,n.g))}function On(n,e,t){n.h.set(e,t)}function A_(n){return On(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Lp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ph(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,SP),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function SP(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Jc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ph(e,Tw,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ph(e,Tw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ph(t,"/"==t.charAt(0)?Sa:Dw,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ph(t,KS)),n.join("")};var Tw=/[#\/\?@]/g,Dw=/[#\?:]/g,Sa=/[#\?]/g,ZS=/[#\?@]/g,KS=/#/g;function Is(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function gi(n){n.g||(n.g=new Mh,n.h=0,n.i&&function NC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function yo(n,e){gi(n),e=Oh(n,e),Qc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Qc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&D_(n)))}function Sw(n,e){return gi(n),e=Oh(n,e),Qc(n.g.h,e)}function Aw(n,e,t){yo(n,e),0<t.length&&(n.i=null,n.g.set(Oh(n,e),Jv(t)),n.h+=t.length)}function Oh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function PC(n){this.l=n||xw,n=Vt.PerformanceNavigationTiming?0<(n=Vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Vt.g&&Vt.g.Ea&&Vt.g.Ea()&&Vt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ft=Is.prototype).add=function(n,e){gi(this),this.i=null,n=Oh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ft.forEach=function(n,e){gi(this),this.g.forEach(function(t,r){r_(t,function(i){n.call(e,i,r,this)},this)},this)},ft.T=function(){gi(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},ft.R=function(n){gi(this);var e=[];if("string"==typeof n)Sw(this,n)&&(e=lC(e,this.g.get(Oh(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=lC(e,n[t])}return e},ft.set=function(n,e){return gi(this),this.i=null,Sw(this,n=Oh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ft.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var u=i;""!==r[a]&&(u+="="+encodeURIComponent(String(r[a]))),n.push(u)}}return this.i=n.join("&")};var xw=10;function kh(n){return!!n.h||!!n.g&&n.g.size>=n.j}function OC(n){return n.h?1:n.g?n.g.size:0}function x_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Rw(n,e){n.g?n.g.add(e):n.h=e}function Nw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Mw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Jv(n.i)}function Fh(){}function JS(){this.g=new Fh}function kC(n,e,t){const r=t||"";try{Cw(n,function(i,a){let u=i;vh(i)&&(u=d_(i)),e.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Lh(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Du(n){this.l=n.$b||null,this.j=n.ib||!1}function Vp(n,e){Ri.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=R_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}PC.prototype.cancel=function(){if(this.i=Mw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Fh.prototype.stringify=function(n){return Vt.JSON.stringify(n,void 0)},Fh.prototype.parse=function(n){return Vt.JSON.parse(n,void 0)},Ai(Du,v_),Du.prototype.g=function(){return new Vp(this.l,this.j)},Du.prototype.i=function(n){return function(){return n}}({}),Ai(Vp,Ri);var R_=0;function Pw(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Vh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Uh(n)}function Uh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ft=Vp.prototype).open=function(n,e){if(this.readyState!=R_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Uh(this)},ft.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Vt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vh(this)),this.readyState=R_},ft.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Uh(this)),this.g&&(this.readyState=3,Uh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Vt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Pw(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ft.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Vh(this):Uh(this),3==this.readyState&&Pw(this)}},ft.Ua=function(n){this.g&&(this.response=this.responseText=n,Vh(this))},ft.Ta=function(n){this.g&&(this.response=n,Vh(this))},ft.ha=function(){this.g&&Vh(this)},ft.setRequestHeader=function(n,e){this.v.append(n,e)},ft.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ft.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Vp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var LC=Vt.JSON.parse;function Or(n){Ri.call(this),this.headers=new Mh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ow,this.K=this.L=!1}Ai(Or,Ri);var Ow="",XS=/^https?$/i,eA=["POST","PUT"];function nA(n){return"content-type"==n.toLowerCase()}function VC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,UC(n),N_(n)}function UC(n){n.D||(n.D=!0,Vi(n,"complete"),Vi(n,"error"))}function BC(n){if(n.h&&void 0!==iC&&(!n.C[1]||4!=bl(n)||2!=n.ba()))if(n.v&&4==bl(n))cw(n.Fa,0,n);else if(Vi(n,"readystatechange"),4==bl(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(qr)[1]||null;if(!i&&Vt.self&&Vt.self.location){var a=Vt.self.location.protocol;i=a.substr(0,a.length-1)}r=!XS.test(i?i.toLowerCase():"")}t=r}if(t)Vi(n,"complete"),Vi(n,"success");else{n.m=6;try{var u=2<bl(n)?n.g.statusText:""}catch(g){u=""}n.j=u+" ["+n.ba()+"]",UC(n)}}finally{N_(n)}}}function N_(n,e){if(n.g){jC(n);const t=n.g,r=n.C[0]?t_:null;n.g=null,n.C=null,e||Vi(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function jC(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Vt.clearTimeout(n.A),n.A=null)}function bl(n){return n.g?n.g.readyState:0}function $C(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Ow:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function kw(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function rA(n){let e="";return Xv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):On(n,e,t))}function Up(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function HC(n){this.za=0,this.l=[],this.h=new fw,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Up("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Up("baseRetryDelayMs",5e3,n),this.$a=Up("retryDelaySeedMs",1e4,n),this.Ya=Up("forwardChannelMaxRetries",2,n),this.ra=Up("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new PC(n&&n.concurrentRequestLimit),this.Ca=new JS,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Fw(n){if(GC(n),3==n.G){var e=n.V++,t=El(n.F);On(t,"SID",n.J),On(t,"RID",e),On(t,"TYPE","terminate"),Bh(n,t),(e=new xh(n,n.h,e,void 0)).K=2,e.v=A_(El(t)),t=!1,Vt.navigator&&Vt.navigator.sendBeacon&&(t=Vt.navigator.sendBeacon(e.v.toString(),"")),!t&&Vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=F_(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Rh(e)}ed(n)}function M_(n){n.g&&(k_(n),n.g.cancel(),n.g=null)}function GC(n){M_(n),n.u&&(Vt.clearTimeout(n.u),n.u=null),jp(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Vt.clearTimeout(n.m),n.m=null)}function P_(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Bp(n)}function Bp(n){kh(n.i)||n.m||(n.m=!0,ow(n.Ha,n),n.C=0)}function Lw(n,e){var t;t=e?e.m:n.V++;const r=El(n.F);On(r,"SID",n.J),On(r,"RID",t),On(r,"AID",n.U),Bh(n,r),n.o&&n.s&&kw(r,n.o,n.s),t=new xh(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Vw(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Rw(n.i,t),vw(t,r,e)}function Bh(n,e){n.j&&Cw({},function(t,r){On(e,r,t)})}function Vw(n,e,t){t=Math.min(n.l.length,t);var r=n.j?pi(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=i[0].h,u.push("ofs="+a)):a=0:u.push("ofs="+a);let d=!0;for(let g=0;g<t;g++){let y=i[g].h;const C=i[g].g;if(y-=a,0>y)a=Math.max(0,i[g].h-100),d=!1;else try{kC(C,u,"req"+y+"_")}catch(D){r&&r(C)}}if(d){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Uw(n){n.g||n.u||(n.Y=1,ow(n.Ga,n),n.A=0)}function O_(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Sh(pi(n.Ga,n),WC(n,n.A)),n.A++,0))}function k_(n){null!=n.B&&(Vt.clearTimeout(n.B),n.B=null)}function Bw(n){n.g=new xh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=El(n.oa);On(e,"RID","rpc"),On(e,"SID",n.J),On(e,"CI",n.N?"0":"1"),On(e,"AID",n.U),Bh(n,e),On(e,"TYPE","xmlhttp"),n.o&&n.s&&kw(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=A_(El(e)),t.s=null,t.U=!0,ww(t,n)}function jp(n){null!=n.v&&(Vt.clearTimeout(n.v),n.v=null)}function Su(n,e){var t=null;if(n.g==e){jp(n),k_(n),n.g=null;var r=2}else{if(!x_(n.i,e))return;t=e.D,Nw(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Vi(r=__(),new SC(r,t,e,i)),Bp(n)}else Uw(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function qC(n,e){return!(OC(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Sh(pi(n.Ha,n,e),WC(n,n.C)),n.C++,0)))}(n,e)||2==r&&O_(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Xc(n,5);break;case 4:Xc(n,10);break;case 3:Xc(n,6);break;default:Xc(n,2)}}function WC(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Xc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=pi(n.jb,n);t||(t=new Jc("//www.google.com/images/cleardot.gif"),Vt.location&&"http"==Vt.location.protocol||kp(t,"https"),A_(t)),function FC(n,e){const t=new fw;if(Vt.Image){const r=new Image;r.onload=Ip(Lh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ip(Lh,t,r,"TestLoadImage: error",!1,e),r.onabort=Ip(Lh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ip(Lh,t,r,"TestLoadImage: timeout",!1,e),Vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Cs(2);n.G=0,n.j&&n.j.va(e),ed(n),GC(n)}function ed(n){n.G=0,n.I=-1,n.j&&((0!=Mw(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Jv(n.l),n.l.length=0),n.j.ua())}function iA(n,e,t){let r=function zS(n){return n instanceof Jc?El(n):new Jc(n,void 0)}(t);if(""!=r.i)e&&S_(r,e+"."+r.i),Fp(r,r.m);else{const i=Vt.location;r=function MC(n,e,t,r){var i=new Jc(null,void 0);return n&&kp(i,n),e&&S_(i,e),t&&Fp(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Xv(n.aa,function(i,a){On(r,a,i)}),t=n.sa,(e=n.D)&&t&&On(r,e,t),On(r,"VER",n.ma),Bh(n,r),r}function F_(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Or(t&&n.Ba&&!n.qa?new Du({ib:!0}):n.qa)).L=n.H,e}function sA(){}function $p(){if(yl&&!(10<=Number(hC)))throw Error("Environmental error: no available transport.")}function Ts(n,e){Ri.call(this),this.g=new HC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!i_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!i_(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new jh(this)}function oA(n){Mp.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Rt(){E_.call(this),this.status=1}function jh(n){this.g=n}(ft=Or.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_w.g(),this.C=function w_(n){return n.h||(n.h=n.i())}(this.u?this.u:_w),this.g.onreadystatechange=pi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void VC(this,a)}n=t||"";const i=new Mh(this.headers);r&&Cw(r,function(a,u){i.set(u,a)}),r=function jS(n){e:{var e=nA;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Vt.FormData&&n instanceof Vt.FormData,!(0<=aC(eA,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,u){this.g.setRequestHeader(u,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{jC(this),0<this.B&&((this.K=function tA(n){return yl&&function Ih(){return function Li(n){var e=Ch;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=uC(String(vl)).split("."),t=uC("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",a=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=wh(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||wh(0==i[2].length,0==a[2].length)||wh(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=pi(this.pa,this)):this.A=cw(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){VC(this,a)}},ft.pa=function(){void 0!==iC&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vi(this,"timeout"),this.abort(8))},ft.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Vi(this,"complete"),Vi(this,"abort"),N_(this))},ft.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),N_(this,!0)),Or.Z.M.call(this)},ft.Fa=function(){this.s||(this.F||this.v||this.l?BC(this):this.cb())},ft.cb=function(){BC(this)},ft.ba=function(){try{return 2<bl(this)?this.g.status:-1}catch(n){return-1}},ft.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ft.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),LC(e)}},ft.Da=function(){return this.m},ft.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ft=HC.prototype).ma=8,ft.G=1,ft.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},ft.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new xh(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=dC(a),Bo(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Vw(this,i,e),On(t=El(this.F),"RID",n),On(t,"CVER",22),this.D&&On(t,"X-HTTP-Session-Id",this.D),Bh(this,t),this.o&&a&&kw(t,this.o,a),Rw(this.i,i),this.Ra&&On(t,"TYPE","init"),this.ja?(On(t,"$req",e),On(t,"SID","null"),i.$=!0,vw(i,t,null)):vw(i,t,e),this.G=2}}else 3==this.G&&(n?Lw(this,n):0==this.l.length||kh(this.i)||Lw(this))},ft.Ga=function(){if(this.u=null,Bw(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Sh(pi(this.bb,this),n)}},ft.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Cs(10),M_(this),Bw(this))},ft.ab=function(){null!=this.v&&(this.v=null,M_(this),O_(this),Cs(19))},ft.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Cs(2)):(this.h.info("Failed to ping google.com"),Cs(1))},(ft=sA.prototype).xa=function(){},ft.wa=function(){},ft.va=function(){},ft.ua=function(){},ft.Oa=function(){},$p.prototype.g=function(n,e){return new Ts(n,e)},Ai(Ts,Ri),Ts.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),ow(pi(n.hb,n,e))),Cs(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=iA(n,null,n.W),Bp(n)},Ts.prototype.close=function(){Fw(this.g)},Ts.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,P_(this.g,e)}else this.v?((e={}).__data__=d_(n),P_(this.g,e)):P_(this.g,n)},Ts.prototype.M=function(){this.g.j=null,delete this.j,Fw(this.g),delete this.g,Ts.Z.M.call(this)},Ai(oA,Mp),Ai(Rt,E_),Ai(jh,sA),jh.prototype.xa=function(){Vi(this.g,"a")},jh.prototype.wa=function(n){Vi(this.g,new oA(n))},jh.prototype.va=function(n){Vi(this.g,new Rt(n))},jh.prototype.ua=function(){Vi(this.g,"b")},$p.prototype.createWebChannel=$p.prototype.g,Ts.prototype.send=Ts.prototype.u,Ts.prototype.open=Ts.prototype.m,Ts.prototype.close=Ts.prototype.close,Np.NO_ERROR=0,Np.TIMEOUT=8,Np.HTTP_ERROR=6,AC.COMPLETE="complete",mw.EventType=Ah,Ah.OPEN="a",Ah.CLOSE="b",Ah.ERROR="c",Ah.MESSAGE="d",Ri.prototype.listen=Ri.prototype.N,Or.prototype.listenOnce=Or.prototype.O,Or.prototype.getLastError=Or.prototype.La,Or.prototype.getLastErrorCode=Or.prototype.Da,Or.prototype.getStatus=Or.prototype.ba,Or.prototype.getResponseJson=Or.prototype.Qa,Or.prototype.getResponseText=Or.prototype.ga,Or.prototype.send=Or.prototype.ea;var aA=_l.createWebChannelTransport=function(){return new $p},lA=_l.getStatEventTarget=function(){return __()},$h=_l.ErrorCode=Np,uA=_l.EventType=AC,L_=_l.Event=wl,Hp=_l.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ir=_l.FetchXmlHttpFactory=Du,jw=_l.WebChannel=mw,zC=_l.XhrIo=Or;const ZC="@firebase/firestore";class mi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mi.UNAUTHENTICATED=new mi(null),mi.GOOGLE_CREDENTIALS=new mi("google-credentials-uid"),mi.FIRST_PARTY=new mi("first-party-uid"),mi.MOCK_USER=new mi("mock-user");let td="9.8.4";const Cl=new Da.Yd("@firebase/firestore");function V_(){return Cl.logLevel}function Ue(n,...e){if(Cl.logLevel<=Da.in.DEBUG){const t=e.map(nd);Cl.debug(`Firestore (${td}): ${n}`,...t)}}function Wr(n,...e){if(Cl.logLevel<=Da.in.ERROR){const t=e.map(nd);Cl.error(`Firestore (${td}): ${n}`,...t)}}function Gp(n,...e){if(Cl.logLevel<=Da.in.WARN){const t=e.map(nd);Cl.warn(`Firestore (${td}): ${n}`,...t)}}function nd(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function pt(n="Unexpected state"){const e=`FIRESTORE (${td}) INTERNAL ASSERTION FAILED: `+n;throw Wr(e),new Error(e)}function Pt(n,e){n||pt()}function nt(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ii{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class YC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qp{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mi.UNAUTHENTICATED))}shutdown(){}}class Wp{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class dA{constructor(e){this.t=e,this.currentUser=mi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ii,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const y=u;e.enqueueRetryable((0,Ce.Z)(function*(){yield y.promise,yield a(r.currentUser)}))},g=y=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ii)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pt("string"==typeof r.accessToken),new YC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pt(null===e||"string"==typeof e),new mi(e)}}class hA{constructor(e,t,r){this.type="FirstParty",this.user=mi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class fA{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new hA(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(mi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $w{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QC{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.p;return this.p=a.token,Ue("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pt("string"==typeof t.token),this.p=t.token,new $w(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function gA(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Hw{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=gA(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Kt(n,e){return n<e?-1:n>e?1:0}function Hh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function mA(n){return n+"\0"}class dr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Oe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return dr.fromMillis(Date.now())}static fromDate(e){return dr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new dr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ot{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ot(e)}static min(){return new Ot(new dr(0,0))}static max(){return new Ot(new dr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class U_{constructor(e,t,r){void 0===t?t=0:t>e.length&&pt(),void 0===r?r=e.length-t:r>e.length-t&&pt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===U_.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof U_?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),u=t.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class dn extends U_{construct(e,t,r){return new dn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new dn(t)}static emptyPath(){return new dn([])}}const B_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kr extends U_{construct(e,t,r){return new kr(e,t,r)}static isValidIdentifier(e){return B_.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new kr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Oe(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Oe(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Oe(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===d?(u=!u,i++):"."!==d||u?(r+=d,i++):(a(),i++)}if(a(),u)throw new Oe(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kr(t)}static emptyPath(){return new kr([])}}class tt{constructor(e){this.path=e}static fromPath(e){return new tt(dn.fromString(e))}static fromName(e){return new tt(dn.fromString(e).popFirst(5))}static empty(){return new tt(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new dn(e.slice()))}}class zp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function rd(n){return n.fields.find(e=>2===e.kind)}function id(n){return n.fields.filter(e=>2!==e.kind)}zp.UNKNOWN_ID=-1;class j_{constructor(e,t){this.fieldPath=e,this.kind=t}}class Zp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Zp(0,Ds.min())}}function JC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ot.fromTimestamp(1e9===r?new dr(t+1,0):new dr(t,r));return new Ds(i,tt.empty(),e)}function XC(n){return new Ds(n.readTime,n.key,-1)}class Ds{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ds(Ot.min(),tt.empty(),-1)}static max(){return new Ds(Ot.max(),tt.empty(),-1)}}function Gw(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=tt.comparator(n.documentKey,e.documentKey),0!==t?t:Kt(n.largestBatchId,e.largestBatchId))}const eI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Au(n){return $_.apply(this,arguments)}function $_(){return $_=(0,Ce.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==eI)throw n;Ue("LocalStore","Unexpectedly lost primary lease")}),$_.apply(this,arguments)}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let i=0,a=0,u=!1;e.forEach(d=>{++i,d.next(()=>{++a,u&&a===i&&t()},g=>r(g))}),u=!0,a===i&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(i=>i?ce.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ce((r,i)=>{const a=e.length,u=new Array(a);let d=0;for(let g=0;g<a;g++){const y=g;t(e[y]).next(C=>{u[y]=C,++d,d===a&&r(u)},C=>i(C))}})}static doWhile(e,t){return new ce((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class Kp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new ii,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Yp(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=Ww(r.target.error);this.T.reject(new Yp(e,i))}}static open(e,t,r,i){try{return new Kp(t,e.transaction(i,r))}catch(a){throw new Yp(t,a)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _A(t)}}class jo{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===jo.v((0,k.z$)())&&Wr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ue("SimpleDb","Removing database:",e),xu(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,k.hl)())return!1;if(jo.S())return!0;const e=(0,k.z$)(),t=jo.v(e),r=0<t&&t<10,i=jo.D(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,Ce.Z)(function*(){return t.db||(Ue("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=u=>{r(u.target.result)},a.onblocked=()=>{i(new Yp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const d=u.target.error;i("VersionError"===d.name?new Oe(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Oe(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new Yp(e,d))},a.onupgradeneeded=u=>{Ue("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.P.O(u.target.result,a.transaction,u.oldVersion,t.version).next(()=>{Ue("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ce.Z)(function*(){const u="readonly"===t;let d=0;for(;;){++d;try{a.db=yield a.k(e);const g=Kp.open(a.db,e,u?"readonly":"readwrite",r),y=i(g).next(C=>(g.R(),C)).catch(C=>(g.abort(C),ce.reject(C))).toPromise();return y.catch(()=>{}),yield g.A,y}catch(g){const y=g,C="FirebaseError"!==y.name&&d<3;if(Ue("SimpleDb","Transaction failed with error:",y.message,"Retrying:",C),a.close(),!C)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class tI{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return xu(this.$.delete())}}class Yp extends Oe{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Aa(n){return"IndexedDbTransactionError"===n.name}class _A{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),xu(r)}add(e){return Ue("SimpleDb","ADD",this.store.name,e,e),xu(this.store.add(e))}get(e){return xu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ue("SimpleDb","DELETE",this.store.name,e),xu(this.store.delete(e))}count(){return Ue("SimpleDb","COUNT",this.store.name),xu(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.G(i,(u,d)=>{a.push(d)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ce((a,u)=>{i.onerror=d=>{u(d.target.error)},i.onsuccess=d=>{a(d.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((i,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}W(e,t){Ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.G(i,(a,u,d)=>d.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Y(e){const t=this.cursor({});return new ce((r,i)=>{t.onerror=a=>{const u=Ww(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(d=>{d?u.continue():r()}):r()}})}G(e,t){const r=[];return new ce((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const d=u.target.result;if(!d)return void i();const g=new tI(d),y=t(d.primaryKey,d.value,g);if(y instanceof ce){const C=y.catch(D=>(g.done(),ce.reject(D)));r.push(C)}g.isDone?i():null===g.U?d.continue():d.continue(g.U)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function xu(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Ww(r.target.error);t(i)}})}let qw=!1;function Ww(n){const e=jo.v((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qw||(qw=!0,setTimeout(()=>{throw r},0)),r}}return n}class yA{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Ue("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ce.Z)(function*(){t.task=null;try{Ue("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){Aa(r)?Ue("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Au(r)}yield t.Z(1)}))}}class vA{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,Ce.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let i=t,a=!0;return ce.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return Ue("IndexBackiller",`Processing collection: ${u}`),this.nt(e,u,i).next(d=>{i-=d,r.add(u)});a=!1})).next(()=>t-i)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const u=a.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.st(i,a)).next(d=>(Ue("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>u.size)}))}st(e,t){let r=e;return t.changes.forEach((i,a)=>{const u=XC(a);Gw(u,r)>0&&(r=u)}),new Ds(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ui{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function nI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ru(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ui.ot=-1;class Tr{constructor(e,t){this.comparator=e,this.root=t||Ni.EMPTY}insert(e,t){return new Tr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ni.BLACK,null,null))}remove(e){return new Tr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new H_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new H_(this.root,e,this.comparator,!1)}getReverseIterator(){return new H_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new H_(this.root,e,this.comparator,!0)}}class H_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ni{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:Ni.RED,this.left=null!=i?i:Ni.EMPTY,this.right=null!=a?a:Ni.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ni(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ni.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ni.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const e=this.left.check();if(e!==this.right.check())throw pt();return e+(this.isRed()?0:1)}}Ni.EMPTY=null,Ni.RED=!0,Ni.BLACK=!1,Ni.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ni(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ln{constructor(e){this.comparator=e,this.data=new Tr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new iI(this.data.getIterator())}getIteratorFrom(e){return new iI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ln(this.comparator);return t.data=e,t}}class iI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Gh(n){return n.hasNext()?n.getNext():void 0}class Ys{constructor(e){this.fields=e,e.sort(kr.comparator)}static empty(){return new Ys([])}unionWith(e){let t=new Ln(kr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ys(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Hh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class zr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new zr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new zr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zr.EMPTY_BYTE_STRING=new zr("");const wA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nu(n){if(Pt(!!n),"string"==typeof n){let e=0;const t=wA.exec(n);if(Pt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:hr(n.seconds),nanos:hr(n.nanos)}}function hr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function od(n){return"string"==typeof n?zr.fromBase64String(n):zr.fromUint8Array(n)}function zw(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function oI(n){const e=n.mapValue.fields.__previous_value__;return zw(e)?oI(e):e}function ad(n){const e=Nu(n.mapValue.fields.__local_write_time__.timestampValue);return new dr(e.seconds,e.nanos)}class Zw{constructor(e,t,r,i,a,u,d,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.useFetchStreams=g}}class xa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new xa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof xa&&e.projectId===this.projectId&&e.database===this.database}}function ld(n){return null==n}function Qp(n){return 0===n&&1/n==-1/0}function aI(n){return"number"==typeof n&&Number.isInteger(n)&&!Qp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Ra={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},G_={nullValue:"NULL_VALUE"};function Mu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zw(n)?4:uI(n)?9007199254740991:10:pt()}function Na(n,e){if(n===e)return!0;const t=Mu(n);if(t!==Mu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ad(n).isEqual(ad(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Nu(r.timestampValue),u=Nu(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,od(n.bytesValue).isEqual(od(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return hr(r.geoPointValue.latitude)===hr(i.geoPointValue.latitude)&&hr(r.geoPointValue.longitude)===hr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return hr(r.integerValue)===hr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=hr(r.doubleValue),u=hr(i.doubleValue);return a===u?Qp(a)===Qp(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return Hh(n.arrayValue.values||[],e.arrayValue.values||[],Na);case 10:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(nI(a)!==nI(u))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(void 0===u[d]||!Na(a[d],u[d])))return!1;return!0}(n,e);default:return pt()}var i}function qh(n,e){return void 0!==(n.values||[]).find(t=>Na(t,e))}function Pu(n,e){if(n===e)return 0;const t=Mu(n),r=Mu(e);if(t!==r)return Kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const u=hr(i.integerValue||i.doubleValue),d=hr(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,e);case 3:return Kw(n.timestampValue,e.timestampValue);case 4:return Kw(ad(n),ad(e));case 5:return Kt(n.stringValue,e.stringValue);case 6:return function(i,a){const u=od(i),d=od(a);return u.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),d=a.split("/");for(let g=0;g<u.length&&g<d.length;g++){const y=Kt(u[g],d[g]);if(0!==y)return y}return Kt(u.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const u=Kt(hr(i.latitude),hr(a.latitude));return 0!==u?u:Kt(hr(i.longitude),hr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const u=i.values||[],d=a.values||[];for(let g=0;g<u.length&&g<d.length;++g){const y=Pu(u[g],d[g]);if(y)return y}return Kt(u.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Ra.mapValue&&a===Ra.mapValue)return 0;if(i===Ra.mapValue)return 1;if(a===Ra.mapValue)return-1;const u=i.fields||{},d=Object.keys(u),g=a.fields||{},y=Object.keys(g);d.sort(),y.sort();for(let C=0;C<d.length&&C<y.length;++C){const D=Kt(d[C],y[C]);if(0!==D)return D;const N=Pu(u[d[C]],g[y[C]]);if(0!==N)return N}return Kt(d.length,y.length)}(n.mapValue,e.mapValue);default:throw pt()}}function Kw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Kt(n,e);const t=Nu(n),r=Nu(e),i=Kt(t.seconds,r.seconds);return 0!==i?i:Kt(t.nanos,r.nanos)}function Jp(n){return Yw(n)}function Yw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Nu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?od(n.bytesValue).toBase64():"referenceValue"in n?tt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const u of r.values||[])a?a=!1:i+=",",i+=Yw(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const d of i)u?u=!1:a+=",",a+=`${d}:${Yw(r.fields[d])}`;return a+"}"}(n.mapValue):pt();var e}function $o(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qw(n){return!!n&&"integerValue"in n}function Ma(n){return!!n&&"arrayValue"in n}function Wh(n){return!!n&&"nullValue"in n}function lI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jw(n){return!!n&&"mapValue"in n}function zh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ru(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=zh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function uI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function EA(n){return"nullValue"in n?G_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?$o(xa.empty(),tt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:pt()}function bA(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?$o(xa.empty(),tt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ra:pt()}function cI(n,e){const t=Pu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Xw(n,e){const t=Pu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class _i{constructor(e){this.value=e}static empty(){return new _i({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Jw(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zh(t)}setAll(e){let t=kr.emptyPath(),r={},i=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=d.popLast()}u?r[d.lastSegment()]=zh(u):i.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Jw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Na(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Jw(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ru(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new _i(zh(this.value))}}function q_(n){const e=[];return Ru(n.fields,(t,r)=>{const i=new kr([t]);if(Jw(r)){const a=q_(r.mapValue).fields;if(0===a.length)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new Ys(e)}class kn{constructor(e,t,r,i,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=u}static newInvalidDocument(e){return new kn(e,0,Ot.min(),Ot.min(),_i.empty(),0)}static newFoundDocument(e,t,r){return new kn(e,1,t,Ot.min(),r,0)}static newNoDocument(e,t){return new kn(e,2,t,Ot.min(),_i.empty(),0)}static newUnknownDocument(e,t){return new kn(e,3,t,Ot.min(),_i.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_i.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_i.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Xp{constructor(e,t=null,r=[],i=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=d,this.ut=null}}function dI(n,e=null,t=[],r=[],i=null,a=null,u=null){return new Xp(n,e,t,r,i,a,u)}function Ou(n){const e=nt(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Jp(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),ld(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Jp(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Jp(r)).join(",")),e.ut=t}return e.ut}function eg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!xP(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Na(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!K_(n.startAt,e.startAt)&&K_(n.endAt,e.endAt)}function W_(n){return tt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function z_(n,e){return n.filters.filter(t=>t instanceof Bi&&t.field.isEqual(e))}function Z_(n,e,t){let r=G_,i=!0;for(const a of z_(n,e)){let u=G_,d=!0;switch(a.op){case"<":case"<=":u=EA(a.value);break;case"==":case"in":case">=":u=a.value;break;case">":u=a.value,d=!1;break;case"!=":case"not-in":u=G_}cI({value:r,inclusive:i},{value:u,inclusive:d})<0&&(r=u,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];cI({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function fI(n,e,t){let r=Ra,i=!0;for(const a of z_(n,e)){let u=Ra,d=!0;switch(a.op){case">=":case">":u=bA(a.value),d=!1;break;case"==":case"in":case"<=":u=a.value;break;case"<":u=a.value,d=!1;break;case"!=":case"not-in":u=Ra}Xw({value:r,inclusive:i},{value:u,inclusive:d})>0&&(r=u,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const u=t.position[a];Xw({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class Bi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new CA(e,t,r):"array-contains"===t?new Kh(e,r):"in"===t?new AP(e,r):"not-in"===t?new pI(e,r):"array-contains-any"===t?new TA(e,r):new Bi(e,t,r)}static ct(e,t,r){return"in"===t?new IA(e,r):new Zh(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Pu(t,this.value)):null!==t&&Mu(this.value)===Mu(t)&&this.at(Pu(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class CA extends Bi{constructor(e,t,r){super(e,t,r),this.key=tt.fromName(r.referenceValue)}matches(e){const t=tt.comparator(e.key,this.key);return this.at(t)}}class IA extends Bi{constructor(e,t){super(e,"in",t),this.keys=eE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Zh extends Bi{constructor(e,t){super(e,"not-in",t),this.keys=eE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function eE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>tt.fromName(r.referenceValue))}class Kh extends Bi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ma(t)&&qh(t.arrayValue,this.value)}}class AP extends Bi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&qh(this.value.arrayValue,t)}}class pI extends Bi{constructor(e,t){super(e,"not-in",t)}matches(e){if(qh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!qh(this.value.arrayValue,t)}}class TA extends Bi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ma(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>qh(this.value.arrayValue,r))}}class ud{constructor(e,t){this.position=e,this.inclusive=t}}class cd{constructor(e,t="asc"){this.field=e,this.dir=t}}function xP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function tE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(r=a.field.isKeyField()?tt.comparator(tt.fromName(u.referenceValue),t.key):Pu(u,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function K_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Na(n.position[t],e.position[t]))return!1;return!0}class Il{constructor(e,t=null,r=[],i=[],a=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=g,this.lt=null,this.ft=null}}function gI(n,e,t,r,i,a,u,d){return new Il(n,e,t,r,i,a,u,d)}function Yh(n){return new Il(n)}function nE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function rE(n){for(const e of n.filters)if(e.ht())return e.field;return null}function iE(n){return null!==n.collectionGroup}function Qh(n){const e=nt(n);if(null===e.lt){e.lt=[];const t=rE(e),r=nE(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new cd(t)),e.lt.push(new cd(kr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.lt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new cd(kr.keyField(),a))}}}return e.lt}function vo(n){const e=nt(n);if(!e.ft)if("F"===e.limitType)e.ft=dI(e.path,e.collectionGroup,Qh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Qh(e))t.push(new cd(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new ud(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ud(e.startAt.position,e.startAt.inclusive):null;e.ft=dI(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function mI(n,e,t){return new Il(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Tl(n,e){return eg(vo(n),vo(e))&&n.limitType===e.limitType}function sE(n){return`${Ou(vo(n))}|lt:${n.limitType}`}function Y_(n){return`Query(target=${function hI(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Jp(r.value)}`;var r}).join(", ")}]`),ld(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Jp(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Jp(t)).join(",")),`Target(${e})`}(vo(n))}; limitType=${n.limitType})`}function Q_(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):tt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,u){const d=tE(i,a,u);return i.inclusive?d<=0:d<0}(t.startAt,Qh(t),r)||t.endAt&&!function(i,a,u){const d=tE(i,a,u);return i.inclusive?d>=0:d>0}(t.endAt,Qh(t),r)));var t,r}function oE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function aE(n){return(e,t)=>{let r=!1;for(const i of Qh(n)){const a=_I(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function _I(n,e,t){const r=n.field.isKeyField()?tt.comparator(e.key,t.key):function(i,a,u){const d=a.data.field(i),g=u.data.field(i);return null!==d&&null!==g?Pu(d,g):pt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return pt()}}function yI(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qp(e)?"-0":e}}function lE(n){return{integerValue:""+n}}function vI(n,e){return aI(e)?lE(e):yI(n,e)}class J_{constructor(){this._=void 0}}function SA(n,e,t){return n instanceof Xh?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Dl?Ho(n,e):n instanceof dd?X_(n,e):function(r,i){const a=Jh(r,i),u=wI(a)+wI(r._t);return Qw(a)&&Qw(r._t)?lE(u):yI(r.wt,u)}(n,e)}function AA(n,e,t){return n instanceof Dl?Ho(n,e):n instanceof dd?X_(n,e):t}function Jh(n,e){return n instanceof Pa?Qw(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Xh extends J_{}class Dl extends J_{constructor(e){super(),this.elements=e}}function Ho(n,e){const t=EI(e);for(const r of n.elements)t.some(i=>Na(i,r))||t.push(r);return{arrayValue:{values:t}}}class dd extends J_{constructor(e){super(),this.elements=e}}function X_(n,e){let t=EI(e);for(const r of n.elements)t=t.filter(i=>!Na(i,r));return{arrayValue:{values:t}}}class Pa extends J_{constructor(e,t){super(),this.wt=e,this._t=t}}function wI(n){return hr(n.integerValue||n.doubleValue)}function EI(n){return Ma(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class tg{constructor(e,t){this.field=e,this.transform=t}}class ty{constructor(e,t){this.version=e,this.transformResults=t}}class fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ny(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ng{}function uE(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ku(n.key,fr.none()):new rg(n.key,n.data,fr.none());{const t=n.data,r=_i.empty();let i=new Ln(kr.comparator);for(let a of e.fields)if(!i.has(a)){let u=t.field(a);null===u&&a.length>1&&(a=a.popLast(),u=t.field(a)),null===u?r.delete(a):r.set(a,u),i=i.add(a)}return new Go(n.key,r,new Ys(i.toArray()),fr.none())}}function cE(n,e,t){n instanceof rg?function(r,i,a){const u=r.value.clone(),d=dE(r.fieldTransforms,i,a.transformResults);u.setAll(d),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Go?function(r,i,a){if(!ny(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=dE(r.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(ry(r)),d.setAll(u),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ef(n,e,t,r){return n instanceof rg?function(i,a,u,d){if(!ny(i.precondition,a))return u;const g=i.value.clone(),y=iy(i.fieldTransforms,d,a);return g.setAll(y),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),null}(n,e,t,r):n instanceof Go?function(i,a,u,d){if(!ny(i.precondition,a))return u;const g=iy(i.fieldTransforms,d,a),y=a.data;return y.setAll(ry(i)),y.setAll(g),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(u=t,ny(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u);var a,u}function xA(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=Jh(r.transform,i||null);null!=a&&(null===t&&(t=_i.empty()),t.set(r.field,a))}return t||null}function bI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Hh(t,r,(i,a)=>function ey(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Dl&&r instanceof Dl||t instanceof dd&&r instanceof dd?Hh(t.elements,r.elements,Na):t instanceof Pa&&r instanceof Pa?Na(t._t,r._t):t instanceof Xh&&r instanceof Xh);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class rg extends ng{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Go extends ng{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function ry(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function dE(n,e,t){const r=new Map;Pt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,d=e.data.field(a.field);r.set(a.field,AA(u,d,t[i]))}return r}function iy(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,SA(a,u,e))}return r}class ku extends ng{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hE extends ng{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class RA{constructor(e){this.count=e}}var Zr,pn;function fE(n){switch(n){default:return pt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function sy(n){if(void 0===n)return Wr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case Zr.OK:return ge.OK;case Zr.CANCELLED:return ge.CANCELLED;case Zr.UNKNOWN:return ge.UNKNOWN;case Zr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Zr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Zr.INTERNAL:return ge.INTERNAL;case Zr.UNAVAILABLE:return ge.UNAVAILABLE;case Zr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Zr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Zr.NOT_FOUND:return ge.NOT_FOUND;case Zr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Zr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Zr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Zr.ABORTED:return ge.ABORTED;case Zr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Zr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Zr.DATA_LOSS:return ge.DATA_LOSS;default:return pt()}}(pn=Zr||(Zr={}))[pn.OK=0]="OK",pn[pn.CANCELLED=1]="CANCELLED",pn[pn.UNKNOWN=2]="UNKNOWN",pn[pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pn[pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pn[pn.NOT_FOUND=5]="NOT_FOUND",pn[pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",pn[pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",pn[pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",pn[pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pn[pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pn[pn.ABORTED=10]="ABORTED",pn[pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",pn[pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",pn[pn.INTERNAL=13]="INTERNAL",pn[pn.UNAVAILABLE=14]="UNAVAILABLE",pn[pn.DATA_LOSS=15]="DATA_LOSS";class Sl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ru(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return rI(this.inner)}size(){return this.innerSize}}const CI=new Tr(tt.comparator);function us(){return CI}const pE=new Tr(tt.comparator);function ig(...n){let e=pE;for(const t of n)e=e.insert(t.key,t);return e}function gE(n){let e=pE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function qo(){return tf()}function II(){return tf()}function tf(){return new Sl(n=>n.toString(),(n,e)=>n.isEqual(e))}const NA=new Tr(tt.comparator),cs=new Ln(tt.comparator);function jt(...n){let e=cs;for(const t of n)e=e.add(t);return e}const MA=new Ln(Kt);function oy(){return MA}class ay{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Al.createSynthesizedTargetChangeForCurrentChange(e,t)),new ay(Ot.min(),r,oy(),us(),jt())}}class Al{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Al(zr.EMPTY_BYTE_STRING,t,jt(),jt(),jt())}}class ly{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class uy{constructor(e,t){this.targetId=e,this.It=t}}class TI{constructor(e,t,r=zr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class mE{constructor(){this.Tt=0,this.Et=cy(),this.At=zr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=jt(),t=jt(),r=jt();return this.Et.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:pt()}}),new Al(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=cy()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class PA{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=us(),this.Bt=DI(),this.Lt=new Ln(Kt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:pt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const a=i.target;if(W_(a))if(0===r){const u=new tt(a.path);this.Kt(t,u,kn.newNoDocument(u,Ot.min()))}else Pt(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((a,u)=>{const d=this.Ht(u);if(d){if(a.current&&W_(d.target)){const g=new tt(d.target.path);null!==this.$t.get(g)||this.Xt(u,g)||this.Kt(u,g,kn.newNoDocument(g,e))}a.vt&&(t.set(u,a.St()),a.Dt())}});let r=jt();this.Bt.forEach((a,u)=>{let d=!0;u.forEachWhile(g=>{const y=this.Ht(g);return!y||2===y.purpose||(d=!1,!1)}),d&&(r=r.add(a))}),this.$t.forEach((a,u)=>u.setReadTime(e));const i=new ay(e,t,this.Lt,this.$t,r);return this.$t=us(),this.Bt=DI(),this.Lt=new Ln(Kt),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new mE,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Ln(Kt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new mE),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function DI(){return new Tr(tt.comparator)}function cy(){return new Tr(tt.comparator)}const SI={asc:"ASCENDING",desc:"DESCENDING"},AI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class dy{constructor(e,t){this.databaseId=e,this.dt=t}}function hd(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OA(n,e){return n.dt?e.toBase64():e.toUint8Array()}function xI(n,e){return hd(n,e.toTimestamp())}function yi(n){return Pt(!!n),Ot.fromTimestamp(function(e){const t=Nu(e);return new dr(t.seconds,t.nanos)}(n))}function hy(n,e){return(t=n,new dn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function sg(n){const e=dn.fromString(n);return Pt(LA(e)),e}function nf(n,e){return hy(n.databaseId,e.path)}function Oa(n,e){const t=sg(e);if(t.get(1)!==n.databaseId.projectId)throw new Oe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Oe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new tt(RI(t))}function og(n,e){return hy(n.databaseId,e)}function fy(n){const e=sg(n);return 4===e.length?dn.emptyPath():RI(e)}function py(n){return new dn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function RI(n){return Pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function NI(n,e,t){return{name:nf(n,e),fields:t.value.mapValue.fields}}function _E(n,e,t){const r=Oa(n,e.name),i=yi(e.updateTime),a=new _i({mapValue:{fields:e.fields}}),u=kn.newFoundDocument(r,i,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function rf(n,e){let t;if(e instanceof rg)t={update:NI(n,e.key,e.value)};else if(e instanceof ku)t={delete:nf(n,e.key)};else if(e instanceof Go)t={update:NI(n,e.key,e.data),updateMask:NP(e.fieldMask)};else{if(!(e instanceof hE))return pt();t={verify:nf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof Xh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Dl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof dd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Pa)return{fieldPath:a.field.canonicalString(),increment:u._t};throw pt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:xI(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:pt()),t;var i}function gy(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?fr.updateTime(yi(i.updateTime)):void 0!==i.exists?fr.exists(i.exists):fr.none():fr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,u){let d=null;"setToServerValue"in u?(Pt("REQUEST_TIME"===u.setToServerValue),d=new Xh):"appendMissingElements"in u?d=new Dl(u.appendMissingElements.values||[]):"removeAllFromArray"in u?d=new dd(u.removeAllFromArray.values||[]):"increment"in u?d=new Pa(a,u.increment):pt();const g=kr.fromServerFormat(u.fieldPath);return new tg(g,d)}(n,i)):[];var i;if(e.update){const i=Oa(n,e.update.name),a=new _i({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Ys((e.updateMask.fieldPaths||[]).map(y=>kr.fromServerFormat(y)));return new Go(i,a,u,t,r)}return new rg(i,a,t,r)}if(e.delete){const i=Oa(n,e.delete);return new ku(i,t)}if(e.verify){const i=Oa(n,e.verify);return new hE(i,t)}return pt()}function PI(n,e){return{documents:[og(n,e.path)]}}function yE(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=og(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=og(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0===g.length)return;const y=g.map(C=>function(D){if("=="===D.op){if(lI(D.value))return{unaryFilter:{field:sf(D.field),op:"IS_NAN"}};if(Wh(D.value))return{unaryFilter:{field:sf(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(lI(D.value))return{unaryFilter:{field:sf(D.field),op:"IS_NOT_NAN"}};if(Wh(D.value))return{unaryFilter:{field:sf(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sf(D.field),op:LI(D.op),value:D.value}}}(C));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(g){if(0!==g.length)return g.map(y=>{return{field:sf((C=y).field),direction:FI(C.dir)};var C})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=(y=e.limit,n.dt||ld(y)?y:{value:y});var y,d,g;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function OI(n){let e=fy(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Pt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let a=[];t.where&&(a=vE(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(C=>{return new cd(af((D=C).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;t.limit&&(d=function(C){let D;return D="object"==typeof C?C.value:C,ld(D)?null:D}(t.limit));let g=null;var C;t.startAt&&(g=new ud((C=t.startAt).values||[],!!C.before));let y=null;return t.endAt&&(y=function(C){return new ud(C.values||[],!C.before)}(t.endAt)),gI(e,i,u,a,d,"F",g,y)}function vE(n){return n?void 0!==n.unaryFilter?[VI(n)]:void 0!==n.fieldFilter?[RP(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>vE(e)).reduce((e,t)=>e.concat(t)):pt():[]}function FI(n){return SI[n]}function LI(n){return AI[n]}function sf(n){return{fieldPath:n.canonicalString()}}function af(n){return kr.fromServerFormat(n.fieldPath)}function RP(n){return Bi.create(af(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(n.fieldFilter.op),n.fieldFilter.value)}function VI(n){switch(n.unaryFilter.op){case"IS_NAN":const e=af(n.unaryFilter.field);return Bi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=af(n.unaryFilter.field);return Bi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=af(n.unaryFilter.field);return Bi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=af(n.unaryFilter.field);return Bi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}function NP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function LA(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ss(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=VA(e)),e=MP(n.get(t),e);return VA(e)}function MP(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function VA(n){return n+"\x01\x01"}function xl(n){const e=n.length;if(Pt(e>=2),2===e)return Pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),dn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const u=n.indexOf("\x01",a);switch((u<0||u>t)&&pt(),n.charAt(u+1)){case"\x01":const d=n.substring(a,u);let g;0===i.length?g=d:(i+=d,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(a,u),i+="\0";break;case"\x11":i+=n.substring(a,u+1);break;default:pt()}a=u+2}return new dn(r)}const UA=["userId","batchId"];function wE(n,e){return[n,Ss(e)]}function ag(n,e,t){return[n,Ss(e),t]}const PP={},EE=["prefixPath","collectionGroup","readTime","documentId"],lf=["prefixPath","collectionGroup","documentId"],UI=["collectionGroup","readTime","prefixPath","documentId"],BA=["canonicalId","targetId"],jA=["targetId","path"],bE=["path","targetId"],BI=["collectionId","parent"],jI=["indexId","uid"],$I=["uid","sequenceNumber"],OP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],HI=["indexId","uid","orderedDocumentKey"],my=["userId","collectionPath","documentId"],GI=["userId","collectionPath","largestBatchId"],kP=["userId","collectionGroup","largestBatchId"],$A=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],FP=[...$A,"documentOverlays"],qI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_y=qI,HA=[..._y,"indexConfiguration","indexState","indexEntries"];class WI extends sd{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function vi(n,e){const t=nt(n);return jo.N(t.ee,e)}class lg{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&cE(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ef(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ef(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=II();return this.mutations.forEach(i=>{const a=e.get(i.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(i.key)?null:d;const g=uE(u,d);null!==g&&r.set(i.key,g),u.isValidDocument()||u.convertToNoDocument(Ot.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jt())}isEqual(e){return this.batchId===e.batchId&&Hh(this.mutations,e.mutations,(t,r)=>bI(t,r))&&Hh(this.baseMutations,e.baseMutations,(t,r)=>bI(t,r))}}class CE{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pt(e.mutations.length===r.length);let i=NA;const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new CE(e,t,r,i)}}class ds{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Fu{constructor(e,t,r,i,a=Ot.min(),u=Ot.min(),d=zr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d}withSequenceNumber(e){return new Fu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Fu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Fu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class yy{constructor(e){this.ne=e}}function zI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:uf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:nf(i=n.ne,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:hd(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Lu(e.version)};else{if(!e.isUnknownDocument())return pt();r.unknownDocument={path:t.path.toArray(),version:Lu(e.version)}}var i,a;return r}function uf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Lu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vu(n){const e=new dr(n.seconds,n.nanoseconds);return Ot.fromTimestamp(e)}function fd(n,e){const t=(e.baseMutations||[]).map(a=>gy(n.ne,a));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(u.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>gy(n.ne,a)),i=dr.fromMillis(e.localWriteTimeMs);return new lg(e.batchId,i,t,r)}function cf(n){const e=Vu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Vu(n.lastLimboFreeSnapshotVersion):Ot.min();let r;var i;return void 0!==n.query.documents?(Pt(1===(i=n.query).documents.length),r=vo(Yh(fy(i.documents[0])))):r=vo(OI(n.query)),new Fu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,zr.fromBase64String(n.resumeToken))}function IE(n,e){const t=Lu(e.snapshotVersion),r=Lu(e.lastLimboFreeSnapshotVersion);let i;i=W_(e.target)?PI(n.ne,e.target):yE(n.ne,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ou(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function TE(n){const e=OI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?mI(e,e.limit,"L"):e}function DE(n,e){return new ds(e.largestBatchId,gy(n.ne,e.overlayMutation))}function vy(n,e){const t=e.path.lastSegment();return[n,Ss(e.path.popLast()),t]}function wo(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Lu(r.readTime),documentKey:Ss(r.documentKey.path),largestBatchId:r.largestBatchId}}class qA{getBundleMetadata(e,t){return WA(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Vu(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return WA(e).put({bundleId:(r=t).id,createTime:Lu(yi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return ZI(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:TE(i.bundledQuery),readTime:Vu(i.readTime)};var i})}saveNamedQuery(e,t){return ZI(e).put({name:(r=t).name,readTime:Lu(yi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function WA(n){return vi(n,"bundles")}function ZI(n){return vi(n,"namedQueries")}class ug{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new ug(e,t.uid||"")}getOverlay(e,t){return cg(e).get(vy(this.userId,t)).next(r=>r?DE(this.wt,r):null)}getOverlays(e,t){const r=qo();return ce.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,u)=>{const d=new ds(t,u);i.push(this.ie(e,d))}),ce.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Ss(u.getCollectionPath())));const a=[];return i.forEach(u=>{const d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);a.push(cg(e).W("collectionPathOverlayIndex",d))}),ce.waitFor(a)}getOverlaysForCollection(e,t,r){const i=qo(),a=Ss(t),u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return cg(e).K("collectionPathOverlayIndex",u).next(d=>{for(const g of d){const y=DE(this.wt,g);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=qo();let u;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cg(e).J({index:"collectionGroupOverlayIndex",range:d},(g,y,C)=>{const D=DE(this.wt,y);a.size()<i||D.largestBatchId===u?(a.set(D.getKey(),D),u=D.largestBatchId):C.done()}).next(()=>a)}ie(e,t){return cg(e).put(function(r,i,a){const[u,d,g]=vy(i,a.mutation.key);return{userId:i,collectionPath:d,documentId:g,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:rf(r.ne,a.mutation)}}(this.wt,this.userId,t))}}function cg(n){return vi(n,"documentOverlays")}class pd{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(hr(e.integerValue));else if("doubleValue"in e){const r=hr(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),Qp(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(od(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?uI(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):pt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),tt.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function KI(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function YI(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=KI(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}pd.ye=new pd;class LP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=t.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const t=this.Ve(e),r=YI(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}De(e){const t=this.Ve(e),r=YI(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class QI{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class JI{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class dg{constructor(){this.Me=new LP,this.Fe=new QI(this.Me),this.$e=new JI(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class gd{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new gd(this.indexId,this.documentKey,this.arrayValue,r)}}function Uu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=df(n.arrayValue,e.arrayValue),0!==t?t:(t=df(n.directionalValue,e.directionalValue),0!==t?t:tt.comparator(n.documentKey,e.documentKey)))}function df(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class SE{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=rd(e);if(void 0!==t&&!this.Qe(t))return!1;const r=id(e);let i=0,a=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const u=r[i];if(!this.je(this.Ke,u)||!this.We(this.Ue[a++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(a>=this.Ue.length||!this.We(this.Ue[a++],u))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class XI{constructor(){this.ze=new AE}addToCollectionParentIndex(e,t){return this.ze.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(Ds.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(Ds.min())}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class AE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ln(dn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ln(dn.comparator)).toArray()}}const hg=new Uint8Array(0);class eT{constructor(e,t){this.user=e,this.databaseId=t,this.He=new AE,this.Je=new Sl(r=>Ou(r),(r,i)=>eg(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const a={collectionId:r,parent:Ss(i)};return tT(e).put(a)}return ce.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[mA(t),""],!1,!0);return tT(e).K(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;r.push(xl(u.parent))}return r})}addFieldIndex(e,t){const r=xE(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;delete i.indexId;const a=r.add(i);if(t.indexState){const u=wy(e);return a.next(d=>{u.put(wo(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=xE(e),i=wy(e),a=fg(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=fg(e);let i=!0;const a=new Map;return ce.forEach(this.Ye(t),u=>this.Xe(e,u).next(d=>{i&&(i=!!d),a.set(u,d)})).next(()=>{if(i){let u=jt();const d=[];return ce.forEach(a,(g,y)=>{var C;Ue("IndexedDbIndexManager",`Using index ${C=g,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(Ye=>`${Ye.fieldPath}:${Ye.kind}`).join(",")}`} to execute ${Ou(t)}`);const D=function(Ye,ze){const Nt=rd(ze);if(void 0===Nt)return null;for(const Ut of z_(Ye,Nt.fieldPath))switch(Ut.op){case"array-contains-any":return Ut.value.arrayValue.values||[];case"array-contains":return[Ut.value]}return null}(y,g),N=function(Ye,ze){const Nt=new Map;for(const Ut of id(ze))for(const mn of z_(Ye,Ut.fieldPath))switch(mn.op){case"==":case"in":Nt.set(Ut.fieldPath.canonicalString(),mn.value);break;case"not-in":case"!=":return Nt.set(Ut.fieldPath.canonicalString(),mn.value),Array.from(Nt.values())}return null}(y,g),L=function(Ye,ze){const Nt=[];let Ut=!0;for(const mn of id(ze)){const oi=0===mn.kind?Z_(Ye,mn.fieldPath,Ye.startAt):fI(Ye,mn.fieldPath,Ye.startAt);Nt.push(oi.value),Ut&&(Ut=oi.inclusive)}return new ud(Nt,Ut)}(y,g),j=function(Ye,ze){const Nt=[];let Ut=!0;for(const mn of id(ze)){const oi=0===mn.kind?fI(Ye,mn.fieldPath,Ye.endAt):Z_(Ye,mn.fieldPath,Ye.endAt);Nt.push(oi.value),Ut&&(Ut=oi.inclusive)}return new ud(Nt,Ut)}(y,g),ne=this.Ze(g,y,L),le=this.Ze(g,y,j),Ge=this.tn(g,y,N),Je=this.en(g.indexId,D,ne,L.inclusive,le,j.inclusive,Ge);return ce.forEach(Je,Ye=>r.j(Ye,t.limit).next(ze=>{ze.forEach(Nt=>{const Ut=tt.fromSegments(Nt.documentKey);u.has(Ut)||(u=u.add(Ut),d.push(Ut))})}))}).next(()=>d)}return ce.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,i,a,u,d){const g=(null!=t?t.length:1)*Math.max(r.length,a.length),y=g/(null!=t?t.length:1),C=[];for(let D=0;D<g;++D){const N=t?this.nn(t[D/y]):hg,L=this.sn(e,N,r[D%y],i),j=this.rn(e,N,a[D%y],u),ne=d.map(le=>this.sn(e,N,le,!0));C.push(...this.createRange(L,j,ne))}return C}sn(e,t,r,i){const a=new gd(e,tt.empty(),t,r);return i?a:a.Le()}rn(e,t,r,i){const a=new gd(e,tt.empty(),t,r);return i?a.Le():a}Xe(e,t){const r=new SE(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let u=null;for(const d of a)r.Ge(d)&&(!u||d.fields.length>u.fields.length)&&(u=d);return u})}getIndexType(e,t){let r=2;return ce.forEach(this.Ye(t),i=>this.Xe(e,i).next(a=>{a?0!==r&&a.fields.length<function(u){let d=new Ln(kr.comparator),g=!1;for(const y of u.filters){const C=y;C.field.isKeyField()||("array-contains"===C.op||"array-contains-any"===C.op?g=!0:d=d.add(C.field))}for(const y of u.orderBy)y.field.isKeyField()||(d=d.add(y.field));return d.size+(g?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new dg;for(const i of id(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const u=r.Be(i.kind);pd.ye.re(a,u)}return r.Oe()}nn(e){const t=new dg;return pd.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new dg;return pd.ye.re($o(this.databaseId,t),r.Be(function(i){const a=id(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let i=[];i.push(new dg);let a=0;for(const u of id(e)){const d=r[a++];for(const g of i)if(this.cn(t,u.fieldPath)&&Ma(d))i=this.an(i,u,d);else{const y=g.Be(u.kind);pd.ye.re(d,y)}}return this.hn(i)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const i=[...e],a=[];for(const u of r.arrayValue.values||[])for(const d of i){const g=new dg;g.seed(d.Oe()),pd.ye.re(u,g.Be(t.kind)),a.push(g)}return a}cn(e,t){return!!e.filters.find(r=>r instanceof Bi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=xE(e),i=wy(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(a=>{const u=[];return ce.forEach(a,d=>i.get([d.indexId,this.uid]).next(g=>{u.push(function(y,C){const D=C?new Zp(C.sequenceNumber,new Ds(Vu(C.readTime),new tt(xl(C.documentKey)),C.largestBatchId)):Zp.empty(),N=y.fields.map(([L,j])=>new j_(kr.fromServerFormat(L),j));return new zp(y.indexId,y.collectionGroup,N,D)}(d,g))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Kt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=xE(e),a=wy(e);return this.ln(e).next(u=>i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>ce.forEach(d,g=>a.put(wo(g.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(i,a)=>{const u=r.get(i.collectionGroup);return(u?ce.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),ce.forEach(d,g=>this.fn(e,i,g).next(y=>{const C=this.dn(a,g);return y.isEqual(C)?ce.resolve():this._n(e,a,g,y,C)}))))})}wn(e,t,r,i){return fg(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,i){return fg(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const i=fg(e);let a=new Ln(Uu);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(u,d)=>{a=a.add(new gd(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>a)}dn(e,t){let r=new Ln(Uu);const i=this.on(t,e);if(null==i)return r;const a=rd(t);if(null!=a){const u=e.data.field(a.fieldPath);if(Ma(u))for(const d of u.arrayValue.values||[])r=r.add(new gd(t.indexId,e.key,this.nn(d),i))}else r=r.add(new gd(t.indexId,e.key,hg,i));return r}_n(e,t,r,i,a){Ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(d,g,y,C,D){const N=d.getIterator(),L=g.getIterator();let j=Gh(N),ne=Gh(L);for(;j||ne;){let le=!1,Ge=!1;if(j&&ne){const Je=y(j,ne);Je<0?Ge=!0:Je>0&&(le=!0)}else null!=j?Ge=!0:le=!0;le?(C(ne),ne=Gh(L)):Ge?(D(j),j=Gh(N)):(j=Gh(N),ne=Gh(L))}}(i,a,Uu,d=>{u.push(this.wn(e,t,r,d))},d=>{u.push(this.mn(e,t,r,d))}),ce.waitFor(u)}ln(e){let t=1;return wy(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,d)=>Uu(u,d)).filter((u,d,g)=>!d||0!==Uu(u,g[d-1]));const i=[];i.push(e);for(const u of r){const d=Uu(u,e),g=Uu(u,t);if(0===d)i[0]=e.Le();else if(d>0&&g<0)i.push(u),i.push(u.Le());else if(g>0)break}i.push(t);const a=[];for(let u=0;u<i.length;u+=2)a.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,hg,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,hg,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(RE)}getMinOffset(e,t){return ce.mapArray(this.Ye(t),r=>this.Xe(e,r).next(i=>i||pt())).next(RE)}}function tT(n){return vi(n,"collectionParents")}function fg(n){return vi(n,"indexEntries")}function xE(n){return vi(n,"indexConfiguration")}function wy(n){return vi(n,"indexState")}function RE(n){Pt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Gw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ds(e.readTime,e.documentKey,t)}const nT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class As{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new As(e,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function rT(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],u=IDBKeyRange.only(t.batchId);let d=0;const g=r.J({range:u},(C,D,N)=>(d++,N.delete()));a.push(g.next(()=>{Pt(1===d)}));const y=[];for(const C of t.mutations){const D=ag(e,C.key.path,t.batchId);a.push(i.delete(D)),y.push(C.key)}return ce.waitFor(a).next(()=>y)}function NE(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw pt();e=n.noDocument}return JSON.stringify(e).length}As.DEFAULT_COLLECTION_PERCENTILE=10,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,As.DEFAULT=new As(41943040,As.DEFAULT_COLLECTION_PERCENTILE,As.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),As.DISABLED=new As(-1,0,0);class ME{constructor(e,t,r,i){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,t,r,i){Pt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new ME(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return md(e).J({index:"userMutationsIndex",range:r},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=pg(e),u=md(e);return u.add({}).next(d=>{Pt("number"==typeof d);const g=new lg(d,t,r,i),y=function(N,L,j){const ne=j.baseMutations.map(Ge=>rf(N.ne,Ge)),le=j.mutations.map(Ge=>rf(N.ne,Ge));return{userId:L,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:ne,mutations:le}}(this.wt,this.userId,g),C=[];let D=new Ln((N,L)=>Kt(N.canonicalString(),L.canonicalString()));for(const N of i){const L=ag(this.userId,N.key.path,d);D=D.add(N.key.path.popLast()),C.push(u.put(y)),C.push(a.put(L,PP))}return D.forEach(N=>{C.push(this.indexManager.addToCollectionParentIndex(e,N))}),e.addOnCommittedListener(()=>{this.gn[d]=g.keys()}),ce.waitFor(C).next(()=>g)})}lookupMutationBatch(e,t){return md(e).get(t).next(r=>r?(Pt(r.userId===this.userId),fd(this.wt,r)):null)}yn(e,t){return this.gn[t]?ce.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.gn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return md(e).J({index:"userMutationsIndex",range:i},(u,d,g)=>{d.userId===this.userId&&(Pt(d.batchId>=r),a=fd(this.wt,d)),g.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return md(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,a,u)=>{r=a.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return md(e).K("userMutationsIndex",t).next(r=>r.map(i=>fd(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=wE(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return pg(e).J({range:i},(u,d,g)=>{const[y,C,D]=u,N=xl(C);if(y===this.userId&&t.path.isEqual(N))return md(e).get(D).next(L=>{if(!L)throw pt();Pt(L.userId===this.userId),a.push(fd(this.wt,L))});g.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ln(Kt);const i=[];return t.forEach(a=>{const u=wE(this.userId,a.path),d=IDBKeyRange.lowerBound(u),g=pg(e).J({range:d},(y,C,D)=>{const[N,L,j]=y,ne=xl(L);N===this.userId&&a.path.isEqual(ne)?r=r.add(j):D.done()});i.push(g)}),ce.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=wE(this.userId,r),u=IDBKeyRange.lowerBound(a);let d=new Ln(Kt);return pg(e).J({range:u},(g,y,C)=>{const[D,N,L]=g,j=xl(N);D===this.userId&&r.isPrefixOf(j)?j.length===i&&(d=d.add(L)):C.done()}).next(()=>this.pn(e,d))}pn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(md(e).get(a).next(u=>{if(null===u)throw pt();Pt(u.userId===this.userId),r.push(fd(this.wt,u))}))}),ce.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return rT(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),ce.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return pg(e).J({range:r},(a,u,d)=>{if(a[0]===this.userId){const g=xl(a[1]);i.push(g)}else d.done()}).next(()=>{Pt(0===i.length)})})}containsKey(e,t){return zA(e,this.userId,t)}Tn(e){return iT(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function zA(n,e,t){const r=wE(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return pg(n).J({range:a,H:!0},(d,g,y)=>{const[C,D,N]=d;C===e&&D===i&&(u=!0),y.done()}).next(()=>u)}function md(n){return vi(n,"mutations")}function pg(n){return vi(n,"documentMutations")}function iT(n){return vi(n,"mutationQueues")}class ka{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new ka(0)}static Rn(){return new ka(-1)}}class ZA{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new ka(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Ot.fromTimestamp(new dr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pn(e,i)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>hf(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(Pt(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return hf(e).J((u,d)=>{const g=cf(d);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,a.push(this.removeTargetData(e,g)))}).next(()=>ce.waitFor(a)).next(()=>i)}forEachTarget(e,t){return hf(e).J((r,i)=>{const a=cf(i);t(a)})}bn(e){return PE(e).get("targetGlobalKey").next(t=>(Pt(null!==t),t))}Pn(e,t){return PE(e).put("targetGlobalKey",t)}vn(e,t){return hf(e).put(IE(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ou(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return hf(e).J({range:i,index:"queryTargetsIndex"},(u,d,g)=>{const y=cf(d);eg(t,y.target)&&(a=y,g.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=xs(e);return t.forEach(u=>{const d=Ss(u.path);i.push(a.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,u))}),ce.waitFor(i)}removeMatchingKeys(e,t,r){const i=xs(e);return ce.forEach(t,a=>{const u=Ss(a.path);return ce.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=xs(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=xs(e);let a=jt();return i.J({range:r,H:!0},(u,d,g)=>{const y=xl(u[1]),C=new tt(y);a=a.add(C)}).next(()=>a)}containsKey(e,t){const r=Ss(t.path),i=IDBKeyRange.bound([r],[mA(r)],!1,!0);let a=0;return xs(e).J({index:"documentTargetsIndex",H:!0,range:i},([u,d],g,y)=>{0!==u&&(a++,y.done())}).next(()=>a>0)}te(e,t){return hf(e).get(t).next(r=>r?cf(r):null)}}function hf(n){return vi(n,"targets")}function PE(n){return vi(n,"targetGlobal")}function xs(n){return vi(n,"targetDocuments")}function OE([n,e],[t,r]){const i=Kt(n,t);return 0===i?Kt(e,r):i}class kE{constructor(e){this.Sn=e,this.buffer=new Ln(OE),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();OE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FE{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ce.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Aa(r)?Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Au(r)}yield t.kn(3e5)}))}}class KA{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(Ui.ot);const r=new kE(t);return this.On.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.On.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(nT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nT):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,i,a,u,d,g,y;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,u=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,d=Date.now(),this.removeTargets(e,r,t))).next(D=>(a=D,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(y=Date.now(),V_()<=Da.in.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-C}ms\n\tDetermined least recently used ${i} in `+(d-u)+`ms\n\tRemoved ${a} targets in `+(g-d)+`ms\n\tRemoved ${D} documents in `+(y-g)+`ms\nTotal Duration: ${y-C}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:D})))}}class LE{constructor(e,t){this.db=e,this.garbageCollector=new KA(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,i)=>t(i))}addReference(e,t,r){return ff(e,r)}removeReference(e,t,r){return ff(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ff(e,t)}Un(e,t){return function(r,i){let a=!1;return iT(r).Y(u=>zA(r,u,i).next(d=>(d&&(a=!0),ce.resolve(!d)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Ln(e,(u,d)=>{if(d<=t){const g=this.Un(e,u).next(y=>{if(!y)return a++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Ot.min()),xs(e).delete([0,Ss(u.path)])))});i.push(g)}}).next(()=>ce.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ff(e,t)}Ln(e,t){const r=xs(e);let i,a=Ui.ot;return r.J({index:"documentTargetsIndex"},([u,d],{path:g,sequenceNumber:y})=>{0===u?(a!==Ui.ot&&t(new tt(xl(i)),a),a=y,i=g):a=Ui.ot}).next(()=>{a!==Ui.ot&&t(new tt(xl(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ff(n,e){return xs(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ss(e.path),sequenceNumber:r}));var r}class VE{constructor(){this.changes=new Sl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class sT{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return pf(e).put(r)}removeEntry(e,t,r){return pf(e).delete(function(i,a){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],uf(a),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=kn.newInvalidDocument(t);return pf(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ey(t))},(i,a)=>{r=this.Kn(t,a)}).next(()=>r)}Gn(e,t){let r={size:0,document:kn.newInvalidDocument(t)};return pf(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ey(t))},(i,a)=>{r={document:this.Kn(t,a),size:NE(a)}}).next(()=>r)}getEntries(e,t){let r=us();return this.Qn(e,t,(i,a)=>{const u=this.Kn(i,a);r=r.insert(i,u)}).next(()=>r)}jn(e,t){let r=us(),i=new Tr(tt.comparator);return this.Qn(e,t,(a,u)=>{const d=this.Kn(a,u);r=r.insert(a,d),i=i.insert(a,NE(u))}).next(()=>({documents:r,Wn:i}))}Qn(e,t,r){if(t.isEmpty())return ce.resolve();let i=new Ln(XA);t.forEach(g=>i=i.add(g));const a=IDBKeyRange.bound(Ey(i.first()),Ey(i.last())),u=i.getIterator();let d=u.getNext();return pf(e).J({index:"documentKeyIndex",range:a},(g,y,C)=>{const D=tt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&XA(d,D)<0;)r(d,null),d=u.getNext();d&&d.isEqual(D)&&(r(d,y),d=u.hasNext()?u.getNext():null),d?C.q(Ey(d)):C.done()}).next(()=>{for(;d;)r(d,null),d=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),uf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pf(e).K(IDBKeyRange.bound(i,a,!0)).next(u=>{let d=us();for(const g of u){const y=this.Kn(tt.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);d=d.insert(y.key,y)}return d})}getAllFromCollectionGroup(e,t,r,i){let a=us();const u=JA(t,r),d=JA(t,Ds.max());return pf(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,d,!0)},(g,y,C)=>{const D=this.Kn(tt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);a=a.insert(D.key,D),a.size===i&&C.done()}).next(()=>a)}newChangeBuffer(e){return new VP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return QA(e).get("remoteDocumentGlobalKey").next(t=>(Pt(!!t),t))}qn(e,t){return QA(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function GA(n,e){let t;if(e.document)t=_E(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=tt.fromSegments(e.noDocument.path),i=Vu(e.noDocument.readTime);t=kn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pt();{const r=tt.fromSegments(e.unknownDocument.path),i=Vu(e.unknownDocument.version);t=kn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new dr(r[0],r[1]);return Ot.fromTimestamp(i)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(Ot.min()))return r}return kn.newInvalidDocument(e)}}function YA(n){return new sT(n)}class VP extends VE{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Sl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Ln((a,u)=>Kt(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const d=this.Hn.get(a);if(t.push(this.zn.removeEntry(e,a,d.readTime)),u.isValidDocument()){const g=zI(this.zn.wt,u);i=i.add(a.path.popLast()),r+=NE(g)-d.size,t.push(this.zn.addEntry(e,a,g))}else if(r-=d.size,this.trackRemovals){const g=zI(this.zn.wt,u.convertToNoDocument(Ot.min()));t.push(this.zn.addEntry(e,a,g))}}),i.forEach(a=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.zn.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:i})=>(i.forEach((a,u)=>{this.Hn.set(a,{size:u,readTime:r.get(a).readTime})}),r))}}function QA(n){return vi(n,"remoteDocumentGlobal")}function pf(n){return vi(n,"remoteDocumentsV14")}function Ey(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function JA(n,e){const t=e.documentKey.path.toArray();return[n,uf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function XA(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Kt(t[a],r[a]),i)return i;return i=Kt(t.length,r.length),i||(i=Kt(t[t.length-2],r[r.length-2]),i||Kt(t[t.length-1],r[r.length-1]))}class oT{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class aT{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&ef(r.mutation,i,Ys.empty(),dr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=jt()){const i=qo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let u=ig();return a.forEach((d,g)=>{u=u.insert(d,g.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=qo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,jt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((u,d)=>{t.set(u,d)})})}computeViews(e,t,r,i){let a=us();const u=tf(),d=tf();return t.forEach((g,y)=>{const C=r.get(y.key);i.has(y.key)&&(void 0===C||C.mutation instanceof Go)?a=a.insert(y.key,y):void 0!==C&&(u.set(y.key,C.mutation.getFieldMask()),ef(C.mutation,y,C.mutation.getFieldMask(),dr.now()))}),this.recalculateAndSaveOverlays(e,a).next(g=>(g.forEach((y,C)=>u.set(y,C)),t.forEach((y,C)=>{var D;return d.set(y,new oT(C,null!==(D=u.get(y))&&void 0!==D?D:null))}),d))}recalculateAndSaveOverlays(e,t){const r=tf();let i=new Tr((u,d)=>u-d),a=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const d of u)d.keys().forEach(g=>{const y=t.get(g);if(null===y)return;let C=r.get(g)||Ys.empty();C=d.applyToLocalView(y,C),r.set(g,C);const D=(i.get(d.batchId)||jt()).add(g);i=i.insert(d.batchId,D)})}).next(()=>{const u=[],d=i.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),y=g.key,C=g.value,D=II();C.forEach(N=>{if(!a.has(N)){const L=uE(t.get(N),r.get(N));null!==L&&D.set(N,L),a=a.add(N)}}),u.push(this.documentOverlayCache.saveOverlays(e,y,D))}return ce.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return tt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):iE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const u=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ce.resolve(qo());let d=-1,g=a;return u.next(y=>ce.forEach(y,(C,D)=>(d<D.largestBatchId&&(d=D.largestBatchId),a.get(C)?ce.resolve():this.getBaseDocument(e,C,D).next(N=>{g=g.insert(C,N)}))).next(()=>this.populateOverlays(e,y,a)).next(()=>this.computeViews(e,g,y,jt())).next(C=>({batchId:d,changes:gE(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tt(t)).next(r=>{let i=ig();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=ig();return this.indexManager.getCollectionParents(e,i).next(u=>ce.forEach(u,d=>{const g=(y=t,C=d.child(i),new Il(C,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,C;return this.getDocumentsMatchingCollectionQuery(e,g,r).next(y=>{y.forEach((C,D)=>{a=a.insert(C,D)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((d,g)=>{const y=g.getKey();null===i.get(y)&&(i=i.insert(y,kn.newInvalidDocument(y)))});let u=ig();return i.forEach((d,g)=>{const y=a.get(d);void 0!==y&&ef(y.mutation,g,Ys.empty(),dr.now()),Q_(t,g)&&(u=u.insert(d,g))}),u})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):ce.resolve(kn.newInvalidDocument(t))}}class ex{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return ce.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:yi(r.createTime)}),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:TE(r.bundledQuery),readTime:yi(r.readTime)}),ce.resolve();var r}}class tx{constructor(){this.overlays=new Tr(tt.comparator),this.Xn=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const r=qo();return ce.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ie(e,t,a)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Xn.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const i=qo(),a=t.length+1,u=new tt(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&g.largestBatchId>r&&i.set(g.getKey(),g)}return ce.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Tr((y,C)=>y-C);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let C=a.get(y.largestBatchId);null===C&&(C=qo(),a=a.insert(y.largestBatchId,C)),C.set(y.getKey(),y)}}const d=qo(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,C)=>d.set(y,C)),!(d.size()>=i)););return ce.resolve(d)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new ds(t,r));let a=this.Xn.get(t);void 0===a&&(a=jt(),this.Xn.set(t,a)),this.Xn.set(t,a.add(r.key))}}class UE{constructor(){this.Zn=new Ln(si.ts),this.es=new Ln(si.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new si(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new si(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new tt(new dn([])),r=new si(t,e),i=new si(t,e+1),a=[];return this.es.forEachInRange([r,i],u=>{this.rs(u),a.push(u.key)}),a}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new tt(new dn([])),r=new si(t,e),i=new si(t,e+1);let a=jt();return this.es.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new si(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class si{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return tt.comparator(e.key,t.key)||Kt(e.ls,t.ls)}static ns(e,t){return Kt(e.ls,t.ls)||tt.comparator(e.key,t.key)}}class lT{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Ln(si.ts)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.fs;this.fs++;const u=new lg(a,t,r,i);this.mutationQueue.push(u);for(const d of i)this.ds=this.ds.add(new si(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ce.resolve(u)}lookupMutationBatch(e,t){return ce.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),a=i<0?0:i;return ce.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new si(t,0),i=new si(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],u=>{const d=this._s(u.ls);a.push(d)}),ce.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ln(Kt);return t.forEach(i=>{const a=new si(i,0),u=new si(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([a,u],d=>{r=r.add(d.ls)})}),ce.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;tt.isDocumentKey(a)||(a=a.child(""));const u=new si(new tt(a),0);let d=new Ln(Kt);return this.ds.forEachWhile(g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(d=d.add(g.ls)),!0)},u),ce.resolve(this.gs(d))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Pt(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return ce.forEach(t.mutations,i=>{const a=new si(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new si(t,0),i=this.ds.firstAfterOrEqual(r);return ce.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ce.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class uT{constructor(e){this.ps=e,this.docs=new Tr(tt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,u=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():kn.newInvalidDocument(t))}getEntries(e,t){let r=us();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():kn.newInvalidDocument(i))}),ce.resolve(r)}getAllFromCollection(e,t,r){let i=us();const a=new tt(t.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:g}}=u.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||Gw(XC(g),r)<=0||(i=i.insert(g.key,g.mutableCopy()))}return ce.resolve(i)}getAllFromCollectionGroup(e,t,r,i){pt()}Is(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new nx(this)}getSize(e){return ce.resolve(this.size)}}class nx extends VE{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class rx{constructor(e){this.persistence=e,this.Ts=new Sl(t=>Ou(t),eg),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.Es=0,this.As=new UE,this.targetCount=0,this.Rs=ka.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),ce.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new ka(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.vn(t),ce.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Ts.forEach((u,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Ts.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),ce.waitFor(a).next(()=>i)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),ce.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.As.containsKey(t))}}class BE{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Ui(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new rx(this),this.indexManager=new XI,this.remoteDocumentCache=new uT(r=>this.referenceDelegate.Ss(r)),this.wt=new yy(t),this.Ds=new ex(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new lT(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ue("MemoryPersistence","Starting transaction:",e);const i=new by(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(a=>this.referenceDelegate.xs(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ns(e,t){return ce.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class by extends sd{constructor(e){super(),this.currentSequenceNumber=e}}class jE{constructor(e){this.persistence=e,this.ks=new UE,this.Os=null}static Ms(e){return new jE(e)}get Fs(){if(this.Os)return this.Os;throw pt()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),ce.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Fs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Fs,r=>{const i=tt.fromPath(r);return this.$s(e,i).next(a=>{a||t.removeEntry(i,Ot.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return ce.or([()=>ce.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class cT{constructor(e){this.wt=e}O(e,t,r,i){const a=new Kp("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UA,{unique:!0}),d.createObjectStore("documentMutations"),gg(e),function(d){d.createObjectStore("remoteDocuments")}(e));let u=ce.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),gg(e)),u=u.next(()=>function(d){const g=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ot.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",y)}(a))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(d,g){return g.store("mutations").K().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UA,{unique:!0});const C=g.store("mutations"),D=y.map(N=>C.put(N));return ce.waitFor(D)})}(e,a))),u=u.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Bs(a))),r<6&&i>=6&&(u=u.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(a)))),r<7&&i>=7&&(u=u.next(()=>this.Us(a))),r<8&&i>=8&&(u=u.next(()=>this.qs(e,a))),r<9&&i>=9&&(u=u.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.Ks(a))),r<11&&i>=11&&(u=u.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(d){const g=d.createObjectStore("documentOverlays",{keyPath:my});g.createIndex("collectionPathOverlayIndex",GI,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",kP,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(d){const g=d.createObjectStore("remoteDocumentsV14",{keyPath:EE});g.createIndex("documentKeyIndex",lf),g.createIndex("collectionGroupIndex",UI)}(e)).next(()=>this.Gs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.Qs(e,a))),r<15&&i>=15&&(u=u.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:jI}).createIndex("sequenceNumberIndex",$I,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:OP}).createIndex("documentKeyIndex",HI,{unique:!1})}(e))),u}Ls(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=NE(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(i=>ce.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",u).next(d=>ce.forEach(d,g=>{Pt(g.userId===a.userId);const y=fd(this.wt,g);return rT(e,a.userId,y).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.J((u,d)=>{const g=new dn(u),y=[0,Ss(g)];a.push(t.get(y).next(C=>C?ce.resolve():t.put({targetId:0,path:Ss(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ce.waitFor(a))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:BI});const r=t.store("collectionParents"),i=new AE,a=u=>{if(i.add(u)){const d=u.lastSegment(),g=u.popLast();return r.put({collectionId:d,parent:Ss(g)})}};return t.store("remoteDocuments").J({H:!0},(u,d)=>{const g=new dn(u);return a(g.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([u,d,g],y)=>{const C=xl(d);return a(C.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,i)=>{const a=cf(i),u=IE(this.wt,a);return t.put(u)})}Gs(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((a,u)=>{const d=t.store("remoteDocumentsV14"),g=(y=u,y.document?new tt(dn.fromString(y.document.name).popFirst(5)):y.noDocument?tt.fromSegments(y.noDocument.path):y.unknownDocument?tt.fromSegments(y.unknownDocument.path):pt()).path.toArray();var y;const C={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(d.put(C))}).next(()=>ce.waitFor(i))}Qs(e,t){const r=t.store("mutations"),i=YA(this.wt),a=new BE(jE.Ms,this.wt.ne);return r.K().next(u=>{const d=new Map;return u.forEach(g=>{var y;let C=null!==(y=d.get(g.userId))&&void 0!==y?y:jt();fd(this.wt,g).keys().forEach(D=>C=C.add(D)),d.set(g.userId,C)}),ce.forEach(d,(g,y)=>{const C=new mi(y),D=ug.se(this.wt,C),N=a.getIndexManager(C),L=ME.se(C,this.wt,N,a.referenceDelegate);return new aT(i,L,D,N).recalculateAndSaveOverlaysForDocumentKeys(new WI(t,Ui.ot),g).next()})})}}function gg(n){n.createObjectStore("targetDocuments",{keyPath:jA}).createIndex("documentTargetsIndex",bE,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",BA,{unique:!0}),n.createObjectStore("targetGlobal")}const $E="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class HE{constructor(e,t,r,i,a,u,d,g,y,C,D=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=a,this.window=u,this.document=d,this.Ws=y,this.zs=C,this.Hs=D,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=N=>Promise.resolve(),!HE.V())throw new Oe(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new LE(this,i),this.ei=t+"main",this.wt=new yy(g),this.ni=new jo(this.ei,this.Hs,new cT(this.wt)),this.Vs=new ZA(this.referenceDelegate,this.wt),this.remoteDocumentCache=YA(this.wt),this.Ds=new qA,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===C&&Wr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Oe(ge.FAILED_PRECONDITION,$E);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Ui(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,Ce.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,Ce.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Ce.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Cy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Aa(e))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return mg(e).get("owner").next(t=>ce.resolve(this.di(t)))}_i(e){return Cy(e).delete(this.clientId)}wi(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=vi(r,"clientMetadata");return i.K().next(a=>{const u=e.gi(a,18e5),d=a.filter(g=>-1===u.indexOf(g));return ce.forEach(d,g=>i.delete(g.clientId)).next(()=>d)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?ce.resolve(!0):mg(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Oe(ge.FAILED_PRECONDITION,$E);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cy(e).K().next(r=>void 0===this.gi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new WI(t,Ui.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>Cy(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return ME.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new eT(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return ug.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Ue("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(u=this.Hs)?HA:14===u?_y:13===u?qI:12===u?FP:11===u?$A:void pt();var u;let d;return this.ni.runTransaction(e,i,a,g=>(d=new WI(g,this.Ps?this.Ps.next():Ui.ot),"readwrite-primary"===t?this.ai(d).next(y=>!!y||this.hi(d)).next(y=>{if(!y)throw Wr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Oe(ge.FAILED_PRECONDITION,eI);return r(d)}).next(y=>this.fi(d).next(()=>y)):this.bi(d).next(()=>r(d)))).then(g=>(d.raiseOnCommittedEvent(),g))}bi(e){return mg(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Oe(ge.FAILED_PRECONDITION,$E)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return mg(e).put("owner",t)}static V(){return jo.V()}li(e){const t=mg(e);return t.get("owner").next(r=>this.di(r)?(Ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Wr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Wr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Wr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function mg(n){return vi(n,"owner")}function Cy(n){return vi(n,"clientMetadata")}function dT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class GE{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=jt(),i=jt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new GE(e,t.fromCache,r,i)}}class hT{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(a=>a||this.xi(e,t,i,r)).next(a=>a||this.Ni(e,t))}Ci(e,t){return ce.resolve(null)}xi(e,t,r,i){return function DA(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(Ot.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(a=>{const u=this.ki(t,a);return this.Oi(t,u,r,i)?this.Ni(e,t):(V_()<=Da.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Y_(t)),this.Mi(e,u,t,JC(i,-1)))})}ki(e,t){let r=new Ln(aE(e));return t.forEach((i,a)=>{Q_(e,a)&&(r=r.add(a))}),r}Oi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ni(e,t){return V_()<=Da.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",Y_(t)),this.Di.getDocumentsMatchingQuery(e,t,Ds.min())}Mi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(u=>{a=a.insert(u.key,u)}),a))}}class ix{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new Tr(Kt),this.Bi=new Sl(a=>Ou(a),eg),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aT(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function fT(n,e,t,r){return new ix(n,e,t,r)}function pT(n,e){return qE.apply(this,arguments)}function qE(){return qE=(0,Ce.Z)(function*(n,e){const t=nt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const u=[],d=[];let g=jt();for(const y of i){u.push(y.batchId);for(const C of y.mutations)g=g.add(C.key)}for(const y of a){d.push(y.batchId);for(const C of y.mutations)g=g.add(C.key)}return t.localDocuments.getDocuments(r,g).next(y=>({Ki:y,removedBatchIds:u,addedBatchIds:d}))})})}),qE.apply(this,arguments)}function sx(n,e){const t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Ui.newChangeBuffer({trackRemovals:!0});return function(u,d,g,y){const C=g.batch,D=C.keys();let N=ce.resolve();return D.forEach(L=>{N=N.next(()=>y.getEntry(d,L)).next(j=>{const ne=g.docVersions.get(L);Pt(null!==ne),j.version.compareTo(ne)<0&&(C.applyToRemoteDocument(j,g),j.isValidDocument()&&(j.setReadTime(g.commitVersion),y.addEntry(j)))})}),N.next(()=>u.mutationQueue.removeMutationBatch(d,C))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let d=jt();for(let g=0;g<u.mutationResults.length;++g)u.mutationResults[g].transformResults.length>0&&(d=d.add(u.batch.mutations[g].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function gT(n){const e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function UP(n,e){const t=nt(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const d=[];e.targetChanges.forEach((C,D)=>{const N=i.get(D);if(!N)return;d.push(t.Vs.removeMatchingKeys(a,C.removedDocuments,D).next(()=>t.Vs.addMatchingKeys(a,C.addedDocuments,D)));let L=N.withSequenceNumber(a.currentSequenceNumber);var j,ne,le;e.targetMismatches.has(D)?L=L.withResumeToken(zr.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):C.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(C.resumeToken,r)),i=i.insert(D,L),ne=L,le=C,(0===(j=N).resumeToken.approximateByteSize()||ne.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8||le.addedDocuments.size+le.modifiedDocuments.size+le.removedDocuments.size>0)&&d.push(t.Vs.updateTargetData(a,L))});let g=us(),y=jt();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,C))}),d.push(ox(a,u,e.documentUpdates).next(C=>{g=C.Gi,y=C.Qi})),!r.isEqual(Ot.min())){const C=t.Vs.getLastRemoteSnapshotVersion(a).next(D=>t.Vs.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(C)}return ce.waitFor(d).next(()=>u.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,g,y)).next(()=>g)}).then(a=>(t.$i=i,a))}function ox(n,e,t){let r=jt(),i=jt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let u=us();return t.forEach((d,g)=>{const y=a.get(d);g.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(d)),g.isNoDocument()&&g.version.isEqual(Ot.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||0===g.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):Ue("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",g.version)}),{Gi:u,Qi:i}})}function BP(n,e){const t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _g(n,e){const t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(a=>a?(i=a,ce.resolve(i)):t.Vs.allocateTargetId(r).next(u=>(i=new Fu(e,u,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function yg(n,e,t){return WE.apply(this,arguments)}function WE(){return WE=(0,Ce.Z)(function*(n,e,t){const r=nt(n),i=r.$i.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Aa(u))throw u;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),WE.apply(this,arguments)}function zE(n,e,t){const r=nt(n);let i=Ot.min(),a=jt();return r.persistence.runTransaction("Execute query","readonly",u=>function(d,g,y){const C=nt(d),D=C.Bi.get(y);return void 0!==D?ce.resolve(C.$i.get(D)):C.Vs.getTargetData(g,y)}(r,u,vo(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(u,d.targetId).next(g=>{a=g})}).next(()=>r.Fi.getDocumentsMatchingQuery(u,e,t?i:Ot.min(),t?a:jt())).next(d=>(ux(r,oE(e),d),{documents:d,ji:a})))}function ax(n,e){const t=nt(n),r=nt(t.Vs),i=t.$i.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.te(a,e).next(u=>u?u.target:null))}function lx(n,e){const t=nt(n),r=t.Li.get(e)||Ot.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ui.getAllFromCollectionGroup(i,e,JC(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(ux(t,e,i),i))}function ux(n,e,t){let r=Ot.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Li.set(e,r)}function o(){return o=(0,Ce.Z)(function*(n,e,t,r){const i=nt(n);let a=jt(),u=us();for(const y of t){const C=e.Wi(y.metadata.name);y.document&&(a=a.add(C));const D=e.zi(y);D.setReadTime(e.Hi(y.metadata.readTime)),u=u.insert(C,D)}const d=i.Ui.newChangeBuffer({trackRemovals:!0}),g=yield _g(i,(y=r,vo(Yh(dn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>ox(y,d,u).next(C=>(d.apply(y),C)).next(C=>i.Vs.removeMatchingKeysForTargetId(y,g.targetId).next(()=>i.Vs.addMatchingKeys(y,a,g.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,C.Gi,C.Qi)).next(()=>C.Gi)))}),o.apply(this,arguments)}function l(n,e){return c.apply(this,arguments)}function c(){return c=(0,Ce.Z)(function*(n,e,t=jt()){const r=yield _g(n,vo(TE(e.bundledQuery))),i=nt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const u=yi(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Ds.saveNamedQuery(a,e);const d=r.withResumeToken(zr.EMPTY_BYTE_STRING,u);return i.$i=i.$i.insert(d.targetId,d),i.Vs.updateTargetData(a,d).next(()=>i.Vs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Vs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ds.saveNamedQuery(a,e))})}),c.apply(this,arguments)}function f(n,e){return`firestore_clients_${n}_${e}`}function m(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function w(n,e){return`firestore_targets_${n}_${e}`}class b{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(a=new Oe(i.error.code,i.error.message))),u?new b(e,t,i.state,a):(Wr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class I{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Oe(r.error.code,r.error.message))),a?new I(e,r.state,i):(Wr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class A{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=oy();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=aI(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return i?new A(e,a):(Wr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class R{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new R(t.clientId,t.onlineState):(Wr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class V{constructor(){this.activeTargetIds=oy()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class W{constructor(e,t,r,i,a){this.window=e,this.js=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Tr(Kt),this.started=!1,this.ir=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=f(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new V),this.cr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.syncEngine.Ri();for(const i of t){if(i===e.tr)continue;const a=e.getItem(f(e.persistenceKey,i));if(a){const u=A.Ji(i,a);u&&(e.sr=e.sr.insert(u.clientId,u))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(w(this.persistenceKey,e));if(r){const i=I.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(w(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ue("SharedClientState","READ",e,t),t}setItem(e,t){Ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Wr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Ce.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let u=Ui.ot;if(null!=a)try{const d=JSON.parse(a);Pt("number"==typeof d),u=d}catch(d){Wr("SharedClientState","Failed to read sequence number from WebStorage",d)}return u}(r.newValue);i!==Ui.ot&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new b(this.currentUser,e,t,r),a=m(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=m(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=w(this.persistenceKey,e),a=new I(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return A.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),i=Number(r[1]);return b.Ji(new mi(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return I.Ji(i,t)}wr(e){return R.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,Ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),u=[],d=[];return a.forEach(g=>{i.has(g)||u.push(g)}),i.forEach(g=>{a.has(g)||d.push(g)}),this.syncEngine.Mr(u,d).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=oy();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class re{constructor(){this.Fr=new V,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new V,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class De{Br(e){}shutdown(){}}class $e{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const et={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class dt{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Ae extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const u=this.oo(e,t);Ue("RestConnection","Sending: ",u,r);const d={};return this.uo(d,i,a),this.co(e,u,d,r).then(g=>(Ue("RestConnection","Received: ",g),g),g=>{throw Gp("RestConnection",`${e} failed with error: `,g,"url: ",u,"request:",r),g})}ao(e,t,r,i,a,u){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+td,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${et[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((a,u)=>{const d=new zC;d.listenOnce(uA.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case $h.NO_ERROR:const y=d.getResponseJson();Ue("Connection","XHR received:",JSON.stringify(y)),a(y);break;case $h.TIMEOUT:Ue("Connection",'RPC "'+e+'" timed out'),u(new Oe(ge.DEADLINE_EXCEEDED,"Request time out"));break;case $h.HTTP_ERROR:const C=d.getStatus();if(Ue("Connection",'RPC "'+e+'" failed with status:',C,"response text:",d.getResponseText()),C>0){const D=d.getResponseJson().error;if(D&&D.status&&D.message){const N=function(L){const j=L.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(j)>=0?j:ge.UNKNOWN}(D.status);u(new Oe(N,D.message))}else u(new Oe(ge.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Oe(ge.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{Ue("Connection",'RPC "'+e+'" completed.')}});const g=JSON.stringify(i);d.send(t,"POST",g,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=aA(),u=lA(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new Ir({})),this.uo(d.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const g=i.join("");Ue("Connection","Creating WebChannel: "+g,d);const y=a.createWebChannel(g,d);let C=!1,D=!1;const N=new dt({jr:j=>{D?Ue("Connection","Not sending because WebChannel is closed:",j):(C||(Ue("Connection","Opening WebChannel transport."),y.open(),C=!0),Ue("Connection","WebChannel sending:",j),y.send(j))},Wr:()=>y.close()}),L=(j,ne,le)=>{j.listen(ne,Ge=>{try{le(Ge)}catch(Je){setTimeout(()=>{throw Je},0)}})};return L(y,jw.EventType.OPEN,()=>{D||Ue("Connection","WebChannel transport opened.")}),L(y,jw.EventType.CLOSE,()=>{D||(D=!0,Ue("Connection","WebChannel transport closed"),N.eo())}),L(y,jw.EventType.ERROR,j=>{D||(D=!0,Gp("Connection","WebChannel transport errored:",j),N.eo(new Oe(ge.UNAVAILABLE,"The operation could not be completed")))}),L(y,jw.EventType.MESSAGE,j=>{var ne;if(!D){const le=j.data[0];Pt(!!le);const Ge=le,Je=Ge.error||(null===(ne=Ge[0])||void 0===ne?void 0:ne.error);if(Je){Ue("Connection","WebChannel received error:",Je);const Ye=Je.status;let ze=function(Ut){const mn=Zr[Ut];if(void 0!==mn)return sy(mn)}(Ye),Nt=Je.message;void 0===ze&&(ze=ge.INTERNAL,Nt="Unknown error status: "+Ye+" with message "+Je.message),D=!0,N.eo(new Oe(ze,Nt)),y.close()}else Ue("Connection","WebChannel received:",le),N.no(le)}}),L(u,L_.STAT_EVENT,j=>{j.stat===Hp.PROXY?Ue("Connection","Detected buffering proxy"):j.stat===Hp.NOPROXY&&Ue("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.Zr()},0),N}}function Dt(){return"undefined"!=typeof window?window:null}function en(){return"undefined"!=typeof document?document:null}function gn(n){return new dy(n,!0)}class hs{constructor(e,t,r=1e3,i=1.5,a=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Bu{constructor(e,t,r,i,a,u,d,g){this.js=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new hs(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Ce.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,Ce.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,Ce.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Wr(t.toString()),Wr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Oe(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,Ce.Z)(function*(){e.state=0,e.start()}))}qo(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZE extends Bu{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.wt=a}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function kA(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:pt(),i=e.targetChange.targetIds||[],a=function(g,y){return g.dt?(Pt(void 0===y||"string"==typeof y),zr.fromBase64String(y||"")):(Pt(void 0===y||y instanceof Uint8Array),zr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(g){const y=void 0===g.code?ge.UNKNOWN:sy(g.code);return new Oe(y,g.message||"")}(u);t=new TI(r,i,a,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Oa(n,r.document.name),a=yi(r.document.updateTime),u=new _i({mapValue:{fields:r.document.fields}}),d=kn.newFoundDocument(i,a,u);t=new ly(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=Oa(n,r.document),a=r.readTime?yi(r.readTime):Ot.min(),u=kn.newNoDocument(i,a);t=new ly([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Oa(n,r.document);t=new ly([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return pt();{const r=e.filter,a=new RA(r.count||0);t=new uy(r.targetId,a)}}var g;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return Ot.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ot.min():a.readTime?yi(a.readTime):Ot.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=py(this.wt),t.addTarget=function(i,a){let u;const d=a.target;return u=W_(d)?{documents:PI(i,d)}:{query:yE(i,d)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?u.resumeToken=OA(i,a.resumeToken):a.snapshotVersion.compareTo(Ot.min())>0&&(u.readTime=hd(i,a.snapshotVersion.toTimestamp())),u}(this.wt,e);const r=function kI(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=py(this.wt),t.removeTarget=e,this.Mo(t)}}class KE extends Bu{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.wt=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function FA(n,e){return n&&n.length>0?(Pt(void 0!==e),n.map(t=>function(r,i){let a=yi(r.updateTime?r.updateTime:i);return a.isEqual(Ot.min())&&(a=yi(i)),new ty(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=yi(e.commitTime);return this.listener.Jo(r,t)}return Pt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=py(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>rf(this.wt,r))};this.Mo(t)}}class YE extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new Oe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Oe(ge.UNKNOWN,i.toString())})}ao(e,t,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.bo.ao(e,t,r,a,u,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Oe(ge.UNKNOWN,a.toString())})}terminate(){this.Zo=!0}}class QE{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Wr(t),this.su=!1):Ue("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class JE{constructor(e,t,r,i,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(d=>{r.enqueueAndForget((0,Ce.Z)(function*(){var g;gf(u)&&(Ue("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,Ce.Z)(function*(y){const C=nt(y);C.lu.add(4),yield ju(C),C._u.set("Unknown"),C.lu.delete(4),yield _d(C)}),function(y){return g.apply(this,arguments)})(u))}))}),this._u=new QE(r,i)}}function _d(n){return vg.apply(this,arguments)}function vg(){return vg=(0,Ce.Z)(function*(n){if(gf(n))for(const e of n.fu)yield e(!0)}),vg.apply(this,arguments)}function ju(n){return wg.apply(this,arguments)}function wg(){return wg=(0,Ce.Z)(function*(n){for(const e of n.fu)yield e(!1)}),wg.apply(this,arguments)}function mT(n,e){const t=nt(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),hx(t)?dx(t):Ty(t).Co()&&cx(t,e))}function XE(n,e){const t=nt(n),r=Ty(t);t.hu.delete(e),r.Co()&&jP(t,e),0===t.hu.size&&(r.Co()?r.ko():gf(t)&&t._u.set("Unknown"))}function cx(n,e){n.wu.Nt(e.targetId),Ty(n).Qo(e)}function jP(n,e){n.wu.Nt(e),Ty(n).jo(e)}function dx(n){n.wu=new PA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),Ty(n).start(),n._u.iu()}function hx(n){return gf(n)&&!Ty(n).Do()&&n.hu.size>0}function gf(n){return 0===nt(n).lu.size}function $P(n){n.wu=void 0}function JV(n){return fx.apply(this,arguments)}function fx(){return fx=(0,Ce.Z)(function*(n){n.hu.forEach((e,t)=>{cx(n,e)})}),fx.apply(this,arguments)}function XV(n,e){return px.apply(this,arguments)}function px(){return px=(0,Ce.Z)(function*(n,e){$P(n),hx(n)?(n._u.uu(e),dx(n)):n._u.set("Unknown")}),px.apply(this,arguments)}function eU(n,e,t){return gx.apply(this,arguments)}function gx(){return gx=(0,Ce.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof TI&&2===e.state&&e.cause)try{yield(r=(0,Ce.Z)(function*(i,a){const u=a.cause;for(const d of a.targetIds)i.hu.has(d)&&(yield i.remoteSyncer.rejectListen(d,u),i.hu.delete(d),i.wu.removeTarget(d))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _T(n,r)}else if(e instanceof ly?n.wu.Ut(e):e instanceof uy?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Ot.min()))try{const r=yield gT(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const u=i.wu.Yt(a);return u.targetChanges.forEach((d,g)=>{if(d.resumeToken.approximateByteSize()>0){const y=i.hu.get(g);y&&i.hu.set(g,y.withResumeToken(d.resumeToken,a))}}),u.targetMismatches.forEach(d=>{const g=i.hu.get(d);if(!g)return;i.hu.set(d,g.withResumeToken(zr.EMPTY_BYTE_STRING,g.snapshotVersion)),jP(i,d);const y=new Fu(g.target,d,1,g.sequenceNumber);cx(i,y)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Ue("RemoteStore","Failed to raise snapshot:",r),yield _T(n,r)}var r}),gx.apply(this,arguments)}function _T(n,e,t){return mx.apply(this,arguments)}function mx(){return mx=(0,Ce.Z)(function*(n,e,t){if(!Aa(e))throw e;n.lu.add(1),yield ju(n),n._u.set("Offline"),t||(t=()=>gT(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){Ue("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield _d(n)}))}),mx.apply(this,arguments)}function HP(n,e){return e().catch(t=>_T(n,t,e))}function Iy(n){return _x.apply(this,arguments)}function _x(){return _x=(0,Ce.Z)(function*(n){const e=nt(n),t=mf(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;tU(e);)try{const i=yield BP(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,nU(e,i)}catch(i){yield _T(e,i)}GP(e)&&qP(e)}),_x.apply(this,arguments)}function tU(n){return gf(n)&&n.au.length<10}function nU(n,e){n.au.push(e);const t=mf(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function GP(n){return gf(n)&&!mf(n).Do()&&n.au.length>0}function qP(n){mf(n).start()}function rU(n){return yx.apply(this,arguments)}function yx(){return yx=(0,Ce.Z)(function*(n){mf(n).Xo()}),yx.apply(this,arguments)}function iU(n){return vx.apply(this,arguments)}function vx(){return vx=(0,Ce.Z)(function*(n){const e=mf(n);for(const t of n.au)e.Ho(t.mutations)}),vx.apply(this,arguments)}function sU(n,e,t){return wx.apply(this,arguments)}function wx(){return wx=(0,Ce.Z)(function*(n,e,t){const r=n.au.shift(),i=CE.from(r,e,t);yield HP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Iy(n)}),wx.apply(this,arguments)}function oU(n,e){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,Ce.Z)(function*(n,e){var t;e&&mf(n).zo&&(yield(t=(0,Ce.Z)(function*(r,i){if(fE(a=i.code)&&a!==ge.ABORTED){const u=r.au.shift();mf(r).No(),yield HP(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield Iy(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),GP(n)&&qP(n)}),Ex.apply(this,arguments)}function WP(n,e){return bx.apply(this,arguments)}function bx(){return bx=(0,Ce.Z)(function*(n,e){const t=nt(n);t.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const r=gf(t);t.lu.add(3),yield ju(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield _d(t)}),bx.apply(this,arguments)}function Cx(n,e){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,Ce.Z)(function*(n,e){const t=nt(n);e?(t.lu.delete(2),yield _d(t)):e||(t.lu.add(2),yield ju(t),t._u.set("Unknown"))}),Ix.apply(this,arguments)}function Ty(n){return n.mu||(n.mu=function(e,t,r){const i=nt(e);return i.tu(),new ZE(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:JV.bind(null,n),Jr:XV.bind(null,n),Go:eU.bind(null,n)}),n.fu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.mu.No(),hx(n)?dx(n):n._u.set("Unknown")):(yield n.mu.stop(),$P(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function mf(n){return n.gu||(n.gu=function(e,t,r){const i=nt(e);return i.tu(),new KE(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:rU.bind(null,n),Jr:oU.bind(null,n),Yo:iU.bind(null,n),Jo:sU.bind(null,n)}),n.fu.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.gu.No(),yield Iy(n)):(yield n.gu.stop(),n.au.length>0&&(Ue("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class Tx{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,d=new Tx(e,t,u,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oe(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dy(n,e){if(Wr("AsyncQueue",`${e}: ${n}`),Aa(n))return new Oe(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class Sy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||tt.comparator(t.key,r.key):(t,r)=>tt.comparator(t.key,r.key),this.keyedMap=ig(),this.sortedSet=new Tr(this.comparator)}static emptySet(e){return new Sy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Sy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Sy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class zP{constructor(){this.yu=new Tr(tt.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):pt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ay{constructor(e,t,r,i,a,u,d,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new Ay(e,t,Sy.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class aU{constructor(){this.Iu=void 0,this.listeners=[]}}class lU{constructor(){this.queries=new Sl(e=>sE(e),Tl),this.onlineState="Unknown",this.Tu=new Set}}function Dx(n,e){return Sx.apply(this,arguments)}function Sx(){return Sx=(0,Ce.Z)(function*(n,e){const t=nt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new aU),i)try{a.Iu=yield t.onListen(r)}catch(u){const d=Dy(u,`Initialization of query '${Y_(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&Rx(t)}),Sx.apply(this,arguments)}function Ax(n,e){return xx.apply(this,arguments)}function xx(){return xx=(0,Ce.Z)(function*(n,e){const t=nt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),xx.apply(this,arguments)}function uU(n,e){const t=nt(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const d of u.listeners)d.Au(i)&&(r=!0);u.Iu=i}}r&&Rx(t)}function cU(n,e,t){const r=nt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function Rx(n){n.Tu.forEach(e=>{e.next()})}class Nx{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ay(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Ay.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class dU{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class ZP{constructor(e){this.wt=e}Wi(e){return Oa(this.wt,e)}zi(e){return e.metadata.exists?_E(this.wt,e.document,!1):kn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return yi(e)}}class hU{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=KP(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=dn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new ZP(this.wt);for(const i of e)if(i.metadata.queries){const a=r.Wi(i.metadata.name);for(const u of i.metadata.queries){const d=(t.get(u)||jt()).add(a);t.set(u,d)}}return t}complete(){var e=this;return(0,Ce.Z)(function*(){const t=yield function s(n,e,t,r){return o.apply(this,arguments)}(e.localStore,new ZP(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield l(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function KP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class YP{constructor(e){this.key=e}}class QP{constructor(e){this.key=e}}class JP{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=jt(),this.mutatedKeys=jt(),this.Lu=aE(e),this.Uu=new Sy(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new zP,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,d=!1;const g="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,D)=>{const N=i.get(C),L=Q_(this.query,D)?D:null,j=!!N&&this.mutatedKeys.has(N.key),ne=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let le=!1;N&&L?N.data.isEqual(L.data)?j!==ne&&(r.track({type:3,doc:L}),le=!0):this.Qu(N,L)||(r.track({type:2,doc:L}),le=!0,(g&&this.Lu(L,g)>0||y&&this.Lu(L,y)<0)&&(d=!0)):!N&&L?(r.track({type:0,doc:L}),le=!0):N&&!L&&(r.track({type:1,doc:N}),le=!0,(g||y)&&(d=!0)),le&&(L?(u=u.add(L),a=ne?a.add(C):a.delete(C)):(u=u.delete(C),a=a.delete(C)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const C="F"===this.query.limitType?u.last():u.first();u=u.delete(C.key),a=a.delete(C.key),r.track({type:1,doc:C})}return{Uu:u,Gu:r,Oi:d,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Gu.pu();a.sort((y,C)=>function(D,N){const L=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return L(D)-L(N)}(y.type,C.type)||this.Lu(y.doc,C.doc)),this.ju(r);const u=t?this.Wu():[],d=0===this.Bu.size&&this.current?1:0,g=d!==this.$u;return this.$u=d,0!==a.length||g?{snapshot:new Ay(this.query,e.Uu,i,a,e.mutatedKeys,0===d,g,!1),zu:u}:{zu:u}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new zP,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=jt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new QP(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new YP(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=jt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Ay.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class fU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class pU{constructor(e){this.key=e,this.Xu=!1}}class gU{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Zu={},this.tc=new Sl(d=>sE(d),Tl),this.ec=new Map,this.nc=new Set,this.sc=new Tr(tt.comparator),this.ic=new Map,this.rc=new UE,this.oc={},this.uc=new Map,this.cc=ka.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function mU(n,e){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,Ce.Z)(function*(n,e){const t=tR(n);let r,i;const a=t.tc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const u=yield _g(t.localStore,vo(e));t.isPrimaryClient&&mT(t.remoteStore,u);const d=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield Px(t,e,r,"current"===d)}return i}),Mx.apply(this,arguments)}function Px(n,e,t,r){return Ox.apply(this,arguments)}function Ox(){return Ox=(0,Ce.Z)(function*(n,e,t,r){n.hc=(C,D,N)=>{return(L=(0,Ce.Z)(function*(j,ne,le,Ge){let Je=ne.view.Ku(le);Je.Oi&&(Je=yield zE(j.localStore,ne.query,!1).then(({documents:Nt})=>ne.view.Ku(Nt,Je)));const Ye=Ge&&Ge.targetChanges.get(ne.targetId),ze=ne.view.applyChanges(Je,j.isPrimaryClient,Ye);return Gx(j,ne.targetId,ze.zu),ze.snapshot}),function(j,ne,le,Ge){return L.apply(this,arguments)})(n,C,D,N);var L};const i=yield zE(n.localStore,e,!0),a=new JP(e,i.ji),u=a.Ku(i.documents),d=Al.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),g=a.applyChanges(u,n.isPrimaryClient,d);Gx(n,t,g.zu);const y=new fU(e,t,a);return n.tc.set(e,y),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),g.snapshot}),Ox.apply(this,arguments)}function _U(n,e){return kx.apply(this,arguments)}function kx(){return kx=(0,Ce.Z)(function*(n,e){const t=nt(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(a=>!Tl(a,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield yg(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),XE(t.remoteStore,r.targetId),xy(t,r.targetId)}).catch(Au))):(xy(t,r.targetId),yield yg(t.localStore,r.targetId,!0))}),kx.apply(this,arguments)}function Fx(){return Fx=(0,Ce.Z)(function*(n,e,t){const r=nR(n);try{const i=yield function(a,u){const d=nt(a),g=dr.now(),y=u.reduce((N,L)=>N.add(L.key),jt());let C,D;return d.persistence.runTransaction("Locally write mutations","readwrite",N=>{let L=us(),j=jt();return d.Ui.getEntries(N,y).next(ne=>{L=ne,L.forEach((le,Ge)=>{Ge.isValidDocument()||(j=j.add(le))})}).next(()=>d.localDocuments.getOverlayedDocuments(N,L)).next(ne=>{C=ne;const le=[];for(const Ge of u){const Je=xA(Ge,C.get(Ge.key).overlayedDocument);null!=Je&&le.push(new Go(Ge.key,Je,q_(Je.value.mapValue),fr.exists(!0)))}return d.mutationQueue.addMutationBatch(N,g,le,u)}).next(ne=>{D=ne;const le=ne.applyToLocalDocumentSet(C,j);return d.documentOverlayCache.saveOverlays(N,ne.batchId,le)})}).then(()=>({batchId:D.batchId,changes:gE(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,d){let g=a.oc[a.currentUser.toKey()];g||(g=new Tr(Kt)),g=g.insert(u,d),a.oc[a.currentUser.toKey()]=g}(r,i.batchId,t),yield yd(r,i.changes),yield Iy(r.remoteStore)}catch(i){const a=Dy(i,"Failed to persist write");t.reject(a)}}),Fx.apply(this,arguments)}function XP(n,e){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,Ce.Z)(function*(n,e){const t=nt(n);try{const r=yield UP(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.ic.get(a);u&&(Pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.Xu=!0:i.modifiedDocuments.size>0?Pt(u.Xu):i.removedDocuments.size>0&&(Pt(u.Xu),u.Xu=!1))}),yield yd(t,r,e)}catch(r){yield Au(r)}}),Lx.apply(this,arguments)}function eO(n,e,t){const r=nt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((a,u)=>{const d=u.view.Eu(e);d.snapshot&&i.push(d.snapshot)}),function(a,u){const d=nt(a);d.onlineState=u;let g=!1;d.queries.forEach((y,C)=>{for(const D of C.listeners)D.Eu(u)&&(g=!0)}),g&&Rx(d)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function vU(n,e,t){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,Ce.Z)(function*(n,e,t){const r=nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),a=i&&i.key;if(a){let u=new Tr(tt.comparator);u=u.insert(a,kn.newNoDocument(a,Ot.min()));const d=jt().add(a),g=new ay(Ot.min(),new Map,new Ln(Kt),u,d);yield XP(r,g),r.sc=r.sc.remove(a),r.ic.delete(e),qx(r)}else yield yg(r.localStore,e,!1).then(()=>xy(r,e,t)).catch(Au)}),Vx.apply(this,arguments)}function wU(n,e){return Ux.apply(this,arguments)}function Ux(){return Ux=(0,Ce.Z)(function*(n,e){const t=nt(n),r=e.batch.batchId;try{const i=yield sx(t.localStore,e);Hx(t,r,null),$x(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield yd(t,i)}catch(i){yield Au(i)}}),Ux.apply(this,arguments)}function EU(n,e,t){return Bx.apply(this,arguments)}function Bx(){return Bx=(0,Ce.Z)(function*(n,e,t){const r=nt(n);try{const i=yield function(a,u){const d=nt(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return d.mutationQueue.lookupMutationBatch(g,u).next(C=>(Pt(null!==C),y=C.keys(),d.mutationQueue.removeMutationBatch(g,C))).next(()=>d.mutationQueue.performConsistencyCheck(g)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(g,y,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y)).next(()=>d.localDocuments.getDocuments(g,y))})}(r.localStore,e);Hx(r,e,t),$x(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield yd(r,i)}catch(i){yield Au(i)}}),Bx.apply(this,arguments)}function jx(){return jx=(0,Ce.Z)(function*(n,e){const t=nt(n);gf(t.remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const u=nt(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>u.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.uc.get(r)||[];i.push(e),t.uc.set(r,i)}catch(r){const i=Dy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),jx.apply(this,arguments)}function $x(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function Hx(n,e,t){const r=nt(n);let i=r.oc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function xy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||tO(n,r)})}function tO(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(XE(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),qx(n))}function Gx(n,e,t){for(const r of t)r instanceof YP?(n.rc.addReference(r.key,e),CU(n,r)):r instanceof QP?(Ue("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||tO(n,r.key)):pt()}function CU(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Ue("SyncEngine","New document in limbo: "+t),n.nc.add(r),qx(n))}function qx(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new tt(dn.fromString(e)),r=n.cc.next();n.ic.set(r,new pU(t)),n.sc=n.sc.insert(t,r),mT(n.remoteStore,new Fu(vo(Yh(t.path)),r,2,Ui.ot))}}function yd(n,e,t){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,Ce.Z)(function*(n,e,t){const r=nt(n),i=[],a=[],u=[];var d;r.tc.isEmpty()||(r.tc.forEach((d,g)=>{u.push(r.hc(g,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,y.fromCache?"not-current":"current"),i.push(y);const C=GE.Vi(g.targetId,y);a.push(C)}}))}),yield Promise.all(u),r.Zu.Go(i),yield(d=(0,Ce.Z)(function*(g,y){const C=nt(g);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>ce.forEach(y,N=>ce.forEach(N.Pi,L=>C.persistence.referenceDelegate.addReference(D,N.targetId,L)).next(()=>ce.forEach(N.vi,L=>C.persistence.referenceDelegate.removeReference(D,N.targetId,L)))))}catch(D){if(!Aa(D))throw D;Ue("LocalStore","Failed to update sequence numbers: "+D)}for(const D of y){const N=D.targetId;if(!D.fromCache){const L=C.$i.get(N),ne=L.withLastLimboFreeSnapshotVersion(L.snapshotVersion);C.$i=C.$i.insert(N,ne)}}}),function(g,y){return d.apply(this,arguments)})(r.localStore,a))}),Wx.apply(this,arguments)}function IU(n,e){return zx.apply(this,arguments)}function zx(){return zx=(0,Ce.Z)(function*(n,e){const t=nt(n);if(!t.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const r=yield pT(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(u=>{u.forEach(d=>{d.reject(new Oe(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield yd(t,r.Ki)}var i}),zx.apply(this,arguments)}function TU(n,e){const t=nt(n),r=t.ic.get(e);if(r&&r.Xu)return jt().add(r.key);{let i=jt();const a=t.ec.get(e);if(!a)return i;for(const u of a){const d=t.tc.get(u);i=i.unionWith(d.view.qu)}return i}}function DU(n,e){return Zx.apply(this,arguments)}function Zx(){return Zx=(0,Ce.Z)(function*(n,e){const t=nt(n),r=yield zE(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&Gx(t,e.targetId,i.zu),i}),Zx.apply(this,arguments)}function SU(n,e){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,Ce.Z)(function*(n,e){const t=nt(n);return lx(t.localStore,e).then(r=>yd(t,r))}),Kx.apply(this,arguments)}function AU(n,e,t,r){return Yx.apply(this,arguments)}function Yx(){return Yx=(0,Ce.Z)(function*(n,e,t,r){const i=nt(n),a=yield function(u,d){const g=nt(u),y=nt(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",C=>y.yn(C,d).next(D=>D?g.localDocuments.getDocuments(C,D):ce.resolve(null)))}(i.localStore,e);var d;null!==a?("pending"===t?yield Iy(i.remoteStore):"acknowledged"===t||"rejected"===t?(Hx(i,e,r||null),$x(i,e),d=e,nt(nt(i.localStore).mutationQueue).In(d)):pt(),yield yd(i,a)):Ue("SyncEngine","Cannot apply mutation batch with id: "+e)}),Yx.apply(this,arguments)}function Qx(){return Qx=(0,Ce.Z)(function*(n,e){const t=nt(n);if(tR(t),nR(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield nO(t,r.toArray());t.ac=!0,yield Cx(t.remoteStore,!0);for(const a of i)mT(t.remoteStore,a)}else if(!1===e&&!1!==t.ac){const r=[];let i=Promise.resolve();t.ec.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(xy(t,u),yg(t.localStore,u,!0))),XE(t.remoteStore,u)}),yield i,yield nO(t,r),function(a){const u=nt(a);u.ic.forEach((d,g)=>{XE(u.remoteStore,g)}),u.rc.cs(),u.ic=new Map,u.sc=new Tr(tt.comparator)}(t),t.ac=!1,yield Cx(t.remoteStore,!1)}}),Qx.apply(this,arguments)}function nO(n,e,t){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,Ce.Z)(function*(n,e,t){const r=nt(n),i=[],a=[];for(const u of e){let d;const g=r.ec.get(u);if(g&&0!==g.length){d=yield _g(r.localStore,vo(g[0]));for(const y of g){const C=r.tc.get(y),D=yield DU(r,C);D.snapshot&&a.push(D.snapshot)}}else{const y=yield ax(r.localStore,u);d=yield _g(r.localStore,y),yield Px(r,rO(y),u,!1)}i.push(d)}return r.Zu.Go(a),i}),Jx.apply(this,arguments)}function rO(n){return gI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function RU(n){const e=nt(n);return nt(nt(e.localStore).persistence).Ri()}function NU(n,e,t,r){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,Ce.Z)(function*(n,e,t,r){const i=nt(n);if(i.ac)return void Ue("SyncEngine","Ignoring unexpected query state notification.");const a=i.ec.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=yield lx(i.localStore,oE(a[0])),d=ay.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield yd(i,u,d);break}case"rejected":yield yg(i.localStore,e,!0),xy(i,e,r);break;default:pt()}}),Xx.apply(this,arguments)}function MU(n,e,t){return eR.apply(this,arguments)}function eR(){return eR=(0,Ce.Z)(function*(n,e,t){const r=tR(n);if(r.ac){for(const i of e){if(r.ec.has(i)){Ue("SyncEngine","Adding an already active target "+i);continue}const a=yield ax(r.localStore,i),u=yield _g(r.localStore,a);yield Px(r,rO(a),u.targetId,!1),mT(r.remoteStore,u)}for(const i of t)r.ec.has(i)&&(yield yg(r.localStore,i,!1).then(()=>{XE(r.remoteStore,i),xy(r,i)}).catch(Au))}}),eR.apply(this,arguments)}function tR(n){const e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=XP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vU.bind(null,e),e.Zu.Go=uU.bind(null,e.eventManager),e.Zu.lc=cU.bind(null,e.eventManager),e}function nR(n){const e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EU.bind(null,e),e}class iO{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ce.Z)(function*(){t.wt=gn(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return fT(this.persistence,new hT,e.initialUser,this.wt)}_c(e){return new BE(jE.Ms,this.wt)}dc(e){return new re}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class sO extends iO{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield nR(r.yc.syncEngine),yield Iy(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return fT(this.persistence,new hT,e.initialUser,this.wt)}mc(e,t){return new FE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new vA(t,this.persistence);return new yA(e.asyncQueue,r)}_c(e){const t=dT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?As.withCacheSize(this.cacheSizeBytes):As.DEFAULT;return new HE(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Dt(),en(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new re}}class OU extends sO{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e);const i=r.yc.syncEngine;r.sharedClientState instanceof W&&(r.sharedClientState.syncEngine={kr:AU.bind(null,i),Or:NU.bind(null,i),Mr:MU.bind(null,i),Ri:RU.bind(null,i),Nr:SU.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var a=(0,Ce.Z)(function*(u){yield function xU(n,e){return Qx.apply(this,arguments)}(r.yc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return a.apply(this,arguments)}}())})()}dc(e){const t=Dt();if(!W.V(t))throw new Oe(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new W(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class rR{initialize(e,t){var r=this;return(0,Ce.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>eO(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=IU.bind(null,r.syncEngine),yield Cx(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new lU}createDatastore(e){const t=gn(e.databaseInfo.databaseId),r=new Ae(e.databaseInfo);return new YE(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=d=>eO(this.syncEngine,d,0),u=$e.V()?new $e:new De,new JE(t,r,i,a,u);var t,r,i,a,u}createSyncEngine(e,t){return function(r,i,a,u,d,g,y){const C=new gU(r,i,a,u,d,g);return y&&(C.ac=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ce.Z)(function*(t){const r=nt(t);Ue("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield ju(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function oO(n,e=10240){let t=0;return{read:()=>(0,Ce.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class yT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class kU{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new ii,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),i=Number(r);isNaN(i)&&e.Pc(`length string (${r}) is not valid number`);const a=yield e.vc(i);return new dU(JSON.parse(a),t.length+i)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Ce.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,Ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class FU{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Oe(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ce.Z)(function*(a,u){const d=nt(a),g=py(d.wt)+"/documents",y={documents:u.map(L=>nf(d.wt,L))},C=yield d.ao("BatchGetDocuments",g,y,u.length),D=new Map;C.forEach(L=>{const j=function MI(n,e){return"found"in e?function(t,r){Pt(!!r.found);const i=Oa(t,r.found.name),a=yi(r.found.updateTime),u=new _i({mapValue:{fields:r.found.fields}});return kn.newFoundDocument(i,a,u)}(n,e):"missing"in e?function(t,r){Pt(!!r.missing),Pt(!!r.readTime);const i=Oa(t,r.missing),a=yi(r.readTime);return kn.newNoDocument(i,a)}(n,e):pt()}(d.wt,L);D.set(j.key.toString(),j)});const N=[];return u.forEach(L=>{const j=D.get(L.toString());Pt(!!j),N.push(j)}),N}),function(a,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ku(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=tt.fromPath(i);e.mutations.push(new hE(a,e.precondition(a)))}),yield(r=(0,Ce.Z)(function*(i,a){const u=nt(i),d=py(u.wt)+"/documents",g={writes:a.map(y=>rf(u.wt,y))};yield u.ro("Commit",d,g)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw pt();t=Ot.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Oe(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?fr.updateTime(t):fr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ot.min()))throw new Oe(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fr.updateTime(t)}return fr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class LU{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new hs(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Ce.Z)(function*(){const t=new FU(e.datastore),r=e.xc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Nc(a)}))}).catch(i=>{e.Nc(i)})}))}xc(e){try{const t=this.updateFunction(e);return!ld(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!fE(t)}return!1}}class VU{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=mi.UNAUTHENTICATED,this.clientId=Hw.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,Ce.Z)(function*(d){Ue("FirestoreClient","Received user=",d.uid),yield a.authCredentialListener(d),a.user=d});return function(d){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Ue("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Oe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Dy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function aO(n,e){return iR.apply(this,arguments)}function iR(){return iR=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ce.Z)(function*(a){r.isEqual(a)||(yield pT(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),iR.apply(this,arguments)}function lO(n,e){return sR.apply(this,arguments)}function sR(){return sR=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield oR(n);Ue("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>WP(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>WP(e.remoteStore,a)),n.onlineComponents=e}),sR.apply(this,arguments)}function oR(n){return aR.apply(this,arguments)}function aR(){return aR=(0,Ce.Z)(function*(n){return n.offlineComponents||(Ue("FirestoreClient","Using default OfflineComponentProvider"),yield aO(n,new iO)),n.offlineComponents}),aR.apply(this,arguments)}function vT(n){return lR.apply(this,arguments)}function lR(){return lR=(0,Ce.Z)(function*(n){return n.onlineComponents||(Ue("FirestoreClient","Using default OnlineComponentProvider"),yield lO(n,new rR)),n.onlineComponents}),lR.apply(this,arguments)}function uO(n){return oR(n).then(e=>e.persistence)}function uR(n){return oR(n).then(e=>e.localStore)}function cO(n){return vT(n).then(e=>e.remoteStore)}function cR(n){return vT(n).then(e=>e.syncEngine)}function Ry(n){return dR.apply(this,arguments)}function dR(){return dR=(0,Ce.Z)(function*(n){const e=yield vT(n),t=e.eventManager;return t.onListen=mU.bind(null,e.syncEngine),t.onUnlisten=_U.bind(null,e.syncEngine),t}),dR.apply(this,arguments)}function dO(n,e,t={}){const r=new ii;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,a,u,d,g){const y=new yT({next:D=>{a.enqueueAndForget(()=>Ax(i,C));const N=D.docs.has(u);!N&&D.fromCache?g.reject(new Oe(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&D.fromCache&&d&&"server"===d.source?g.reject(new Oe(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(D)},error:D=>g.reject(D)}),C=new Nx(Yh(u.path),y,{includeMetadataChanges:!0,Du:!0});return Dx(i,C)}(yield Ry(n),n.asyncQueue,e,t,r)})),r.promise}function hO(n,e,t={}){const r=new ii;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,a,u,d,g){const y=new yT({next:D=>{a.enqueueAndForget(()=>Ax(i,C)),D.fromCache&&"server"===d.source?g.reject(new Oe(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(D)},error:D=>g.reject(D)}),C=new Nx(u,y,{includeMetadataChanges:!0,Du:!0});return Dx(i,C)}(yield Ry(n),n.asyncQueue,e,t,r)})),r.promise}const fO=new Map;function hR(n,e,t){if(!t)throw new Oe(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function pO(n,e,t,r){if(!0===e&&!0===r)throw new Oe(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gO(n){if(!tt.isDocumentKey(n))throw new Oe(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function mO(n){if(tt.isDocumentKey(n))throw new Oe(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":pt()}function wn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Oe(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=wT(n);throw new Oe(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function _O(n,e){if(e<=0)throw new Oe(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class yO{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Oe(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Oe(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,pO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class e0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yO({}),this._settingsFrozen=!1,e instanceof xa?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Oe(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xa(i.options.projectId)}(e))}get app(){if(!this._app)throw new Oe(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Oe(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new qp;switch(t.type){case"gapi":const r=t.client;return Pt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new fA(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Oe(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=fO.get(e);t&&(Ue("ComponentProvider","Removing Datastore"),fO.delete(e),t.terminate())}(this),Promise.resolve()}}class pr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $u(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pr(this.firestore,e,this._key)}}class Rs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rs(this.firestore,e,this._query)}}class $u extends Rs{constructor(e,t,r){super(e,t,Yh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pr(this.firestore,null,new tt(e))}withConverter(e){return new $u(this.firestore,e,this._path)}}function vO(n,e,...t){if(n=(0,k.m9)(n),hR("collection","path",e),n instanceof e0){const r=dn.fromString(e,...t);return mO(r),new $u(n,null,r)}{if(!(n instanceof pr||n instanceof $u))throw new Oe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return mO(r),new $u(n.firestore,null,r)}}function ET(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=Hw.I()),hR("doc","path",e),n instanceof e0){const r=dn.fromString(e,...t);return gO(r),new pr(n,null,new tt(r))}{if(!(n instanceof pr||n instanceof $u))throw new Oe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return gO(r),new pr(n.firestore,n instanceof $u?n.converter:null,new tt(r))}}function wO(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof pr||n instanceof $u)&&(e instanceof pr||e instanceof $u)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function EO(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof Rs&&e instanceof Rs&&n.firestore===e.firestore&&Tl(n._query,e._query)&&n.converter===e.converter}class KU{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new hs(this,"async_queue_retry"),this.Kc=()=>{const t=en();t&&Ue("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=en();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=en();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new ii;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!Aa(t))throw t;Ue("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Wr("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=Tx.createAndSchedule(this,e,t,r,a=>this.Wc(a));return this.$c.push(i),i}Gc(){this.Bc&&pt()}verifyOperationInProgress(){}zc(){var e=this;return(0,Ce.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function fR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class YU{constructor(){this._progressObserver={},this._taskCompletionResolver=new ii,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Dr extends e0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new KU,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||bO(this),this._firestoreClient.terminate()}}function wi(n){return n._firestoreClient||bO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function bO(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Zw(n._databaseId,a,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var a,d;n._firestoreClient=new VU(n._authCredentials,n._appCheckCredentials,n._queue,r)}function CO(n,e,t){const r=new ii;return n.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield aO(n,t),yield lO(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(u=a).name?u.code===ge.FAILED_PRECONDITION||u.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var u})).then(()=>r.promise)}function IO(n){if(n._initialized||n._terminated)throw new Oe(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class vd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Oe(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hu(zr.fromBase64String(e))}catch(t){throw new Oe(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hu(zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Eg{constructor(e){this._methodName=e}}class bT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}}const oB=/^__.*__$/;class aB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Go(e,this.data,this.fieldMask,t,this.fieldTransforms):new rg(e,this.data,t,this.fieldTransforms)}}class TO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Go(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function DO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt()}}class CT{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new CT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return DT(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(DO(this.Zc)&&oB.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class lB{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||gn(e)}aa(e,t,r,i=!1){return new CT({Zc:e,methodName:t,ca:r,path:kr.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function bg(n){const e=n._freezeSettings(),t=gn(n._databaseId);return new lB(n._databaseId,!!e.ignoreUndefinedProperties,t)}function IT(n,e,t,r,i,a={}){const u=n.aa(a.merge||a.mergeFields?2:0,e,t,i);_R("Data must be an object, but it was:",u,r);const d=xO(r,u);let g,y;if(a.merge)g=new Ys(u.fieldMask),y=u.fieldTransforms;else if(a.mergeFields){const C=[];for(const D of a.mergeFields){const N=yR(e,D,t);if(!u.contains(N))throw new Oe(ge.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);NO(C,N)||C.push(N)}g=new Ys(C),y=u.fieldTransforms.filter(D=>g.covers(D.field))}else g=null,y=u.fieldTransforms;return new aB(new _i(d),g,y)}class t0 extends Eg{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t0}}function SO(n,e,t){return new CT({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class pR extends Eg{_toFieldTransform(e){return new tg(e.path,new Xh)}isEqual(e){return e instanceof pR}}class uB extends Eg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=SO(this,e,!0),r=this.ha.map(a=>Cg(a,t)),i=new Dl(r);return new tg(e.path,i)}isEqual(e){return this===e}}class cB extends Eg{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=SO(this,e,!0),r=this.ha.map(a=>Cg(a,t)),i=new dd(r);return new tg(e.path,i)}isEqual(e){return this===e}}class dB extends Eg{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Pa(e.wt,vI(e.wt,this.la));return new tg(e.path,t)}isEqual(e){return this===e}}function gR(n,e,t,r){const i=n.aa(1,e,t);_R("Data must be an object, but it was:",i,r);const a=[],u=_i.empty();Ru(r,(g,y)=>{const C=TT(e,g,t);y=(0,k.m9)(y);const D=i.ia(C);if(y instanceof t0)a.push(C);else{const N=Cg(y,D);null!=N&&(a.push(C),u.set(C,N))}});const d=new Ys(a);return new TO(u,d,i.fieldTransforms)}function mR(n,e,t,r,i,a){const u=n.aa(1,e,t),d=[yR(e,r,t)],g=[i];if(a.length%2!=0)throw new Oe(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<a.length;N+=2)d.push(yR(e,a[N])),g.push(a[N+1]);const y=[],C=_i.empty();for(let N=d.length-1;N>=0;--N)if(!NO(y,d[N])){const L=d[N];let j=g[N];j=(0,k.m9)(j);const ne=u.ia(L);if(j instanceof t0)y.push(L);else{const le=Cg(j,ne);null!=le&&(y.push(L),C.set(L,le))}}const D=new Ys(y);return new TO(C,D,u.fieldTransforms)}function AO(n,e,t,r=!1){return Cg(t,n.aa(r?4:3,e))}function Cg(n,e){if(RO(n=(0,k.m9)(n)))return _R("Unsupported field value:",e,n),xO(n,e);if(n instanceof Eg)return function(t,r){if(!DO(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const u of t){let d=Cg(u,r.ra(a));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return vI(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=dr.fromDate(t);return{timestampValue:hd(r.wt,i)}}if(t instanceof dr){const i=new dr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:hd(r.wt,i)}}if(t instanceof bT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Hu)return{bytesValue:OA(r.wt,t._byteString)};if(t instanceof pr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.oa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:hy(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${wT(t)}`)}(n,e)}function xO(n,e){const t={};return rI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ru(n,(r,i)=>{const a=Cg(i,e.ea(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function RO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof dr||n instanceof bT||n instanceof Hu||n instanceof pr||n instanceof Eg)}function _R(n,e,t){if(!RO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=wT(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function yR(n,e,t){if((e=(0,k.m9)(e))instanceof vd)return e._internalPath;if("string"==typeof e)return TT(n,e);throw DT("Field path arguments must be of type string or ",n,!1,void 0,t)}const hB=new RegExp("[~\\*/\\[\\]]");function TT(n,e,t){if(e.search(hB)>=0)throw DT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vd(...e.split("."))._internalPath}catch(r){throw DT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function DT(n,e,t,r,i){const a=r&&!r.isEmpty(),u=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(a||u)&&(g+=" (found",a&&(g+=` in field ${r}`),u&&(g+=` in document ${i}`),g+=")"),new Oe(ge.INVALID_ARGUMENT,d+n+g)}function NO(n,e){return n.some(t=>t.isEqual(e))}class n0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new pr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new fB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ST("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class fB extends n0{data(){return super.data()}}function ST(n,e){return"string"==typeof e?TT(n,e):e instanceof vd?e._internalPath:e._delegate._internalPath}class Ig{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wd extends n0{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new r0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ST("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class r0 extends wd{data(e={}){return super.data(e)}}class _f{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ig(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new r0(this._firestore,this._userDataWriter,r.key,r,new Ig(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new r0(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ig(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const d=new r0(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Ig(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,y=-1;return 0!==u.type&&(g=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),y=a.indexOf(u.doc.key)),{type:pB(u.type),doc:d,oldIndex:g,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function pB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt()}}function MO(n,e){return n instanceof wd&&e instanceof wd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof _f&&e instanceof _f&&n._firestore===e._firestore&&EO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function PO(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Oe(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class s0{}function yf(n,...e){for(const t of e)n=t._apply(n);return n}class gB extends s0{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=bg(e.firestore),r=function(i,a,u,d,g,y,C){let D;if(g.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Oe(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){UO(C,y);const L=[];for(const j of C)L.push(VO(d,i,j));D={arrayValue:{values:L}}}else D=VO(d,i,C)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||UO(C,y),D=AO(u,"where",C,"in"===y||"not-in"===y);const N=Bi.create(g,y,D);return function(L,j){if(j.ht()){const le=rE(L);if(null!==le&&!le.isEqual(j.field))throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${le.toString()}' and '${j.field.toString()}'`);const Ge=nE(L);null!==Ge&&BO(0,j.field,Ge)}const ne=function(le,Ge){for(const Je of le.filters)if(Ge.indexOf(Je.op)>=0)return Je.op;return null}(L,function(le){switch(le){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(j.op));if(null!==ne)throw new Oe(ge.INVALID_ARGUMENT,ne===j.op?`Invalid query. You cannot use more than one '${j.op.toString()}' filter.`:`Invalid query. You cannot use '${j.op.toString()}' filters with '${ne.toString()}' filters.`)}(i,N),N}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Rs(e.firestore,e.converter,function(i,a){const u=i.filters.concat([a]);return new Il(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class _B extends s0{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Oe(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Oe(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new cd(i,a);return function(d,g){if(null===nE(d)){const y=rE(d);null!==y&&BO(0,y,g.field)}}(r,u),u}(e._query,this.fa,this.wa);return new Rs(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Il(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class OO extends s0{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new Rs(e.firestore,e.converter,mI(e._query,this.ma,this.ga))}}class kO extends s0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=LO(e,this.type,this.ya,this.pa);return new Rs(e.firestore,e.converter,(i=t,new Il((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class FO extends s0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=LO(e,this.type,this.ya,this.pa);return new Rs(e.firestore,e.converter,(i=t,new Il((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function LO(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof n0)return function(i,a,u,d,g){if(!d)throw new Oe(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const C of Qh(i))if(C.field.isKeyField())y.push($o(a,d.key));else{const D=d.data.field(C.field);if(zw(D))throw new Oe(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const N=C.field.canonicalString();throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}y.push(D)}return new ud(y,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=bg(n.firestore);return function(a,u,d,g,y,C){const D=a.explicitOrderBy;if(y.length>D.length)throw new Oe(ge.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let L=0;L<y.length;L++){const j=y[L];if(D[L].field.isKeyField()){if("string"!=typeof j)throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof j}`);if(!iE(a)&&-1!==j.indexOf("/"))throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${j}' contains a slash.`);const ne=a.path.child(dn.fromString(j));if(!tt.isDocumentKey(ne))throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${ne}' is not because it contains an odd number of segments.`);const le=new tt(ne);N.push($o(u,le))}else{const ne=AO(d,g,j);N.push(ne)}}return new ud(N,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function VO(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Oe(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iE(e)&&-1!==t.indexOf("/"))throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(dn.fromString(t));if(!tt.isDocumentKey(r))throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $o(n,new tt(r))}if(t instanceof pr)return $o(n,t._key);throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wT(t)}.`)}function UO(n,e){if(!Array.isArray(n)||0===n.length)throw new Oe(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Oe(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function BO(n,e,t){if(!t.isEqual(e))throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const TB={maxAttempts:5};class vR{convertValue(e,t="none"){switch(Mu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(od(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw pt()}}convertObject(e,t){const r={};return Ru(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new bT(hr(e.latitude),hr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=oI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ad(e));default:return null}}convertTimestamp(e){const t=Nu(e);return new dr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dn.fromString(e);Pt(LA(r));const i=new xa(r.get(1),r.get(3)),a=new tt(r.popFirst(5));return i.isEqual(t)||Wr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function AT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class DB extends vR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pr(this.firestore,null,t)}}class jO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=bg(e)}set(e,t,r){this._verifyNotCommitted();const i=vf(e,this._firestore),a=AT(i.converter,t,r),u=IT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,fr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=vf(e,this._firestore);let u;return u="string"==typeof(t=(0,k.m9)(t))||t instanceof vd?mR(this._dataReader,"WriteBatch.update",a._key,t,r,i):gR(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,fr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=vf(e,this._firestore);return this._mutations=this._mutations.concat(new ku(t._key,fr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vf(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Oe(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Tg extends vR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pr(this.firestore,null,t)}}function $O(n,e,t){n=wn(n,pr);const r=wn(n.firestore,Dr),i=AT(n.converter,e,t);return Ny(r,[IT(bg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,fr.none())])}function HO(n,e,t,...r){n=wn(n,pr);const i=wn(n.firestore,Dr),a=bg(i);let u;return u="string"==typeof(e=(0,k.m9)(e))||e instanceof vd?mR(a,"updateDoc",n._key,e,t,r):gR(a,"updateDoc",n._key,e),Ny(i,[u.toMutation(n._key,fr.exists(!0))])}function GO(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||fR(e[u])||(a=e[u],u++);const d={includeMetadataChanges:a.includeMetadataChanges};if(fR(e[u])){const D=e[u];e[u]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[u+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[u+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let g,y,C;if(n instanceof pr)y=wn(n.firestore,Dr),C=Yh(n._key.path),g={next:D=>{e[u]&&e[u](wR(y,n,D))},error:e[u+1],complete:e[u+2]};else{const D=wn(n,Rs);y=wn(D.firestore,Dr),C=D._query;const N=new Tg(y);g={next:L=>{e[u]&&e[u](new _f(y,N,D,L))},error:e[u+1],complete:e[u+2]},PO(n._query)}return function(D,N,L,j){const ne=new yT(j),le=new Nx(N,ne,L);return D.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return Dx(yield Ry(D),le)})),()=>{ne.Tc(),D.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return Ax(yield Ry(D),le)}))}}(wi(y),C,d,g)}function Ny(n,e){return function(t,r){const i=new ii;return t.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function yU(n,e,t){return Fx.apply(this,arguments)}(yield cR(t),r,i)})),i.promise}(wi(n),e)}function wR(n,e,t){const r=t.docs.get(e._key),i=new Tg(n);return new wd(n,i,e._key,r,new Ig(t.hasPendingWrites,t.fromCache),e.converter)}class FB extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=bg(e)}get(e){const t=vf(e,this._firestore),r=new DB(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return pt();const a=i[0];if(a.isFoundDocument())return new n0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new n0(this._firestore,r,t._key,null,t.converter);throw pt()})}set(e,t,r){const i=vf(e,this._firestore),a=AT(i.converter,t,r),u=IT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const a=vf(e,this._firestore);let u;return u="string"==typeof(t=(0,k.m9)(t))||t instanceof vd?mR(this._dataReader,"Transaction.update",a._key,t,r,i):gR(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=vf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=vf(e,this._firestore),r=new Tg(this._firestore);return super.get(e).then(i=>new wd(this._firestore,r,t._key,i._document,new Ig(!1,!1),t.converter))}}function ER(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Oe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function WO(){if("undefined"==typeof Uint8Array)throw new Oe("unimplemented","Uint8Arrays are not available in this environment.")}function zO(){if(!function sI(){return"undefined"!=typeof atob}())throw new Oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){td=as.SDK_VERSION,(0,as._registerComponent)(new _o.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new Dr(i,new dA(t.getProvider("auth-internal")),new QC(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,as.registerVersion)(ZC,"3.4.11",n),(0,as.registerVersion)(ZC,"3.4.11","esm2017")}();class o0{constructor(e){this._delegate=e}static fromBase64String(e){return zO(),new o0(Hu.fromBase64String(e))}static fromUint8Array(e){return WO(),new o0(Hu.fromUint8Array(e))}toBase64(){return zO(),this._delegate.toBase64()}toUint8Array(){return WO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function bR(n){return function qB(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class WB{enableIndexedDbPersistence(e,t){return function JU(n,e){IO(n=wn(n,Dr));const t=wi(n),r=n._freezeSettings(),i=new rR;return CO(t,i,new sO(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function XU(n){IO(n=wn(n,Dr));const e=wi(n),t=n._freezeSettings(),r=new rR;return CO(e,r,new OU(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function eB(n){if(n._initialized&&!n._terminated)throw new Oe(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ii;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(t=(0,Ce.Z)(function*(r){if(!jo.V())return Promise.resolve();const i=r+"main";yield jo.delete(i)}),function(r){return t.apply(this,arguments)})(dT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ZO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof xa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Gp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function zU(n,e,t,r={}){var i;const a=(n=wn(n,e0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Gp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,d;if("string"==typeof r.mockUserToken)u=r.mockUserToken,d=mi.MOCK_USER;else{u=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Oe(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new mi(g)}n._authCredentials=new Wp(new YC(u,d))}}(this._delegate,e,t,r)}enableNetwork(){return function nB(n){return function UU(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield uO(n),t=yield cO(n);return e.setNetworkEnabled(!0),function(r){const i=nt(r);return i.lu.delete(0),_d(i)}(t)}))}(wi(n=wn(n,Dr)))}(this._delegate)}disableNetwork(){return function rB(n){return function BU(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield uO(n),t=yield cO(n);return e.setNetworkEnabled(!1),(r=(0,Ce.Z)(function*(i){const a=nt(i);a.lu.add(0),yield ju(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(wi(n=wn(n,Dr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,pO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function tB(n){return function(e){const t=new ii;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function bU(n,e){return jx.apply(this,arguments)}(yield cR(e),t)})),t.promise}(wi(n=wn(n,Dr)))}(this._delegate)}onSnapshotsInSync(e){return function kB(n,e){return function HU(n,e){const t=new yT(e);return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield Ry(n),i=t,nt(r).Tu.add(i),void i.next();var r,i})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield Ry(n),i=t,void nt(r).Tu.delete(i);var r,i}))}}(wi(n=wn(n,Dr)),fR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new My(this,vO(this._delegate,e))}catch(t){throw Qs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Fa(this,ET(this._delegate,e))}catch(t){throw Qs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Js(this,function ZU(n,e){if(n=wn(n,e0),hR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Oe(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Rs(n,null,(t=e,new Il(dn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Qs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function LB(n,e,t){n=wn(n,Dr);const r=Object.assign(Object.assign({},TB),t);return function(i){if(i.maxAttempts<1)throw new Oe(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function GU(n,e,t){const r=new ii;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const i=yield(a=n,vT(a).then(u=>u.datastore));var a;new LU(n.asyncQueue,i,t,e,r).run()})),r.promise}(wi(n),i=>e(new FB(n,i)),r)}(this._delegate,t=>e(new KO(this,t)))}batch(){return wi(this._delegate),new YO(new jO(this._delegate,e=>Ny(this._delegate,e)))}loadBundle(e){return function iB(n,e){const t=wi(n=wn(n,Dr)),r=new YU;return function qU(n,e,t,r){const i=function(a,u){let d;return d="string"==typeof a?(new TextEncoder).encode(a):a,g=function(g,y){if(g instanceof Uint8Array)return oO(g,y);if(g instanceof ArrayBuffer)return oO(new Uint8Array(g),y);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new kU(g,u);var g}(t,gn(e));n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function PU(n,e,t){const r=nt(n);var i;(i=(0,Ce.Z)(function*(a,u,d){try{const g=yield u.getMetadata();if(yield function(N,L){const j=nt(N),ne=yi(L.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",le=>j.Ds.getBundleMetadata(le,L.id)).then(le=>!!le&&le.createTime.compareTo(ne)>=0)}(a.localStore,g))return yield u.close(),d._completeWith({taskState:"Success",documentsLoaded:(N=g).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);d._updateProgress(KP(g));const y=new hU(g,a.localStore,u.wt);let C=yield u.fc();for(;C;){const N=yield y.Nu(C);N&&d._updateProgress(N),C=yield u.fc()}const D=yield y.complete();return yield yd(a,D.Mu,void 0),yield function(N,L){const j=nt(N);return j.persistence.runTransaction("Save bundle","readwrite",ne=>j.Ds.saveBundleMetadata(ne,L))}(a.localStore,g),d._completeWith(D.progress),Promise.resolve(D.Ou)}catch(g){return Gp("SyncEngine",`Loading bundle failed with ${g}`),d._failWith(g),Promise.resolve(new Set)}var N}),function(a,u,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield cR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function sB(n,e){return function WU(n,e){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(t,r){const i=nt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ds.getNamedQuery(a,r))}(yield uR(n),e)}))}(wi(n=wn(n,Dr)),e).then(t=>t?new Rs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Js(this,t):null)}}class xT extends vR{constructor(e){super(),this.firestore=e}convertBytes(e){return new o0(new Hu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Fa.forKey(t,this.firestore,null)}}class KO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new xT(e)}get(e){const t=Sg(e);return this._delegate.get(t).then(r=>new a0(this._firestore,new wd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Sg(e);return r?(ER("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Sg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Sg(e);return this._delegate.delete(t),this}}class YO{constructor(e){this._delegate=e}set(e,t,r){const i=Sg(e);return r?(ER("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Sg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Sg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Dg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new r0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new l0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Dg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Dg(e,new xT(e),t),i.set(t,a)),a}}Dg.INSTANCES=new WeakMap;class Fa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Fa(t,new pr(t._delegate,r,new tt(e)))}static forKey(e,t,r){return new Fa(t,new pr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new My(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new My(this.firestore,vO(this._delegate,e))}catch(t){throw Qs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof pr&&wO(this._delegate,e)}set(e,t){t=ER("DocumentReference.set",t);try{return t?$O(this._delegate,e,t):$O(this._delegate,e)}catch(r){throw Qs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?HO(this._delegate,e):HO(this._delegate,e,t,...r)}catch(i){throw Qs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function PB(n){return Ny(wn(n.firestore,Dr),[new ku(n._key,fr.none())])}(this._delegate)}onSnapshot(...e){const t=QO(e),r=JO(e,i=>new a0(this.firestore,new wd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return GO(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function AB(n){n=wn(n,pr);const e=wn(n.firestore,Dr),t=wi(e),r=new Tg(e);return function jU(n,e){const t=new ii;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,a,u){try{const d=yield function(g,y){const C=nt(g);return C.persistence.runTransaction("read document","readonly",D=>C.localDocuments.getDocument(D,y))}(i,a);d.isFoundDocument()?u.resolve(d):d.isNoDocument()?u.resolve(null):u.reject(new Oe(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const g=Dy(d,`Failed to get document '${a} from cache`);u.reject(g)}}),function(i,a,u){return r.apply(this,arguments)})(yield uR(n),e,t);var r})),t.promise}(t,n._key).then(i=>new wd(e,r,n._key,i,new Ig(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function xB(n){n=wn(n,pr);const e=wn(n.firestore,Dr);return dO(wi(e),n._key,{source:"server"}).then(t=>wR(e,n,t))}(this._delegate):function SB(n){n=wn(n,pr);const e=wn(n.firestore,Dr);return dO(wi(e),n._key).then(t=>wR(e,n,t))}(this._delegate),t.then(r=>new a0(this.firestore,new wd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Fa(this.firestore,this._delegate.withConverter(e?Dg.getInstance(this.firestore,e):null))}}function Qs(n,e,t){return n.message=n.message.replace(e,t),n}function QO(n){for(const e of n)if("object"==typeof e&&!bR(e))return e;return{}}function JO(n,e){var t,r;let i;return i=bR(n[0])?n[0]:bR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class a0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Fa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return MO(this._delegate,e._delegate)}}class l0 extends a0{data(e){const t=this._delegate.data(e);return function cA(n,e){n||pt()}(void 0!==t),t}}class Js{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xT(e)}where(e,t,r){try{return new Js(this.firestore,yf(this._delegate,function mB(n,e,t){const r=e,i=ST("where",n);return new gB(i,r,t)}(e,t,r)))}catch(i){throw Qs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Js(this.firestore,yf(this._delegate,function yB(n,e="asc"){const t=e,r=ST("orderBy",n);return new _B(r,t)}(e,t)))}catch(r){throw Qs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Js(this.firestore,yf(this._delegate,function vB(n){return _O("limit",n),new OO("limit",n,"F")}(e)))}catch(t){throw Qs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Js(this.firestore,yf(this._delegate,function wB(n){return _O("limitToLast",n),new OO("limitToLast",n,"L")}(e)))}catch(t){throw Qs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Js(this.firestore,yf(this._delegate,function EB(...n){return new kO("startAt",n,!0)}(...e)))}catch(t){throw Qs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Js(this.firestore,yf(this._delegate,function bB(...n){return new kO("startAfter",n,!1)}(...e)))}catch(t){throw Qs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Js(this.firestore,yf(this._delegate,function CB(...n){return new FO("endBefore",n,!1)}(...e)))}catch(t){throw Qs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Js(this.firestore,yf(this._delegate,function IB(...n){return new FO("endAt",n,!0)}(...e)))}catch(t){throw Qs(t,"endAt()","Query.endAt()")}}isEqual(e){return EO(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function NB(n){n=wn(n,Rs);const e=wn(n.firestore,Dr),t=wi(e),r=new Tg(e);return function $U(n,e){const t=new ii;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,a,u){try{const d=yield zE(i,a,!0),g=new JP(a,d.ji),y=g.Ku(d.documents),C=g.applyChanges(y,!1);u.resolve(C.snapshot)}catch(d){const g=Dy(d,`Failed to execute query '${a} against cache`);u.reject(g)}}),function(i,a,u){return r.apply(this,arguments)})(yield uR(n),e,t);var r})),t.promise}(t,n._query).then(i=>new _f(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function MB(n){n=wn(n,Rs);const e=wn(n.firestore,Dr),t=wi(e),r=new Tg(e);return hO(t,n._query,{source:"server"}).then(i=>new _f(e,r,n,i))}(this._delegate):function RB(n){n=wn(n,Rs);const e=wn(n.firestore,Dr),t=wi(e),r=new Tg(e);return PO(n._query),hO(t,n._query).then(i=>new _f(e,r,n,i))}(this._delegate),t.then(r=>new CR(this.firestore,new _f(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=QO(e),r=JO(e,i=>new CR(this.firestore,new _f(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return GO(this._delegate,t,r)}withConverter(e){return new Js(this.firestore,this._delegate.withConverter(e?Dg.getInstance(this.firestore,e):null))}}class ZB{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new l0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class CR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Js(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new l0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ZB(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new l0(this._firestore,r))})}isEqual(e){return MO(this._delegate,e._delegate)}}class My extends Js{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Fa(this.firestore,e):null}doc(e){try{return new Fa(this.firestore,void 0===e?ET(this._delegate):ET(this._delegate,e))}catch(t){throw Qs(t,"doc()","CollectionReference.doc()")}}add(e){return function OB(n,e){const t=wn(n.firestore,Dr),r=ET(n),i=AT(n.converter,e);return Ny(t,[IT(bg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,fr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Fa(this.firestore,t))}isEqual(e){return wO(this._delegate,e._delegate)}withConverter(e){return new My(this.firestore,this._delegate.withConverter(e?Dg.getInstance(this.firestore,e):null))}}function Sg(n){return wn(n,pr)}class IR{constructor(...e){this._delegate=new vd(...e)}static documentId(){return new IR(kr.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof vd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ag{constructor(e){this._delegate=e}static serverTimestamp(){const e=function UB(){return new pR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ag(e)}static delete(){const e=function VB(){return new t0("deleteField")}();return e._methodName="FieldValue.delete",new Ag(e)}static arrayUnion(...e){const t=function BB(...n){return new uB("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ag(t)}static arrayRemove(...e){const t=function jB(...n){return new cB("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ag(t)}static increment(e){const t=function $B(n){return new dB("increment",n)}(e);return t._methodName="FieldValue.increment",new Ag(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const KB={Firestore:ZO,GeoPoint:bT,Timestamp:dr,Blob:o0,Transaction:KO,WriteBatch:YO,DocumentReference:Fa,DocumentSnapshot:a0,Query:Js,QueryDocumentSnapshot:l0,QuerySnapshot:CR,CollectionReference:My,FieldPath:IR,FieldValue:Ag,setLogLevel:function zB(n){!function KC(n){Cl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function QB(n){(function YB(n,e){n.INTERNAL.registerComponent(new _o.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},KB)))})(n,(e,t)=>new ZO(e,t,new WB)),n.registerVersion("@firebase/firestore-compat","0.1.20")}(Yv.Z);var TR=F(6451),RT=F(5363),JB=F(6063);class XB extends $s.x{constructor(e=1/0,t=1/0,r=JB.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:u}=this;t||(r.push(e),!i&&r.push(a.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let u=0;u<a.length&&!e.closed;u+=r?1:2)e.next(a[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const u=t.now();let d=0;for(let g=1;g<r.length&&r[g]<=u;g+=2)d=g;d&&r.splice(0,d+1)}}}var XO=F(3099);function ek(n,e,t){var r,i;let a,u=!1;return n&&"object"==typeof n?(a=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,u=!!n.refCount,t=n.scheduler):a=null!=n?n:1/0,(0,XO.B)({connector:()=>new XB(a,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}function tk(n,e){return(0,Gf.m)(e)?Zt(()=>n,e):Zt(()=>n)}var DR=F(9468);F(5867);const rk=new Map,i2={activated:!1,tokenObservers:[]},s2={initialized:!1,enabled:!1};function ji(n){return rk.get(n)||i2}function Rl(n,e){rk.set(n,e)}function MT(){return s2}class c2{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ce.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function d2(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Xs=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function sk(n){if(!ji(n).activated)throw Xs.create("use-before-activation",{appName:n.name})}function RR(n,e){return NR.apply(this,arguments)}function NR(){return NR=(0,Ce.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},u=t.getImmediate({optional:!0});if(u){const L=yield u.getHeartbeatsHeader();L&&(a["X-Firebase-Client"]=L)}const d={method:"POST",body:JSON.stringify(e),headers:a};let g,y;try{g=yield fetch(n,d)}catch(L){throw Xs.create("fetch-network-error",{originalErrorMessage:null===(r=L)||void 0===r?void 0:r.message})}if(200!==g.status)throw Xs.create("fetch-status-error",{httpStatus:g.status});try{y=yield g.json()}catch(L){throw Xs.create("fetch-parse-error",{originalErrorMessage:null===(i=L)||void 0===i?void 0:i.message})}const C=y.ttl.match(/^([\d.]+)(s)$/);if(!C||!C[2]||isNaN(Number(C[1])))throw Xs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const D=1e3*Number(C[1]),N=Date.now();return{token:y.token,expireTimeMillis:N+D,issuedAtTimeMillis:N}}),NR.apply(this,arguments)}function g2(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const u0="firebase-app-check-store";let kT=null;function ak(){return kT||(kT=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(Xs.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(u0,{keyPath:"compositeKey"})}}catch(r){e(Xs.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),kT)}function MR(){return MR=(0,Ce.Z)(function*(n,e){const r=(yield ak()).transaction(u0,"readwrite"),a=r.objectStore(u0).put({compositeKey:n,value:e});return new Promise((u,d)=>{a.onsuccess=g=>{u()},r.onerror=g=>{var y;d(Xs.create("storage-set",{originalErrorMessage:null===(y=g.target.error)||void 0===y?void 0:y.message}))}})}),MR.apply(this,arguments)}const c0=new Da.Yd("@firebase/app-check");function dk(n,e){return(0,k.hl)()?function v2(n,e){return function lk(n,e){return MR.apply(this,arguments)}(function ck(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{c0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function hk(){return MT().enabled}function fk(){return FR.apply(this,arguments)}function FR(){return FR=(0,Ce.Z)(function*(){const n=MT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),FR.apply(this,arguments)}const T2={error:"UNKNOWN_ERROR"};function D2(n){return k.US.encodeString(JSON.stringify(n),!1)}function FT(n){return LR.apply(this,arguments)}function LR(){return LR=(0,Ce.Z)(function*(n,e=!1){const t=n.app;sk(t);const r=ji(t);let a,i=r.token;if(!i){const g=yield r.cachedTokenPromise;g&&LT(g)&&(i=g)}if(!e&&i&&LT(i))return{token:i.token};let d,u=!1;if(hk()){r.exchangeTokenPromise||(r.exchangeTokenPromise=RR(g2(t,yield fk()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),u=!0);const g=yield r.exchangeTokenPromise;return yield dk(t,g),Rl(t,Object.assign(Object.assign({},r),{token:g})),{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(g=>(r.exchangeTokenPromise=void 0,g)),u=!0),i=yield r.exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?c0.warn(g.message):c0.error(g),a=g}return i?(d={token:i.token},Rl(t,Object.assign(Object.assign({},r),{token:i})),yield dk(t,i)):d=A2(a),u&&gk(t,d),d}),LR.apply(this,arguments)}function UR(n,e){const t=ji(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Rl(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function pk(n){const{app:e}=n,t=ji(e);let r=t.tokenRefresher;r||(r=function S2(n){const{app:e}=n;return new c2((0,Ce.Z)(function*(){let r;if(r=ji(e).token?yield FT(n,!0):yield FT(n),r.error)throw r.error}),()=>!0,()=>{const t=ji(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Rl(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function gk(n,e){const t=ji(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function LT(n){return n.expireTimeMillis-Date.now()>0}function A2(n){return{token:D2(T2),error:n}}class x2{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ji(this.app);for(const t of e)UR(this.app,t.next);return Promise.resolve()}}const Ck="app-check-internal";!function H2(){(0,as._registerComponent)(new _o.wA("app-check",n=>function R2(n,e){return new x2(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Ck).initialize()})),(0,as._registerComponent)(new _o.wA(Ck,n=>function N2(n){return{getToken:e=>FT(n,e),addTokenListener:e=>function VR(n,e,t,r){const{app:i}=n,a=ji(i),u={next:t,error:r,type:e};if(Rl(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,u]})),a.token&&LT(a.token)){const d=a.token;Promise.resolve().then(()=>{t({token:d.token}),pk(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>pk(n))}(n,"INTERNAL",e),removeTokenListener:e=>UR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,as.registerVersion)("@firebase/app-check","0.5.10")}();class d0{constructor(){return(0,fn.vb)("app-check")}}"undefined"!=typeof window&&window;var UT=F(127);const GR=new h.OlP("angularfire2.auth.use-emulator"),qR=new h.OlP("angularfire2.auth.settings"),WR=new h.OlP("angularfire2.auth.tenant-id"),zR=new h.OlP("angularfire2.auth.langugage-code"),ZR=new h.OlP("angularfire2.auth.use-device-language"),KR=new h.OlP("angularfire.auth.persistence"),YR=(n,e,t,r,i,a,u,d)=>(0,Hr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,a&&g.useDeviceLanguage(),u)for(const[y,C]of Object.entries(u))g.settings[y]=C;return d&&g.setPersistence(d),g},[t,r,i,a,u,d]);let h0=(()=>{class n{constructor(t,r,i,a,u,d,g,y,C,D,N,L){const j=new $s.x,ne=lt(void 0).pipe((0,RT.Q)(u.outsideAngular),Zt(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,5881)))),(0,Ct.U)(()=>(0,Hr.on)(t,a,r)),(0,Ct.U)(le=>YR(le,a,d,y,C,D,g,N)),ek({bufferSize:1,refCount:!1}));if(rc(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=lt(null);else{ne.pipe(pa()).subscribe();const Ge=ne.pipe(Zt(ze=>ze.getRedirectResult().then(Nt=>Nt,()=>null)),fn.iC,ek({bufferSize:1,refCount:!1})),Je=ne.pipe(Zt(ze=>new Er.y(Nt=>({unsubscribe:a.runOutsideAngular(()=>ze.onAuthStateChanged(Ut=>Nt.next(Ut),Ut=>Nt.error(Ut),()=>Nt.complete()))})))),Ye=ne.pipe(Zt(ze=>new Er.y(Nt=>({unsubscribe:a.runOutsideAngular(()=>ze.onIdTokenChanged(Ut=>Nt.next(Ut),Ut=>Nt.error(Ut),()=>Nt.complete()))}))));this.authState=Ge.pipe(tk(Je),(0,DR.R)(u.outsideAngular),(0,RT.Q)(u.insideAngular)),this.user=Ge.pipe(tk(Ye),(0,DR.R)(u.outsideAngular),(0,RT.Q)(u.insideAngular)),this.idToken=this.user.pipe(Zt(ze=>ze?(0,Tn.D)(ze.getIdToken()):lt(null))),this.idTokenResult=this.user.pipe(Zt(ze=>ze?(0,Tn.D)(ze.getIdTokenResult()):lt(null))),this.credential=(0,TR.T)(Ge,j,this.authState.pipe(Di(ze=>!ze))).pipe((0,Ct.U)(ze=>(null==ze?void 0:ze.user)?ze:null),(0,DR.R)(u.outsideAngular),(0,RT.Q)(u.insideAngular))}return(0,Hr.pX)(this,ne,a,{spy:{apply:(le,Ge,Je)=>{(le.startsWith("signIn")||le.startsWith("createUser"))&&Je.then(Ye=>j.next(Ye))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Hr.Dh),h.LFG(Hr.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(fn.HU),h.LFG(GR,8),h.LFG(qR,8),h.LFG(WR,8),h.LFG(zR,8),h.LFG(ZR,8),h.LFG(KR,8),h.LFG(d0,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),K2=(()=>{class n{constructor(){UT.Z.registerVersion("angularfire",fn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[h0]}),n})();function Tk(n,e){return function Y2(n,e=bs.z){return new Er.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function QR(n,e){return Tk(n,e).pipe((0,Ct.U)(t=>({payload:t,type:"query"})))}function BT(n,e){return QR(n,e).pipe(es(void 0),e_(),(0,Ct.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,d)=>{const g=i.find(C=>C.doc.ref.isEqual(u.ref)),y=null==t?void 0:t.payload.docs.find(C=>C.ref.isEqual(u.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(u.metadata)||!g&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||a.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:u}})}),a}))}function Dk(n,e,t){return BT(n,t).pipe(ws((r,i)=>function J2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function X2(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return JR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return JR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return JR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Kv(),(0,Ct.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function JR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Sk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Ak{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=BT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ct.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(es(void 0),e_(),Di(([r,i])=>i.length>0||!r),(0,Ct.U)(([r,i])=>i),fn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ws((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Sk(e);return Dk(this.query,t,this.afs.schedulers.outsideAngular).pipe(fn.iC)}valueChanges(e={}){return QR(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),fn.iC)}get(e){return(0,Tn.D)(this.query.get(e)).pipe(fn.iC)}add(e){return this.ref.add(e)}doc(e){return new xk(this.ref.doc(e),this.afs)}}class xk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=Mk(r,t);return new Ak(i,a,this.afs)}snapshotChanges(){return function Q2(n,e){return Tk(n,e).pipe(es(void 0),e_(),(0,Ct.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(fn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ct.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Tn.D)(this.ref.get(e)).pipe(fn.iC)}}class ej{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?BT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Di(t=>t.length>0),fn.iC):BT(this.query,this.afs.schedulers.outsideAngular).pipe(fn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ws((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Sk(e);return Dk(this.query,t,this.afs.schedulers.outsideAngular).pipe(fn.iC)}valueChanges(e={}){return QR(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),fn.iC)}get(e){return(0,Tn.D)(this.query.get(e)).pipe(fn.iC)}}const Rk=new h.OlP("angularfire2.enableFirestorePersistence"),Nk=new h.OlP("angularfire2.firestore.persistenceSettings"),tj=new h.OlP("angularfire2.firestore.settings"),nj=new h.OlP("angularfire2.firestore.use-emulator");function Mk(n,e=(t=>t)){return{query:e(n),ref:n}}let jT=(()=>{class n{constructor(t,r,i,a,u,d,g,y,C,D,N,L,j,ne,le,Ge,Je){this.schedulers=g;const Ye=(0,Hr.on)(t,d,r),ze=C;D&&YR(Ye,d,N,j,ne,le,L,Ge),[this.firestore,this.persistenceEnabled$]=(0,Hr.cc)(`${Ye.name}.firestore`,"AngularFirestore",Ye.name,()=>{const Nt=d.runOutsideAngular(()=>Ye.firestore());if(a&&Nt.settings(a),ze&&Nt.useEmulator(...ze),i&&!rc(u)){const Ut=()=>{try{return(0,Tn.D)(Nt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(mn){return"undefined"!=typeof console&&console.warn(mn),lt(!1)}};return[Nt,d.runOutsideAngular(Ut)]}return[Nt,lt(!1)]},[a,ze,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:u}=Mk(i,r),d=this.schedulers.ngZone.run(()=>a);return new Ak(d,u,this)}collectionGroup(t,r){const i=r||(u=>u),a=this.firestore.collectionGroup(t);return new ej(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new xk(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Hr.Dh),h.LFG(Hr.xv,8),h.LFG(Rk,8),h.LFG(tj,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(fn.HU),h.LFG(Nk,8),h.LFG(nj,8),h.LFG(h0,8),h.LFG(GR,8),h.LFG(qR,8),h.LFG(WR,8),h.LFG(zR,8),h.LFG(ZR,8),h.LFG(KR,8),h.LFG(d0,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),rj=(()=>{class n{constructor(){UT.Z.registerVersion("angularfire",fn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Rk,useValue:!0},{provide:Nk,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[jT]}),n})();const Pk="firebasestorage.googleapis.com",Ok="storageBucket";class Kr extends k.ZR{constructor(e,t){super(XR(e),`Firebase Storage: ${t} (${XR(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Kr.prototype)}_codeEquals(e){return XR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function XR(n){return"storage/"+n}function eN(){return new Kr("unknown","An unknown error occurred, please check the error payload for server response.")}function kk(){return new Kr("canceled","User canceled the upload/download.")}function Fk(){return new Kr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Py(n){return new Kr("invalid-argument",n)}function Lk(){return new Kr("app-deleted","The Firebase app was deleted.")}function Vk(n){return new Kr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function f0(n,e){return new Kr("invalid-format","String does not match format '"+n+"': "+e)}function p0(n){throw new Kr("internal-error","Internal error: "+n)}class Ns{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ns.makeFromUrl(e,t)}catch(i){return new Ns(e,"")}if(""===r.path)return r;throw function pj(n){return new Kr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(ze){ze.path_=decodeURIComponent(ze.path)}const D=t.replace(/[.]/g,"\\."),Ye=[{regex:d,indices:{bucket:1,path:3},postModify:function a(ze){"/"===ze.path.charAt(ze.path.length-1)&&(ze.path_=ze.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===Pk?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let ze=0;ze<Ye.length;ze++){const Nt=Ye[ze],Ut=Nt.regex.exec(e);if(Ut){let oi=Ut[Nt.indices.path];oi||(oi=""),r=new Ns(Ut[Nt.indices.bucket],oi),Nt.postModify(r);break}}if(null==r)throw function fj(n){return new Kr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class yj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function $T(n){return"string"==typeof n||n instanceof String}function Uk(n){return tN()&&n instanceof Blob}function tN(){return"undefined"!=typeof Blob}function nN(n,e,t,r){if(r<e)throw Py(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Py(`Invalid value for '${n}'. Expected ${t} or less.`)}function Ed(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Bk(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var wf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(wf||(wf={})),wf))();class Ij{constructor(e,t,r,i,a,u,d,g,y,C,D){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=C,this.connectionFactory_=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,L)=>{this.resolve_=N,this.reject_=L,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,u=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(d,d.getResponse());!function Ej(n){return void 0!==n}(g)?a():a(g)}catch(g){u(g)}else if(null!==d){const g=eN();g.serverResponse=d.getErrorText(),u(this.errorCallback_?this.errorCallback_(d,g):g)}else u(i.canceled?this.appDelete_?Lk():kk():function hj(){return new Kr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new HT(!1,null,!0)):this.backoffId_=function vj(n,e,t){let r=1,i=null,a=null,u=!1,d=0;function g(){return 2===d}let y=!1;function C(...le){y||(y=!0,e.apply(null,le))}function D(le){i=setTimeout(()=>{i=null,n(L,g())},le)}function N(){a&&clearTimeout(a)}function L(le,...Ge){if(y)return void N();if(le)return N(),void C.call(null,le,...Ge);if(g()||u)return N(),void C.call(null,le,...Ge);let Ye;r<64&&(r*=2),1===d?(d=2,Ye=0):Ye=1e3*(r+Math.random()),D(Ye)}let j=!1;function ne(le){j||(j=!0,N(),!y&&(null!==i?(le||(d=2),clearTimeout(i),D(0)):le||(d=1)))}return D(0),a=setTimeout(()=>{u=!0,ne(!0)},t),ne}((r,i)=>{if(i)return void r(!1,new HT(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===wf.NO_ERROR,g=a.getStatus();if(!d||this.isRetryStatusCode_(g)){const C=a.getErrorCode()===wf.ABORT;return void r(!1,new HT(!1,null,C))}const y=-1!==this.successCodes_.indexOf(g);r(!0,new HT(y,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function wj(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class HT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Nj(...n){const e=function Rj(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(tN())return new Blob(n);throw new Kr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Wo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class rN{constructor(e,t){this.data=e,this.contentType=t||null}}function iN(n,e){switch(n){case Wo.RAW:return new rN(jk(e));case Wo.BASE64:case Wo.BASE64URL:return new rN($k(n,e));case Wo.DATA_URL:return new rN(function kj(n){const e=new Hk(n);return e.base64?$k(Wo.BASE64,e.rest):function Oj(n){let e;try{e=decodeURIComponent(n)}catch(t){throw f0(Wo.DATA_URL,"Malformed data URL.")}return jk(e)}(e.rest)}(e),function Fj(n){return new Hk(n).contentType}(e))}throw eN()}function jk(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function $k(n,e){switch(n){case Wo.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw f0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Wo.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw f0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Pj(n){return atob(n)}(e)}catch(i){throw f0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Hk{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw f0(Wo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Lj(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)}}class Gu{constructor(e,t){let r=0,i="";Uk(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Uk(this.data_)){const i=function Mj(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Gu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Gu(r,!0)}}static getBlob(...e){if(tN()){const t=e.map(r=>r instanceof Gu?r.data_:r);return new Gu(Nj.apply(null,t))}{const t=e.map(u=>$T(u)?iN(Wo.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)i[a++]=u[d]}),new Gu(i,!0)}}uploadData(){return this.data_}}function sN(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function Cj(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Gk(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Bj(n,e){return e}class eo{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Bj}}let GT=null;function g0(){if(GT)return GT;const n=[];n.push(new eo("bucket")),n.push(new eo("generation")),n.push(new eo("metageneration")),n.push(new eo("name","fullPath",!0));const t=new eo("name");t.xform=function e(a,u){return function jj(n){return!$T(n)||n.length<2?n:Gk(n)}(u)},n.push(t);const i=new eo("size");return i.xform=function r(a,u){return void 0!==u?Number(u):u},n.push(i),n.push(new eo("timeCreated")),n.push(new eo("updated")),n.push(new eo("md5Hash",null,!0)),n.push(new eo("cacheControl",null,!0)),n.push(new eo("contentDisposition",null,!0)),n.push(new eo("contentEncoding",null,!0)),n.push(new eo("contentLanguage",null,!0)),n.push(new eo("contentType",null,!0)),n.push(new eo("metadata","customMetadata",!0)),GT=n,GT}function qk(n,e,t){const r=sN(e);return null===r?null:function Hj(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const u=t[a];r[u.local]=u.xform(r,e[u.server])}return function $j(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Ns(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function oN(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const Wk="prefixes";class qu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Wu(n){if(!n)throw eN()}function qT(n,e){return function t(r,i){const a=qk(n,i,e);return Wu(null!==a),a}}function Oy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function cj(){return new Kr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function uj(){return new Kr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function lj(n){return new Kr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function dj(n){return new Kr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function m0(n){const e=Oy(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function aj(n){return new Kr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function Zk(n,e,t){const i=Ed(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,d=new qu(i,"GET",qT(n,t),u);return d.errorHandler=m0(e),d}function Kj(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const d=Ed(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,C=new qu(d,"GET",function zj(n,e){return function t(r,i){const a=function Wj(n,e,t){const r=sN(t);return null===r?null:function qj(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Wk])for(const i of t[Wk]){const a=i.replace(/\/$/,""),u=n._makeStorageReference(new Ns(e,a));r.prefixes.push(u)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new Ns(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Wu(null!==a),a}}(n,e.bucket),y);return C.urlParams=a,C.errorHandler=Oy(e),C}function Yk(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Xj(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class WT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function aN(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Wu(!1)}return Wu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const r$={STATE_CHANGED:"state_changed"},to={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function lN(n){switch(n){case"running":case"pausing":case"canceling":return to.RUNNING;case"paused":return to.PAUSED;case"success":return to.SUCCESS;case"canceled":return to.CANCELED;default:return to.ERROR}}class i${constructor(e,t,r){if(function bj(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function ky(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class o$ extends class s${constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=wf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=wf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=wf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw p0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw p0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw p0("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw p0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw p0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Nl(){return new o$}class e1{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=g0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function e$(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u=Yk(e,r,i),d={name:u.fullPath},g=Ed(a,n.host,n._protocol),C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},D=oN(u,t),j=new qu(g,"POST",function L(ne){let le;aN(ne);try{le=ne.getResponseHeader("X-Goog-Upload-URL")}catch(Ge){Wu(!1)}return Wu($T(le)),le},n.maxUploadRetryTime);return j.urlParams=d,j.headers=C,j.body=D,j.errorHandler=Oy(e),j}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Nl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function t$(n,e,t,r){const g=new qu(t,"POST",function a(y){const C=aN(y,["active","final"]);let D=null;try{D=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch(L){Wu(!1)}D||Wu(!1);const N=Number(D);return Wu(!isNaN(N)),new WT(N,r.size(),"final"===C)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=Oy(e),g}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Nl,t,r);this._request=a,a.getPromise().then(u=>{u=u,this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new WT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let u;try{u=function n$(n,e,t,r,i,a,u,d){const g=new WT(0,0);if(u?(g.current=u.current,g.total=u.total):(g.current=0,g.total=r.size()),r.size()!==g.total)throw function mj(){return new Kr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=g.total-g.current;let C=y;i>0&&(C=Math.min(C,i));const D=g.current,j={"X-Goog-Upload-Command":C===y?"upload, finalize":"upload","X-Goog-Upload-Offset":`${g.current}`},ne=r.slice(D,D+C);if(null===ne)throw Fk();const Ye=new qu(t,"POST",function le(ze,Nt){const Ut=aN(ze,["active","final"]),mn=g.current+C,oi=r.size();let Yo;return Yo="final"===Ut?qT(e,a)(ze,Nt):null,new WT(mn,oi,"final"===Ut,Yo)},e.maxUploadRetryTime);return Ye.headers=j,Ye.body=ne.uploadData(),Ye.progressCallback=d||null,Ye.errorHandler=Oy(n),Ye}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const d=this._ref.storage._makeRequest(u,Nl,i,a);this._request=d,d.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Zk(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Nl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Qk(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},g=function d(){let Ye="";for(let ze=0;ze<2;ze++)Ye+=Math.random().toString().slice(2);return Ye}();u["Content-Type"]="multipart/related; boundary="+g;const y=Yk(e,r,i),C=oN(y,t),L=Gu.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+C+"\r\n--"+g+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+g+"--");if(null===L)throw Fk();const j={name:y.fullPath},ne=Ed(a,n.host,n._protocol),Ge=n.maxUploadRetryTime,Je=new qu(ne,"POST",qT(n,t),Ge);return Je.urlParams=j,Je.headers=u,Je.body=L.uploadData(),Je.errorHandler=Oy(e),Je}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Nl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=kk(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=lN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new i$(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(lN(this._state)){case to.SUCCESS:ky(this._resolve.bind(null,this.snapshot))();break;case to.CANCELED:case to.ERROR:ky(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(lN(this._state)){case to.RUNNING:case to.PAUSED:e.next&&ky(e.next.bind(e,this.snapshot))();break;case to.SUCCESS:e.complete&&ky(e.complete.bind(e))();break;default:e.error&&ky(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class xg{constructor(e,t){this._service=e,this._location=t instanceof Ns?t:Ns.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new xg(e,t)}get root(){const e=new Ns(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Gk(this._location.path)}get storage(){return this._service}get parent(){const e=function Vj(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ns(this._location.bucket,e);return new xg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Vk(e)}}function n1(n,e,t){return uN.apply(this,arguments)}function uN(){return uN=(0,Ce.Z)(function*(n,e,t){const i=yield r1(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield n1(n,e,i.nextPageToken))}),uN.apply(this,arguments)}function r1(n,e){null!=e&&"number"==typeof e.maxResults&&nN("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Kj(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Nl)}function y$(n){n._throwIfRoot("getDownloadURL");const e=function Yj(n,e,t){const i=Ed(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,d=new qu(i,"GET",function Zj(n,e){return function t(r,i){const a=qk(n,i,e);return Wu(null!==a),function Gj(n,e,t,r){const i=sN(e);if(null===i||!$T(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const u=encodeURIComponent;return a.split(",").map(y=>{const D=n.fullPath;return Ed("/b/"+u(n.bucket)+"/o/"+u(D),t,r)+Bk({alt:"media",token:y})})[0]}(a,i,n.host,n._protocol)}}(n,t),u);return d.errorHandler=m0(e),d}(n.storage,n._location,g0());return n.storage.makeRequestWithTokens(e,Nl).then(t=>{if(null===t)throw function _j(){return new Kr("no-download-url","The given file does not have any download URLs.")}();return t})}function i1(n,e){const t=function Uj(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ns(n._location.bucket,t);return new xg(n.storage,r)}function s1(n,e){if(n instanceof cN){const t=n;if(null==t._bucket)throw function gj(){return new Kr("no-default-bucket","No default bucket found. Did you set the '"+Ok+"' property when initializing the app?")}();const r=new xg(t,t._bucket);return null!=e?s1(r,e):r}return void 0!==e?i1(n,e):n}function b$(n,e){if(e&&function w$(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof cN)return function E$(n,e){return new xg(n,e)}(n,e);throw Py("To use ref(service, url), the first argument must be a Storage instance.")}return s1(n,e)}function o1(n,e){const t=null==e?void 0:e[Ok];return null==t?null:Ns.makeFromBucketSpec(t,n)}class cN{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Pk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ns.makeFromBucketSpec(i,this._host):o1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ns.makeFromBucketSpec(this._url,e):o1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){nN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){nN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ce.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ce.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xg(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new yj(Lk());{const a=function xj(n,e,t,r,i,a){const u=Bk(n.urlParams),d=n.url+u,g=Object.assign({},n.headers);return function Sj(n,e){e&&(n["X-Firebase-GMPID"]=e)}(g,e),function Tj(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(g,t),function Dj(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(g,a),function Aj(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(g,r),new Ij(d,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,Ce.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const a1="@firebase/storage";function c1(n,e){return b$(n=(0,k.m9)(n),e)}function P$(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new cN(t,r,i,e,as.SDK_VERSION)}!function O$(){(0,as._registerComponent)(new _o.wA("storage",P$,"PUBLIC").setMultipleInstances(!0)),(0,as.registerVersion)(a1,"0.9.8",""),(0,as.registerVersion)(a1,"0.9.8","esm2017")}();class zT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class d1{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new zT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new zT(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?u=>t(new zT(u,this,this._ref)):{next:t.next?u=>t.next(new zT(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class h1{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new bd(e,this._service))}get items(){return this._delegate.items.map(e=>new bd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class bd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function N$(n,e){return i1(n,e)}(this._delegate,e);return new bd(t,this.storage)}get root(){return new bd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new bd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new d1(function I$(n,e,t){return function f$(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new e1(n,new Gu(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Wo.RAW,r){this._throwIfRoot("putString");const i=iN(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new d1(new e1(this._delegate,new Gu(i.data,!0),a),this)}listAll(){return function A$(n){return function g$(n){const e={prefixes:[],items:[]};return n1(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new h1(e,this.storage))}list(e){return function S$(n,e){return r1(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new h1(t,this.storage))}getMetadata(){return function T$(n){return function m$(n){n._throwIfRoot("getMetadata");const e=Zk(n.storage,n._location,g0());return n.storage.makeRequestWithTokens(e,Nl)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function D$(n,e){return function _$(n,e){n._throwIfRoot("updateMetadata");const t=function Qj(n,e,t,r){const a=Ed(e.fullServerUrl(),n.host,n._protocol),d=oN(t,r),y=n.maxOperationRetryTime,C=new qu(a,"PATCH",qT(n,r),y);return C.headers={"Content-Type":"application/json; charset=utf-8"},C.body=d,C.errorHandler=m0(e),C}(n.storage,n._location,e,g0());return n.storage.makeRequestWithTokens(t,Nl)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function x$(n){return y$(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function R$(n){return function v$(n){n._throwIfRoot("deleteObject");const e=function Jj(n,e){const r=Ed(e.fullServerUrl(),n.host,n._protocol),d=new qu(r,"DELETE",function u(g,y){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=m0(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Nl)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Vk(e)}}class f1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(p1(e))throw Py("ref() expected a child path but got a URL, use refFromURL instead.");return new bd(c1(this._delegate,e),this)}refFromURL(e){if(!p1(e))throw Py("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ns.makeFromUrl(e,this._delegate.host)}catch(t){throw Py("refFromUrl() expected a valid full URL but got an invalid one.")}return new bd(c1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function M$(n,e,t,r={}){!function C$(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function p1(n){return/^[A-Za-z]+:\/\//.test(n)}function V$(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new f1(t,r)}function g1(n){const e=function B$(n){return new Er.y(e=>{const t=u=>e.next(u);t(n.snapshot);const a=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){a()}}).pipe(function ij(n,e=bs.z){return(0,Qn.e)((t,r)=>{let i=null,a=null,u=null;const d=()=>{if(i){i.unsubscribe(),i=null;const y=a;a=null,r.next(y)}};function g(){const y=u+n,C=e.now();if(C<y)return i=this.schedule(void 0,y-C),void r.add(i);d()}t.subscribe(new jn.Q(r,y=>{a=y,u=e.now(),i||(i=e.schedule(g,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Ct.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function ZT(n){return{getDownloadURL:()=>lt(void 0).pipe(fn.fc,Zt(()=>n.getDownloadURL()),fn.iC),getMetadata:()=>lt(void 0).pipe(fn.fc,Zt(()=>n.getMetadata()),fn.iC),delete:()=>(0,Tn.D)(n.delete()),child:e=>ZT(n.child(e)),updateMetadata:e=>(0,Tn.D)(n.updateMetadata(e)),put:(e,t)=>g1(n.put(e,t)),putString:(e,t,r)=>g1(n.putString(e,t,r)),list:e=>(0,Tn.D)(n.list(e)),listAll:()=>(0,Tn.D)(n.listAll())}}!function U$(n){const e={TaskState:to,TaskEvent:r$,StringFormat:Wo,Storage:f1,Reference:bd};n.INTERNAL.registerComponent(new _o.wA("storage-compat",V$,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.16")}(Yv.Z);const j$=new h.OlP("angularfire2.storageBucket"),$$=new h.OlP("angularfire2.storage.maxUploadRetryTime"),H$=new h.OlP("angularfire2.storage.maxOperationRetryTime"),G$=new h.OlP("angularfire2.storage.use-emulator");let m1=(()=>{class n{constructor(t,r,i,a,u,d,g,y,C,D){const N=(0,Hr.on)(t,u,r);this.storage=(0,Hr.cc)(`${N.name}.storage.${i}`,"AngularFireStorage",N.name,()=>{const L=u.runOutsideAngular(()=>N.storage(i||void 0)),j=C;return j&&L.useEmulator(...j),g&&L.setMaxUploadRetryTime(g),y&&L.setMaxOperationRetryTime(y),L},[g,y])}ref(t){return ZT(this.storage.ref(t))}refFromURL(t){return ZT(this.storage.refFromURL(t))}upload(t,r,i){return ZT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Hr.Dh),h.LFG(Hr.xv,8),h.LFG(j$,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(fn.HU),h.LFG($$,8),h.LFG(H$,8),h.LFG(G$,8),h.LFG(d0,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),q$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),W$=(()=>{class n{constructor(){UT.Z.registerVersion("angularfire",fn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[m1],imports:[q$]}),n})(),_1=(()=>{class n{constructor(t,r){this._AngularFirestore=t,this._AngularFireStorage=r}getAllGoods(){return this._AngularFirestore.collection("cars").snapshotChanges()}AddNewGood(t,r,i,a){let u=this._AngularFireStorage.ref("cars/"+a.name);u.put(a).then(()=>{u.getDownloadURL().subscribe(d=>{this._AngularFirestore.collection("cars").add({name:t,price:r,paragraph:i,image:d})})})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(jT),h.LFG(m1))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const z$=["image"];let Z$=(()=>{class n{constructor(t){this._goodsService=t,this.addcarForm=new mh({Name:new Yn(null),Price:new Yn(null),Paragraph:new Yn(null),imagefile:new Yn(null)})}ngOnInit(){}addNewgoodCar(t){console.log(t.value),this._goodsService.AddNewGood(t.value.Name,t.value.Price,t.value.Paragraph,this.image.nativeElement.files[0]),t.reset()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_1))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-admin-page"]],viewQuery:function(t,r){if(1&t&&h.Gf(z$,5),2&t){let i;h.iGM(i=h.CRH())&&(r.image=i.first)}},decls:20,vars:2,consts:[[1,"container"],[1,"row"],[1,"text-center","my-5"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["type","text","name","name","formControlName","Name","ngModel","","placeholder","Name","required","",1,"form-control"],["type","number","name","Price","formControlName","Price","ngModel","","placeholder","Price","required","",1,"form-control"],["for","exampleFormControlTextarea1",1,"form-label"],["id","exampleFormControlTextarea1","formControlName","Paragraph","rows","3",1,"form-control"],["type","file","ngModel","","name","image","formControlName","imagefile","required",""],["image",""],["type","submit","value","add",1,"btn","btn-primary",3,"disabled"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"h2",2),h._uU(3,"Add New Car"),h.qZA(),h.TgZ(4,"form",3),h.NdJ("ngSubmit",function(){return r.addNewgoodCar(r.addcarForm)}),h.TgZ(5,"div",4),h._UZ(6,"input",5),h.qZA(),h.TgZ(7,"div",4),h._UZ(8,"input",6),h.qZA(),h.TgZ(9,"div",4),h.TgZ(10,"label",7),h._uU(11,"Intro of Car"),h.qZA(),h._UZ(12,"textarea",8),h.qZA(),h.TgZ(13,"div",4),h._UZ(14,"input",9,10),h._UZ(16,"br"),h.qZA(),h.TgZ(17,"div",4),h.TgZ(18,"button",11),h._uU(19,"Add New Car"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t&&(h.xp6(4),h.Q6J("formGroup",r.addcarForm),h.xp6(14),h.Q6J("disabled",r.addcarForm.invalid))},directives:[Zm,fp,Eu,_u,hp,Hc,Jm,_h],styles:[""]}),n})();var K$=F(1529);let Ef=(()=>{class n{constructor(t,r){this._AngularFireAuth=t,this._Router=r,this.userIdauth="",this.userauth=t.user}registerauth(t,r){return this._AngularFireAuth.createUserWithEmailAndPassword(t,r)}LoginAuth(t,r){return this._AngularFireAuth.signInWithEmailAndPassword(t,r)}Logoutauth(){return this._AngularFireAuth.signOut().then(()=>{this._Router.navigate(["/Login"])})}LogingoogleAuth(){return this.AuthLogin(new K$.Q)}AuthLogin(t){return this._AngularFireAuth.signInWithPopup(t).then(r=>{this._Router.navigate(["/home"]),console.log("You have been successfully logged in!")}).catch(r=>{console.log(r)})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h0),h.LFG(ri))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dN=(()=>{class n{constructor(t,r){this._AuthService=t,this._Router=r}canActivate(t,r){return new Promise(i=>{this._AuthService.userauth.subscribe(a=>{a?i(!0):(this._Router.navigate(["/Login"]),i(!1))})})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ef),h.LFG(ri))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hN=(()=>{class n{constructor(t,r){this._AngularFirestore=t,this._AuthService=r}addTofirebaseData(t){return this._AngularFirestore.collection(`users/${this._AuthService.userIdauth}/cart`).add(t)}getdatacart(){return this._AngularFirestore.collection(`users/${this._AuthService.userIdauth}/cart`).snapshotChanges()}deleteS(t){return this._AngularFirestore.doc(`users/${this._AuthService.userIdauth}/cart/${t}`).delete()}saveS(t,r){return this._AngularFirestore.doc(`users/${this._AuthService.userIdauth}/cart/${t}`).update({amount:r})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(jT),h.LFG(Ef))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Y$(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"tr"),h.TgZ(1,"td",5),h._uU(2),h.qZA(),h.TgZ(3,"td",5),h._uU(4),h.qZA(),h.TgZ(5,"td"),h.TgZ(6,"input",6),h.NdJ("ngModelChange",function(i){return h.CHM(t).$implicit.amount=i}),h.qZA(),h.qZA(),h.TgZ(7,"td",5),h._uU(8),h.qZA(),h.TgZ(9,"td"),h.TgZ(10,"button",7),h.NdJ("click",function(){const a=h.CHM(t).index;return h.oxw().save(a)}),h._uU(11,"Save"),h.qZA(),h.TgZ(12,"button",8),h.NdJ("click",function(){const a=h.CHM(t).index;return h.oxw().delet(a)}),h._uU(13,"Delet"),h.qZA(),h.qZA(),h.qZA()}if(2&n){const t=e.$implicit;h.xp6(2),h.Oqu(t.name),h.xp6(2),h.Oqu(t.price),h.xp6(2),h.Q6J("ngModel",t.amount),h.xp6(2),h.Oqu(t.price*t.amount)}}let Q$=(()=>{class n{constructor(t){this._CartService=t,this.cartGoods=[]}ngOnInit(){this._CartService.getdatacart().subscribe(t=>{this.cartGoods=t.map(r=>Object.assign({id:r.payload.doc.id},r.payload.doc.data()))})}delet(t){this._CartService.deleteS(this.cartGoods[t].id)}save(t){this._CartService.saveS(this.cartGoods[t].id,this.cartGoods[t].amount)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(hN))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-cart"]],decls:16,vars:1,consts:[[1,"container"],[1,"mt-5"],[1,"m-auto","text-center"],[1,"m-1"],[4,"ngFor","ngForOf"],[1,"px-3"],["type","number","placeholder","Amount",1,"mx-3",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","m-2",3,"click"],[1,"btn","btn-danger","m-2",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"table",2),h.TgZ(3,"thead",3),h.TgZ(4,"td"),h._uU(5,"Name"),h.qZA(),h.TgZ(6,"td"),h._uU(7,"Price"),h.qZA(),h.TgZ(8,"td"),h._uU(9,"Amount"),h.qZA(),h.TgZ(10,"td"),h._uU(11,"Total"),h.qZA(),h.TgZ(12,"td"),h._uU(13,"Options"),h.qZA(),h.qZA(),h.TgZ(14,"tbody"),h.YNc(15,Y$,14,4,"tr",4),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t&&(h.xp6(15),h.Q6J("ngForOf",r.cartGoods))},directives:[cr,_h,_u,hp,zm],styles:["table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:3px solid blue}"]}),n})();function J$(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",11),h.NdJ("click",function(){h.CHM(t);const i=h.oxw().index;return h.oxw().addTOcart(i)}),h._uU(1,"Go to buy"),h.qZA()}}function X$(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div"),h.TgZ(1,"div",12),h._UZ(2,"input",13,14),h.qZA(),h.TgZ(4,"button",15),h.NdJ("click",function(){h.CHM(t);const i=h.MAs(3);return h.oxw(2).buy(+i.value)}),h._uU(5,"Buy"),h.qZA(),h.qZA()}}function eH(n,e){if(1&n&&(h.TgZ(0,"div",3),h.TgZ(1,"div",4),h._UZ(2,"img",5),h.TgZ(3,"div"),h.TgZ(4,"h5",6),h.TgZ(5,"span",7),h._uU(6,"car Name :"),h.qZA(),h._uU(7),h.qZA(),h.TgZ(8,"p",8),h.TgZ(9,"span",7),h._uU(10,"price :"),h.qZA(),h._uU(11),h.ALo(12,"currency"),h.qZA(),h.TgZ(13,"p",8),h._uU(14),h.qZA(),h.YNc(15,J$,2,0,"button",9),h.YNc(16,X$,6,0,"div",10),h.qZA(),h.qZA(),h.qZA()),2&n){const t=e.$implicit,r=e.index,i=h.oxw();h.xp6(2),h.Q6J("src",t.image,h.LSH),h.xp6(5),h.hij(" ",t.name,""),h.xp6(4),h.hij(" ",h.lcZ(12,6,t.price),""),h.xp6(3),h.Oqu(t.paragraph),h.xp6(1),h.Q6J("ngIf",i.add!==r),h.xp6(1),h.Q6J("ngIf",i.add===r)}}let tH=(()=>{class n{constructor(t,r){this._GoodsService=t,this._CartService=r,this.goods=[],this.add=-1}ngOnInit(){this._GoodsService.getAllGoods().subscribe(t=>{this.goods=t.map(r=>Object.assign({id:r.payload.doc.id},r.payload.doc.data()))})}addTOcart(t){this.add=t}buy(t){let r=this.goods[this.add];this._CartService.addTofirebaseData({name:r.name,amount:t,price:r.price}).then(()=>{this.add=-1})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_1),h.Y36(hN))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],decls:3,vars:1,consts:[[1,"container"],[1,"row"],["class","col-md-4 my-2 ",4,"ngFor","ngForOf"],[1,"col-md-4","my-2"],[1,"car-card"],[1,"w-100","p-2",3,"src"],[1,"text-center","mt-2","text-color"],[1,"colorr"],[1,"ms-3","text-color"],["href","#","class","btn btn-primary mb-3 ms-3",3,"click",4,"ngIf"],[4,"ngIf"],["href","#",1,"btn","btn-primary","mb-3","ms-3",3,"click"],[1,"mx-3"],["type","number","placeholder","Amount",1,"form-control"],["amount",""],["type","button",1,"btn","btn-primary","ms-3","my-3",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.YNc(2,eH,17,8,"div",2),h.qZA(),h.qZA()),2&t&&(h.xp6(2),h.Q6J("ngForOf",r.goods))},directives:[cr,xr],pipes:[tc],styles:[".colorr[_ngcontent-%COMP%]{color:#00f!important}.car-card[_ngcontent-%COMP%]{background-color:#fff}.text-color[_ngcontent-%COMP%]{color:#000}"]}),n})(),fN=(()=>{class n{constructor(t,r){this._AngularFirestore=t,this._AuthService=r}AddNewUser(t,r,i,a,u,d){return this._AngularFirestore.doc("users/"+t).set({f:r,Last_Name:i,Age:a,email:u,Password:d})}getUserdata(){return this._AngularFirestore.doc("users/"+this._AuthService.userIdauth).valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(jT),h.LFG(Ef))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nH(n,e){1&n&&(h.TgZ(0,"p",14),h._uU(1,"Email is Required"),h.qZA())}function rH(n,e){1&n&&(h.TgZ(0,"p",14),h._uU(1,"Email is invalid"),h.qZA())}function iH(n,e){if(1&n&&(h.TgZ(0,"div",12),h.YNc(1,nH,2,0,"p",13),h.YNc(2,rH,2,0,"p",13),h.qZA()),2&n){const t=h.oxw();let r,i;h.xp6(1),h.Q6J("ngIf",null==(r=t.LoginForm.get("Email"))||null==r.errors?null:r.errors.required),h.xp6(1),h.Q6J("ngIf",null==(i=t.LoginForm.get("Email"))||null==i.errors?null:i.errors.email)}}function sH(n,e){1&n&&(h.TgZ(0,"p",14),h._uU(1,"Password is Required"),h.qZA())}function oH(n,e){1&n&&(h.TgZ(0,"p",14),h._uU(1,"The password must start with a capital letter and be from 5 to 10 crunches"),h.qZA())}function aH(n,e){if(1&n&&(h.TgZ(0,"div",12),h.YNc(1,sH,2,0,"p",13),h.YNc(2,oH,2,0,"p",15),h.qZA()),2&n){const t=h.oxw();let r,i;h.xp6(1),h.Q6J("ngIf",null==(r=t.LoginForm.get("Password"))||null==r.errors?null:r.errors.required),h.xp6(1),h.Q6J("ngIf",null==(i=t.LoginForm.get("Password"))||null==i.errors?null:i.errors.pattern)}}function lH(n,e){if(1&n&&(h.TgZ(0,"p",16),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Oqu(t.error)}}let uH=(()=>{class n{constructor(t,r,i){this._router=t,this._AuthService=r,this._UsersService=i,this.error="",this.LoginForm=new mh({Email:new Yn(null,[fi.required,fi.email]),Password:new Yn(null,[fi.required,fi.pattern(/^[A-Z]([a-z]|.|[0-9]){5,10}/)])})}login(t){let r=t.value;this._AuthService.LoginAuth(r.Email,r.Password).then(i=>{this._router.navigate(["/home"]),console.log(r)}).catch(()=>{this.error="cheack Your email or password"})}signingoogle(){this._AuthService.LogingoogleAuth()}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ri),h.Y36(Ef),h.Y36(fN))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:19,vars:5,consts:[[1,"container"],[1,"row"],[1,"mt-5",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","email","formControlName","Email","aria-describedby","emailHelp","aria-label","enter email","placeholder","Email",1,"form-control"],["class","p-color fs-5",4,"ngIf"],["for","exampleInputPassword1",1,"form-label"],["type","password","formControlName","Password","id","exampleInputPassword1","placeholder","Password",1,"form-control"],["class","fs-5 text-danger ",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"btn","btn-danger","col-md-2","ms-5",3,"click"],[1,"p-color","fs-5"],["class","mb-0 text-danger",4,"ngIf"],[1,"mb-0","text-danger"],["class","mb-0 text-danger ",4,"ngIf"],[1,"fs-5","text-danger"]],template:function(t,r){if(1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"form",2),h.NdJ("ngSubmit",function(){return r.login(r.LoginForm)}),h.TgZ(3,"div",3),h.TgZ(4,"div",3),h.TgZ(5,"label",4),h._uU(6,"Email address"),h.qZA(),h._UZ(7,"input",5),h.YNc(8,iH,3,2,"div",6),h.qZA(),h.TgZ(9,"div",3),h.TgZ(10,"label",7),h._uU(11,"Password"),h.qZA(),h._UZ(12,"input",8),h.YNc(13,aH,3,2,"div",6),h.qZA(),h.YNc(14,lH,2,1,"p",9),h.TgZ(15,"button",10),h._uU(16,"Login"),h.qZA(),h.TgZ(17,"button",11),h.NdJ("click",function(){return r.signingoogle()}),h._uU(18,"sigin with Google"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t){let i,a,u;h.xp6(2),h.Q6J("formGroup",r.LoginForm),h.xp6(6),h.Q6J("ngIf",(null==(i=r.LoginForm.get("Email"))?null:i.errors)&&(null==(i=r.LoginForm.get("Email"))?null:i.touched)),h.xp6(5),h.Q6J("ngIf",(null==(a=r.LoginForm.get("Password"))?null:a.errors)&&(null==(a=r.LoginForm.get("Password"))?null:a.touched)),h.xp6(1),h.Q6J("ngIf",(null==(u=r.LoginForm.get("Email"))?null:u.touched)&&(null==(u=r.LoginForm.get("Password"))?null:u.touched)),h.xp6(1),h.Q6J("disabled",r.LoginForm.invalid)}},directives:[Zm,fp,Eu,_u,hp,Hc,xr],styles:[".width-icon[_ngcontent-%COMP%]{width:0}"]}),n})(),cH=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-logout"]],decls:2,vars:0,template:function(t,r){1&t&&(h.TgZ(0,"p"),h._uU(1,"logout works!"),h.qZA())},styles:[""]}),n})();function dH(n,e){1&n&&(h.TgZ(0,"p",18),h._uU(1,"First Name is Required"),h.qZA())}function hH(n,e){1&n&&(h.TgZ(0,"p",18),h._uU(1,"First Name is min Lenth is 3"),h.qZA())}function fH(n,e){1&n&&(h.TgZ(0,"p",18),h._uU(1,"First Name is max Lenth is 8"),h.qZA())}function pH(n,e){if(1&n&&(h.TgZ(0,"div",15),h.YNc(1,dH,2,0,"p",16),h.YNc(2,hH,2,0,"p",17),h.YNc(3,fH,2,0,"p",17),h.qZA()),2&n){const t=h.oxw();let r,i,a;h.xp6(1),h.Q6J("ngIf",null==(r=t.RegisterForm.get("First_Name"))||null==r.errors?null:r.errors.required),h.xp6(1),h.Q6J("ngIf",null==(i=t.RegisterForm.get("First_Name"))||null==i.errors?null:i.errors.minlength),h.xp6(1),h.Q6J("ngIf",null==(a=t.RegisterForm.get("First_Name"))||null==a.errors?null:a.errors.maxlength)}}function gH(n,e){1&n&&(h.TgZ(0,"p",18),h._uU(1,"Last Name is Required"),h.qZA())}function mH(n,e){1&n&&(h.TgZ(0,"p",18),h._uU(1,"Last Name is min Lenth is 3"),h.qZA())}function _H(n,e){1&n&&(h.TgZ(0,"p",18),h._uU(1,"Last Name is max Lenth is 8"),h.qZA())}function yH(n,e){if(1&n&&(h.TgZ(0,"div",15),h.YNc(1,gH,2,0,"p",17),h.YNc(2,mH,2,0,"p",17),h.YNc(3,_H,2,0,"p",17),h.qZA()),2&n){const t=h.oxw();let r,i,a;h.xp6(1),h.Q6J("ngIf",null==(r=t.RegisterForm.get("Last_Name"))||null==r.errors?null:r.errors.required),h.xp6(1),h.Q6J("ngIf",null==(i=t.RegisterForm.get("Last_Name"))||null==i.errors?null:i.errors.minlength),h.xp6(1),h.Q6J("ngIf",null==(a=t.RegisterForm.get("Last_Name"))||null==a.errors?null:a.errors.maxlength)}}function vH(n,e){1&n&&(h.TgZ(0,"p",18),h._uU(1,"Email is Required"),h.qZA())}function wH(n,e){1&n&&(h.TgZ(0,"p",18),h._uU(1,"Email is invalid"),h.qZA())}function EH(n,e){if(1&n&&(h.TgZ(0,"div",15),h.YNc(1,vH,2,0,"p",17),h.YNc(2,wH,2,0,"p",17),h.qZA()),2&n){const t=h.oxw();let r,i;h.xp6(1),h.Q6J("ngIf",null==(r=t.RegisterForm.get("Email"))||null==r.errors?null:r.errors.required),h.xp6(1),h.Q6J("ngIf",null==(i=t.RegisterForm.get("Email"))||null==i.errors?null:i.errors.email)}}function bH(n,e){1&n&&(h.TgZ(0,"p",18),h._uU(1,"Password is Required"),h.qZA())}function CH(n,e){1&n&&(h.TgZ(0,"p",18),h._uU(1,"The password must start with a capital letter and be from 5 to 10 "),h.qZA())}function IH(n,e){if(1&n&&(h.TgZ(0,"div",15),h.YNc(1,bH,2,0,"p",17),h.YNc(2,CH,2,0,"p",16),h.qZA()),2&n){const t=h.oxw();let r,i;h.xp6(1),h.Q6J("ngIf",null==(r=t.RegisterForm.get("Password"))||null==r.errors?null:r.errors.required),h.xp6(1),h.Q6J("ngIf",null==(i=t.RegisterForm.get("Password"))||null==i.errors?null:i.errors.pattern)}}function TH(n,e){1&n&&(h.TgZ(0,"p",18),h._uU(1,"Age is Required"),h.qZA())}function DH(n,e){1&n&&(h.TgZ(0,"p",18),h._uU(1,"The youngest Age to register is 13 years old"),h.qZA())}function SH(n,e){1&n&&(h.TgZ(0,"p",18),h._uU(1,"The oldest registration age is 60 years"),h.qZA())}function AH(n,e){if(1&n&&(h.TgZ(0,"div",15),h.YNc(1,TH,2,0,"p",17),h.YNc(2,DH,2,0,"p",17),h.YNc(3,SH,2,0,"p",17),h.qZA()),2&n){const t=h.oxw();let r,i,a;h.xp6(1),h.Q6J("ngIf",null==(r=t.RegisterForm.get("Age"))||null==r.errors?null:r.errors.required),h.xp6(1),h.Q6J("ngIf",null==(i=t.RegisterForm.get("Age"))||null==i.errors?null:i.errors.min),h.xp6(1),h.Q6J("ngIf",null==(a=t.RegisterForm.get("Age"))||null==a.errors?null:a.errors.max)}}function xH(n,e){1&n&&(h.TgZ(0,"p",18),h._uU(1,"Adress is Required"),h.qZA())}function RH(n,e){if(1&n&&(h.TgZ(0,"div",15),h.YNc(1,xH,2,0,"p",17),h.qZA()),2&n){const t=h.oxw();let r;h.xp6(1),h.Q6J("ngIf",null==(r=t.RegisterForm.get("Adress"))||null==r.errors?null:r.errors.required)}}const NH=[{path:"",redirectTo:"Login",pathMatch:"full"},{path:"home",component:tH,canActivate:[dN],data:{index:1}},{path:"Registration",component:(()=>{class n{constructor(t,r,i){this._router=t,this._AuthService=r,this._UsersService=i,this.error="",this.RegisterForm=new mh({First_Name:new Yn(null,[fi.required,fi.minLength(3),fi.maxLength(8)]),Last_Name:new Yn(null,[fi.required,fi.minLength(3),fi.maxLength(8)]),Email:new Yn(null,[fi.required,fi.email]),Password:new Yn(null,[fi.required,fi.pattern(/^[A-Z]([a-z]|.|[0-9]){5,10}/)]),Age:new Yn(null,[fi.required,fi.min(13),fi.max(60)]),Adress:new Yn(null,[fi.required])})}SubmaitRegister(t){let r=t.value;this._AuthService.registerauth(r.Email,r.Password).then(i=>{var a;console.log(i),this._UsersService.AddNewUser(null===(a=i.user)||void 0===a?void 0:a.uid,r.First_Name,r.Last_Name,r.Age,r.Email,r.Password).then(()=>{this._router.navigate(["/home"])})}).catch(i=>{this.error="Email is Alredy Register"})}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ri),h.Y36(Ef),h.Y36(fN))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-register"]],decls:36,vars:9,consts:[[1,"container"],[1,"mt-5",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","exampleInputEmail1",1,"form-label"],["type","text","formControlName","First_Name","aria-describedby","emailHelp","aria-label","enter email","placeholder","First Name",1,"form-control"],["class","p-color fs-5",4,"ngIf"],["type","text","formControlName","Last_Name","aria-describedby","emailHelp","aria-label","enter email","placeholder","Last Name",1,"form-control"],["type","email","formControlName","Email","aria-describedby","emailHelp","aria-label","enter email","placeholder","Email",1,"form-control"],[1,"text-danger"],["for","exampleInputPassword1",1,"form-label"],["type","password","formControlName","Password","id","exampleInputPassword1","placeholder","Password",1,"form-control"],["type","number","formControlName","Age","aria-describedby","emailHelp","aria-label","enter email","placeholder","Age",1,"form-control"],["class","p-color fs-5 ",4,"ngIf"],["type","text","formControlName","Adress","aria-describedby","emailHelp","aria-label","enter email","placeholder","Adress",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"p-color","fs-5"],["class","mb-0 text-danger ",4,"ngIf"],["class","mb-0 text-danger",4,"ngIf"],[1,"mb-0","text-danger"]],template:function(t,r){if(1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"form",1),h.NdJ("ngSubmit",function(){return r.SubmaitRegister(r.RegisterForm)}),h.TgZ(2,"div",2),h.TgZ(3,"label",3),h._uU(4,"First Name"),h.qZA(),h._UZ(5,"input",4),h.YNc(6,pH,4,3,"div",5),h.qZA(),h.TgZ(7,"div",2),h.TgZ(8,"label",3),h._uU(9,"Last Name"),h.qZA(),h._UZ(10,"input",6),h.YNc(11,yH,4,3,"div",5),h.qZA(),h.TgZ(12,"div",2),h.TgZ(13,"label",3),h._uU(14,"Email address"),h.qZA(),h._UZ(15,"input",7),h.TgZ(16,"div",8),h._uU(17),h.qZA(),h.YNc(18,EH,3,2,"div",5),h.qZA(),h.TgZ(19,"div",2),h.TgZ(20,"label",9),h._uU(21,"Password"),h.qZA(),h._UZ(22,"input",10),h.YNc(23,IH,3,2,"div",5),h.qZA(),h.TgZ(24,"div",2),h.TgZ(25,"label",3),h._uU(26,"Age"),h.qZA(),h._UZ(27,"input",11),h.YNc(28,AH,4,3,"div",12),h.qZA(),h.TgZ(29,"div",2),h.TgZ(30,"label",3),h._uU(31,"Adress"),h.qZA(),h._UZ(32,"input",13),h.YNc(33,RH,2,1,"div",5),h.qZA(),h.TgZ(34,"button",14),h._uU(35,"Register"),h.qZA(),h.qZA(),h.qZA()),2&t){let i,a,u,d,g,y;h.xp6(1),h.Q6J("formGroup",r.RegisterForm),h.xp6(5),h.Q6J("ngIf",(null==(i=r.RegisterForm.get("First_Name"))?null:i.errors)&&(null==(i=r.RegisterForm.get("First_Name"))?null:i.touched)),h.xp6(5),h.Q6J("ngIf",(null==(a=r.RegisterForm.get("Last_Name"))?null:a.errors)&&(null==(a=r.RegisterForm.get("Last_Name"))?null:a.touched)),h.xp6(6),h.Oqu(r.error),h.xp6(1),h.Q6J("ngIf",(null==(u=r.RegisterForm.get("Email"))?null:u.errors)&&(null==(u=r.RegisterForm.get("Email"))?null:u.touched)),h.xp6(5),h.Q6J("ngIf",(null==(d=r.RegisterForm.get("Password"))?null:d.errors)&&(null==(d=r.RegisterForm.get("Password"))?null:d.touched)),h.xp6(5),h.Q6J("ngIf",(null==(g=r.RegisterForm.get("Age"))?null:g.errors)&&(null==(g=r.RegisterForm.get("Age"))?null:g.touched)),h.xp6(5),h.Q6J("ngIf",(null==(y=r.RegisterForm.get("Adress"))?null:y.errors)&&(null==(y=r.RegisterForm.get("Adress"))?null:y.touched)),h.xp6(1),h.Q6J("disabled",r.RegisterForm.invalid)}},directives:[Zm,fp,Eu,_u,hp,Hc,xr,_h],styles:[""]}),n})(),data:{index:2}},{path:"logout",component:cH,data:{index:3}},{path:"Login",component:uH,data:{index:4}},{path:"Cart",component:Q$,canActivate:[dN],data:{index:5}},{path:"AdminPage",component:Z$,canActivate:[dN],data:{index:6}}];let MH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[lb.forRoot(NH,{useHash:!0})],lb]}),n})();class y1{}const Cd="*";function OH(n,e){return{type:7,name:n,definitions:e,options:{}}}function v1(n,e=null){return{type:4,styles:e,timings:n}}function kH(n,e=null){return{type:3,steps:n,options:e}}function w1(n,e=null){return{type:2,steps:n,options:e}}function Fy(n){return{type:6,styles:n,offset:null}}function FH(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function E1(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function b1(n){Promise.resolve(null).then(n)}class Ly{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){b1(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class C1{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?b1(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==a&&this._onFinish()}),u.onDestroy(()=>{++r==a&&this._onDestroy()}),u.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((u,d)=>Math.max(u,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function LH(n,e){1&n&&(h.TgZ(0,"a",15),h._uU(1,"Home"),h.qZA())}function VH(n,e){1&n&&(h.TgZ(0,"a",16),h._uU(1,"Cart"),h.qZA())}function UH(n,e){1&n&&(h.TgZ(0,"a",17),h._uU(1,"Admin Page"),h.qZA())}function BH(n,e){1&n&&(h.TgZ(0,"a",18),h._uU(1,"Registration"),h.qZA())}function jH(n,e){1&n&&(h.TgZ(0,"a",19),h._uU(1,"Login"),h.qZA())}function $H(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"a",20),h.NdJ("click",function(){return h.CHM(t),h.oxw().Logout()}),h._uU(1,"Logout"),h.qZA()}}let HH=(()=>{class n{constructor(t,r,i){this._authsrvce=t,this._UsersService=r,this._Router=i,this.isuser=!1,this.isadmin=!1}Logout(){this._authsrvce.Logoutauth()}ngOnInit(){this._authsrvce.userauth.subscribe(t=>{console.log(t),t?(this.isuser=!0,this._authsrvce.userIdauth=t.uid,this._UsersService.getUserdata().subscribe(r=>{r.admin&&(this.isadmin=!0)})):(this.isuser=!1,this._authsrvce.userIdauth="")})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ef),h.Y36(fN),h.Y36(ri))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-navbar"]],decls:21,vars:6,consts:[[1,"navbar","navbar-expand-lg","bg-light","mb-5p"],[1,"container-fluid"],["routerLink","",1,"navbar-brand","fs-3","ww"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0","fs-5"],[1,"nav-item"],["class","nav-link active","aria-current","page","routerLink","/home",4,"ngIf"],["class","nav-link active","aria-current","page","routerLink","/Cart",4,"ngIf"],["class","nav-link active","aria-current","page","routerLink","/AdminPage",4,"ngIf"],[1,"navbar-nav","mb-2","mb-lg-0","ms-auto","fs-6"],["class","nav-link active","aria-current","page","routerLink","/Registration",4,"ngIf"],["class","nav-link active","aria-current","page","routerLink","/Login",4,"ngIf"],["class","nav-link active","aria-current","page","routerLink","/logout",3,"click",4,"ngIf"],["aria-current","page","routerLink","/home",1,"nav-link","active"],["aria-current","page","routerLink","/Cart",1,"nav-link","active"],["aria-current","page","routerLink","/AdminPage",1,"nav-link","active"],["aria-current","page","routerLink","/Registration",1,"nav-link","active"],["aria-current","page","routerLink","/Login",1,"nav-link","active"],["aria-current","page","routerLink","/logout",1,"nav-link","active",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"nav",0),h.TgZ(1,"div",1),h.TgZ(2,"a",2),h._uU(3,"Cars Website"),h.qZA(),h.TgZ(4,"button",3),h._UZ(5,"span",4),h.qZA(),h.TgZ(6,"div",5),h.TgZ(7,"ul",6),h.TgZ(8,"li",7),h.YNc(9,LH,2,0,"a",8),h.qZA(),h.TgZ(10,"li",7),h.YNc(11,VH,2,0,"a",9),h.qZA(),h.TgZ(12,"li",7),h.YNc(13,UH,2,0,"a",10),h.qZA(),h.qZA(),h.TgZ(14,"ul",11),h.TgZ(15,"li",7),h.YNc(16,BH,2,0,"a",12),h.qZA(),h.TgZ(17,"li",7),h.YNc(18,jH,2,0,"a",13),h.qZA(),h.TgZ(19,"li",7),h.YNc(20,$H,2,0,"a",14),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t&&(h.xp6(9),h.Q6J("ngIf",r.isuser),h.xp6(2),h.Q6J("ngIf",r.isuser),h.xp6(2),h.Q6J("ngIf",r.isuser&&r.isadmin),h.xp6(3),h.Q6J("ngIf",!r.isuser),h.xp6(2),h.Q6J("ngIf",!r.isuser),h.xp6(2),h.Q6J("ngIf",r.isuser))},directives:[Im,xr],styles:[".nav-link[_ngcontent-%COMP%], .ww[_ngcontent-%COMP%]{color:#fff!important}.bg-light[_ngcontent-%COMP%]{background-color:#131722!important}.navbar-toggler[_ngcontent-%COMP%]{background-color:#fff!important}@media (max-width: 992px){.navbar-collapse[_ngcontent-%COMP%]{position:relative;top:50px;left:0;padding-left:15px;padding-right:15px;padding-bottom:15px;width:50%;height:100%;z-index:10000;background-color:#131722}.navbar-collapse.collapsing[_ngcontent-%COMP%]{left:-50%;transition:height 0s ease}.navbar-collapse.show[_ngcontent-%COMP%]{left:0;transition:left .3s ease-in-out}.navbar-toggler.collapsed[_ngcontent-%COMP%] ~ .navbar-collapse[_ngcontent-%COMP%]{transition:left .5s ease-in-out}}"]}),n})(),GH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:1,consts:[[1,"container-router"],["myoutlet","outlet"]],template:function(t,r){if(1&t&&(h._UZ(0,"app-navbar"),h.TgZ(1,"div",0),h._UZ(2,"router-outlet",null,1),h.qZA()),2&t){const i=h.MAs(3);h.xp6(1),h.Q6J("@router",i.activatedRouteData.index)}},directives:[HH,fu],styles:[""],data:{animation:[OH("router",[FH("*<=>*",[kH([E1(":enter",[Fy({transform:"translatex(100%)"}),v1(500,Fy({transform:"translatex(0)"}))]),E1(":leave",[Fy({transform:"translatex(0)"}),v1(500,Fy({transform:"translatex(-100%)"}))])])])])]}}),n})();var qH=F(5032);const I1="@firebase/database";let gN="";function D1(n){gN=n}class ZH{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class KH{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const S1=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ZH(e)}}catch(e){}return new KH},Rg=S1("localStorage"),mN=S1("sessionStorage"),Vy=new Da.Yd("@firebase/database"),A1=function(){let n=1;return function(){return n++}}(),x1=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},_0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=_0.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let Ng=null,R1=!0;const N1=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Vy.logLevel=Da.in.VERBOSE,Ng=Vy.log.bind(Vy),e&&mN.set("logging_enabled",!0)):"function"==typeof n?Ng=n:(Ng=null,mN.remove("logging_enabled"))},$i=function(...n){if(!0===R1&&(R1=!1,null===Ng&&!0===mN.get("logging_enabled")&&N1(!0)),Ng){const e=_0.apply(null,n);Ng(e)}},y0=function(n){return function(...e){$i(n,...e)}},_N=function(...n){const e="FIREBASE INTERNAL ERROR: "+_0(...n);Vy.error(e)},zu=function(...n){const e=`FIREBASE FATAL ERROR: ${_0(...n)}`;throw Vy.error(e),new Error(e)},Ms=function(...n){const e="FIREBASE WARNING: "+_0(...n);Vy.warn(e)},KT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Id="[MIN_NAME]",Zu="[MAX_NAME]",Mg=function(n,e){if(n===e)return 0;if(n===Id||e===Zu)return-1;if(e===Id||n===Zu)return 1;{const t=YT(n),r=YT(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},JH=function(n,e){return n===e?0:n<e?-1:1},v0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},yN=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=yN(n[e[r]]);return t+="}",t},M1=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Hi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const P1=function(n){(0,k.hu)(!KT(n),"Invalid JSON number");const r=1023;let i,a,u,d,g;0===n?(a=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=d+r,u=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(a=0,u=Math.round(n/Math.pow(2,-1074))));const y=[];for(g=52;g;g-=1)y.push(u%2?1:0),u=Math.floor(u/2);for(g=11;g;g-=1)y.push(a%2?1:0),a=Math.floor(a/2);y.push(i?1:0),y.reverse();const C=y.join("");let D="";for(g=0;g<64;g+=8){let N=parseInt(C.substr(g,8),2).toString(16);1===N.length&&(N="0"+N),D+=N}return D.toLowerCase()},nG=new RegExp("^-?(0*)\\d{1,10}$"),O1=-2147483648,vN=2147483647,YT=function(n){if(nG.test(n)){const e=Number(n);if(e>=O1&&e<=vN)return e}return null},Uy=function(n){try{n()}catch(e){setTimeout(()=>{throw Ms("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},w0=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class iG{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ms(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class sG{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?($i("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ms(e)}}let E0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const U1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$1="websocket",H1="long_polling";class EN{constructor(e,t,r,i,a=!1,u="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=u,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Rg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Rg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function G1(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===$1)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==H1)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function oG(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Hi(t,(a,u)=>{i.push(a+"="+u)}),r+i.join("&")}class aG{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const bN={},CN={};function IN(n){const e=n.toString();return bN[e]||(bN[e]=new aG),bN[e]}class uG{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Uy(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class bf{constructor(e,t,r,i,a,u,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=u,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=y0(e),this.stats_=IN(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),G1(t,H1,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new uG(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new TN((...a)=>{const[u,d,g,y,C]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=d,this.password=g;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[u,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(u,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&U1.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){bf.forceAllow_=!0}static forceDisallow(){bf.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!bf.forceAllow_&&(bf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=M1(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class TN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=A1(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=TN.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(d){$i("frame writing exception"),d.stack&&$i(d.stack),$i(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||$i("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{$i("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let JT=null;"undefined"!=typeof MozWebSocket?JT=MozWebSocket:"undefined"!=typeof WebSocket&&(JT=WebSocket);let By=(()=>{class n{constructor(t,r,i,a,u,d,g){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=y0(this.connId),this.stats_=IN(r),this.connURL=n.connectionURL_(r,d,g,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,u){const d={v:"5"};return!(0,k.Yr)()&&"undefined"!=typeof location&&location.hostname&&U1.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),a&&(d.ac=a),u&&(d.p=u),G1(t,$1,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Rg.set("previous_websocket_failure",!0);try{let i;if((0,k.Yr)()){const u={headers:{"User-Agent":`Firebase/5/${gN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(u.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(u.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,g=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;g&&(u.proxy={origin:g})}this.mySock=new JT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==JT&&!n.forceDisallow_}static previouslyFailed(){return Rg.isInMemoryStorage||!0===Rg.get("previous_websocket_failure")}markConnectionHealthy(){Rg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=M1(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),Q1=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[bf,By]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=By&&By.isAvailable();let i=r&&!By.previouslyFailed();if(t.webSocketOnly&&(r||Ms("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[By];else{const a=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&a.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class iF{constructor(e,t,r,i,a,u,d,g,y,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=u,this.onReady_=d,this.onDisconnect_=g,this.onKill_=y,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=y0("c:"+this.id+":"),this.transportManager_=new Q1(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=w0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=v0("t",e),r=v0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=v0("t",e),r=v0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=v0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?_N("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_N("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ms("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),w0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):w0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Rg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class sF{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class oF{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class XT extends oF{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new XT}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Vn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Mn(){return new Vn("")}function rn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Cf(n){return n.pieces_.length-n.pieceNum_}function Jn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Vn(n.pieces_,e)}function SN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function b0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function uF(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Vn(e,0)}function Sr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Vn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Vn(t,0)}function sn(n){return n.pieceNum_>=n.pieces_.length}function no(n,e){const t=rn(n),r=rn(e);if(null===t)return e;if(t===r)return no(Jn(n),Jn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function NG(n,e){const t=b0(n,0),r=b0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Mg(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function AN(n,e){if(Cf(n)!==Cf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function La(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Cf(n)>Cf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class MG{constructor(e,t){this.errorPrefix_=t,this.parts_=b0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);cF(this)}}function cF(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Pg(n))}function Pg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class xN extends oF{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new xN}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const C0=1e3;let tD,Og=(()=>{class n extends sF{constructor(t,r,i,a,u,d,g,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=u,this.authTokenProvider_=d,this.appCheckTokenProvider_=g,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=y0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=C0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");xN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&XT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,u={r:a,a:t,b:r};this.log_((0,k.Pz)(u)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:d=>{const g=d.d;"ok"===d.s?r.resolve(g):r.reject(g)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const d=this.outstandingGets_[u];void 0===d||a!==d||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),r.promise}listen(t,r,i,a){this.initConnection_();const u=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+u),this.listens.has(d)||this.listens.set(d,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(d).has(u),"listen() called twice for same path/queryId.");const g={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(d).set(u,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,g=>{const y=g.d,C=g.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",g),"ok"!==C&&this.removeListen_(i,a),t.onComplete&&t.onComplete(C,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();Ms(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const u=a.s,d=a.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const u={p:t};a&&(u.q=i,u.t=a),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,d=>{a&&setTimeout(()=>{a(d.s,d.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,u){this.initConnection_();const d={p:r,d:i};void 0!==u&&(d.h=u),this.outstandingPuts_.push({action:t,request:d,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):_N("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=C0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=C0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=C0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ce.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let g=!1,y=null;const C=function(){y?y.close():(g=!0,a())};t.realtime_={close:C,sendRequest:function(L){(0,k.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(L)}};const N=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[L,j]=yield Promise.all([t.authTokenProvider_.getToken(N),t.appCheckTokenProvider_.getToken(N)]);g?$i("getToken() completed but was canceled"):($i("getToken() completed. Creating connection."),t.authToken_=L&&L.accessToken,t.appCheckToken_=j&&j.token,y=new iF(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ne=>{Ms(ne+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(L){t.log_("Failed to get token: "+L),g||(t.repoInfo_.nodeAdmin&&Ms(L),C())}}})()}interrupt(t){$i("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){$i("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=C0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>yN(u)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Vn(t).toString();let a;if(this.listens.has(i)){const u=this.listens.get(i);a=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){$i("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){$i("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+gN.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=XT.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class un{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new un(e,t)}}class eD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new un(Id,e),i=new un(Id,t);return 0!==this.compare(r,i)}minPost(){return un.MIN}}class fF extends eD{static get __EMPTY_NODE(){return tD}static set __EMPTY_NODE(e){tD=e}compare(e,t){return Mg(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return un.MIN}maxPost(){return new un(Zu,tD)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new un(e,tD)}toString(){return".key"}}const Ku=new fF;class nD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let NN,Ml=(()=>{class n{constructor(t,r,i,a,u){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:Eo.EMPTY_NODE,this.right=null!=u?u:Eo.EMPTY_NODE}copy(t,r,i,a,u){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const u=i(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===u?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Eo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Eo.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Eo{constructor(e,t=Eo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Eo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ml.BLACK,null,null))}remove(e){return new Eo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ml.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new nD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new nD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new nD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new nD(this.root_,null,this.comparator_,!0,e)}}function jG(n,e){return Mg(n.name,e.name)}function RN(n,e){return Mg(n,e)}Eo.EMPTY_NODE=new class BG{copy(e,t,r,i,a){return this}insert(e,t,r){return new Ml(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const pF=function(n){return"number"==typeof n?"number:"+P1(n):"string:"+n},gF=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===NN||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===NN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let mF,_F,yF,jy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),gF(this.priorityNode_)}static set __childrenNodeConstructor(t){mF=t}static get __childrenNodeConstructor(){return mF}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return sn(t)?this:".priority"===rn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=rn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===Cf(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Jn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+pF(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?P1(this.value_):this.value_,this.lazyHash_=x1(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(u>=0,"Unknown leaf type: "+i),a===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const sr=new class qG extends eD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Mg(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return un.MIN}maxPost(){return new un(Zu,new jy("[PRIORITY-POST]",yF))}makePost(e,t){const r=_F(e);return new un(t,new jy("[PRIORITY-POST]",r))}toString(){return".priority"}},WG=Math.log(2);class zG{constructor(e){this.count=parseInt(Math.log(e+1)/WG,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const rD=function(n,e,t,r){n.sort(e);const i=function(g,y){const C=y-g;let D,N;if(0===C)return null;if(1===C)return D=n[g],N=t?t(D):D,new Ml(N,D.node,Ml.BLACK,null,null);{const L=parseInt(C/2,10)+g,j=i(g,L),ne=i(L+1,y);return D=n[L],N=t?t(D):D,new Ml(N,D.node,Ml.BLACK,j,ne)}},d=function(g){let y=null,C=null,D=n.length;const N=function(j,ne){const le=D-j,Ge=D;D-=j;const Je=i(le+1,Ge),Ye=n[le],ze=t?t(Ye):Ye;L(new Ml(ze,Ye.node,ne,null,Je))},L=function(j){y?(y.left=j,y=j):(C=j,y=j)};for(let j=0;j<g.count;++j){const ne=g.nextBitIsOne(),le=Math.pow(2,g.count-(j+1));ne?N(le,Ml.BLACK):(N(le,Ml.BLACK),N(le,Ml.RED))}return C}(new zG(n.length));return new Eo(r||e,d)};let MN;const $y={};class Td{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)($y&&sr,"ChildrenNode.ts has not been loaded"),MN=MN||new Td({".priority":$y},{".priority":sr}),MN}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Eo?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==Ku,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(un.Wrap);let d,u=a.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=a.getNext();d=i?rD(r,e.getCompare()):$y;const g=e.toString(),y=Object.assign({},this.indexSet_);y[g]=e;const C=Object.assign({},this.indexes_);return C[g]=d,new Td(C,y)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const u=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(u,"Missing index implementation for "+a),i===$y){if(u.isDefinedOn(e.node)){const d=[],g=t.getIterator(un.Wrap);let y=g.getNext();for(;y;)y.name!==e.name&&d.push(y),y=g.getNext();return d.push(e),rD(d,u.getCompare())}return $y}{const d=t.get(e.name);let g=i;return d&&(g=g.remove(new un(e.name,d))),g.insert(e,e.node)}});return new Td(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===$y)return i;{const a=t.get(e.name);return a?i.remove(new un(e.name,a)):i}});return new Td(r,this.indexSet_)}}let I0,Jt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&gF(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return I0||(I0=new n(new Eo(RN),null,Td.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||I0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?I0:r}}getChild(t){const r=rn(t);return null===r?this:this.getImmediateChild(r).getChild(Jn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new un(t,r);let a,u;r.isEmpty()?(a=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const d=a.isEmpty()?I0:this.priorityNode_;return new n(a,d,u)}}updateChild(t,r){const i=rn(t);if(null===i)return r;{(0,k.hu)(".priority"!==rn(t)||1===Cf(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Jn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,u=!0;if(this.forEachChild(sr,(d,g)=>{r[d]=g.val(t),i++,u&&n.INTEGER_REGEXP_.test(d)?a=Math.max(a,Number(d)):u=!1}),!t&&u&&a<2*i){const d=[];for(const g in r)d[g]=r[g];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+pF(this.getPriority().val())+":"),this.forEachChild(sr,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":x1(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const u=a.getPredecessorKey(new un(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new un(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new un(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,un.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)<0;)a.getNext(),u=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,un.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)>0;)a.getNext(),u=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===T0?-1:0}withIndex(t){if(t===Ku||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ku||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(sr),a=r.getIterator(sr);let u=i.getNext(),d=a.getNext();for(;u&&d;){if(u.name!==d.name||!u.node.equals(d.node))return!1;u=i.getNext(),d=a.getNext()}return null===u&&null===d}return!1}return!1}}resolveIndex_(t){return t===Ku?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const T0=new class ZG extends Jt{constructor(){super(new Eo(RN),Jt.EMPTY_NODE,Td.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Jt.EMPTY_NODE}isEmpty(){return!1}};function Fr(n,e=null){if(null===n)return Jt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new jy(n,Fr(e));if(n instanceof Array){let t=Jt.EMPTY_NODE;return Hi(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=Fr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Fr(e))}{const t=[];let r=!1;if(Hi(n,(u,d)=>{if("."!==u.substring(0,1)){const g=Fr(d);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new un(u,g)))}}),0===t.length)return Jt.EMPTY_NODE;const a=rD(t,jG,u=>u.name,RN);if(r){const u=rD(t,sr.getCompare());return new Jt(a,Fr(e),new Td({".priority":u},{".priority":sr}))}return new Jt(a,Fr(e),Td.Default)}}Object.defineProperties(un,{MIN:{value:new un(Id,Jt.EMPTY_NODE)},MAX:{value:new un(Zu,T0)}}),fF.__EMPTY_NODE=Jt.EMPTY_NODE,jy.__childrenNodeConstructor=Jt,function $G(n){NN=n}(T0),function GG(n){yF=n}(T0),function HG(n){_F=n}(Fr);class PN extends eD{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!sn(e)&&".priority"!==rn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Mg(e.name,t.name):a}makePost(e,t){const r=Fr(e),i=Jt.EMPTY_NODE.updateChild(this.indexPath_,r);return new un(t,i)}maxPost(){const e=Jt.EMPTY_NODE.updateChild(this.indexPath_,T0);return new un(Zu,e)}toString(){return b0(this.indexPath_,0).join("/")}}const ON=new class YG extends eD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Mg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return un.MIN}maxPost(){return un.MAX}makePost(e,t){const r=Fr(e);return new un(t,r)}toString(){return".value"}},Hy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",QG=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=Hy.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let u=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=Hy.charAt(e[i]);return(0,k.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),EF=function(n){if(n===""+vN)return"-";const e=YT(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Zu;const a=Hy.charAt(Hy.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},bF=function(n){if(n===""+O1)return Id;const e=YT(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+vN:(delete t[t.length-1],t.join("")):(t[t.length-1]=Hy.charAt(Hy.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function CF(n){return{type:"value",snapshotNode:n}}function Gy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function D0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function S0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class FN{constructor(e){this.index_=e}updateChild(e,t,r,i,a,u){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(D0(t,d)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?u.trackChildChange(Gy(t,r)):u.trackChildChange(S0(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(sr,(i,a)=>{t.hasChild(i)||r.trackChildChange(D0(i,a))}),t.isLeafNode()||t.forEachChild(sr,(i,a)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(a)||r.trackChildChange(S0(i,a,u))}else r.trackChildChange(Gy(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Jt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class A0{constructor(e){this.indexedFilter_=new FN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=A0.getStartPost_(e),this.endPost_=A0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,u){return this.matches(new un(t,r))||(r=Jt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Jt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Jt.EMPTY_NODE);const a=this;return t.forEachChild(sr,(u,d)=>{a.matches(new un(u,d))||(i=i.updateImmediateChild(u,Jt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class XG{constructor(e){this.rangedFilter_=new A0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,u){return this.rangedFilter_.matches(new un(t,r))||(r=Jt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,u):this.fullLimitUpdateChild_(e,t,r,a,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Jt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Jt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;a.hasNext()&&u<this.limit_;){const d=a.getNext();let g;if(g=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!g)break;i=i.updateImmediateChild(d.name,d.node),u++}}else{let a,u,d,g;if(i=t.withIndex(this.index_),i=i.updatePriority(Jt.EMPTY_NODE),this.reverse_){g=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();d=(N,L)=>D(L,N)}else g=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let y=0,C=!1;for(;g.hasNext();){const D=g.getNext();!C&&d(a,D)<=0&&(C=!0),C&&y<this.limit_&&d(D,u)<=0?y++:i=i.updateImmediateChild(D.name,Jt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let u;if(this.reverse_){const D=this.index_.getCompare();u=(N,L)=>D(L,N)}else u=this.index_.getCompare();const d=e;(0,k.hu)(d.numChildren()===this.limit_,"");const g=new un(t,r),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),C=this.rangedFilter_.matches(g);if(d.hasChild(t)){const D=d.getImmediateChild(t);let N=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=N&&(N.name===t||d.hasChild(N.name));)N=i.getChildAfterChild(this.index_,N,this.reverse_);const L=null==N?1:u(N,g);if(C&&!r.isEmpty()&&L>=0)return null!=a&&a.trackChildChange(S0(t,r,D)),d.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(D0(t,D));const ne=d.updateImmediateChild(t,Jt.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(null!=a&&a.trackChildChange(Gy(N.name,N.node)),ne.updateImmediateChild(N.name,N.node)):ne}}return r.isEmpty()?e:C&&u(y,g)>=0?(null!=a&&(a.trackChildChange(D0(y.name,y.node)),a.trackChildChange(Gy(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(y.name,Jt.EMPTY_NODE)):e}}class iD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=sr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Id}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Zu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===sr}copy(){const e=new iD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function LN(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function VN(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function sD(n,e){const t=n.copy();return t.index_=e,t}function IF(n){const e={};if(n.isDefault())return e;let t;return n.index_===sr?t="$priority":n.index_===ON?t="$value":n.index_===Ku?t="$key":((0,k.hu)(n.index_ instanceof PN,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function TF(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==sr&&(e.i=n.index_.toString()),e}class oD extends sF{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=y0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const u=oD.getListenId_(e,r),d={};this.listens_[u]=d;const g=IF(e._queryParams);this.restRequest_(a+".json",g,(y,C)=>{let D=C;if(404===y&&(D=null,y=null),null===y&&this.onDataUpdate_(a,D,!1,r),(0,k.DV)(this.listens_,u)===d){let N;N=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(N,null)}})}unlisten(e,t){const r=oD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=IF(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,u)=>{let d=u;404===a&&(d=null,a=null),null===a?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+u);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+u+" received. status:",d.status,"response:",d.responseText);let g=null;if(d.status>=200&&d.status<300){try{g=(0,k.cI)(d.responseText)}catch(y){Ms("Failed to parse JSON response for "+u+": "+d.responseText)}r(null,g)}else 401!==d.status&&404!==d.status&&Ms("Got unsuccessful REST response for "+u+" Status: "+d.status),r(d.status);r=null}},d.open("GET",u,!0),d.send()})}}class sq{constructor(){this.rootNode_=Jt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function aD(){return{value:null,children:new Map}}function qy(n,e,t){if(sn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=rn(e);n.children.has(r)||n.children.set(r,aD()),qy(n.children.get(r),e=Jn(e),t)}}function UN(n,e){if(sn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(sr,(r,i)=>{qy(n,new Vn(r),i)}),UN(n,e)}}if(n.children.size>0){const t=rn(e);return e=Jn(e),n.children.has(t)&&UN(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function BN(n,e,t){null!==n.value?t(e,n.value):function oq(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{BN(i,new Vn(e.toString()+"/"+r),t)})}class aq{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Hi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class cq{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new aq(e);const r=1e4+2e4*Math.random();w0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Hi(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),w0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Va=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Va||(Va={})),Va))();function HN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class lD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Va.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(sn(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Vn(e));return new lD(Mn(),t,this.revert)}}return(0,k.hu)(rn(this.path)===e,"operationForChild called for unrelated child."),new lD(Jn(this.path),this.affectedTree,this.revert)}}class x0{constructor(e,t){this.source=e,this.path=t,this.type=Va.LISTEN_COMPLETE}operationForChild(e){return sn(this.path)?new x0(this.source,Mn()):new x0(this.source,Jn(this.path))}}class kg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Va.OVERWRITE}operationForChild(e){return sn(this.path)?new kg(this.source,Mn(),this.snap.getImmediateChild(e)):new kg(this.source,Jn(this.path),this.snap)}}class Wy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Va.MERGE}operationForChild(e){if(sn(this.path)){const t=this.children.subtree(new Vn(e));return t.isEmpty()?null:t.value?new kg(this.source,Mn(),t.value):new Wy(this.source,Mn(),t)}return(0,k.hu)(rn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Wy(this.source,Jn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class If{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(sn(e))return this.isFullyInitialized()&&!this.filtered_;const t=rn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class dq{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function R0(n,e,t,r,i,a){const u=r.filter(d=>d.type===t);u.sort((d,g)=>function pq(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new un(e.childName,e.snapshotNode),i=new un(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,g)),u.forEach(d=>{const g=function fq(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,a);i.forEach(y=>{y.respondsTo(d.type)&&e.push(y.createEvent(g,n.query_))})})}function uD(n,e){return{eventCache:n,serverCache:e}}function N0(n,e,t,r){return uD(new If(e,t,r),n.serverCache)}function SF(n,e,t,r){return uD(n.eventCache,new If(e,t,r))}function cD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Fg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let GN;class or{constructor(e,t=(()=>(GN||(GN=new Eo(JH)),GN))()){this.value=e,this.children=t}static fromObject(e){let t=new or(null);return Hi(e,(r,i)=>{t=t.set(new Vn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Mn(),value:this.value};if(sn(e))return null;{const r=rn(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Jn(e),t);return null!=a?{path:Sr(new Vn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(sn(e))return this;{const t=rn(e),r=this.children.get(t);return null!==r?r.subtree(Jn(e)):new or(null)}}set(e,t){if(sn(e))return new or(t,this.children);{const r=rn(e),a=(this.children.get(r)||new or(null)).set(Jn(e),t),u=this.children.insert(r,a);return new or(this.value,u)}}remove(e){if(sn(e))return this.children.isEmpty()?new or(null):new or(null,this.children);{const t=rn(e),r=this.children.get(t);if(r){const i=r.remove(Jn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new or(null):new or(this.value,a)}return this}}get(e){if(sn(e))return this.value;{const t=rn(e),r=this.children.get(t);return r?r.get(Jn(e)):null}}setTree(e,t){if(sn(e))return t;{const r=rn(e),a=(this.children.get(r)||new or(null)).setTree(Jn(e),t);let u;return u=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new or(this.value,u)}}fold(e){return this.fold_(Mn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Sr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Mn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(sn(e))return null;{const a=rn(e),u=this.children.get(a);return u?u.findOnPath_(Jn(e),Sr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Mn(),t)}foreachOnPath_(e,t,r){if(sn(e))return this;{this.value&&r(t,this.value);const i=rn(e),a=this.children.get(i);return a?a.foreachOnPath_(Jn(e),Sr(t,i),r):new or(null)}}foreach(e){this.foreach_(Mn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Sr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Pl{constructor(e){this.writeTree_=e}static empty(){return new Pl(new or(null))}}function M0(n,e,t){if(sn(e))return new Pl(new or(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const u=no(i,e);return a=a.updateChild(u,t),new Pl(n.writeTree_.set(i,a))}{const i=new or(t),a=n.writeTree_.setTree(e,i);return new Pl(a)}}}function qN(n,e,t){let r=n;return Hi(t,(i,a)=>{r=M0(r,Sr(e,i),a)}),r}function AF(n,e){if(sn(e))return Pl.empty();{const t=n.writeTree_.setTree(e,new or(null));return new Pl(t)}}function WN(n,e){return null!=Lg(n,e)}function Lg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(no(t.path,e)):null}function xF(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(sr,(r,i)=>{e.push(new un(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new un(r,i.value))}),e}function Tf(n,e){if(sn(e))return n;{const t=Lg(n,e);return new Pl(null!=t?new or(t):n.writeTree_.subtree(e))}}function zN(n){return n.writeTree_.isEmpty()}function zy(n,e){return RF(Mn(),n.writeTree_,e)}function RF(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=RF(Sr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Sr(n,".priority"),r)),t}}function dD(n,e){return kF(e,n)}function wq(n,e){if(n.snap)return La(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&La(Sr(n.path,t),e))return!0;return!1}function bq(n){return n.visible}function NF(n,e,t){let r=Pl.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const u=a.path;let d;if(a.snap)La(t,u)?(d=no(t,u),r=M0(r,d,a.snap)):La(u,t)&&(d=no(u,t),r=M0(r,Mn(),a.snap.getChild(d)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(La(t,u))d=no(t,u),r=qN(r,d,a.children);else if(La(u,t))if(d=no(u,t),sn(d))r=qN(r,Mn(),a.children);else{const g=(0,k.DV)(a.children,rn(d));if(g){const y=g.getChild(Jn(d));r=M0(r,Mn(),y)}}}}}return r}function MF(n,e,t,r,i){if(r||i){const a=Tf(n.visibleWrites,e);return!i&&zN(a)?t:i||null!=t||WN(a,Mn())?zy(NF(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(La(y.path,e)||La(e,y.path))},e),t||Jt.EMPTY_NODE):null}{const a=Lg(n.visibleWrites,e);if(null!=a)return a;{const u=Tf(n.visibleWrites,e);return zN(u)?t:null!=t||WN(u,Mn())?zy(u,t||Jt.EMPTY_NODE):null}}}function hD(n,e,t,r){return MF(n.writeTree,n.treePath,e,t,r)}function ZN(n,e){return function Cq(n,e,t){let r=Jt.EMPTY_NODE;const i=Lg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(sr,(a,u)=>{r=r.updateImmediateChild(a,u)}),r;if(t){const a=Tf(n.visibleWrites,e);return t.forEachChild(sr,(u,d)=>{const g=zy(Tf(a,new Vn(u)),d);r=r.updateImmediateChild(u,g)}),xF(a).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return xF(Tf(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function PF(n,e,t,r){return function Iq(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Sr(e,t);if(WN(n.visibleWrites,a))return null;{const u=Tf(n.visibleWrites,a);return zN(u)?i.getChild(t):zy(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function fD(n,e){return function Dq(n,e){return Lg(n.visibleWrites,e)}(n.writeTree,Sr(n.treePath,e))}function KN(n,e,t){return function Tq(n,e,t,r){const i=Sr(e,t),a=Lg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?zy(Tf(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function OF(n,e){return kF(Sr(n.treePath,e),n.writeTree)}function kF(n,e){return{treePath:n,writeTree:e}}class Rq{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,S0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,D0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Gy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,S0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const FF=new class Nq{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class YN{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new If(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return KN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Fg(this.viewCache_),a=function xq(n,e,t,r,i,a){return function Sq(n,e,t,r,i,a,u){let d;const g=Tf(n.visibleWrites,e),y=Lg(g,Mn());if(null!=y)d=y;else{if(null==t)return[];d=zy(g,t)}if(d=d.withIndex(u),d.isEmpty()||d.isLeafNode())return[];{const C=[],D=u.getCompare(),N=a?d.getReverseIteratorFrom(r,u):d.getIteratorFrom(r,u);let L=N.getNext();for(;L&&C.length<i;)0!==D(L,r)&&C.push(L),L=N.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function LF(n,e,t,r,i,a){const u=e.eventCache;if(null!=fD(r,t))return e;{let d,g;if(sn(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Fg(e),D=ZN(r,y instanceof Jt?y:Jt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),D,a)}else{const y=hD(r,Fg(e));d=n.filter.updateFullNode(e.eventCache.getNode(),y,a)}else{const y=rn(t);if(".priority"===y){(0,k.hu)(1===Cf(t),"Can't have a priority with additional path components");const C=u.getNode();g=e.serverCache.getNode();const D=PF(r,t,C,g);d=null!=D?n.filter.updatePriority(C,D):u.getNode()}else{const C=Jn(t);let D;if(u.isCompleteForChild(y)){g=e.serverCache.getNode();const N=PF(r,t,u.getNode(),g);D=null!=N?u.getNode().getImmediateChild(y).updateChild(C,N):u.getNode().getImmediateChild(y)}else D=KN(r,y,e.serverCache);d=null!=D?n.filter.updateChild(u.getNode(),y,D,C,i,a):u.getNode()}}return N0(e,d,u.isFullyInitialized()||sn(t),n.filter.filtersNodes())}}function pD(n,e,t,r,i,a,u,d){const g=e.serverCache;let y;const C=u?n.filter:n.filter.getIndexedFilter();if(sn(t))y=C.updateFullNode(g.getNode(),r,null);else if(C.filtersNodes()&&!g.isFiltered()){const L=g.getNode().updateChild(t,r);y=C.updateFullNode(g.getNode(),L,null)}else{const L=rn(t);if(!g.isCompleteForPath(t)&&Cf(t)>1)return e;const j=Jn(t),le=g.getNode().getImmediateChild(L).updateChild(j,r);y=".priority"===L?C.updatePriority(g.getNode(),le):C.updateChild(g.getNode(),L,le,j,FF,null)}const D=SF(e,y,g.isFullyInitialized()||sn(t),C.filtersNodes());return LF(n,D,t,i,new YN(i,D,a),d)}function QN(n,e,t,r,i,a,u){const d=e.eventCache;let g,y;const C=new YN(i,e,a);if(sn(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,u),g=N0(e,y,!0,n.filter.filtersNodes());else{const D=rn(t);if(".priority"===D)y=n.filter.updatePriority(e.eventCache.getNode(),r),g=N0(e,y,d.isFullyInitialized(),d.isFiltered());else{const N=Jn(t),L=d.getNode().getImmediateChild(D);let j;if(sn(N))j=r;else{const ne=C.getCompleteChild(D);j=null!=ne?".priority"===SN(N)&&ne.getChild(uF(N)).isEmpty()?ne:ne.updateChild(N,r):Jt.EMPTY_NODE}g=L.equals(j)?e:N0(e,n.filter.updateChild(d.getNode(),D,j,N,C,u),d.isFullyInitialized(),n.filter.filtersNodes())}}return g}function VF(n,e){return n.eventCache.isCompleteForChild(e)}function UF(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function JN(n,e,t,r,i,a,u,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,g=e;y=sn(t)?r:new or(null).setTree(t,r);const C=e.serverCache.getNode();return y.children.inorderTraversal((D,N)=>{if(C.hasChild(D)){const j=UF(0,e.serverCache.getNode().getImmediateChild(D),N);g=pD(n,g,new Vn(D),j,i,a,u,d)}}),y.children.inorderTraversal((D,N)=>{const L=!e.serverCache.isCompleteForChild(D)&&void 0===N.value;if(!C.hasChild(D)&&!L){const ne=UF(0,e.serverCache.getNode().getImmediateChild(D),N);g=pD(n,g,new Vn(D),ne,i,a,u,d)}}),g}class Bq{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new FN(r.getIndex()),a=function eq(n){return n.loadsAllData()?new FN(n.getIndex()):n.hasLimit()?new XG(n):new A0(n)}(r);this.processor_=function Mq(n){return{filter:n}}(a);const u=t.serverCache,d=t.eventCache,g=i.updateFullNode(Jt.EMPTY_NODE,u.getNode(),null),y=a.updateFullNode(Jt.EMPTY_NODE,d.getNode(),null),C=new If(g,u.isFullyInitialized(),i.filtersNodes()),D=new If(y,d.isFullyInitialized(),a.filtersNodes());this.viewCache_=uD(D,C),this.eventGenerator_=new dq(this.query_)}get query(){return this.query_}}function Hq(n,e){const t=Fg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!sn(e)&&!t.getImmediateChild(rn(e)).isEmpty())?t.getChild(e):null}function BF(n){return 0===n.eventRegistrations_.length}function jF(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const u=a.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const u=n.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function $F(n,e,t,r){e.type===Va.MERGE&&null!==e.source.queryId&&((0,k.hu)(Fg(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(cD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function Oq(n,e,t,r,i){const a=new Rq;let u,d;if(t.type===Va.OVERWRITE){const y=t;y.source.fromUser?u=QN(n,e,y.path,y.snap,r,i,a):((0,k.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered()&&!sn(y.path),u=pD(n,e,y.path,y.snap,r,i,d,a))}else if(t.type===Va.MERGE){const y=t;y.source.fromUser?u=function Fq(n,e,t,r,i,a,u){let d=e;return r.foreach((g,y)=>{const C=Sr(t,g);VF(e,rn(C))&&(d=QN(n,d,C,y,i,a,u))}),r.foreach((g,y)=>{const C=Sr(t,g);VF(e,rn(C))||(d=QN(n,d,C,y,i,a,u))}),d}(n,e,y.path,y.children,r,i,a):((0,k.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered(),u=JN(n,e,y.path,y.children,r,i,d,a))}else if(t.type===Va.ACK_USER_WRITE){const y=t;u=y.revert?function Uq(n,e,t,r,i,a){let u;if(null!=fD(r,t))return e;{const d=new YN(r,e,i),g=e.eventCache.getNode();let y;if(sn(t)||".priority"===rn(t)){let C;if(e.serverCache.isFullyInitialized())C=hD(r,Fg(e));else{const D=e.serverCache.getNode();(0,k.hu)(D instanceof Jt,"serverChildren would be complete if leaf node"),C=ZN(r,D)}C=C,y=n.filter.updateFullNode(g,C,a)}else{const C=rn(t);let D=KN(r,C,e.serverCache);null==D&&e.serverCache.isCompleteForChild(C)&&(D=g.getImmediateChild(C)),y=null!=D?n.filter.updateChild(g,C,D,Jn(t),d,a):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(g,C,Jt.EMPTY_NODE,Jn(t),d,a):g,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=hD(r,Fg(e)),u.isLeafNode()&&(y=n.filter.updateFullNode(y,u,a)))}return u=e.serverCache.isFullyInitialized()||null!=fD(r,Mn()),N0(e,y,u,n.filter.filtersNodes())}}(n,e,y.path,r,i,a):function Lq(n,e,t,r,i,a,u){if(null!=fD(i,t))return e;const d=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(sn(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return pD(n,e,t,g.getNode().getChild(t),i,a,d,u);if(sn(t)){let y=new or(null);return g.getNode().forEachChild(Ku,(C,D)=>{y=y.set(new Vn(C),D)}),JN(n,e,t,y,i,a,d,u)}return e}{let y=new or(null);return r.foreach((C,D)=>{const N=Sr(t,C);g.isCompleteForPath(N)&&(y=y.set(C,g.getNode().getChild(N)))}),JN(n,e,t,y,i,a,d,u)}}(n,e,y.path,y.affectedTree,r,i,a)}else{if(t.type!==Va.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);u=function Vq(n,e,t,r,i){const a=e.serverCache;return LF(n,SF(e,a.getNode(),a.isFullyInitialized()||sn(t),a.isFiltered()),t,r,FF,i)}(n,e,t.path,r,a)}const g=a.getChanges();return function kq(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=cD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(CF(cD(e)))}}(e,u,g),{viewCache:u,changes:g}}(n.processor_,i,e,t,r);return function Pq(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,HF(n,a.changes,a.viewCache.eventCache.getNode(),null)}function HF(n,e,t,r){return function hq(n,e,t,r){const i=[],a=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&a.push(function JG(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),R0(n,i,"child_removed",e,r,t),R0(n,i,"child_added",e,r,t),R0(n,i,"child_moved",a,r,t),R0(n,i,"child_changed",e,r,t),R0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let gD,_D;class GF{constructor(){this.views=new Map}}function XN(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),$F(a,e,t,r)}{let a=[];for(const u of n.views.values())a=a.concat($F(u,e,t,r));return a}}function eM(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let d=hD(t,i?r:null),g=!1;d?g=!0:r instanceof Jt?(d=ZN(t,r),g=!1):(d=Jt.EMPTY_NODE,g=!1);const y=uD(new If(d,g,!1),new If(r,i,!1));return new Bq(e,y)}return u}function qF(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Df(n,e){let t=null;for(const r of n.views.values())t=t||Hq(r,e);return t}function WF(n,e){return e._queryParams.loadsAllData()?mD(n):n.views.get(e._queryIdentifier)}function zF(n,e){return null!=WF(n,e)}function Sf(n){return null!=mD(n)}function mD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Xq=1;class ZF{constructor(e){this.listenProvider_=e,this.syncPointTree_=new or(null),this.pendingWriteTree_=function Aq(){return{visibleWrites:Pl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function tM(n,e,t,r,i){return function mq(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=M0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Zy(n,new kg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Af(n,e,t=!1){const r=function yq(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function vq(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const d=n.allWrites[u];d.visible&&(u>=t&&wq(d,r.path)?i=!1:La(r.path,d.path)&&(a=!0)),u--}return!!i&&(a?(function Eq(n){n.visibleWrites=NF(n.allWrites,bq,Mn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=AF(n.visibleWrites,r.path):Hi(r.children,g=>{n.visibleWrites=AF(n.visibleWrites,Sr(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let a=new or(null);return null!=r.snap?a=a.set(Mn(),!0):Hi(r.children,u=>{a=a.set(new Vn(u),!0)}),Zy(n,new lD(r.path,a,t))}return[]}function P0(n,e,t){return Zy(n,new kg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function yD(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let u=[];if(a&&("default"===e._queryIdentifier||zF(a,e))){const d=function Yq(n,e,t,r){const i=e._queryIdentifier,a=[];let u=[];const d=Sf(n);if("default"===i)for(const[g,y]of n.views.entries())u=u.concat(jF(y,t,r)),BF(y)&&(n.views.delete(g),y.query._queryParams.loadsAllData()||a.push(y.query));else{const g=n.views.get(i);g&&(u=u.concat(jF(g,t,r)),BF(g)&&(n.views.delete(i),g.query._queryParams.loadsAllData()||a.push(g.query)))}return d&&!Sf(n)&&a.push(new(function zq(){return(0,k.hu)(gD,"Reference.ts has not been loaded"),gD}())(e._repo,e._path)),{removed:a,events:u}}(a,e,t,r);(function Zq(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const g=d.removed;u=d.events;const y=-1!==g.findIndex(D=>D._queryParams.loadsAllData()),C=n.syncPointTree_.findOnPath(i,(D,N)=>Sf(N));if(y&&!C){const D=n.syncPointTree_.subtree(i);if(!D.isEmpty()){const N=function a3(n){return n.fold((e,t,r)=>{if(t&&Sf(t))return[mD(t)];{let i=[];return t&&(i=qF(t)),Hi(r,(a,u)=>{i=i.concat(u)}),i}})}(D);for(let L=0;L<N.length;++L){const j=N[L],ne=j.query,le=eL(n,j);n.listenProvider_.startListening(k0(ne),O0(n,ne),le.hashFn,le.onComplete)}}}if(!C&&g.length>0&&!r)if(y){const D=null;n.listenProvider_.stopListening(k0(e),D)}else g.forEach(D=>{const N=n.queryToTagMap.get(wD(D));n.listenProvider_.stopListening(k0(D),N)});!function l3(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=wD(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,g)}return u}function KF(n,e,t,r){const i=nM(n,r);if(null!=i){const a=rM(i),u=a.path,d=a.queryId,g=no(u,e);return iM(n,u,new kg(HN(d),g,t))}return[]}function YF(n,e){const t=n._path;let r=null,i=!1;e.syncPointTree_.foreachOnPath(t,(y,C)=>{const D=no(y,t);r=r||Df(C,D),i=i||Sf(C)});let u,a=e.syncPointTree_.get(t);a?(i=i||Sf(a),r=r||Df(a,Mn())):(a=new GF,e.syncPointTree_=e.syncPointTree_.set(t,a)),null!=r?u=!0:(u=!1,r=Jt.EMPTY_NODE,e.syncPointTree_.subtree(t).foreachChild((C,D)=>{const N=Df(D,Mn());N&&(r=r.updateImmediateChild(C,N))}));const d=zF(a,n);if(!d&&!n._queryParams.loadsAllData()){const y=wD(n);(0,k.hu)(!e.queryToTagMap.has(y),"View does not exist, but we have a tag");const C=function u3(){return Xq++}();e.queryToTagMap.set(y,C),e.tagToQueryMap.set(C,y)}return{syncPoint:a,writesCache:dD(e.pendingWriteTree_,t),serverCache:r,serverCacheComplete:u,foundAncestorDefaultView:i,viewAlreadyExists:d}}function QF(n,e,t){const{syncPoint:r,serverCache:i,writesCache:a,serverCacheComplete:u,viewAlreadyExists:d,foundAncestorDefaultView:g}=YF(e,n);let y=function Kq(n,e,t,r,i,a){const u=eM(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function Gq(n,e){n.eventRegistrations_.push(e)}(u,t),function qq(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(sr,(a,u)=>{r.push(Gy(a,u))}),t.isFullyInitialized()&&r.push(CF(t.getNode())),HF(n,r,t.getNode(),e)}(u,t)}(r,e,t,a,i,u);if(!d&&!g){const C=WF(r,e);y=y.concat(function c3(n,e,t){const r=e._path,i=O0(n,e),a=eL(n,t),u=n.listenProvider_.startListening(k0(e),i,a.hashFn,a.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!Sf(d.value),"If we're adding a query, it shouldn't be shadowed");else{const g=d.fold((y,C,D)=>{if(!sn(y)&&C&&Sf(C))return[mD(C).query];{let N=[];return C&&(N=N.concat(qF(C).map(L=>L.query))),Hi(D,(L,j)=>{N=N.concat(j)}),N}});for(let y=0;y<g.length;++y){const C=g[y];n.listenProvider_.stopListening(k0(C),O0(n,C))}}return u}(n,e,C))}return y}function vD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(u,d)=>{const y=Df(d,no(u,e));if(y)return y});return MF(i,e,a,t,!0)}function Zy(n,e){return JF(e,n.syncPointTree_,null,dD(n.pendingWriteTree_,Mn()))}function JF(n,e,t,r){if(sn(n.path))return XF(n,e,t,r);{const i=e.get(Mn());null==t&&null!=i&&(t=Df(i,Mn()));let a=[];const u=rn(n.path),d=n.operationForChild(u),g=e.children.get(u);if(g&&d){const y=t?t.getImmediateChild(u):null,C=OF(r,u);a=a.concat(JF(d,g,y,C))}return i&&(a=a.concat(XN(i,n,r,t))),a}}function XF(n,e,t,r){const i=e.get(Mn());null==t&&null!=i&&(t=Df(i,Mn()));let a=[];return e.children.inorderTraversal((u,d)=>{const g=t?t.getImmediateChild(u):null,y=OF(r,u),C=n.operationForChild(u);C&&(a=a.concat(XF(C,d,g,y)))}),i&&(a=a.concat(XN(i,n,r,t))),a}function eL(n,e){const t=e.query,r=O0(n,t);return{hashFn:()=>(function jq(n){return n.viewCache_.serverCache.getNode()}(e)||Jt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function r3(n,e,t){const r=nM(n,t);if(r){const i=rM(r),a=i.path,u=i.queryId,d=no(a,e);return iM(n,a,new x0(HN(u),d))}return[]}(n,t._path,r):function n3(n,e){return Zy(n,new x0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function tG(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return yD(n,t,null,a)}}}}function O0(n,e){const t=wD(e);return n.queryToTagMap.get(t)}function wD(n){return n._path.toString()+"$"+n._queryIdentifier}function nM(n,e){return n.tagToQueryMap.get(e)}function rM(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Vn(n.substr(0,e))}}function iM(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),XN(r,t,dD(n.pendingWriteTree_,e),null)}function k0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Jq(){return(0,k.hu)(_D,"Reference.ts has not been loaded"),_D}())(n._repo,n._path):n}class sM{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new sM(t)}node(){return this.node_}}class oM{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Sr(this.path_,e);return new oM(this.syncTree_,t)}node(){return vD(this.syncTree_,this.path_)}}const tL=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?h3(n[".sv"],e,t):"object"==typeof n[".sv"]?f3(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},h3=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},f3=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},nL=function(n,e,t,r){return lM(e,new oM(t,n),r)},aM=function(n,e,t){return lM(n,new sM(e),t)};function lM(n,e,t){const r=n.getPriority().val(),i=tL(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const u=n,d=tL(u.getValue(),e,t);return d!==u.getValue()||i!==u.getPriority().val()?new jy(d,Fr(i)):n}{const u=n;return a=u,i!==u.getPriority().val()&&(a=a.updatePriority(new jy(i))),u.forEachChild(sr,(d,g)=>{const y=lM(g,e.getImmediateChild(d),t);y!==g&&(a=a.updateImmediateChild(d,y))}),a}}class uM{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function ED(n,e){let t=e instanceof Vn?e:new Vn(e),r=n,i=rn(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new uM(i,r,a),t=Jn(t),i=rn(t)}return r}function Vg(n){return n.node.value}function cM(n,e){n.node.value=e,dM(n)}function rL(n){return n.node.childCount>0}function bD(n,e){Hi(n.node.children,(t,r)=>{e(new uM(t,n,r))})}function iL(n,e,t,r){t&&!r&&e(n),bD(n,i=>{iL(i,e,!0,r)}),t&&r&&e(n)}function F0(n){return new Vn(null===n.parent?n.name:F0(n.parent)+"/"+n.name)}function dM(n){null!==n.parent&&function m3(n,e,t){const r=function p3(n){return void 0===Vg(n)&&!rL(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,dM(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,dM(n))}(n.parent,n.name,n)}const _3=/[\[\].#$\/\u0000-\u001F\u007F]/,y3=/[\[\].#$\u0000-\u001F\u007F]/,hM=10485760,CD=function(n){return"string"==typeof n&&0!==n.length&&!_3.test(n)},sL=function(n){return"string"==typeof n&&0!==n.length&&!y3.test(n)},L0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!KT(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},Yu=function(n,e,t,r){r&&void 0===e||V0((0,k.gK)(n,"value"),e,t)},V0=function(n,e,t){const r=t instanceof Vn?new MG(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Pg(r));if("function"==typeof e)throw new Error(n+"contains a function "+Pg(r)+" with contents = "+e.toString());if(KT(e))throw new Error(n+"contains "+e.toString()+" "+Pg(r));if("string"==typeof e&&e.length>hM/3&&(0,k.ug)(e)>hM)throw new Error(n+"contains a string greater than "+hM+" utf8 bytes "+Pg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Hi(e,(u,d)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(a=!0,!CD(u)))throw new Error(n+" contains an invalid key ("+u+") "+Pg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function PG(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),cF(n)})(r,u),V0(n,d,r),function OG(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Pg(r)+" in addition to actual children.")}},oL=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Hi(e,(u,d)=>{const g=new Vn(u);if(V0(i,d,Sr(t,g)),".priority"===SN(g)&&!L0(d))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(g)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=b0(r);for(let u=0;u<a.length;u++)if((".priority"!==a[u]||u!==a.length-1)&&!CD(a[u]))throw new Error(n+"contains an invalid key ("+a[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(NG);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&La(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},fM=function(n,e,t){if(!t||void 0!==e){if(KT(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!L0(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},U0=function(n,e,t,r){if(!(r&&void 0===t||CD(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},B0=function(n,e,t,r){if(!(r&&void 0===t||sL(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ua=function(n,e){if(".info"===rn(e))throw new Error(n+" failed = Can't modify data under /.info/")},aL=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!CD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),sL(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class b3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ID(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!AN(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function lL(n,e,t){ID(n,t),uL(n,r=>AN(r,e))}function Ba(n,e,t){ID(n,t),uL(n,r=>La(r,e)||La(e,r))}function uL(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(C3(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function C3(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Ng&&$i("event: "+t.toString()),Uy(r)}}}const cL="repo_interrupt";class T3{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new b3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=aD(),this.transactionQueueTree_=new uM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dL(n){const t=n.infoData_.getNode(new Vn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function j0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:dL(n)})}function hL(n,e,t,r,i){n.dataUpdateCount++;const a=new Vn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const g=(0,k.UI)(t,y=>Fr(y));u=function s3(n,e,t,r){const i=nM(n,r);if(i){const a=rM(i),u=a.path,d=a.queryId,g=no(u,e),y=or.fromObject(t);return iM(n,u,new Wy(HN(d),g,y))}return[]}(n.serverSyncTree_,a,g,i)}else{const g=Fr(t);u=KF(n.serverSyncTree_,a,g,i)}else if(r){const g=(0,k.UI)(t,y=>Fr(y));u=function t3(n,e,t){const r=or.fromObject(t);return Zy(n,new Wy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,g)}else{const g=Fr(t);u=P0(n.serverSyncTree_,a,g)}let d=a;u.length>0&&(d=Ky(n,a)),Ba(n.eventQueue_,d,u)}function fL(n,e){pM(n,"connected",e),!1===e&&function R3(n){Ug(n,"onDisconnectEvents");const e=j0(n),t=aD();BN(n.onDisconnect_,Mn(),(i,a)=>{const u=nL(i,a,n.serverSyncTree_,e);qy(t,i,u)});let r=[];BN(t,Mn(),(i,a)=>{r=r.concat(P0(n.serverSyncTree_,i,a));const u=yM(n,i);Ky(n,u)}),n.onDisconnect_=aD(),Ba(n.eventQueue_,Mn(),r)}(n)}function pM(n,e,t){const r=new Vn("/.info/"+e),i=Fr(t);n.infoData_.updateSnapshot(r,i);const a=P0(n.infoSyncTree_,r,i);Ba(n.eventQueue_,r,a)}function TD(n){return n.nextWriteId_++}function A3(n,e){const t=function o3(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,C)=>{const D=no(y,t);r=r||Df(C,D)});let i=n.syncPointTree_.get(t);i?r=r||Df(i,Mn()):(i=new GF,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,u=a?new If(r,!0,!1):null;return function $q(n){return cD(n.viewCache_)}(eM(i,e,dD(n.pendingWriteTree_,e._path),a?u.getNode():Jt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Fr(r).withIndex(e._queryParams.getIndex());if(e._queryParams.loadsAllData())P0(n.serverSyncTree_,e._path,i);else{const u=function i3(n,e){const{syncPoint:t,serverCache:r,writesCache:i,serverCacheComplete:a}=YF(e,n),u=eM(t,e,i,r,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,u),e._queryParams.loadsAllData()?null:O0(n,e)}(n.serverSyncTree_,e);KF(n.serverSyncTree_,e._path,i,u)}return yD(n.serverSyncTree_,e,null).length>0&&Ug(n,"unexpected cancel events in repoGetValue"),i},r=>(Ug(n,"get for query "+(0,k.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}function gM(n,e,t,r,i){Ug(n,"set",{path:e.toString(),value:t,priority:r});const a=j0(n),u=Fr(t,r),d=vD(n.serverSyncTree_,e),g=aM(u,d,a),y=TD(n),C=tM(n.serverSyncTree_,e,g,y,!0);ID(n.eventQueue_,C),n.server_.put(e.toString(),u.val(!0),(N,L)=>{const j="ok"===N;j||Ms("set at "+e+" failed: "+N);const ne=Af(n.serverSyncTree_,y,!j);Ba(n.eventQueue_,e,ne),xf(0,i,N,L)});const D=yM(n,e);Ky(n,D),Ba(n.eventQueue_,D,[])}function N3(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&UN(n.onDisconnect_,e),xf(0,t,r,i)})}function pL(n,e,t,r){const i=Fr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,u)=>{"ok"===a&&qy(n.onDisconnect_,e,i),xf(0,r,a,u)})}function mM(n,e,t){let r;r=".info"===rn(e._path)?yD(n.infoSyncTree_,e,t):yD(n.serverSyncTree_,e,t),lL(n.eventQueue_,e._path,r)}function gL(n){n.persistentConnection_&&n.persistentConnection_.interrupt(cL)}function Ug(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),$i(t,...e)}function xf(n,e,t,r){e&&Uy(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const u=new Error(a);u.code=i,e(u)}})}function _M(n,e,t){return vD(n.serverSyncTree_,e,t)||Jt.EMPTY_NODE}function DD(n,e=n.transactionQueueTree_){if(e||SD(n,e),Vg(e)){const t=_L(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function L3(n,e,t){const r=t.map(y=>y.currentWriteId),i=_M(n,e,r);let a=i;const u=i.hash();for(let y=0;y<t.length;y++){const C=t[y];(0,k.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const D=no(e,C.path);a=a.updateChild(D,C.currentOutputSnapshotRaw)}const d=a.val(!0),g=e;n.server_.put(g.toString(),d,y=>{Ug(n,"transaction put response",{path:g.toString(),status:y});let C=[];if("ok"===y){const D=[];for(let N=0;N<t.length;N++)t[N].status=2,C=C.concat(Af(n.serverSyncTree_,t[N].currentWriteId)),t[N].onComplete&&D.push(()=>t[N].onComplete(null,!0,t[N].currentOutputSnapshotResolved)),t[N].unwatcher();SD(n,ED(n.transactionQueueTree_,e)),DD(n,n.transactionQueueTree_),Ba(n.eventQueue_,e,C);for(let N=0;N<D.length;N++)Uy(D[N])}else{if("datastale"===y)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{Ms("transaction at "+g.toString()+" failed: "+y);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=y}Ky(n,e)}},u)}(n,F0(e),t)}else rL(e)&&bD(e,t=>{DD(n,t)})}function Ky(n,e){const t=mL(n,e),r=F0(t);return function V3(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const g=e[d],y=no(t,g.path);let D,C=!1;if((0,k.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)C=!0,D=g.abortReason,i=i.concat(Af(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)C=!0,D="maxretry",i=i.concat(Af(n.serverSyncTree_,g.currentWriteId,!0));else{const N=_M(n,g.path,u);g.currentInputSnapshot=N;const L=e[d].update(N.val());if(void 0!==L){V0("transaction failed: Data returned ",L,g.path);let j=Fr(L);"object"==typeof L&&null!=L&&(0,k.r3)(L,".priority")||(j=j.updatePriority(N.getPriority()));const le=g.currentWriteId,Ge=j0(n),Je=aM(j,N,Ge);g.currentOutputSnapshotRaw=j,g.currentOutputSnapshotResolved=Je,g.currentWriteId=TD(n),u.splice(u.indexOf(le),1),i=i.concat(tM(n.serverSyncTree_,g.path,Je,g.currentWriteId,g.applyLocally)),i=i.concat(Af(n.serverSyncTree_,le,!0))}else C=!0,D="nodata",i=i.concat(Af(n.serverSyncTree_,g.currentWriteId,!0))}Ba(n.eventQueue_,t,i),i=[],C&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===D?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(D),!1,null)))}SD(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)Uy(r[d]);DD(n,n.transactionQueueTree_)}(n,_L(n,t),r),r}function mL(n,e){let t,r=n.transactionQueueTree_;for(t=rn(e);null!==t&&void 0===Vg(r);)r=ED(r,t),t=rn(e=Jn(e));return r}function _L(n,e){const t=[];return yL(n,e,t),t.sort((r,i)=>r.order-i.order),t}function yL(n,e,t){const r=Vg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);bD(e,i=>{yL(n,i,t)})}function SD(n,e){const t=Vg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,cM(e,t.length>0?t:void 0)}bD(e,r=>{SD(n,r)})}function yM(n,e){const t=F0(mL(n,e)),r=ED(n.transactionQueueTree_,e);return function g3(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{vM(n,i)}),vM(n,r),iL(r,i=>{vM(n,i)}),t}function vM(n,e){const t=Vg(e);if(t){const r=[];let i=[],a=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,k.hu)(a===u-1,"All SENT items should be at beginning of queue."),a=u,t[u].status=3,t[u].abortReason="set"):((0,k.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(Af(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===a?cM(e,void 0):t.length=a+1,Ba(n.eventQueue_,F0(e),i);for(let u=0;u<r.length;u++)Uy(r[u])}}const wM=function(n,e){const t=j3(n),r=t.namespace;return"firebase.com"===t.domain&&zu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&zu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ms("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new EN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Vn(t.pathString)}},j3=function(n){let e="",t="",r="",i="",a="",u=!0,d="https",g=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let C=n.indexOf("/");-1===C&&(C=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(C,D)),C<D&&(i=function U3(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(C,D)));const N=function B3(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ms(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));y=e.indexOf(":"),y>=0?(u="https"===d||"wss"===d,g=parseInt(e.substring(y+1),10)):y=e.length;const L=e.slice(0,y);if("localhost"===L.toLowerCase())t="localhost";else if(L.split(".").length<=2)t=L;else{const j=e.indexOf(".");r=e.substring(0,j).toLowerCase(),t=e.substring(j+1),a=r}"ns"in N&&(a=N.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:u,scheme:d,pathString:i,namespace:a}};class vL{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class wL{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class EL{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class bL{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return N3(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ua("OnDisconnect.remove",this._path);const e=new k.BH;return pL(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ua("OnDisconnect.set",this._path),Yu("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return pL(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ua("OnDisconnect.setWithPriority",this._path),Yu("OnDisconnect.setWithPriority",e,this._path,!1),fM("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function M3(n,e,t,r,i){const a=Fr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(u,d)=>{"ok"===u&&qy(n.onDisconnect_,e,a),xf(0,i,u,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ua("OnDisconnect.update",this._path),oL("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function P3(n,e,t,r){if((0,k.xb)(t))return $i("onDisconnect().update() called with empty data.  Don't do anything."),void xf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Hi(t,(u,d)=>{const g=Fr(d);qy(n.onDisconnect_,Sr(e,u),g)}),xf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class bo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return sn(this._path)?null:SN(this._path)}get ref(){return new ja(this._repo,this._path)}get _queryIdentifier(){const e=TF(this._queryParams),t=yN(e);return"{}"===t?"default":t}get _queryObject(){return TF(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof bo))return!1;const t=this._repo===e._repo,r=AN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function RG(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function AD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Rf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ku){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Id)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Zu)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===sr){if(null!=e&&!L0(e)||null!=t&&!L0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof PN||n.getIndex()===ON,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function xD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ja extends bo{constructor(e,t){super(e,t,new iD,!1)}get parent(){const e=uF(this._path);return null===e?null:new ja(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Bg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Vn(e),r=jg(this.ref,e);return new Bg(this._node.getChild(t),r,sr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Bg(i,jg(this.ref,r),sr)))}hasChild(e){const t=new Vn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function CL(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?jg(n._root,e):n._root}function IL(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=wM(e,n._repo.repoInfo_.nodeAdmin);aL("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&zu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),CL(n,t.path.toString())}function jg(n,e){return null===rn((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),B0("child","path",t,!1)):B0("child","path",e,!1),new ja(n._repo,Sr(n._path,e));var t}function EM(n,e){n=(0,k.m9)(n),Ua("set",n._path),Yu("set",e,n._path,!1);const t=new k.BH;return gM(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function W3(n,e){oL("update",e,n._path,!1);const t=new k.BH;return function x3(n,e,t,r){Ug(n,"update",{path:e.toString(),value:t});let i=!0;const a=j0(n),u={};if(Hi(t,(d,g)=>{i=!1,u[d]=nL(Sr(e,d),Fr(g),n.serverSyncTree_,a)}),i)$i("update() called with empty data.  Don't do anything."),xf(0,r,"ok",void 0);else{const d=TD(n),g=function e3(n,e,t,r){!function _q(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=qN(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=or.fromObject(t);return Zy(n,new Wy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,d);ID(n.eventQueue_,g),n.server_.merge(e.toString(),t,(y,C)=>{const D="ok"===y;D||Ms("update at "+e+" failed: "+y);const N=Af(n.serverSyncTree_,d,!D),L=N.length>0?Ky(n,e):e;Ba(n.eventQueue_,L,N),xf(0,r,y,C)}),Hi(t,y=>{const C=yM(n,Sr(e,y));Ky(n,C)}),Ba(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}class RD{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new vL("value",this,new Bg(e.snapshotNode,new ja(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new wL(this,e,t):null}matches(e){return e instanceof RD&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ND{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new wL(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=jg(new ja(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new vL(e.type,this,new Bg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof ND&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function $0(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const g=t,y=(C,D)=>{mM(n._repo,n,d),g(C,D)};y.userCallback=t.userCallback,y.context=t.context,t=y}const u=new EL(t,a||void 0),d="value"===e?new RD(u):new ND(e,u);return function O3(n,e,t){let r;r=".info"===rn(e._path)?QF(n.infoSyncTree_,e,t):QF(n.serverSyncTree_,e,t),lL(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>mM(n._repo,n,d)}function bM(n,e,t,r){return $0(n,"value",e,t,r)}function TL(n,e,t,r){return $0(n,"child_added",e,t,r)}function DL(n,e,t,r){return $0(n,"child_changed",e,t,r)}function SL(n,e,t,r){return $0(n,"child_moved",e,t,r)}function AL(n,e,t,r){return $0(n,"child_removed",e,t,r)}function xL(n,e,t){let r=null;const i=t?new EL(t):null;"value"===e?r=new RD(i):e&&(r=new ND(e,i)),mM(n._repo,n,r)}class Ol{}class RL extends Ol{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Yu("endAt",this._value,e._path,!0);const t=VN(e._queryParams,this._value,this._key);if(xD(t),Rf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new bo(e._repo,e._path,t,e._orderByCalled)}}class K3 extends Ol{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Yu("endBefore",this._value,e._path,!1);const t=function iq(n,e,t){let r,i;return n.index_===Ku?("string"==typeof e&&(e=bF(e)),i=VN(n,e,t)):(r=null==t?Id:bF(t),i=VN(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(xD(t),Rf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new bo(e._repo,e._path,t,e._orderByCalled)}}class NL extends Ol{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Yu("startAt",this._value,e._path,!0);const t=LN(e._queryParams,this._value,this._key);if(xD(t),Rf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new bo(e._repo,e._path,t,e._orderByCalled)}}class J3 extends Ol{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Yu("startAfter",this._value,e._path,!1);const t=function rq(n,e,t){let r;if(n.index_===Ku)"string"==typeof e&&(e=EF(e)),r=LN(n,e,t);else{let i;i=null==t?Zu:EF(t),r=LN(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(xD(t),Rf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new bo(e._repo,e._path,t,e._orderByCalled)}}class eW extends Ol{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new bo(e._repo,e._path,function tq(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class nW extends Ol{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new bo(e._repo,e._path,function nq(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class iW extends Ol{constructor(e){super(),this._path=e}_apply(e){AD(e,"orderByChild");const t=new Vn(this._path);if(sn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new PN(t),i=sD(e._queryParams,r);return Rf(i),new bo(e._repo,e._path,i,!0)}}class oW extends Ol{_apply(e){AD(e,"orderByKey");const t=sD(e._queryParams,Ku);return Rf(t),new bo(e._repo,e._path,t,!0)}}class lW extends Ol{_apply(e){AD(e,"orderByPriority");const t=sD(e._queryParams,sr);return Rf(t),new bo(e._repo,e._path,t,!0)}}class cW extends Ol{_apply(e){AD(e,"orderByValue");const t=sD(e._queryParams,ON);return Rf(t),new bo(e._repo,e._path,t,!0)}}class hW extends Ol{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Yu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new RL(this._value,this._key)._apply(new NL(this._value,this._key)._apply(e))}}function kl(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function Wq(n){(0,k.hu)(!gD,"__referenceConstructor has already been defined"),gD=n})(ja),function Qq(n){(0,k.hu)(!_D,"__referenceConstructor has already been defined"),_D=n}(ja);const CM={};function PL(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||zu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),$i("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,y,u=wM(a,i),d=u.repoInfo;"undefined"!=typeof process&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(g=!0,a=`http://${y}?ns=${d.namespace}`,u=wM(a,i),d=u.repoInfo):g=!u.repoInfo.secure;const C=i&&g?new E0(E0.OWNER):new sG(n.name,n.options,e);aL("Invalid Firebase Database URL",u),sn(u.path)||zu("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function _W(n,e,t,r){let i=CM[e.name];i||(i={},CM[e.name]=i);let a=i[n.toURLString()];return a&&zu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new T3(n,false,t,r),i[n.toURLString()]=a,a}(d,n,C,new iG(n.name,t));return new vW(D,n)}class vW{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function D3(n,e,t){if(n.stats_=IN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new oD(n.repoInfo_,(r,i,a,u)=>{hL(n,r,i,a,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>fL(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Og(n.repoInfo_,e,(r,i,a,u)=>{hL(n,r,i,a,u)},r=>{fL(n,r)},r=>{!function S3(n,e){Hi(e,(t,r)=>{pM(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function lG(n,e){const t=n.toString();return CN[t]||(CN[t]=e()),CN[t]}(n.repoInfo_,()=>new cq(n.stats_,n.server_)),n.infoData_=new sq,n.infoSyncTree_=new ZF({startListening:(r,i,a,u)=>{let d=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(d=P0(n.infoSyncTree_,r._path,g),setTimeout(()=>{u("ok")},0)),d},stopListening:()=>{}}),pM(n,"connected",!1),n.serverSyncTree_=new ZF({startListening:(r,i,a,u)=>(n.server_.listen(r,a,i,(d,g)=>{const y=u(d,g);Ba(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ja(this._repo,Mn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function mW(n,e){const t=CM[e];(!t||t[n.key]!==n)&&zu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),gL(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&zu("Cannot call "+e+" on a deleted database.")}}function OL(){Q1.IS_TRANSPORT_INITIALIZED&&Ms("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function wW(){OL(),bf.forceDisallow()}function EW(){OL(),By.forceDisallow(),bf.forceAllow()}function TW(n,e){N1(n,e)}const SW={".sv":"timestamp"};class RW{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Og.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Og.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function DW(n){D1(as.SDK_VERSION),(0,as._registerComponent)(new _o.wA("database",(e,{instanceIdentifier:t})=>PL(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,as.registerVersion)(I1,"0.13.2",n),(0,as.registerVersion)(I1,"0.13.2","esm2017")}();const OW=new Da.Yd("@firebase/database-compat"),kL=function(n){OW.warn("FIREBASE WARNING: "+n)};class LW{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,kL("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class VW{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Nf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),B0("DataSnapshot.child","path",e,!1),new Nf(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),B0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Nf(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new zo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class fs{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const u=fs.getCancelAndContextArgs_("Query.on",r,i),d=(y,C)=>{t.call(u.context,new Nf(this.database,y),C)};d.userCallback=t,d.context=u.context;const g=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return bM(this._delegate,d,g),t;case"child_added":return TL(this._delegate,d,g),t;case"child_removed":return AL(this._delegate,d,g),t;case"child_changed":return DL(this._delegate,d,g),t;case"child_moved":return SL(this._delegate,d,g),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,xL(this._delegate,e,i)}else xL(this._delegate,e)}get(){return function z3(n){return A3((n=(0,k.m9)(n))._repo,n).then(e=>new Bg(e,new ja(n._repo,n._path),n._queryParams.getIndex()))}(this._delegate).then(e=>new Nf(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=fs.getCancelAndContextArgs_("Query.once",r,i),u=new k.BH,d=(y,C)=>{const D=new Nf(this.database,y);t&&t.call(a.context,D,C),u.resolve(D)};d.userCallback=t,d.context=a.context;const g=y=>{a.cancel&&a.cancel.call(a.context,y),u.reject(y)};switch(e){case"value":bM(this._delegate,d,g,{onlyOnce:!0});break;case"child_added":TL(this._delegate,d,g,{onlyOnce:!0});break;case"child_removed":AL(this._delegate,d,g,{onlyOnce:!0});break;case"child_changed":DL(this._delegate,d,g,{onlyOnce:!0});break;case"child_moved":SL(this._delegate,d,g,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new fs(this.database,kl(this._delegate,function tW(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new eW(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new fs(this.database,kl(this._delegate,function rW(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new nW(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new fs(this.database,kl(this._delegate,function sW(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return B0("orderByChild","path",n,!1),new iW(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new fs(this.database,kl(this._delegate,function aW(){return new oW}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new fs(this.database,kl(this._delegate,function uW(){return new lW}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new fs(this.database,kl(this._delegate,function dW(){return new cW}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new fs(this.database,kl(this._delegate,function Q3(n=null,e){return U0("startAt","key",e,!0),new NL(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new fs(this.database,kl(this._delegate,function X3(n,e){return U0("startAfter","key",e,!0),new J3(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new fs(this.database,kl(this._delegate,function Z3(n,e){return U0("endAt","key",e,!0),new RL(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new fs(this.database,kl(this._delegate,function Y3(n,e){return U0("endBefore","key",e,!0),new K3(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new fs(this.database,kl(this._delegate,function fW(n,e){return U0("equalTo","key",e,!0),new hW(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof fs))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new zo(this.database,new ja(this._delegate._repo,this._delegate._path))}}class zo extends fs{constructor(e,t){super(e,new bo(t._repo,t._path,new iD,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new zo(this.database,jg(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new zo(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new zo(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=EM(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,kL("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ua("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=W3(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function q3(n,e,t){if(Ua("setWithPriority",n._path),Yu("setWithPriority",e,n._path,!1),fM("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return gM(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function H3(n){return Ua("remove",n._path),EM(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function NW(n,e,t){var r;if(n=(0,k.m9)(n),Ua("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new k.BH,d=bM(n,()=>{});return function F3(n,e,t,r,i,a){Ug(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:A1(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=_M(n,e,void 0);u.currentInputSnapshot=d;const g=u.update(d.val());if(void 0===g)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{V0("transaction failed: Data returned ",g,u.path),u.status=0;const y=ED(n.transactionQueueTree_,e),C=Vg(y)||[];let D;C.push(u),cM(y,C),"object"==typeof g&&null!==g&&(0,k.r3)(g,".priority")?(D=(0,k.DV)(g,".priority"),(0,k.hu)(L0(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(vD(n.serverSyncTree_,e)||Jt.EMPTY_NODE).getPriority().val();const N=j0(n),L=Fr(g,D),j=aM(L,d,N);u.currentOutputSnapshotRaw=L,u.currentOutputSnapshotResolved=j,u.currentWriteId=TD(n);const ne=tM(n.serverSyncTree_,e,j,u.currentWriteId,u.applyLocally);Ba(n.eventQueue_,e,ne),DD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(g,y,C)=>{let D=null;g?a.reject(g):(D=new Bg(C,new ja(n._repo,n._path),sr),a.resolve(new RW(y,D)))},d,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new VW(a.committed,new Nf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function G3(n,e){n=(0,k.m9)(n),Ua("setPriority",n._path),fM("setPriority",e,!1);const t=new k.BH;return gM(n._repo,Sr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function $3(n,e){n=(0,k.m9)(n),Ua("push",n._path),Yu("push",e,n._path,!0);const t=dL(n._repo),r=QG(t),i=jg(n,r),a=jg(n,r);let u;return u=null!=e?EM(a,e).then(()=>a):Promise.resolve(a),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new zo(this.database,u));t&&i.then(()=>t(null),u=>t(u));const a=new zo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Ua("Reference.onDisconnect",this._delegate._path),new LW(new bL(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class H0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:wW,forceLongPolling:EW}}useEmulator(e,t,r={}){!function bW(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&zu("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&zu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new E0(E0.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new E0(u)}!function gW(n,e,t,r){n.repoInfo_=new EN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof zo){const t=IL(this._delegate,e.toString());return new zo(this,t)}{const t=CL(this._delegate,e);return new zo(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=IL(this._delegate,e);return new zo(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function CW(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),gL(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function IW(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function k3(n){n.persistentConnection_&&n.persistentConnection_.resume(cL)}(n._repo)}(this._delegate)}}H0.ServerValue={TIMESTAMP:function AW(){return SW}(),increment:n=>function xW(n){return{".sv":{increment:n}}}(n)};var BW=Object.freeze({__proto__:null,initStandalone:function UW({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){D1(t);const u=new _o.zt("auth-internal",new _o.H0("database-standalone"));return u.setComponent(new _o.wA("auth-internal",()=>r,"PRIVATE")),{instance:new H0(PL(n,u,void 0,e,a),n),namespace:i}}});const jW=H0.ServerValue;function FL(n){return null==n}function LL(n){return"function"==typeof n.set}function VL(n,e){return LL(e)?e:n.ref(e)}function UL(n,e){if(function HW(n){return"string"==typeof n}(n))return e.stringCase();if(LL(n))return e.firebaseCase();if(function GW(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function G0(n,e,t="on",r=bs.z){return new Er.y(i=>{let a=null;return a=n[t](e,(u,d)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,Ct.U)(i=>{const{snapshot:a,prevKey:u}=i;let d=null;return a.exists()&&(d=a.key),{type:e,payload:a,prevKey:u,key:d}}),(0,XO.B)())}function BL(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function zW(n,e){const{payload:t,prevKey:r,key:i}=e,a=BL(n,i),u=function WW(n,e){if(FL(e))return 0;{const t=BL(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(g=>{const y={payload:g,type:"value",prevKey:d,key:g.key};return d=g.key,n=[...n,y],!1})}return n;case"child_added":if(a>-1){const d=n[a-1];(d&&d.key||null)!==r&&(n=n.filter(g=>g.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(a>-1){const d=n.splice(a,1)[0];return(n=n.slice()).splice(u,0,d),n}return n;default:return n}}function jL(n){return(FL(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function $L(n,e,t){return function qW(n,e,t){return G0(n,"value","once",t).pipe(Zt(r=>{const i=[lt(r)];return e.forEach(a=>i.push(G0(n,a,"on",t))),(0,TR.T)(...i).pipe(ws(zW,[]))}),Kv())}(n,e=jL(e),t)}function HL(n,e,t){const r=(e=jL(e)).map(i=>G0(n,i,"on",t));return(0,TR.T)(...r)}function GL(n,e){return function(r,i){return UL(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function QW(n){return function(t){return t?UL(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function qL(n,e){return function(){return G0(n,"value","on",e)}}!function $W(n){n.INTERNAL.registerComponent(new _o.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new H0(i,r)},"PUBLIC").setServiceProps({Reference:zo,Query:fs,Database:H0,DataSnapshot:Nf,enableLogging:TW,INTERNAL:BW,ServerValue:jW}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.2")}(Yv.Z);const ez=new h.OlP("angularfire2.realtimeDatabaseURL"),tz=new h.OlP("angularfire2.database.use-emulator");let nz=(()=>{class n{constructor(t,r,i,a,u,d,g,y,C,D,N,L,j,ne,le){this.schedulers=d;const Ge=g,Je=(0,Hr.on)(t,u,r);y&&YR(Je,u,C,N,L,j,D,ne),this.database=(0,Hr.cc)(`${Je.name}.database.${i}`,"AngularFireDatabase",Je.name,()=>{const Ye=u.runOutsideAngular(()=>Je.database(i||void 0));return Ge&&Ye.useEmulator(...Ge),Ye},[Ge])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>VL(this.database,t));let a=i;return r&&(a=r(i)),function JW(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:GL(r,"update"),set:GL(r,"set"),push:i=>r.push(i),remove:QW(r),snapshotChanges:i=>$L(n,i,t).pipe(fn.iC),stateChanges:i=>HL(n,i,t).pipe(fn.iC),auditTrail:i=>function ZW(n,e,t){return function YW(n,e,t){return function KW(n,e){return G0(n,"value","on",e).pipe((0,Ct.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function WH(...n){const e=(0,js.jO)(n);return(0,Qn.e)((t,r)=>{const i=n.length,a=new Array(i);let u=n.map(()=>!1),d=!1;for(let g=0;g<i;g++)(0,di.Xf)(n[g]).subscribe(new jn.Q(r,y=>{a[g]=y,!d&&!u[g]&&(u[g]=!0,(d=u.every(ys.y))&&(u=null))},qH.Z));t.subscribe(new jn.Q(r,g=>{if(d){const y=[g,...a];r.next(e?e(...y):y)}}))})}(e),(0,Ct.U)(([i,a])=>{const u=i.lastKeyToLoad,d=a.map(g=>g.key);return{actions:a,lastKeyToLoad:u,loadedKeys:d}}),function zH(n){return(0,Qn.e)((e,t)=>{let r=!1,i=0;e.subscribe(new jn.Q(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Ct.U)(i=>i.actions))}(n,HL(n,e).pipe(ws((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(fn.iC),valueChanges:(i,a)=>$L(n,i,t).pipe((0,Ct.U)(d=>d.map(g=>a&&a.idField?Object.assign(Object.assign({},g.payload.val()),{[a.idField]:g.key}):g.payload.val())),fn.iC)}}(a,this)}object(t){return function XW(n,e){return{query:n,snapshotChanges:()=>qL(n,e.schedulers.outsideAngular)().pipe(fn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>qL(n,e.schedulers.outsideAngular)().pipe(fn.iC,(0,Ct.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>VL(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Hr.Dh),h.LFG(Hr.xv,8),h.LFG(ez,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(fn.HU),h.LFG(tz,8),h.LFG(h0,8),h.LFG(GR,8),h.LFG(qR,8),h.LFG(WR,8),h.LFG(zR,8),h.LFG(ZR,8),h.LFG(KR,8),h.LFG(d0,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),rz=(()=>{class n{constructor(){UT.Z.registerVersion("angularfire",fn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[nz]}),n})();const WL_firebaseConfig={apiKey:"AIzaSyA1hoF9vDJvhZaR0gsRXS3iFBvPRwdmJak",authDomain:"test-c3e8d.firebaseapp.com",projectId:"test-c3e8d",storageBucket:"test-c3e8d.appspot.com",messagingSenderId:"124775463780",appId:"1:124775463780:web:471e18292c464a04649871",measurementId:"G-ELEKTS5RVW"};function zL(){return"undefined"!=typeof window&&void 0!==window.document}function IM(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Mf(n){switch(n.length){case 0:return new Ly;case 1:return n[0];default:return new C1(n)}}function ZL(n,e,t,r,i={},a={}){const u=[],d=[];let g=-1,y=null;if(r.forEach(C=>{const D=C.offset,N=D==g,L=N&&y||{};Object.keys(C).forEach(j=>{let ne=j,le=C[j];if("offset"!==j)switch(ne=e.normalizePropertyName(ne,u),le){case"!":le=i[j];break;case Cd:le=a[j];break;default:le=e.normalizeStyleValue(j,ne,le,u)}L[ne]=le}),N||d.push(L),y=L,g=D}),u.length){const C="\n - ";throw new Error(`Unable to animate due to the following errors:${C}${u.join(C)}`)}return d}function TM(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&DM(t,"start",n)));break;case"done":n.onDone(()=>r(t&&DM(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&DM(t,"destroy",n)))}}function DM(n,e,t){const r=t.totalTime,a=SM(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),u=n._data;return null!=u&&(a._data=u),a}function SM(n,e,t,r,i="",a=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!u}}function Zo(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function KL(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let AM=(n,e)=>!1,YL=(n,e,t)=>[];(IM()||"undefined"!=typeof Element)&&(AM=zL()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),YL=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let $g=null,QL=!1;function xM(n){$g||($g=function sz(){return"undefined"!=typeof document?document.body:null}()||{},QL=!!$g.style&&"WebkitAppearance"in $g.style);let e=!0;return $g.style&&!function iz(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in $g.style,!e&&QL&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in $g.style)),e}const RM=AM,NM=YL;function JL(n){const e={};return Object.keys(n).forEach(t=>{const r=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=n[t]}),e}let XL=(()=>{class n{validateStyleProperty(t){return xM(t)}matchesElement(t,r){return!1}containsElement(t,r){return RM(t,r)}query(t,r,i){return NM(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,u,d=[],g){return new Ly(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),MM=(()=>{class n{}return n.NOOP=new XL,n})();const PM="ng-enter",MD="ng-leave",PD="ng-trigger",OD=".ng-trigger",tV="ng-animating",OM=".ng-animating";function Hg(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:kM(parseFloat(e[1]),e[2])}function kM(n,e){return"s"===e?1e3*n:n}function kD(n,e,t){return n.hasOwnProperty("duration")?n:function lz(n,e,t){let i,a=0,u="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};i=kM(parseFloat(d[1]),d[2]);const g=d[3];null!=g&&(a=kM(parseFloat(g),d[4]));const y=d[5];y&&(u=y)}else i=n;if(!t){let d=!1,g=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),d=!0),a<0&&(e.push("Delay values below 0 are not allowed for this animation step."),d=!0),d&&e.splice(g,0,`The provided timing value "${n}" is invalid.`)}return{duration:i,delay:a,easing:u}}(n,e,t)}function Yy(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Pf(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Yy(n,t);return t}function rV(n,e,t){return t?e+":"+t+";":""}function iV(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=rV(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=rV(0,dz(t),n.style[t]));n.setAttribute("style",e)}function Qu(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=LM(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),IM()&&iV(n))}function Gg(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=LM(t);n.style[r]=""}),IM()&&iV(n))}function q0(n){return Array.isArray(n)?1==n.length?n[0]:w1(n):n}const FM=new RegExp("{{\\s*(.+?)\\s*}}","g");function sV(n){let e=[];if("string"==typeof n){let t;for(;t=FM.exec(n);)e.push(t[1]);FM.lastIndex=0}return e}function FD(n,e,t){const r=n.toString(),i=r.replace(FM,(a,u)=>{let d=e[u];return e.hasOwnProperty(u)||(t.push(`Please provide a value for the animation param ${u}`),d=""),d.toString()});return i==r?n:i}function LD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const cz=/-+([a-z0-9])/g;function LM(n){return n.replace(cz,(...e)=>e[1].toUpperCase())}function dz(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function oV(n,e){return 0===n||0===e}function aV(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let a=e[0],u=[];if(r.forEach(d=>{a.hasOwnProperty(d)||u.push(d),a[d]=t[d]}),u.length)for(var i=1;i<e.length;i++){let d=e[i];u.forEach(function(g){d[g]=VM(n,g)})}}return e}function Ko(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function VM(n,e){return window.getComputedStyle(n)[e]}function hz(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function fz(n,e,t){if(":"==n[0]){const g=function pz(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof g)return void e.push(g);n=g}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const i=r[1],a=r[2],u=r[3];e.push(lV(i,u));"<"==a[0]&&!("*"==i&&"*"==u)&&e.push(lV(u,i))}(r,t,e)):t.push(n),t}const UD=new Set(["true","1"]),BD=new Set(["false","0"]);function lV(n,e){const t=UD.has(n)||BD.has(n),r=UD.has(e)||BD.has(e);return(i,a)=>{let u="*"==n||n==i,d="*"==e||e==a;return!u&&t&&"boolean"==typeof i&&(u=i?UD.has(n):BD.has(n)),!d&&r&&"boolean"==typeof a&&(d=a?UD.has(e):BD.has(e)),u&&d}}const gz=new RegExp("s*:selfs*,?","g");function UM(n,e,t){return new mz(n).build(e,t)}class mz{constructor(e){this._driver=e}build(e,t){const r=new vz(t);return this._resetContextStyleTimingState(r),Ko(this,q0(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const g=d,y=g.name;y.toString().split(/\s*,\s*/).forEach(C=>{g.name=C,a.push(this.visitState(g,t))}),g.name=y}else if(1==d.type){const g=this.visitTransition(d,t);r+=g.queryCount,i+=g.depCount,u.push(g)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:a,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,u=i||{};if(r.styles.forEach(d=>{if(jD(d)){const g=d;Object.keys(g).forEach(y=>{sV(g[y]).forEach(C=>{u.hasOwnProperty(C)||a.add(C)})})}}),a.size){const d=LD(a.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${d.join(", ")}`)}}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Ko(this,q0(e.animation),t);return{type:1,matchers:hz(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:qg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Ko(this,r,t)),options:qg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(u=>{t.currentTime=r;const d=Ko(this,u,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:a,options:qg(e.options)}}visitAnimate(e,t){const r=function Ez(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return BM(kD(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=BM(0,0,"");return a.dynamic=!0,a.strValue=r,a}return t=t||kD(r,e),BM(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:Fy({});if(5==a.type)i=this.visitKeyframes(a,t);else{let u=e.styles,d=!1;if(!u){d=!0;const y={};r.easing&&(y.easing=r.easing),u=Fy(y)}t.currentTime+=r.duration+r.delay;const g=this.visitStyle(u,t);g.isEmptyStep=d,i=g}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(u=>{"string"==typeof u?u==Cd?r.push(u):t.errors.push(`The provided style string value ${u} is not allowed.`):r.push(u)}):r.push(e.styles);let i=!1,a=null;return r.forEach(u=>{if(jD(u)){const d=u,g=d.easing;if(g&&(a=g,delete d.easing),!i)for(let y in d)if(d[y].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:a,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(d=>{if(!this._driver.validateStyleProperty(d))return void t.errors.push(`The provided animation property "${d}" is not a supported CSS property for animations`);const g=t.collectedStyles[t.currentQuerySelector],y=g[d];let C=!0;y&&(a!=i&&a>=y.startTime&&i<=y.endTime&&(t.errors.push(`The CSS property "${d}" that exists between the times of "${y.startTime}ms" and "${y.endTime}ms" is also being animated in a parallel animation between the times of "${a}ms" and "${i}ms"`),C=!1),a=y.startTime),C&&(g[d]={startTime:a,endTime:i}),t.options&&function uz(n,e,t){const r=e.params||{},i=sV(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(`Unable to resolve the local animation param ${a} in the given list of values`)})}(u[d],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;let a=0;const u=[];let d=!1,g=!1,y=0;const C=e.steps.map(Ge=>{const Je=this._makeStyleAst(Ge,t);let Ye=null!=Je.offset?Je.offset:function wz(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(jD(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(jD(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Je.styles),ze=0;return null!=Ye&&(a++,ze=Je.offset=Ye),g=g||ze<0||ze>1,d=d||ze<y,y=ze,u.push(ze),Je});g&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),d&&t.errors.push("Please ensure that all keyframe offsets are in order");const D=e.steps.length;let N=0;a>0&&a<D?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==a&&(N=1/(D-1));const L=D-1,j=t.currentTime,ne=t.currentAnimateTimings,le=ne.duration;return C.forEach((Ge,Je)=>{const Ye=N>0?Je==L?1:N*Je:u[Je],ze=Ye*le;t.currentTime=j+ne.delay+ze,ne.duration=ze,this._validateStyleAst(Ge,t),Ge.offset=Ye,r.styles.push(Ge)}),r}visitReference(e,t){return{type:8,animation:Ko(this,q0(e.animation),t),options:qg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:qg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:qg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,u]=function _z(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(gz,"")),n=n.replace(/@\*/g,OD).replace(/@\w+/g,t=>OD+"-"+t.substr(1)).replace(/:animating/g,OM),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,Zo(t.collectedStyles,t.currentQuerySelector,{});const d=Ko(this,q0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:d,originalSelector:e.selector,options:qg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:kD(e.timings,t.errors,!0);return{type:12,animation:Ko(this,q0(e.animation),t),timings:r,options:null}}}class vz{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function jD(n){return!Array.isArray(n)&&"object"==typeof n}function qg(n){return n?(n=Yy(n)).params&&(n.params=function yz(n){return n?Yy(n):null}(n.params)):n={},n}function BM(n,e,t){return{duration:n,delay:e,easing:t}}function jM(n,e,t,r,i,a,u=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:u,subTimeline:d}}class $D{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Iz=new RegExp(":enter","g"),Dz=new RegExp(":leave","g");function $M(n,e,t,r,i,a={},u={},d,g,y=[]){return(new Sz).buildKeyframes(n,e,t,r,i,a,u,d,g,y)}class Sz{buildKeyframes(e,t,r,i,a,u,d,g,y,C=[]){y=y||new $D;const D=new HM(e,t,y,i,a,C,[]);D.options=g,D.currentTimeline.setStyles([u],null,D.errors,g),Ko(this,r,D);const N=D.timelines.filter(L=>L.containsAnimation());if(Object.keys(d).length){let L;for(let j=N.length-1;j>=0;j--){const ne=N[j];if(ne.element===t){L=ne;break}}L&&!L.allowOnlyTimelineStyles()&&L.setStyles([d],null,D.errors,g)}return N.length?N.map(L=>L.buildKeyframes()):[jM(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);a!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const u=null!=r.duration?Hg(r.duration):null,d=null!=r.delay?Hg(r.delay):null;return 0!==u&&e.forEach(g=>{const y=t.appendInstructionToTimeline(g,u,d);a=Math.max(a,y.duration+y.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),Ko(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=HD);const u=Hg(a.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>Ko(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?Hg(e.options.delay):0;e.steps.forEach(u=>{const d=t.createSubContext(e.options);a&&d.delayNextStep(a),Ko(this,u,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return kD(t.params?FD(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(g=>{d.forwardTime((g.offset||0)*a),d.setStyles(g.styles,g.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?Hg(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=HD);let u=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let g=null;d.forEach((y,C)=>{t.currentQueryIndex=C;const D=t.createSubContext(e.options,y);a&&D.delayNextStep(a),y===t.element&&(g=D.currentTimeline),Ko(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),g&&(t.currentTimeline.mergeTimelineCollectedStyles(g),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,u=Math.abs(a.duration),d=u*(t.currentQueryTotal-1);let g=u*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":g=d-g;break;case"full":g=r.currentStaggerTime}const C=t.currentTimeline;g&&C.delayNextStep(g);const D=C.currentTime;Ko(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const HD={};class HM{constructor(e,t,r,i,a,u,d,g){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=u,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=HD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new GD(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Hg(r.duration)),null!=r.delay&&(i.delay=Hg(r.delay));const a=r.params;if(a){let u=i.params;u||(u=this.options.params={}),Object.keys(a).forEach(d=>{(!t||!u.hasOwnProperty(d))&&(u[d]=FD(a[d],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new HM(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=HD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},a=new Az(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,u){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(Iz,"."+this._enterClassName)).replace(Dz,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),d.push(...y)}return!a&&0==d.length&&u.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),d}}class GD{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new GD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Cd,this._currentKeyframe[t]=Cd}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const a=i&&i.params||{},u=function xz(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(a=>{t[a]=Cd})):Pf(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(u).forEach(d=>{const g=FD(u[d],a,r);this._pendingStyles[d]=g,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:Cd),this._updateStyle(d,g)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,g)=>{const y=Pf(d,!0);Object.keys(y).forEach(C=>{const D=y[C];"!"==D?e.add(C):D==Cd&&t.add(C)}),r||(y.offset=g/this.duration),i.push(y)});const a=e.size?LD(e.values()):[],u=t.size?LD(t.values()):[];if(r){const d=i[0],g=Yy(d);d.offset=0,g.offset=1,i=[d,g]}return jM(this.element,i,a,u,this.duration,this.startTime,this.easing,!1)}}class Az extends GD{constructor(e,t,r,i,a,u,d=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=d,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],u=r+t,d=t/u,g=Pf(e[0],!1);g.offset=0,a.push(g);const y=Pf(e[0],!1);y.offset=dV(d),a.push(y);const C=e.length-1;for(let D=1;D<=C;D++){let N=Pf(e[D],!1);N.offset=dV((t+N.offset*r)/u),a.push(N)}r=u,t=0,i="",e=a}return jM(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function dV(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class GM{}class Rz extends GM{normalizePropertyName(e,t){return LM(e)}normalizeStyleValue(e,t,r,i){let a="";const u=r.toString().trim();if(Nz[t]&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(`Please provide a CSS unit value for ${e}:${r}`)}return u+a}}const Nz=(()=>function Mz(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function hV(n,e,t,r,i,a,u,d,g,y,C,D,N){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:u,timelines:d,queriedElements:g,preStyleProps:y,postStyleProps:C,totalTime:D,errors:N}}const qM={};class fV{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Pz(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],a=this._stateStyles[e],u=i?i.buildStyles(t,r):{};return a?a.buildStyles(t,r):u}build(e,t,r,i,a,u,d,g,y,C){const D=[],N=this.ast.options&&this.ast.options.params||qM,j=this.buildStyles(r,d&&d.params||qM,D),ne=g&&g.params||qM,le=this.buildStyles(i,ne,D),Ge=new Set,Je=new Map,Ye=new Map,ze="void"===i,Nt={params:Object.assign(Object.assign({},N),ne)},Ut=C?[]:$M(e,t,this.ast.animation,a,u,j,le,Nt,y,D);let mn=0;if(Ut.forEach(Yo=>{mn=Math.max(Yo.duration+Yo.delay,mn)}),D.length)return hV(t,this._triggerName,r,i,ze,j,le,[],[],Je,Ye,mn,D);Ut.forEach(Yo=>{const Dd=Yo.element,BV=Zo(Je,Dd,{});Yo.preStyleProps.forEach(Wg=>BV[Wg]=!0);const z0=Zo(Ye,Dd,{});Yo.postStyleProps.forEach(Wg=>z0[Wg]=!0),Dd!==t&&Ge.add(Dd)});const oi=LD(Ge.values());return hV(t,this._triggerName,r,i,ze,j,le,Ut,oi,Je,Ye,mn)}}class Oz{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Yy(this.defaultParams);return Object.keys(e).forEach(a=>{const u=e[a];null!=u&&(i[a]=u)}),this.styles.styles.forEach(a=>{if("string"!=typeof a){const u=a;Object.keys(u).forEach(d=>{let g=u[d];g.length>1&&(g=FD(g,i,t));const y=this.normalizer.normalizePropertyName(d,t);g=this.normalizer.normalizeStyleValue(d,y,g,t),r[y]=g})}}),r}}class Fz{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new Oz(i.style,i.options&&i.options.params||{},r)}),pV(this.states,"true","1"),pV(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new fV(e,i,this.states))}),this.fallbackTransition=function Lz(n,e,t){return new fV(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function pV(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const Vz=new $D;class Uz{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],i=UM(this._driver,t,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,r){const i=e.element,a=ZL(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations[e];let u;const d=new Map;if(a?(u=$M(this._driver,t,a,PM,MD,{},{},r,Vz,i),u.forEach(C=>{const D=Zo(d,C.element,{});C.postStyleProps.forEach(N=>D[N]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),u=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);d.forEach((C,D)=>{Object.keys(C).forEach(N=>{C[N]=this._driver.computeStyle(D,N,Cd)})});const y=Mf(u.map(C=>{const D=d.get(C.element);return this._buildPlayer(C,{},D)}));return this._playersById[e]=y,y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,r,i){const a=SM(t,"","","");return TM(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const gV="ng-animate-queued",WM="ng-animate-disabled",Gz=[],mV={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},qz={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},$a="__ng_removed";class zM{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Kz(n){return null!=n?n:null}(r?e.value:e),r){const a=Yy(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const W0="void",ZM=new zM(W0);class Wz{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ha(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${t}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if(!function Yz(n){return"start"==n||"done"==n}(r))throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${t}" is not supported!`);const a=Zo(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};a.push(u);const d=Zo(this._engine.statesByElement,e,{});return d.hasOwnProperty(t)||(Ha(e,PD),Ha(e,PD+"-"+t),d[t]=ZM),()=>{this._engine.afterFlush(()=>{const g=a.indexOf(u);g>=0&&a.splice(g,1),this._triggers[t]||delete d[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),u=new KM(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(Ha(e,PD),Ha(e,PD+"-"+t),this._engine.statesByElement.set(e,d={}));let g=d[t];const y=new zM(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&g&&y.absorbOptions(g.options),d[t]=y,g||(g=ZM),y.value!==W0&&g.value===y.value){if(!function Xz(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(g.params,y.params)){const ne=[],le=a.matchStyles(g.value,g.params,ne),Ge=a.matchStyles(y.value,y.params,ne);ne.length?this._engine.reportError(ne):this._engine.afterFlush(()=>{Gg(e,le),Qu(e,Ge)})}return}const N=Zo(this._engine.playersByElement,e,[]);N.forEach(ne=>{ne.namespaceId==this.id&&ne.triggerName==t&&ne.queued&&ne.destroy()});let L=a.matchTransition(g.value,y.value,e,y.params),j=!1;if(!L){if(!i)return;L=a.fallbackTransition,j=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:L,fromState:g,toState:y,player:u,isFallbackTransition:j}),j||(Ha(e,gV),u.onStart(()=>{Qy(e,gV)})),u.onDone(()=>{let ne=this.players.indexOf(u);ne>=0&&this.players.splice(ne,1);const le=this._engine.playersByElement.get(e);if(le){let Ge=le.indexOf(u);Ge>=0&&le.splice(Ge,1)}}),this.players.push(u),N.push(u),u}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,OD,!0);r.forEach(i=>{if(i[$a])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),u=new Map;if(a){const d=[];if(Object.keys(a).forEach(g=>{if(u.set(g,a[g].value),this._triggers[g]){const y=this.trigger(e,g,W0,i);y&&d.push(y)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&Mf(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const u=a.name;if(i.has(u))return;i.add(u);const g=this._triggers[u].fallbackTransition,y=r[u]||ZM,C=new zM(W0),D=new KM(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:g,fromState:y,toState:C,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[$a];(!a||a===mV)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ha(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,u=this._elementListeners.get(a);u&&u.forEach(d=>{if(d.name==r.triggerName){const g=SM(a,r.triggerName,r.fromState.value,r.toState.value);g._data=e,TM(r.player,d.phase,g,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==a||0==u?a-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class zz{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Wz(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList.length-1;if(r>=0){let i=!1;for(let a=r;a>=0;a--)if(this.driver.containsElement(this._namespaceList[a].hostElement,t)){this._namespaceList.splice(a+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let a=0;a<i.length;a++){const u=r[i[a]].namespaceId;if(u){const d=this._fetchNamespace(u);d&&t.add(d)}}}return t}trigger(e,t,r,i){if(qD(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!qD(t))return;const a=t[$a];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ha(e,WM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Qy(e,WM))}removeNode(e,t,r,i){if(qD(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[$a]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return qD(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,OD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,OM,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Mf(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[$a];if(r&&r.setForRemoval){if(e[$a]=mV,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(WM))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ha(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Mf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const r=new $D,i=[],a=new Map,u=[],d=new Map,g=new Map,y=new Map,C=new Set;this.disabledNodes.forEach(wt=>{C.add(wt);const Mt=this.driver.query(wt,".ng-animate-queued",!0);for(let kt=0;kt<Mt.length;kt++)C.add(Mt[kt])});const D=this.bodyNode,N=Array.from(this.statesByElement.keys()),L=vV(N,this.collectedEnterElements),j=new Map;let ne=0;L.forEach((wt,Mt)=>{const kt=PM+ne++;j.set(Mt,kt),wt.forEach(Sn=>Ha(Sn,kt))});const le=[],Ge=new Set,Je=new Set;for(let wt=0;wt<this.collectedLeaveElements.length;wt++){const Mt=this.collectedLeaveElements[wt],kt=Mt[$a];kt&&kt.setForRemoval&&(le.push(Mt),Ge.add(Mt),kt.hasAnimation?this.driver.query(Mt,".ng-star-inserted",!0).forEach(Sn=>Ge.add(Sn)):Je.add(Mt))}const Ye=new Map,ze=vV(N,Array.from(Ge));ze.forEach((wt,Mt)=>{const kt=MD+ne++;Ye.set(Mt,kt),wt.forEach(Sn=>Ha(Sn,kt))}),e.push(()=>{L.forEach((wt,Mt)=>{const kt=j.get(Mt);wt.forEach(Sn=>Qy(Sn,kt))}),ze.forEach((wt,Mt)=>{const kt=Ye.get(Mt);wt.forEach(Sn=>Qy(Sn,kt))}),le.forEach(wt=>{this.processLeaveNode(wt)})});const Nt=[],Ut=[];for(let wt=this._namespaceList.length-1;wt>=0;wt--)this._namespaceList[wt].drainQueuedTransitions(t).forEach(kt=>{const Sn=kt.player,Gi=kt.element;if(Nt.push(Sn),this.collectedEnterElements.length){const ro=Gi[$a];if(ro&&ro.setForMove){if(ro.previousTriggersValues&&ro.previousTriggersValues.has(kt.triggerName)){const zg=ro.previousTriggersValues.get(kt.triggerName),kf=this.statesByElement.get(kt.element);kf&&kf[kt.triggerName]&&(kf[kt.triggerName].value=zg)}return void Sn.destroy()}}const Ju=!D||!this.driver.containsElement(D,Gi),Qo=Ye.get(Gi),Of=j.get(Gi),Lr=this._buildInstruction(kt,r,Of,Qo,Ju);if(Lr.errors&&Lr.errors.length)return void Ut.push(Lr);if(Ju)return Sn.onStart(()=>Gg(Gi,Lr.fromStyles)),Sn.onDestroy(()=>Qu(Gi,Lr.toStyles)),void i.push(Sn);if(kt.isFallbackTransition)return Sn.onStart(()=>Gg(Gi,Lr.fromStyles)),Sn.onDestroy(()=>Qu(Gi,Lr.toStyles)),void i.push(Sn);const HV=[];Lr.timelines.forEach(ro=>{ro.stretchStartingKeyframe=!0,this.disabledNodes.has(ro.element)||HV.push(ro)}),Lr.timelines=HV,r.append(Gi,Lr.timelines),u.push({instruction:Lr,player:Sn,element:Gi}),Lr.queriedElements.forEach(ro=>Zo(d,ro,[]).push(Sn)),Lr.preStyleProps.forEach((ro,zg)=>{const kf=Object.keys(ro);if(kf.length){let Zg=g.get(zg);Zg||g.set(zg,Zg=new Set),kf.forEach(XM=>Zg.add(XM))}}),Lr.postStyleProps.forEach((ro,zg)=>{const kf=Object.keys(ro);let Zg=y.get(zg);Zg||y.set(zg,Zg=new Set),kf.forEach(XM=>Zg.add(XM))})});if(Ut.length){const wt=[];Ut.forEach(Mt=>{wt.push(`@${Mt.triggerName} has failed due to:\n`),Mt.errors.forEach(kt=>wt.push(`- ${kt}\n`))}),Nt.forEach(Mt=>Mt.destroy()),this.reportError(wt)}const mn=new Map,oi=new Map;u.forEach(wt=>{const Mt=wt.element;r.has(Mt)&&(oi.set(Mt,Mt),this._beforeAnimationBuild(wt.player.namespaceId,wt.instruction,mn))}),i.forEach(wt=>{const Mt=wt.element;this._getPreviousPlayers(Mt,!1,wt.namespaceId,wt.triggerName,null).forEach(Sn=>{Zo(mn,Mt,[]).push(Sn),Sn.destroy()})});const Yo=le.filter(wt=>EV(wt,g,y)),Dd=new Map;yV(Dd,this.driver,Je,y,Cd).forEach(wt=>{EV(wt,g,y)&&Yo.push(wt)});const z0=new Map;L.forEach((wt,Mt)=>{yV(z0,this.driver,new Set(wt),g,"!")}),Yo.forEach(wt=>{const Mt=Dd.get(wt),kt=z0.get(wt);Dd.set(wt,Object.assign(Object.assign({},Mt),kt))});const Wg=[],jV=[],$V={};u.forEach(wt=>{const{element:Mt,player:kt,instruction:Sn}=wt;if(r.has(Mt)){if(C.has(Mt))return kt.onDestroy(()=>Qu(Mt,Sn.toStyles)),kt.disabled=!0,kt.overrideTotalTime(Sn.totalTime),void i.push(kt);let Gi=$V;if(oi.size>1){let Qo=Mt;const Of=[];for(;Qo=Qo.parentNode;){const Lr=oi.get(Qo);if(Lr){Gi=Lr;break}Of.push(Qo)}Of.forEach(Lr=>oi.set(Lr,Gi))}const Ju=this._buildAnimation(kt.namespaceId,Sn,mn,a,z0,Dd);if(kt.setRealPlayer(Ju),Gi===$V)Wg.push(kt);else{const Qo=this.playersByElement.get(Gi);Qo&&Qo.length&&(kt.parentPlayer=Mf(Qo)),i.push(kt)}}else Gg(Mt,Sn.fromStyles),kt.onDestroy(()=>Qu(Mt,Sn.toStyles)),jV.push(kt),C.has(Mt)&&i.push(kt)}),jV.forEach(wt=>{const Mt=a.get(wt.element);if(Mt&&Mt.length){const kt=Mf(Mt);wt.setRealPlayer(kt)}}),i.forEach(wt=>{wt.parentPlayer?wt.syncPlayerEvents(wt.parentPlayer):wt.destroy()});for(let wt=0;wt<le.length;wt++){const Mt=le[wt],kt=Mt[$a];if(Qy(Mt,MD),kt&&kt.hasAnimation)continue;let Sn=[];if(d.size){let Ju=d.get(Mt);Ju&&Ju.length&&Sn.push(...Ju);let Qo=this.driver.query(Mt,OM,!0);for(let Of=0;Of<Qo.length;Of++){let Lr=d.get(Qo[Of]);Lr&&Lr.length&&Sn.push(...Lr)}}const Gi=Sn.filter(Ju=>!Ju.destroyed);Gi.length?Qz(this,Mt,Gi):this.processLeaveNode(Mt)}return le.length=0,Wg.forEach(wt=>{this.players.push(wt),wt.onDone(()=>{wt.destroy();const Mt=this.players.indexOf(wt);this.players.splice(Mt,1)}),wt.play()}),Wg}elementContainsData(e,t){let r=!1;const i=t[$a];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let u=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(u=d)}else{const d=this.playersByElement.get(e);if(d){const g=!a||a==W0;d.forEach(y=>{y.queued||!g&&y.triggerName!=i||u.push(y)})}}return(r||i)&&(u=u.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),u}_beforeAnimationBuild(e,t,r){const a=t.element,u=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const g of t.timelines){const y=g.element,C=y!==a,D=Zo(r,y,[]);this._getPreviousPlayers(y,C,u,d,t.toState).forEach(L=>{const j=L.getRealPlayer();j.beforeDestroy&&j.beforeDestroy(),L.destroy(),D.push(L)})}Gg(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,u){const d=t.triggerName,g=t.element,y=[],C=new Set,D=new Set,N=t.timelines.map(j=>{const ne=j.element;C.add(ne);const le=ne[$a];if(le&&le.removedBeforeQueried)return new Ly(j.duration,j.delay);const Ge=ne!==g,Je=function Jz(n){const e=[];return wV(n,e),e}((r.get(ne)||Gz).map(mn=>mn.getRealPlayer())).filter(mn=>!!mn.element&&mn.element===ne),Ye=a.get(ne),ze=u.get(ne),Nt=ZL(0,this._normalizer,0,j.keyframes,Ye,ze),Ut=this._buildPlayer(j,Nt,Je);if(j.subTimeline&&i&&D.add(ne),Ge){const mn=new KM(e,d,ne);mn.setRealPlayer(Ut),y.push(mn)}return Ut});y.forEach(j=>{Zo(this.playersByQueriedElement,j.element,[]).push(j),j.onDone(()=>function Zz(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,j.element,j))}),C.forEach(j=>Ha(j,tV));const L=Mf(N);return L.onDestroy(()=>{C.forEach(j=>Qy(j,tV)),Qu(g,t.toStyles)}),D.forEach(j=>{Zo(i,j,[]).push(L)}),L}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Ly(e.duration,e.delay)}}class KM{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Ly,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>TM(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Zo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function qD(n){return n&&1===n.nodeType}function _V(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function yV(n,e,t,r,i){const a=[];t.forEach(g=>a.push(_V(g)));const u=[];r.forEach((g,y)=>{const C={};g.forEach(D=>{const N=C[D]=e.computeStyle(y,D,i);(!N||0==N.length)&&(y[$a]=qz,u.push(y))}),n.set(y,C)});let d=0;return t.forEach(g=>_V(g,a[d++])),u}function vV(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const i=new Set(e),a=new Map;function u(d){if(!d)return 1;let g=a.get(d);if(g)return g;const y=d.parentNode;return g=t.has(y)?y:i.has(y)?1:u(y),a.set(d,g),g}return e.forEach(d=>{const g=u(d);1!==g&&t.get(g).push(d)}),t}function Ha(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Qy(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function Qz(n,e,t){Mf(t).onDone(()=>n.processLeaveNode(e))}function wV(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof C1?wV(r.players,e):e.push(r)}}function EV(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class WD{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new zz(e,t,r),this._timelineEngine=new Uz(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const u=e+"-"+i;let d=this._triggerCache[u];if(!d){const g=[],y=UM(this._driver,a,g);if(g.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${g.join("\n - ")}`);d=function kz(n,e,t){return new Fz(n,e,t)}(i,y,this._normalizer),this._triggerCache[u]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,u]=KL(r);this._timelineEngine.command(a,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[u,d]=KL(r);return this._timelineEngine.listen(u,t,d,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function bV(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=YM(e[0]),e.length>1&&(r=YM(e[e.length-1]))):e&&(t=YM(e)),t||r?new e6(n,t,r):null}let e6=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&Qu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Qu(this._element,this._initialStyles),this._endStyles&&(Qu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Gg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Gg(this._element,this._endStyles),this._endStyles=null),Qu(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function YM(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];t6(i)&&(e=e||{},e[i]=n[i])}return e}function t6(n){return"display"===n||"position"===n}const CV="animation",IV="animationend";class i6{constructor(e,t,r,i,a,u,d){this._element=e,this._name=t,this._duration=r,this._delay=i,this._easing=a,this._fillMode=u,this._onDoneFn=d,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=g=>this._handleCallback(g)}apply(){(function s6(n,e){const t=JM(n,"").trim();let r=0;t.length&&(r=function a6(n,e){let t=0;for(let r=0;r<n.length;r++)n.charAt(r)===e&&t++;return t}(t,",")+1,e=`${t}, ${e}`),zD(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),SV(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){TV(this._element,this._name,"paused")}resume(){TV(this._element,this._name,"running")}setPosition(e){const t=DV(this._element,this._name);this._position=e*this._duration,zD(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),SV(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function o6(n,e){const r=JM(n,"").split(","),i=QM(r,e);i>=0&&(r.splice(i,1),zD(n,"",r.join(",")))}(this._element,this._name))}}function TV(n,e,t){zD(n,"PlayState",t,DV(n,e))}function DV(n,e){const t=JM(n,"");return t.indexOf(",")>0?QM(t.split(","),e):QM([t],e)}function QM(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function SV(n,e,t){t?n.removeEventListener(IV,e):n.addEventListener(IV,e)}function zD(n,e,t,r){const i=CV+e;if(null!=r){const a=n.style[i];if(a.length){const u=a.split(",");u[r]=t,t=u.join(",")}}n.style[i]=t}function JM(n,e){return n.style[CV+e]||""}class AV{constructor(e,t,r,i,a,u,d,g){this.element=e,this.keyframes=t,this.animationName=r,this._duration=i,this._delay=a,this._finalStyles=d,this._specialStyles=g,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=u||"linear",this.totalTime=i+a,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new i6(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(e[r]=t?this._finalStyles[r]:VM(this.element,r))})}this.currentSnapshot=e}}class c6 extends Ly{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=JL(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class RV{constructor(){this._count=0}validateStyleProperty(e){return xM(e)}matchesElement(e,t){return!1}containsElement(e,t){return RM(e,t)}query(e,t,r){return NM(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,r){r=r.map(d=>JL(d));let i=`@keyframes ${t} {\n`,a="";r.forEach(d=>{a=" ";const g=parseFloat(d.offset);i+=`${a}${100*g}% {\n`,a+=" ",Object.keys(d).forEach(y=>{const C=d[y];switch(y){case"offset":return;case"easing":return void(C&&(i+=`${a}animation-timing-function: ${C};\n`));default:return void(i+=`${a}${y}: ${C};\n`)}}),i+=`${a}}\n`}),i+="}\n";const u=document.createElement("style");return u.textContent=i,u}animate(e,t,r,i,a,u=[],d){const g=u.filter(le=>le instanceof AV),y={};oV(r,i)&&g.forEach(le=>{let Ge=le.currentSnapshot;Object.keys(Ge).forEach(Je=>y[Je]=Ge[Je])});const C=function f6(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(i=>{"offset"==i||"easing"==i||(e[i]=r[i])})}),e}(t=aV(e,t,y));if(0==r)return new c6(e,C);const D="gen_css_kf_"+this._count++,N=this.buildKeyframeElement(e,D,t);(function h6(n){var e;const t=null===(e=n.getRootNode)||void 0===e?void 0:e.call(n);return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot?t:document.head})(e).appendChild(N);const j=bV(e,t),ne=new AV(e,t,D,r,i,a,C,j);return ne.onDestroy(()=>function p6(n){n.parentNode.removeChild(n)}(N)),ne}}class MV{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:VM(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class g6{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(PV().toString()),this._cssKeyframesDriver=new RV}validateStyleProperty(e){return xM(e)}matchesElement(e,t){return!1}containsElement(e,t){return RM(e,t)}query(e,t,r){return NM(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,r,i,a,u=[],d){if(!d&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,r,i,a,u);const C={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(C.easing=a);const D={},N=u.filter(j=>j instanceof MV);oV(r,i)&&N.forEach(j=>{let ne=j.currentSnapshot;Object.keys(ne).forEach(le=>D[le]=ne[le])});const L=bV(e,t=aV(e,t=t.map(j=>Pf(j,!1)),D));return new MV(e,t,C,L)}}function PV(){return zL()&&Element.prototype.animate||{}}let _6=(()=>{class n extends y1{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:h.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?w1(t):t;return OV(this._renderer,null,r,"register",[i]),new y6(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(fe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class y6 extends class PH{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new v6(this._id,e,t||{},this._renderer)}}class v6{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return OV(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function OV(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const kV="@.disabled";let w6=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,u)=>{const d=null==u?void 0:u.parentNode(a);d&&u.removeChild(d,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(a);return C||(C=new FV("",a,this.engine),this._rendererCache.set(a,C)),C}const u=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const g=C=>{Array.isArray(C)?C.forEach(g):this.engine.registerTrigger(u,d,t,C.name,C)};return r.data.animation.forEach(g),new E6(this,d,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[u,d]=a;u(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(WD),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class FV{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==kV?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class E6 extends FV{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==kV?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function b6(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.substr(1),u="";return"@"!=a.charAt(0)&&([a,u]=function C6(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,u,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let I6=(()=>{class n extends WD{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(MM),h.LFG(GM))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const LV=new h.OlP("AnimationModuleType"),VV=[{provide:y1,useClass:_6},{provide:GM,useFactory:function D6(){return new Rz}},{provide:WD,useClass:I6},{provide:h.FYo,useFactory:function S6(n,e,t){return new w6(n,e,t)},deps:[ei,WD,h.R0b]}],UV=[{provide:MM,useFactory:function T6(){return function m6(){return"function"==typeof PV()}()?new g6:new RV}},{provide:LV,useValue:"BrowserAnimations"},...VV],A6=[{provide:MM,useClass:XL},{provide:LV,useValue:"NoopAnimations"},...VV];let x6=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?A6:UV}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:UV,imports:[Ld]}),n})(),R6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[GH]}),n.\u0275inj=h.cJS({providers:[Ef],imports:[[Ld,MH,Hr.hO.initializeApp(WL_firebaseConfig),rz,K2,W$,rj,US,yh,x6]]}),n})();(0,h.G48)(),cc().bootstrapModule(R6).catch(n=>console.error(n))},5867:(it,Ie,F)=>{F.d(Ie,{Mq:()=>h.getApp,C6:()=>h.getApps});var h=F(9681);(0,h.registerVersion)("firebase","9.8.4","app")},127:(it,Ie,F)=>{F.d(Ie,{Z:()=>h.Z});var h=F(3942);h.Z.registerVersion("firebase","9.8.4","app-compat")},5881:(it,Ie,F)=>{F.r(Ie);var h=F(5861),$=F(3942),O=F(1529),se=F(2090),fe=(F(9681),F(1877),F(4859));function de(){return window}function z(){return(z=(0,h.Z)(function*(ae,J,Z){var Se;const{BuildInfo:Ke}=de();(0,O.aq)(J.sessionId,"AuthEvent did not contain a session ID");const vt=yield we(J.sessionId),bt={};return(0,O.ar)()?bt.ibi=Ke.packageName:(0,O.as)()?bt.apn=Ke.packageName:(0,O.at)(ae,"operation-not-supported-in-this-environment"),Ke.displayName&&(bt.appDisplayName=Ke.displayName),bt.sessionId=vt,(0,O.au)(ae,Z,J.type,void 0,null!==(Se=J.eventId)&&void 0!==Se?Se:void 0,bt)})).apply(this,arguments)}function We(){return(We=(0,h.Z)(function*(ae){const{BuildInfo:J}=de(),Z={};(0,O.ar)()?Z.iosBundleId=J.packageName:(0,O.as)()?Z.androidPackageName=J.packageName:(0,O.at)(ae,"operation-not-supported-in-this-environment"),yield(0,O.av)(ae,Z)})).apply(this,arguments)}function He(){return(He=(0,h.Z)(function*(ae,J,Z){const{cordova:Se}=de();let Ke=()=>{};try{yield new Promise((vt,bt)=>{let Qt=null;function nn(){var Bt;vt();const Br=null===(Bt=Se.plugins.browsertab)||void 0===Bt?void 0:Bt.close;"function"==typeof Br&&Br(),"function"==typeof(null==Z?void 0:Z.close)&&Z.close()}function er(){Qt||(Qt=window.setTimeout(()=>{bt((0,O.aw)(ae,"redirect-cancelled-by-user"))},2e3))}function li(){"visible"===(null==document?void 0:document.visibilityState)&&er()}J.addPassiveListener(nn),document.addEventListener("resume",er,!1),(0,O.as)()&&document.addEventListener("visibilitychange",li,!1),Ke=()=>{J.removePassiveListener(nn),document.removeEventListener("resume",er,!1),document.removeEventListener("visibilitychange",li,!1),Qt&&window.clearTimeout(Qt)}})}finally{Ke()}})).apply(this,arguments)}function we(ae){return ke.apply(this,arguments)}function ke(){return(ke=(0,h.Z)(function*(ae){const J=Be(ae),Z=yield crypto.subtle.digest("SHA-256",J);return Array.from(new Uint8Array(Z)).map(Ke=>Ke.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Be(ae){if((0,O.aq)(/[0-9a-zA-Z]+/.test(ae),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ae);const J=new ArrayBuffer(ae.length),Z=new Uint8Array(J);for(let Se=0;Se<ae.length;Se++)Z[Se]=ae.charCodeAt(Se);return Z}class st extends O.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(J=>{this.resolveInialized=J})}addPassiveListener(J){this.passiveListeners.add(J)}removePassiveListener(J){this.passiveListeners.delete(J)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(J){return this.resolveInialized(),this.passiveListeners.forEach(Z=>Z(J)),super.onEvent(J)}initialized(){var J=this;return(0,h.Z)(function*(){yield J.initPromise})()}}function Xe(ae){return Te.apply(this,arguments)}function Te(){return(Te=(0,h.Z)(function*(ae){const J=yield pe()._get(ve(ae));return J&&(yield pe()._remove(ve(ae))),J})).apply(this,arguments)}function ie(){const ae=[],J="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Z=0;Z<20;Z++){const Se=Math.floor(Math.random()*J.length);ae.push(J.charAt(Se))}return ae.join("")}function pe(){return(0,O.ay)(O.b)}function ve(ae){return(0,O.az)("authEvent",ae.config.apiKey,ae.name)}function St(ae){if(!(null==ae?void 0:ae.includes("?")))return{};const[J,...Z]=ae.split("?");return(0,se.zd)(Z.join("?"))}function xt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aw)("no-auth-event")}}function lr(){var ae;return(null===(ae=null==self?void 0:self.location)||void 0===ae?void 0:ae.protocol)||null}function Un(ae=(0,se.z$)()){return!("file:"!==lr()&&"ionic:"!==lr()&&"capacitor:"!==lr()||!ae.toLowerCase().match(/iphone|ipad|ipod|android/))}function Vr(){try{const ae=self.localStorage,J=O.aI();if(ae)return ae.setItem(J,"1"),ae.removeItem(J),!function Ps(ae=(0,se.z$)()){return function bn(){return(0,se.w1)()&&11===(null==document?void 0:document.documentMode)}()||function En(ae=(0,se.z$)()){return/Edge\/\d+/.test(ae)}(ae)}()||(0,se.hl)()}catch(ae){return Ci()&&(0,se.hl)()}return!1}function Ci(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Le(){return(function Ei(){return"http:"===lr()||"https:"===lr()}()||(0,se.ru)()||Un())&&!function bi(){return(0,se.b$)()||(0,se.UG)()}()&&Vr()&&!Ci()}function ur(){return Un()&&"undefined"!=typeof document}function Yr(){return(Yr=(0,h.Z)(function*(){return!!ur()&&new Promise(ae=>{const J=setTimeout(()=>{ae(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(J),ae(!0)})})})).apply(this,arguments)}const an={LOCAL:"local",NONE:"none",SESSION:"session"},ai=O.ax,mr="persistence";function An(ae){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,h.Z)(function*(ae){yield ae._initializationPromise;const J=zt(),Z=O.az(mr,ae.config.apiKey,ae.name);J&&J.setItem(Z,ae._getPersistence())})).apply(this,arguments)}function zt(){var ae;try{return(null===(ae=function on(){return"undefined"!=typeof window?window:null}())||void 0===ae?void 0:ae.sessionStorage)||null}catch(J){return null}}const mt=O.ax;class _t{constructor(){this.browserResolver=O.ay(O.k),this.cordovaResolver=O.ay(class Xn{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(J){var Z=this;return(0,h.Z)(function*(){const Se=J._key();let Ke=Z.eventManagers.get(Se);return Ke||(Ke=new st(J),Z.eventManagers.set(Se,Ke),Z.attachCallbackListeners(J,Ke)),Ke})()}_openPopup(J){(0,O.at)(J,"operation-not-supported-in-this-environment")}_openRedirect(J,Z,Se,Ke){var vt=this;return(0,h.Z)(function*(){!function ye(ae){var J,Z,Se,Ke,vt,bt,Qt,nn,er,li;const Bt=de();(0,O.ax)("function"==typeof(null===(J=null==Bt?void 0:Bt.universalLinks)||void 0===J?void 0:J.subscribe),ae,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.ax)(void 0!==(null===(Z=null==Bt?void 0:Bt.BuildInfo)||void 0===Z?void 0:Z.packageName),ae,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.ax)("function"==typeof(null===(vt=null===(Ke=null===(Se=null==Bt?void 0:Bt.cordova)||void 0===Se?void 0:Se.plugins)||void 0===Ke?void 0:Ke.browsertab)||void 0===vt?void 0:vt.openUrl),ae,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(nn=null===(Qt=null===(bt=null==Bt?void 0:Bt.cordova)||void 0===bt?void 0:bt.plugins)||void 0===Qt?void 0:Qt.browsertab)||void 0===nn?void 0:nn.isAvailable),ae,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(li=null===(er=null==Bt?void 0:Bt.cordova)||void 0===er?void 0:er.InAppBrowser)||void 0===li?void 0:li.open),ae,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(J);const bt=yield vt._initialize(J);yield bt.initialized(),bt.resetRedirect(),(0,O.aD)(),yield vt._originValidation(J);const Qt=function Ne(ae,J,Z=null){return{type:J,eventId:Z,urlResponse:null,sessionId:ie(),postBody:null,tenantId:ae.tenantId,error:(0,O.aw)(ae,"no-auth-event")}}(J,Se,Ke);yield function at(ae,J){return pe()._set(ve(ae),J)}(J,Qt);const nn=yield function G(ae,J,Z){return z.apply(this,arguments)}(J,Qt,Z),er=yield function xe(ae){const{cordova:J}=de();return new Promise(Z=>{J.plugins.browsertab.isAvailable(Se=>{let Ke=null;Se?J.plugins.browsertab.openUrl(ae):Ke=J.InAppBrowser.open(ae,(0,O.ap)()?"_blank":"_system","location=yes"),Z(Ke)})})}(nn);return function Fe(ae,J,Z){return He.apply(this,arguments)}(J,bt,er)})()}_isIframeWebStorageSupported(J,Z){throw new Error("Method not implemented.")}_originValidation(J){const Z=J._key();return this.originValidationPromises[Z]||(this.originValidationPromises[Z]=function oe(ae){return We.apply(this,arguments)}(J)),this.originValidationPromises[Z]}attachCallbackListeners(J,Z){const{universalLinks:Se,handleOpenURL:Ke,BuildInfo:vt}=de(),bt=setTimeout((0,h.Z)(function*(){yield Xe(J),Z.onEvent(xt())}),500),Qt=function(){var li=(0,h.Z)(function*(Bt){clearTimeout(bt);const Br=yield Xe(J);let gs=null;Br&&(null==Bt?void 0:Bt.url)&&(gs=function q(ae,J){var Z,Se;const Ke=function ue(ae){const J=St(ae),Z=J.link?decodeURIComponent(J.link):void 0,Se=St(Z).link,Ke=J.deep_link_id?decodeURIComponent(J.deep_link_id):void 0;return St(Ke).link||Ke||Se||Z||ae}(J);if(Ke.includes("/__/auth/callback")){const vt=St(Ke),bt=vt.firebaseError?function Pe(ae){try{return JSON.parse(ae)}catch(J){return null}}(decodeURIComponent(vt.firebaseError)):null,Qt=null===(Se=null===(Z=null==bt?void 0:bt.code)||void 0===Z?void 0:Z.split("auth/"))||void 0===Se?void 0:Se[1],nn=Qt?(0,O.aw)(Qt):null;return nn?{type:ae.type,eventId:ae.eventId,tenantId:ae.tenantId,error:nn,urlResponse:null,sessionId:null,postBody:null}:{type:ae.type,eventId:ae.eventId,tenantId:ae.tenantId,sessionId:ae.sessionId,urlResponse:Ke,postBody:null}}return null}(Br,Bt.url)),Z.onEvent(gs||xt())});return function(Br){return li.apply(this,arguments)}}();void 0!==Se&&"function"==typeof Se.subscribe&&Se.subscribe(null,Qt);const nn=Ke,er=`${vt.packageName.toLowerCase()}://`;de().handleOpenURL=function(){var li=(0,h.Z)(function*(Bt){if(Bt.toLowerCase().startsWith(er)&&Qt({url:Bt}),"function"==typeof nn)try{nn(Bt)}catch(Br){console.error(Br)}});return function(Bt){return li.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(J){var Z=this;return(0,h.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._initialize(J)})()}_openPopup(J,Z,Se,Ke){var vt=this;return(0,h.Z)(function*(){return yield vt.selectUnderlyingResolver(),vt.assertedUnderlyingResolver._openPopup(J,Z,Se,Ke)})()}_openRedirect(J,Z,Se,Ke){var vt=this;return(0,h.Z)(function*(){return yield vt.selectUnderlyingResolver(),vt.assertedUnderlyingResolver._openRedirect(J,Z,Se,Ke)})()}_isIframeWebStorageSupported(J,Z){this.assertedUnderlyingResolver._isIframeWebStorageSupported(J,Z)}_originValidation(J){return this.assertedUnderlyingResolver._originValidation(J)}get _shouldInitProactively(){return ur()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return mt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var J=this;return(0,h.Z)(function*(){if(J.underlyingResolver)return;const Z=yield function gt(){return Yr.apply(this,arguments)}();J.underlyingResolver=Z?J.cordovaResolver:J.browserResolver})()}}function ps(ae){return ae.unwrap()}function Et(ae){return _r(ae)}function _r(ae){const{_tokenResponse:J}=ae instanceof se.ZR?ae.customData:ae;if(!J)return null;if(!(ae instanceof se.ZR)&&"temporaryProof"in J&&"phoneNumber"in J)return O.P.credentialFromResult(ae);const Z=J.providerId;if(!Z||Z===O.o.PASSWORD)return null;let Se;switch(Z){case O.o.GOOGLE:Se=O.Q;break;case O.o.FACEBOOK:Se=O.N;break;case O.o.GITHUB:Se=O.T;break;case O.o.TWITTER:Se=O.W;break;default:const{oauthIdToken:Ke,oauthAccessToken:vt,oauthTokenSecret:bt,pendingToken:Qt,nonce:nn}=J;return vt||bt||Ke||Qt?Qt?Z.startsWith("saml.")?O.aL._create(Z,Qt):O.J._fromParams({providerId:Z,signInMethod:Z,pendingToken:Qt,idToken:Ke,accessToken:vt}):new O.U(Z).credential({idToken:Ke,accessToken:vt,rawNonce:nn}):null}return ae instanceof se.ZR?Se.credentialFromError(ae):Se.credentialFromResult(ae)}function In(ae,J){return J.catch(Z=>{throw Z instanceof se.ZR&&function Cn(ae,J){var Z,Se;const Ke=null===(Z=J.customData)||void 0===Z?void 0:Z._tokenResponse;if("auth/multi-factor-auth-required"===(null===(Se=J)||void 0===Se?void 0:Se.code))J.resolver=new H(ae,O.an(ae,J));else if(Ke){const vt=_r(J),bt=J;vt&&(bt.credential=vt,bt.tenantId=Ke.tenantId||void 0,bt.email=Ke.email||void 0,bt.phoneNumber=Ke.phoneNumber||void 0)}}(ae,Z),Z}).then(Z=>{const Ke=Z.user;return{operationType:Z.operationType,credential:Et(Z),additionalUserInfo:O.al(Z),user:X.getOrCreate(Ke)}})}function yt(ae,J){return Y.apply(this,arguments)}function Y(){return(Y=(0,h.Z)(function*(ae,J){const Z=yield J;return{verificationId:Z.verificationId,confirm:Se=>In(ae,Z.confirm(Se))}})).apply(this,arguments)}class H{constructor(J,Z){this.resolver=Z,this.auth=function Mi(ae){return ae.wrapped()}(J)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(J){return In(ps(this.auth),this.resolver.resolveSignIn(J))}}class X{constructor(J){this._delegate=J,this.multiFactor=O.ao(J)}static getOrCreate(J){return X.USER_MAP.has(J)||X.USER_MAP.set(J,new X(J)),X.USER_MAP.get(J)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(J){return this._delegate.getIdTokenResult(J)}getIdToken(J){return this._delegate.getIdToken(J)}linkAndRetrieveDataWithCredential(J){return this.linkWithCredential(J)}linkWithCredential(J){var Z=this;return(0,h.Z)(function*(){return In(Z.auth,O.Z(Z._delegate,J))})()}linkWithPhoneNumber(J,Z){var Se=this;return(0,h.Z)(function*(){return yt(Se.auth,O.l(Se._delegate,J,Z))})()}linkWithPopup(J){var Z=this;return(0,h.Z)(function*(){return In(Z.auth,O.d(Z._delegate,J,_t))})()}linkWithRedirect(J){var Z=this;return(0,h.Z)(function*(){return yield An(O.aE(Z.auth)),O.g(Z._delegate,J,_t)})()}reauthenticateAndRetrieveDataWithCredential(J){return this.reauthenticateWithCredential(J)}reauthenticateWithCredential(J){var Z=this;return(0,h.Z)(function*(){return In(Z.auth,O._(Z._delegate,J))})()}reauthenticateWithPhoneNumber(J,Z){return yt(this.auth,O.r(this._delegate,J,Z))}reauthenticateWithPopup(J){return In(this.auth,O.e(this._delegate,J,_t))}reauthenticateWithRedirect(J){var Z=this;return(0,h.Z)(function*(){return yield An(O.aE(Z.auth)),O.h(Z._delegate,J,_t)})()}sendEmailVerification(J){return O.ab(this._delegate,J)}unlink(J){var Z=this;return(0,h.Z)(function*(){return yield O.ak(Z._delegate,J),Z})()}updateEmail(J){return O.ag(this._delegate,J)}updatePassword(J){return O.ah(this._delegate,J)}updatePhoneNumber(J){return O.u(this._delegate,J)}updateProfile(J){return O.af(this._delegate,J)}verifyBeforeUpdateEmail(J,Z){return O.ac(this._delegate,J,Z)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}X.USER_MAP=new WeakMap;const ee=O.ax;let B=(()=>{class ae{constructor(Z,Se){if(this.app=Z,Se.isInitialized())return this._delegate=Se.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ke}=Z.options;ee(Ke,"invalid-api-key",{appName:Z.name}),ee(Ke,"invalid-api-key",{appName:Z.name});const vt="undefined"!=typeof window?_t:void 0;this._delegate=Se.initialize({options:{persistence:qe(Ke,Z.name),popupRedirectResolver:vt}}),this._delegate._updateErrorMap(O.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?X.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Z){this._delegate.languageCode=Z}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Z){this._delegate.tenantId=Z}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Z,Se){O.G(this._delegate,Z,Se)}applyActionCode(Z){return O.a2(this._delegate,Z)}checkActionCode(Z){return O.a3(this._delegate,Z)}confirmPasswordReset(Z,Se){return O.a1(this._delegate,Z,Se)}createUserWithEmailAndPassword(Z,Se){var Ke=this;return(0,h.Z)(function*(){return In(Ke._delegate,O.a5(Ke._delegate,Z,Se))})()}fetchProvidersForEmail(Z){return this.fetchSignInMethodsForEmail(Z)}fetchSignInMethodsForEmail(Z){return O.aa(this._delegate,Z)}isSignInWithEmailLink(Z){return O.a8(this._delegate,Z)}getRedirectResult(){var Z=this;return(0,h.Z)(function*(){ee(Le(),Z._delegate,"operation-not-supported-in-this-environment");const Se=yield O.j(Z._delegate,_t);return Se?In(Z._delegate,Promise.resolve(Se)):{credential:null,user:null}})()}addFrameworkForLogging(Z){!function ar(ae,J){(0,O.aE)(ae)._logFramework(J)}(this._delegate,Z)}onAuthStateChanged(Z,Se,Ke){const{next:vt,error:bt,complete:Qt}=be(Z,Se,Ke);return this._delegate.onAuthStateChanged(vt,bt,Qt)}onIdTokenChanged(Z,Se,Ke){const{next:vt,error:bt,complete:Qt}=be(Z,Se,Ke);return this._delegate.onIdTokenChanged(vt,bt,Qt)}sendSignInLinkToEmail(Z,Se){return O.a7(this._delegate,Z,Se)}sendPasswordResetEmail(Z,Se){return O.a0(this._delegate,Z,Se||void 0)}setPersistence(Z){var Se=this;return(0,h.Z)(function*(){let Ke;switch(function Ar(ae,J){ai(Object.values(an).includes(J),ae,"invalid-persistence-type"),(0,se.b$)()?ai(J!==an.SESSION,ae,"unsupported-persistence-type"):(0,se.UG)()?ai(J===an.NONE,ae,"unsupported-persistence-type"):Ci()?ai(J===an.NONE||J===an.LOCAL&&(0,se.hl)(),ae,"unsupported-persistence-type"):ai(J===an.NONE||Vr(),ae,"unsupported-persistence-type")}(Se._delegate,Z),Z){case an.SESSION:Ke=O.a;break;case an.LOCAL:Ke=(yield O.ay(O.i)._isAvailable())?O.i:O.b;break;case an.NONE:Ke=O.L;break;default:return O.at("argument-error",{appName:Se._delegate.name})}return Se._delegate.setPersistence(Ke)})()}signInAndRetrieveDataWithCredential(Z){return this.signInWithCredential(Z)}signInAnonymously(){return In(this._delegate,O.X(this._delegate))}signInWithCredential(Z){return In(this._delegate,O.Y(this._delegate,Z))}signInWithCustomToken(Z){return In(this._delegate,O.$(this._delegate,Z))}signInWithEmailAndPassword(Z,Se){return In(this._delegate,O.a6(this._delegate,Z,Se))}signInWithEmailLink(Z,Se){return In(this._delegate,O.a9(this._delegate,Z,Se))}signInWithPhoneNumber(Z,Se){return yt(this._delegate,O.s(this._delegate,Z,Se))}signInWithPopup(Z){var Se=this;return(0,h.Z)(function*(){return ee(Le(),Se._delegate,"operation-not-supported-in-this-environment"),In(Se._delegate,O.c(Se._delegate,Z,_t))})()}signInWithRedirect(Z){var Se=this;return(0,h.Z)(function*(){return ee(Le(),Se._delegate,"operation-not-supported-in-this-environment"),yield An(Se._delegate),O.f(Se._delegate,Z,_t)})()}updateCurrentUser(Z){return this._delegate.updateCurrentUser(Z)}verifyPasswordResetCode(Z){return O.a4(this._delegate,Z)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ae.Persistence=an,ae})();function be(ae,J,Z){let Se=ae;"function"!=typeof ae&&({next:Se,error:J,complete:Z}=ae);const Ke=Se;return{next:bt=>Ke(bt&&X.getOrCreate(bt)),error:J,complete:Z}}function qe(ae,J){const Z=function Co(ae,J){const Z=zt();if(!Z)return[];const Se=O.az(mr,ae,J);switch(Z.getItem(Se)){case an.NONE:return[O.L];case an.LOCAL:return[O.i,O.a];case an.SESSION:return[O.a];default:return[]}}(ae,J);if("undefined"!=typeof self&&!Z.includes(O.i)&&Z.push(O.i),"undefined"!=typeof window)for(const Se of[O.b,O.a])Z.includes(Se)||Z.push(Se);return Z.includes(O.L)||Z.push(O.L),Z}class ht{constructor(){this.providerId="phone",this._delegate=new O.P(ps($.Z.auth()))}static credential(J,Z){return O.P.credential(J,Z)}verifyPhoneNumber(J,Z){return this._delegate.verifyPhoneNumber(J,Z)}unwrap(){return this._delegate}}ht.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,ht.PROVIDER_ID=O.P.PROVIDER_ID;const Ft=O.ax;class ln{constructor(J,Z,Se=$.Z.app()){var Ke;Ft(null===(Ke=Se.options)||void 0===Ke?void 0:Ke.apiKey,"invalid-api-key",{appName:Se.name}),this._delegate=new O.R(J,Z,Se.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Yt(ae){ae.INTERNAL.registerComponent(new fe.wA("auth-compat",J=>{const Z=J.getProvider("app-compat").getImmediate(),Se=J.getProvider("auth");return new B(Z,Se)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.M,FacebookAuthProvider:O.N,GithubAuthProvider:O.T,GoogleAuthProvider:O.Q,OAuthProvider:O.U,SAMLAuthProvider:O.V,PhoneAuthProvider:ht,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:ln,TwitterAuthProvider:O.W,Auth:B,AuthCredential:O.H,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ae.registerVersion("@firebase/auth-compat","0.2.17")}($.Z)},8306:(it,Ie,F)=>{F.d(Ie,{y:()=>G});var h=F(930),$=F(727),O=F(8822),se=F(4671);var fe=F(2416),de=F(576),_e=F(2806);let G=(()=>{class xe{constructor(He){He&&(this._subscribe=He)}lift(He){const ye=new xe;return ye.source=this,ye.operator=He,ye}subscribe(He,ye,we){const ke=function We(xe){return xe&&xe instanceof h.Lv||function oe(xe){return xe&&(0,de.m)(xe.next)&&(0,de.m)(xe.error)&&(0,de.m)(xe.complete)}(xe)&&(0,$.Nn)(xe)}(He)?He:new h.Hp(He,ye,we);return(0,_e.x)(()=>{const{operator:Be,source:je}=this;ke.add(Be?Be.call(ke,je):je?this._subscribe(ke):this._trySubscribe(ke))}),ke}_trySubscribe(He){try{return this._subscribe(He)}catch(ye){He.error(ye)}}forEach(He,ye){return new(ye=z(ye))((we,ke)=>{let Be;Be=this.subscribe(je=>{try{He(je)}catch(st){ke(st),null==Be||Be.unsubscribe()}},ke,we)})}_subscribe(He){var ye;return null===(ye=this.source)||void 0===ye?void 0:ye.subscribe(He)}[O.L](){return this}pipe(...He){return function Ee(xe){return 0===xe.length?se.y:1===xe.length?xe[0]:function(He){return xe.reduce((ye,we)=>we(ye),He)}}(He)(this)}toPromise(He){return new(He=z(He))((ye,we)=>{let ke;this.subscribe(Be=>ke=Be,Be=>we(Be),()=>ye(ke))})}}return xe.create=Fe=>new xe(Fe),xe})();function z(xe){var Fe;return null!==(Fe=null!=xe?xe:fe.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(it,Ie,F)=>{F.d(Ie,{x:()=>fe});var h=F(8306),$=F(727);const se=(0,F(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=F(8737),Ee=F(2806);let fe=(()=>{class _e extends h.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const oe=new de(this,this);return oe.operator=z,oe}_throwIfClosed(){if(this.closed)throw new se}next(z){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const oe=this.observers.slice();for(const We of oe)We.next(z)}})}error(z){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:oe}=this;for(;oe.length;)oe.shift().error(z)}})}complete(){(0,Ee.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:oe,isStopped:We,observers:xe}=this;return oe||We?$.Lc:(xe.push(z),new $.w0(()=>(0,he.P)(xe,z)))}_checkFinalizedStatuses(z){const{hasError:oe,thrownError:We,isStopped:xe}=this;oe?z.error(We):xe&&z.complete()}asObservable(){const z=new h.y;return z.source=this,z}}return _e.create=(G,z)=>new de(G,z),_e})();class de extends fe{constructor(G,z){super(),this.destination=G,this.source=z}next(G){var z,oe;null===(oe=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===oe||oe.call(z,G)}error(G){var z,oe;null===(oe=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===oe||oe.call(z,G)}complete(){var G,z;null===(z=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===z||z.call(G)}_subscribe(G){var z,oe;return null!==(oe=null===(z=this.source)||void 0===z?void 0:z.subscribe(G))&&void 0!==oe?oe:$.Lc}}},930:(it,Ie,F)=>{F.d(Ie,{Hp:()=>We,Lv:()=>oe});var h=F(576),$=F(727),O=F(2416),se=F(7849),he=F(5032);const Ee=_e("C",void 0,void 0);function _e(we,ke,Be){return{kind:we,value:ke,error:Be}}var G=F(3410),z=F(2806);class oe extends $.w0{constructor(ke){super(),this.isStopped=!1,ke?(this.destination=ke,(0,$.Nn)(ke)&&ke.add(this)):this.destination=ye}static create(ke,Be,je){return new We(ke,Be,je)}next(ke){this.isStopped?He(function de(we){return _e("N",we,void 0)}(ke),this):this._next(ke)}error(ke){this.isStopped?He(function fe(we){return _e("E",void 0,we)}(ke),this):(this.isStopped=!0,this._error(ke))}complete(){this.isStopped?He(Ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ke){this.destination.next(ke)}_error(ke){try{this.destination.error(ke)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class We extends oe{constructor(ke,Be,je){let st;if(super(),(0,h.m)(ke))st=ke;else if(ke){let Ne;({next:st,error:Be,complete:je}=ke),this&&O.v.useDeprecatedNextContext?(Ne=Object.create(ke),Ne.unsubscribe=()=>this.unsubscribe()):Ne=ke,st=null==st?void 0:st.bind(Ne),Be=null==Be?void 0:Be.bind(Ne),je=null==je?void 0:je.bind(Ne)}this.destination={next:st?xe(st):he.Z,error:xe(null!=Be?Be:Fe),complete:je?xe(je):he.Z}}}function xe(we,ke){return(...Be)=>{try{we(...Be)}catch(je){O.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(je):(0,se.h)(je)}}}function Fe(we){throw we}function He(we,ke){const{onStoppedNotification:Be}=O.v;Be&&G.z.setTimeout(()=>Be(we,ke))}const ye={closed:!0,next:he.Z,error:Fe,complete:he.Z}},727:(it,Ie,F)=>{F.d(Ie,{Lc:()=>Ee,w0:()=>he,Nn:()=>fe});var h=F(576);const O=(0,F(3888).d)(_e=>function(z){_e(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((oe,We)=>`${We+1}) ${oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var se=F(8737);class he{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const xe of z)xe.remove(this);else z.remove(this);const{initialTeardown:oe}=this;if((0,h.m)(oe))try{oe()}catch(xe){G=xe instanceof O?xe.errors:[xe]}const{_teardowns:We}=this;if(We){this._teardowns=null;for(const xe of We)try{de(xe)}catch(Fe){G=null!=G?G:[],Fe instanceof O?G=[...G,...Fe.errors]:G.push(Fe)}}if(G)throw new O(G)}}add(G){var z;if(G&&G!==this)if(this.closed)de(G);else{if(G instanceof he){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._teardowns=null!==(z=this._teardowns)&&void 0!==z?z:[]).push(G)}}_hasParent(G){const{_parentage:z}=this;return z===G||Array.isArray(z)&&z.includes(G)}_addParent(G){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(G),z):z?[z,G]:G}_removeParent(G){const{_parentage:z}=this;z===G?this._parentage=null:Array.isArray(z)&&(0,se.P)(z,G)}remove(G){const{_teardowns:z}=this;z&&(0,se.P)(z,G),G instanceof he&&G._removeParent(this)}}he.EMPTY=(()=>{const _e=new he;return _e.closed=!0,_e})();const Ee=he.EMPTY;function fe(_e){return _e instanceof he||_e&&"closed"in _e&&(0,h.m)(_e.remove)&&(0,h.m)(_e.add)&&(0,h.m)(_e.unsubscribe)}function de(_e){(0,h.m)(_e)?_e():_e.unsubscribe()}},2416:(it,Ie,F)=>{F.d(Ie,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(it,Ie,F)=>{F.d(Ie,{E:()=>$});const $=new(F(8306).y)(he=>he.complete())},8996:(it,Ie,F)=>{F.d(Ie,{D:()=>st});var h=F(8421),$=F(5363),O=F(9468),Ee=F(8306),de=F(2202),_e=F(576),G=F(9672);function oe(Ne,at){if(!Ne)throw new Error("Iterable cannot be null");return new Ee.y(Xe=>{(0,G.f)(Xe,at,()=>{const Te=Ne[Symbol.asyncIterator]();(0,G.f)(Xe,at,()=>{Te.next().then(q=>{q.done?Xe.complete():Xe.next(q.value)})},0,!0)})})}var We=F(3670),xe=F(8239),Fe=F(1144),He=F(6495),ye=F(2206),we=F(4532),ke=F(3260);function st(Ne,at){return at?function je(Ne,at){if(null!=Ne){if((0,We.c)(Ne))return function se(Ne,at){return(0,h.Xf)(Ne).pipe((0,O.R)(at),(0,$.Q)(at))}(Ne,at);if((0,Fe.z)(Ne))return function fe(Ne,at){return new Ee.y(Xe=>{let Te=0;return at.schedule(function(){Te===Ne.length?Xe.complete():(Xe.next(Ne[Te++]),Xe.closed||this.schedule())})})}(Ne,at);if((0,xe.t)(Ne))return function he(Ne,at){return(0,h.Xf)(Ne).pipe((0,O.R)(at),(0,$.Q)(at))}(Ne,at);if((0,ye.D)(Ne))return oe(Ne,at);if((0,He.T)(Ne))return function z(Ne,at){return new Ee.y(Xe=>{let Te;return(0,G.f)(Xe,at,()=>{Te=Ne[de.h](),(0,G.f)(Xe,at,()=>{let q,ie;try{({value:q,done:ie}=Te.next())}catch(pe){return void Xe.error(pe)}ie?Xe.complete():Xe.next(q)},0,!0)}),()=>(0,_e.m)(null==Te?void 0:Te.return)&&Te.return()})}(Ne,at);if((0,ke.L)(Ne))return function Be(Ne,at){return oe((0,ke.Q)(Ne),at)}(Ne,at)}throw(0,we.z)(Ne)}(Ne,at):(0,h.Xf)(Ne)}},8421:(it,Ie,F)=>{F.d(Ie,{Xf:()=>We});var h=F(5987),$=F(1144),O=F(8239),se=F(8306),he=F(3670),Ee=F(2206),fe=F(4532),de=F(6495),_e=F(3260),G=F(576),z=F(7849),oe=F(8822);function We(je){if(je instanceof se.y)return je;if(null!=je){if((0,he.c)(je))return function xe(je){return new se.y(st=>{const Ne=je[oe.L]();if((0,G.m)(Ne.subscribe))return Ne.subscribe(st);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(je);if((0,$.z)(je))return function Fe(je){return new se.y(st=>{for(let Ne=0;Ne<je.length&&!st.closed;Ne++)st.next(je[Ne]);st.complete()})}(je);if((0,O.t)(je))return function He(je){return new se.y(st=>{je.then(Ne=>{st.closed||(st.next(Ne),st.complete())},Ne=>st.error(Ne)).then(null,z.h)})}(je);if((0,Ee.D)(je))return we(je);if((0,de.T)(je))return function ye(je){return new se.y(st=>{for(const Ne of je)if(st.next(Ne),st.closed)return;st.complete()})}(je);if((0,_e.L)(je))return function ke(je){return we((0,_e.Q)(je))}(je)}throw(0,fe.z)(je)}function we(je){return new se.y(st=>{(function Be(je,st){var Ne,at,Xe,Te;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Ne=(0,h.KL)(je);!(at=yield Ne.next()).done;)if(st.next(at.value),st.closed)return}catch(q){Xe={error:q}}finally{try{at&&!at.done&&(Te=Ne.return)&&(yield Te.call(Ne))}finally{if(Xe)throw Xe.error}}st.complete()})})(je,st).catch(Ne=>st.error(Ne))})}},6451:(it,Ie,F)=>{F.d(Ie,{T:()=>Ee});var h=F(8189),$=F(8421),O=F(515),se=F(7669),he=F(8996);function Ee(...fe){const de=(0,se.yG)(fe),_e=(0,se._6)(fe,1/0),G=fe;return G.length?1===G.length?(0,$.Xf)(G[0]):(0,h.J)(_e)((0,he.D)(G,de)):O.E}},5403:(it,Ie,F)=>{F.d(Ie,{Q:()=>$});var h=F(930);class $ extends h.Lv{constructor(se,he,Ee,fe,de){super(se),this.onFinalize=de,this._next=he?function(_e){try{he(_e)}catch(G){se.error(G)}}:super._next,this._error=fe?function(_e){try{fe(_e)}catch(G){se.error(G)}finally{this.unsubscribe()}}:super._error,this._complete=Ee?function(){try{Ee()}catch(_e){se.error(_e)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;const{closed:he}=this;super.unsubscribe(),!he&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}},4004:(it,Ie,F)=>{F.d(Ie,{U:()=>O});var h=F(4482),$=F(5403);function O(se,he){return(0,h.e)((Ee,fe)=>{let de=0;Ee.subscribe(new $.Q(fe,_e=>{fe.next(se.call(he,_e,de++))}))})}},8189:(it,Ie,F)=>{F.d(Ie,{J:()=>O});var h=F(5577),$=F(4671);function O(se=1/0){return(0,h.z)($.y,se)}},5577:(it,Ie,F)=>{F.d(Ie,{z:()=>de});var h=F(4004),$=F(8421),O=F(4482),se=F(9672),he=F(5403),fe=F(576);function de(_e,G,z=1/0){return(0,fe.m)(G)?de((oe,We)=>(0,h.U)((xe,Fe)=>G(oe,xe,We,Fe))((0,$.Xf)(_e(oe,We))),z):("number"==typeof G&&(z=G),(0,O.e)((oe,We)=>function Ee(_e,G,z,oe,We,xe,Fe,He){const ye=[];let we=0,ke=0,Be=!1;const je=()=>{Be&&!ye.length&&!we&&G.complete()},st=at=>we<oe?Ne(at):ye.push(at),Ne=at=>{xe&&G.next(at),we++;let Xe=!1;(0,$.Xf)(z(at,ke++)).subscribe(new he.Q(G,Te=>{null==We||We(Te),xe?st(Te):G.next(Te)},()=>{Xe=!0},void 0,()=>{if(Xe)try{for(we--;ye.length&&we<oe;){const Te=ye.shift();Fe?(0,se.f)(G,Fe,()=>Ne(Te)):Ne(Te)}je()}catch(Te){G.error(Te)}}))};return _e.subscribe(new he.Q(G,st,()=>{Be=!0,je()})),()=>{null==He||He()}}(oe,We,_e,z)))}},5363:(it,Ie,F)=>{F.d(Ie,{Q:()=>se});var h=F(9672),$=F(4482),O=F(5403);function se(he,Ee=0){return(0,$.e)((fe,de)=>{fe.subscribe(new O.Q(de,_e=>(0,h.f)(de,he,()=>de.next(_e),Ee),()=>(0,h.f)(de,he,()=>de.complete(),Ee),_e=>(0,h.f)(de,he,()=>de.error(_e),Ee)))})}},3099:(it,Ie,F)=>{F.d(Ie,{B:()=>Ee});var h=F(8996),$=F(5698),O=F(7579),se=F(930),he=F(4482);function Ee(de={}){const{connector:_e=(()=>new O.x),resetOnError:G=!0,resetOnComplete:z=!0,resetOnRefCountZero:oe=!0}=de;return We=>{let xe=null,Fe=null,He=null,ye=0,we=!1,ke=!1;const Be=()=>{null==Fe||Fe.unsubscribe(),Fe=null},je=()=>{Be(),xe=He=null,we=ke=!1},st=()=>{const Ne=xe;je(),null==Ne||Ne.unsubscribe()};return(0,he.e)((Ne,at)=>{ye++,!ke&&!we&&Be();const Xe=He=null!=He?He:_e();at.add(()=>{ye--,0===ye&&!ke&&!we&&(Fe=fe(st,oe))}),Xe.subscribe(at),xe||(xe=new se.Hp({next:Te=>Xe.next(Te),error:Te=>{ke=!0,Be(),Fe=fe(je,G,Te),Xe.error(Te)},complete:()=>{we=!0,Be(),Fe=fe(je,z),Xe.complete()}}),(0,h.D)(Ne).subscribe(xe))})(We)}}function fe(de,_e,...G){return!0===_e?(de(),null):!1===_e?null:_e(...G).pipe((0,$.q)(1)).subscribe(()=>de())}},9468:(it,Ie,F)=>{F.d(Ie,{R:()=>$});var h=F(4482);function $(O,se=0){return(0,h.e)((he,Ee)=>{Ee.add(O.schedule(()=>he.subscribe(Ee),se))})}},5698:(it,Ie,F)=>{F.d(Ie,{q:()=>se});var h=F(515),$=F(4482),O=F(5403);function se(he){return he<=0?()=>h.E:(0,$.e)((Ee,fe)=>{let de=0;Ee.subscribe(new O.Q(fe,_e=>{++de<=he&&(fe.next(_e),he<=de&&fe.complete())}))})}},8505:(it,Ie,F)=>{F.d(Ie,{b:()=>he});var h=F(576),$=F(4482),O=F(5403),se=F(4671);function he(Ee,fe,de){const _e=(0,h.m)(Ee)||fe||de?{next:Ee,error:fe,complete:de}:Ee;return _e?(0,$.e)((G,z)=>{var oe;null===(oe=_e.subscribe)||void 0===oe||oe.call(_e);let We=!0;G.subscribe(new O.Q(z,xe=>{var Fe;null===(Fe=_e.next)||void 0===Fe||Fe.call(_e,xe),z.next(xe)},()=>{var xe;We=!1,null===(xe=_e.complete)||void 0===xe||xe.call(_e),z.complete()},xe=>{var Fe;We=!1,null===(Fe=_e.error)||void 0===Fe||Fe.call(_e,xe),z.error(xe)},()=>{var xe,Fe;We&&(null===(xe=_e.unsubscribe)||void 0===xe||xe.call(_e)),null===(Fe=_e.finalize)||void 0===Fe||Fe.call(_e)}))}):se.y}},4408:(it,Ie,F)=>{F.d(Ie,{o:()=>he});var h=F(727);class $ extends h.w0{constructor(fe,de){super()}schedule(fe,de=0){return this}}const O={setInterval(...Ee){const{delegate:fe}=O;return((null==fe?void 0:fe.setInterval)||setInterval)(...Ee)},clearInterval(Ee){const{delegate:fe}=O;return((null==fe?void 0:fe.clearInterval)||clearInterval)(Ee)},delegate:void 0};var se=F(8737);class he extends ${constructor(fe,de){super(fe,de),this.scheduler=fe,this.work=de,this.pending=!1}schedule(fe,de=0){if(this.closed)return this;this.state=fe;const _e=this.id,G=this.scheduler;return null!=_e&&(this.id=this.recycleAsyncId(G,_e,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(G,this.id,de),this}requestAsyncId(fe,de,_e=0){return O.setInterval(fe.flush.bind(fe,this),_e)}recycleAsyncId(fe,de,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return de;O.clearInterval(de)}execute(fe,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(fe,de);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,de){let G,_e=!1;try{this.work(fe)}catch(z){_e=!0,G=z||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:fe,scheduler:de}=this,{actions:_e}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(_e,this),null!=fe&&(this.id=this.recycleAsyncId(de,fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(it,Ie,F)=>{F.d(Ie,{v:()=>O});var h=F(6063);class ${constructor(he,Ee=$.now){this.schedulerActionCtor=he,this.now=Ee}schedule(he,Ee=0,fe){return new this.schedulerActionCtor(this,he).schedule(fe,Ee)}}$.now=h.l.now;class O extends ${constructor(he,Ee=$.now){super(he,Ee),this.actions=[],this._active=!1,this._scheduled=void 0}flush(he){const{actions:Ee}=this;if(this._active)return void Ee.push(he);let fe;this._active=!0;do{if(fe=he.execute(he.state,he.delay))break}while(he=Ee.shift());if(this._active=!1,fe){for(;he=Ee.shift();)he.unsubscribe();throw fe}}}},4986:(it,Ie,F)=>{F.d(Ie,{z:()=>O});var h=F(4408);const O=new(F(7565).v)(h.o)},6063:(it,Ie,F)=>{F.d(Ie,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(it,Ie,F)=>{F.d(Ie,{z:()=>h});const h={setTimeout(...$){const{delegate:O}=h;return((null==O?void 0:O.setTimeout)||setTimeout)(...$)},clearTimeout($){const{delegate:O}=h;return((null==O?void 0:O.clearTimeout)||clearTimeout)($)},delegate:void 0}},2202:(it,Ie,F)=>{F.d(Ie,{h:()=>$});const $=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(it,Ie,F)=>{F.d(Ie,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(it,Ie,F)=>{F.d(Ie,{_6:()=>Ee,jO:()=>se,yG:()=>he});var h=F(576);function O(fe){return fe[fe.length-1]}function se(fe){return(0,h.m)(O(fe))?fe.pop():void 0}function he(fe){return function $(fe){return fe&&(0,h.m)(fe.schedule)}(O(fe))?fe.pop():void 0}function Ee(fe,de){return"number"==typeof O(fe)?fe.pop():de}},8737:(it,Ie,F)=>{function h($,O){if($){const se=$.indexOf(O);0<=se&&$.splice(se,1)}}F.d(Ie,{P:()=>h})},3888:(it,Ie,F)=>{function h($){const se=$(he=>{Error.call(he),he.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}F.d(Ie,{d:()=>h})},2806:(it,Ie,F)=>{F.d(Ie,{x:()=>O,O:()=>se});var h=F(2416);let $=null;function O(he){if(h.v.useDeprecatedSynchronousErrorHandling){const Ee=!$;if(Ee&&($={errorThrown:!1,error:null}),he(),Ee){const{errorThrown:fe,error:de}=$;if($=null,fe)throw de}}else he()}function se(he){h.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=he)}},9672:(it,Ie,F)=>{function h($,O,se,he=0,Ee=!1){const fe=O.schedule(function(){se(),Ee?$.add(this.schedule(null,he)):this.unsubscribe()},he);if($.add(fe),!Ee)return fe}F.d(Ie,{f:()=>h})},4671:(it,Ie,F)=>{function h($){return $}F.d(Ie,{y:()=>h})},1144:(it,Ie,F)=>{F.d(Ie,{z:()=>h});const h=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(it,Ie,F)=>{F.d(Ie,{D:()=>$});var h=F(576);function $(O){return Symbol.asyncIterator&&(0,h.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(it,Ie,F)=>{function h($){return"function"==typeof $}F.d(Ie,{m:()=>h})},3670:(it,Ie,F)=>{F.d(Ie,{c:()=>O});var h=F(8822),$=F(576);function O(se){return(0,$.m)(se[h.L])}},6495:(it,Ie,F)=>{F.d(Ie,{T:()=>O});var h=F(2202),$=F(576);function O(se){return(0,$.m)(null==se?void 0:se[h.h])}},8239:(it,Ie,F)=>{F.d(Ie,{t:()=>$});var h=F(576);function $(O){return(0,h.m)(null==O?void 0:O.then)}},3260:(it,Ie,F)=>{F.d(Ie,{Q:()=>O,L:()=>se});var h=F(5987),$=F(576);function O(he){return(0,h.FC)(this,arguments,function*(){const fe=he.getReader();try{for(;;){const{value:de,done:_e}=yield(0,h.qq)(fe.read());if(_e)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(de)}}finally{fe.releaseLock()}})}function se(he){return(0,$.m)(null==he?void 0:he.getReader)}},4482:(it,Ie,F)=>{F.d(Ie,{A:()=>$,e:()=>O});var h=F(576);function $(se){return(0,h.m)(null==se?void 0:se.lift)}function O(se){return he=>{if($(he))return he.lift(function(Ee){try{return se(Ee,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(it,Ie,F)=>{function h(){}F.d(Ie,{Z:()=>h})},7849:(it,Ie,F)=>{F.d(Ie,{h:()=>O});var h=F(2416),$=F(3410);function O(se){$.z.setTimeout(()=>{const{onUnhandledError:he}=h.v;if(!he)throw se;he(se)})}},4532:(it,Ie,F)=>{function h($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ie,{z:()=>h})},5987:(it,Ie,F)=>{function de(q,ie,pe,ve){return new(pe||(pe=Promise))(function(ue,St){function Gt(xt){try{ut(ve.next(xt))}catch(ar){St(ar)}}function Xn(xt){try{ut(ve.throw(xt))}catch(ar){St(ar)}}function ut(xt){xt.done?ue(xt.value):function Pe(ue){return ue instanceof pe?ue:new pe(function(St){St(ue)})}(xt.value).then(Gt,Xn)}ut((ve=ve.apply(q,ie||[])).next())})}function ye(q){return this instanceof ye?(this.v=q,this):new ye(q)}function we(q,ie,pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,ve=pe.apply(q,ie||[]),ue=[];return Pe={},St("next"),St("throw"),St("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function St(cn){ve[cn]&&(Pe[cn]=function(gr){return new Promise(function(_n,lr){ue.push([cn,gr,_n,lr])>1||Gt(cn,gr)})})}function Gt(cn,gr){try{!function Xn(cn){cn.value instanceof ye?Promise.resolve(cn.value.v).then(ut,xt):ar(ue[0][2],cn)}(ve[cn](gr))}catch(_n){ar(ue[0][3],_n)}}function ut(cn){Gt("next",cn)}function xt(cn){Gt("throw",cn)}function ar(cn,gr){cn(gr),ue.shift(),ue.length&&Gt(ue[0][0],ue[0][1])}}function Be(q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,ie=q[Symbol.asyncIterator];return ie?ie.call(q):(q=function oe(q){var ie="function"==typeof Symbol&&Symbol.iterator,pe=ie&&q[ie],ve=0;if(pe)return pe.call(q);if(q&&"number"==typeof q.length)return{next:function(){return q&&ve>=q.length&&(q=void 0),{value:q&&q[ve++],done:!q}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(q),pe={},ve("next"),ve("throw"),ve("return"),pe[Symbol.asyncIterator]=function(){return this},pe);function ve(ue){pe[ue]=q[ue]&&function(St){return new Promise(function(Gt,Xn){!function Pe(ue,St,Gt,Xn){Promise.resolve(Xn).then(function(ut){ue({value:ut,done:Gt})},St)}(Gt,Xn,(St=q[ue](St)).done,St.value)})}}}F.d(Ie,{mG:()=>de,qq:()=>ye,FC:()=>we,KL:()=>Be})},5e3:(it,Ie,F)=>{F.d(Ie,{deG:()=>Xl,tb:()=>$I,AFp:()=>UI,ip1:()=>EE,CZH:()=>lf,hGG:()=>gT,z2F:()=>df,sBO:()=>nT,Sil:()=>_y,_Vd:()=>$o,EJc:()=>GI,SBq:()=>Wh,qLn:()=>ap,vpe:()=>Ho,tBr:()=>Wn,XFs:()=>gt,OlP:()=>vn,zs3:()=>bs,ZZ4:()=>by,aQg:()=>gg,soG:()=>my,YKP:()=>eE,h0i:()=>Zh,PXZ:()=>cg,R0b:()=>ds,FiY:()=>zn,Lbi:()=>jI,g9A:()=>BI,Qsj:()=>uI,FYo:()=>zh,JOm:()=>ba,tp0:()=>is,Rgc:()=>Pa,dDg:()=>cf,q4F:()=>_i,GfV:()=>Xw,s_b:()=>ty,ifc:()=>zt,eFA:()=>KI,G48:()=>fg,Gpc:()=>z,X6Q:()=>tT,_c5:()=>GE,VLi:()=>DE,c2e:()=>HI,zSh:()=>qv,wAp:()=>Rt,vHH:()=>Fe,cg1:()=>F_,kL8:()=>$p,dqk:()=>Et,sIi:()=>Eh,CqO:()=>Ah,QGY:()=>w_,F4k:()=>mw,RDi:()=>Ul,AaK:()=>de,qOj:()=>Qv,TTD:()=>Do,_Bn:()=>Mu,xp6:()=>ch,uIk:()=>Tp,ekj:()=>Dw,Suo:()=>us,Xpm:()=>ht,lG2:()=>Se,Yz7:()=>_n,cJS:()=>Ei,oAB:()=>ae,Yjl:()=>Ke,Y36:()=>Rp,_UZ:()=>gw,qZA:()=>Yc,TgZ:()=>y_,EpF:()=>v_,n5z:()=>Ro,LFG:()=>K,$8M:()=>Zt,$Z:()=>DC,NdJ:()=>Mp,CRH:()=>pE,oxw:()=>xC,ALo:()=>_I,lcZ:()=>lE,Q6J:()=>wl,iGM:()=>Sl,MAs:()=>l_,CHM:()=>$l,LSH:()=>v,YNc:()=>Dp,_uU:()=>FC,Oqu:()=>Lh,hij:()=>Du,Gf:()=>CI});var h=F(7579),$=F(727),O=F(8306),se=F(6451),he=F(3099);function Ee(s){for(let o in s)if(s[o]===Ee)return o;throw Error("Could not find renamed property on target object.")}function fe(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function de(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(de).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function _e(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=Ee({__forward_ref__:Ee});function z(s){return s.__forward_ref__=z,s.toString=function(){return de(this())},s}function oe(s){return We(s)?s():s}function We(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===z}class Fe extends Error{constructor(o,l){super(function He(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,l)),this.code=o}}function ye(s){return"string"==typeof s?s:null==s?"":String(s)}function we(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ye(s)}function st(s,o){const l=o?` in ${o}`:"";throw new Fe(-201,`No provider for ${we(s)} found${l}`)}function ut(s,o){null==s&&function xt(s,o,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function _n(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Ei(s){return{providers:s.providers||[],imports:s.imports||[]}}function Un(s){return bi(s,Vr)||bi(s,Le)}function bi(s,o){return s.hasOwnProperty(o)?s[o]:null}function Ps(s){return s&&(s.hasOwnProperty(Ci)||s.hasOwnProperty(ur))?s[Ci]:null}const Vr=Ee({\u0275prov:Ee}),Ci=Ee({\u0275inj:Ee}),Le=Ee({ngInjectableDef:Ee}),ur=Ee({ngInjectorDef:Ee});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let Yr;function an(s){const o=Yr;return Yr=s,o}function ai(s,o,l){const c=Un(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&gt.Optional?null:void 0!==o?o:void st(de(s),"Injector")}function Ar(s){return{toString:s}.toString()}var An=(()=>((An=An||{})[An.OnPush=0]="OnPush",An[An.Default=1]="Default",An))(),zt=(()=>{return(s=zt||(zt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",zt;var s})();const mt="undefined"!=typeof globalThis&&globalThis,_t="undefined"!=typeof window&&window,ps="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Et=mt||"undefined"!=typeof global&&global||_t||ps,In={},yt=[],Y=Ee({\u0275cmp:Ee}),H=Ee({\u0275dir:Ee}),X=Ee({\u0275pipe:Ee}),ee=Ee({\u0275mod:Ee}),B=Ee({\u0275fac:Ee}),be=Ee({__NG_ELEMENT_ID__:Ee});let qe=0;function ht(s){return Ar(()=>{const l={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===An.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||yt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||zt.Emulated,id:"c",styles:s.styles||yt,_:null,setInput:null,schemas:s.schemas||null,tView:null},f=s.directives,m=s.features,w=s.pipes;return c.id+=qe++,c.inputs=Z(s.inputs,l),c.outputs=Z(s.outputs),m&&m.forEach(b=>b(c)),c.directiveDefs=f?()=>("function"==typeof f?f():f).map(ln):null,c.pipeDefs=w?()=>("function"==typeof w?w():w).map(xn):null,c})}function ln(s){return vt(s)||function bt(s){return s[H]||null}(s)}function xn(s){return function Qt(s){return s[X]||null}(s)}const Yt={};function ae(s){return Ar(()=>{const o={type:s.type,bootstrap:s.bootstrap||yt,declarations:s.declarations||yt,imports:s.imports||yt,exports:s.exports||yt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Yt[s.id]=s.type),o})}function Z(s,o){if(null==s)return In;const l={};for(const c in s)if(s.hasOwnProperty(c)){let f=s[c],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),l[f]=c,o&&(o[f]=m)}return l}const Se=ht;function Ke(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function vt(s){return s[Y]||null}function nn(s,o){const l=s[ee]||null;if(!l&&!0===o)throw new Error(`Type ${de(s)} does not have '\u0275mod' property.`);return l}function zi(s){return Array.isArray(s)&&"object"==typeof s[1]}function Zi(s){return Array.isArray(s)&&!0===s[1]}function Ad(s){return 0!=(8&s.flags)}function xd(s){return 2==(2&s.flags)}function Bn(s){return 1==(1&s.flags)}function Ki(s){return null!==s.template}function Ff(s){return 0!=(512&s[2])}function ks(s,o){return s.hasOwnProperty(B)?s[B]:null}class tc{constructor(o,l,c){this.previousValue=o,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function Do(){return Za}function Za(s){return s.type.prototype.ngOnChanges&&(s.setInput=Fl),nc}function nc(){const s=Ll(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===In)s.previous=o;else for(let c in o)l[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Fl(s,o,l,c){const f=Ll(s)||function ta(s,o){return s[ms]=o}(s,{previous:In,current:null}),m=f.current||(f.current={}),w=f.previous,b=this.declaredInputs[l],I=w[b];m[b]=new tc(I&&I.currentValue,o,w===In),s[c]=o}Do.ngInherit=!0;const ms="__ngSimpleChanges__";function Ll(s){return s[ms]||null}let kd;function Ul(s){kd=s}function Pn(s){return!!s.listen}const ui={createRenderer:(s,o)=>function ic(){return void 0!==kd?kd:"undefined"!=typeof document?document:void 0}()};function $n(s){for(;Array.isArray(s);)s=s[0];return s}function Oi(s,o){return $n(o[s])}function Hn(s,o){return $n(o[s.index])}function Ls(s,o){return s.data[o]}function Vs(s,o){return s[o]}function Ti(s,o){const l=o[s];return zi(l)?l:l[0]}function wr(s){return 4==(4&s[2])}function Ka(s){return 128==(128&s[2])}function Yi(s,o){return null==o?null:s[o]}function _s(s){s[18]=0}function Ya(s,o){s[5]+=o;let l=s,c=s[3];for(;null!==c&&(1===o&&1===l[5]||-1===o&&0===l[5]);)c[5]+=o,l=c,c=c[3]}const At={lFrame:Wl(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Qa(){return At.bindingsEnabled}function Me(){return At.lFrame.lView}function Xt(){return At.lFrame.tView}function $l(s){return At.lFrame.contextLView=s,s[8]}function Nn(){let s=ia();for(;null!==s&&64===s.type;)s=s.parent;return s}function ia(){return At.lFrame.currentTNode}function ei(s,o){const l=At.lFrame;l.currentTNode=s,l.isParent=o}function lo(){return At.lFrame.isParent}function So(){return At.isInCheckNoChangesMode}function sa(s){At.isInCheckNoChangesMode=s}function Qi(){return At.lFrame.bindingIndex++}function uc(s,o){const l=At.lFrame;l.bindingIndex=l.bindingRootIndex=s,el(o)}function el(s){At.lFrame.currentDirectiveIndex=s}function cc(){return At.lFrame.currentQueryIndex}function Ao(s){At.lFrame.currentQueryIndex=s}function Ld(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function tl(s,o,l){if(l&gt.SkipSelf){let f=o,m=s;for(;!(f=f.parent,null!==f||l&gt.Host||(f=Ld(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;o=f,s=m}const c=At.lFrame=dc();return c.currentTNode=o,c.lView=s,!0}function ql(s){const o=dc(),l=s[1];At.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function dc(){const s=At.lFrame,o=null===s?null:s.child;return null===o?Wl(s):o}function Wl(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function nl(){const s=At.lFrame;return At.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const hc=nl;function aa(){const s=nl();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Nr(){return At.lFrame.selectedIndex}function Mr(s){At.lFrame.selectedIndex=s}function Fn(){const s=At.lFrame;return Ls(s.tView,s.selectedIndex)}function rl(s,o){for(let l=o.directiveStart,c=o.directiveEnd;l<c;l++){const m=s.data[l].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:b,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:R}=m;w&&(s.contentHooks||(s.contentHooks=[])).push(-l,w),b&&((s.contentHooks||(s.contentHooks=[])).push(l,b),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,b)),I&&(s.viewHooks||(s.viewHooks=[])).push(-l,I),A&&((s.viewHooks||(s.viewHooks=[])).push(l,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,A)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(l,R)}}function la(s,o,l){mc(s,o,3,l)}function ua(s,o,l,c){(3&s[2])===l&&mc(s,o,l,c)}function Ud(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function mc(s,o,l,c){const m=null!=c?c:-1,w=o.length-1;let b=0;for(let I=void 0!==c?65535&s[18]:0;I<w;I++)if("number"==typeof o[I+1]){if(b=o[I],null!=c&&b>=c)break}else o[I]<0&&(s[18]+=65536),(b<m||-1==m)&&(rm(s,l,o,I),s[18]=(4294901760&s[18])+I+2),I++}function rm(s,o,l,c){const f=l[c]<0,m=l[c+1],b=s[f?-l[c]:l[c]];if(f){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(b)}finally{}}}else try{m.call(b)}finally{}}class ir{constructor(o,l,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function vc(s,o,l){const c=Pn(s);let f=0;for(;f<l.length;){const m=l[f];if("number"==typeof m){if(0!==m)break;f++;const w=l[f++],b=l[f++],I=l[f++];c?s.setAttribute(o,b,I,w):o.setAttributeNS(w,b,I)}else{const w=m,b=l[++f];js(w)?c&&s.setProperty(o,w,b):c?s.setAttribute(o,w,b):o.setAttribute(w,b),f++}}return f}function Tn(s){return 3===s||4===s||6===s}function js(s){return 64===s.charCodeAt(0)}function lt(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let c=0;c<o.length;c++){const f=o[c];"number"==typeof f?l=f:0===l||$s(s,l,f,null,-1===l||2===l?o[++c]:null)}}return s}function $s(s,o,l,c,f){let m=0,w=s.length;if(-1===o)w=-1;else for(;m<s.length;){const b=s[m++];if("number"==typeof b){if(b===o){w=-1;break}if(b>o){w=m-1;break}}}for(;m<s.length;){const b=s[m];if("number"==typeof b)break;if(b===l){if(null===c)return void(null!==f&&(s[m+1]=f));if(c===s[m+1])return void(s[m+2]=f)}m++,null!==c&&m++,null!==f&&m++}-1!==w&&(s.splice(w,0,o),m=w+1),s.splice(m++,0,l),null!==c&&s.splice(m++,0,c),null!==f&&s.splice(m++,0,f)}function Xi(s){return-1!==s}function Er(s){return 32767&s}function il(s,o){let l=function Hf(s){return s>>16}(s),c=o;for(;l>0;)c=c[15],l--;return c}let Bd=!0;function sl(s){const o=Bd;return Bd=s,o}let Ct=0;function ol(s,o){const l=Ql(s,o);if(-1!==l)return l;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Yl(c.data,s),Yl(o,null),Yl(c.blueprint,null));const f=jn(s,o),m=s.injectorIndex;if(Xi(f)){const w=Er(f),b=il(f,o),I=b[1].data;for(let A=0;A<8;A++)o[m+A]=b[w+A]|I[w+A]}return o[m+8]=f,m}function Yl(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Ql(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function jn(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,f=o;for(;null!==f;){const m=f[1],w=m.type;if(c=2===w?m.declTNode:1===w?f[6]:null,null===c)return-1;if(l++,f=f[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function da(s,o,l){!function Ec(s,o,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(be)&&(c=l[be]),null==c&&(c=l[be]=Ct++);const f=255&c;o.data[s+(f>>5)]|=1<<f}(s,o,l)}function jd(s,o,l){if(l&gt.Optional)return s;st(o,"NodeInjector")}function ci(s,o,l,c){if(l&gt.Optional&&void 0===c&&(c=null),0==(l&(gt.Self|gt.Host))){const f=s[9],m=an(void 0);try{return f?f.get(o,c,l&gt.Optional):ai(o,c,l&gt.Optional)}finally{an(m)}}return jd(c,o,l)}function Jl(s,o,l,c=gt.Default,f){if(null!==s){const m=function bc(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(be)?s[be]:void 0;return"number"==typeof o?o>=0?255&o:xo:o}(l);if("function"==typeof m){if(!tl(o,s,c))return c&gt.Host?jd(f,l,c):ci(o,l,c,f);try{const w=m(c);if(null!=w||c&gt.Optional)return w;st(l)}finally{hc()}}else if("number"==typeof m){let w=null,b=Ql(s,o),I=-1,A=c&gt.Host?o[16][6]:null;for((-1===b||c&gt.SkipSelf)&&(I=-1===b?jn(s,o):o[b+8],-1!==I&&Cc(c,!1)?(w=o[1],b=Er(I),o=il(I,o)):b=-1);-1!==b;){const R=o[1];if(co(m,b,R.data)){const V=$d(b,o,l,w,c,A);if(V!==ha)return V}I=o[b+8],-1!==I&&Cc(c,o[1].data[b+8]===A)&&co(m,b,o)?(w=R,b=Er(I),o=il(I,o)):b=-1}}}return ci(o,l,c,f)}const ha={};function xo(){return new Qn(Nn(),Me())}function $d(s,o,l,c,f,m){const w=o[1],b=w.data[s+8],R=fa(b,w,l,null==c?xd(b)&&Bd:c!=w&&0!=(3&b.type),f&gt.Host&&m===b);return null!==R?di(o,w,R,b):ha}function fa(s,o,l,c,f){const m=s.providerIndexes,w=o.data,b=1048575&m,I=s.directiveStart,R=m>>20,W=f?b+R:s.directiveEnd;for(let re=c?b:b+R;re<W;re++){const De=w[re];if(re<I&&l===De||re>=I&&De.type===l)return re}if(f){const re=w[I];if(re&&Ki(re)&&re.type===l)return I}return null}function di(s,o,l,c){let f=s[l];const m=o.data;if(function _c(s){return s instanceof ir}(f)){const w=f;w.resolving&&function ke(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Fe(-200,`Circular dependency in DI detected for ${s}${l}`)}(we(m[l]));const b=sl(w.canSeeViewProviders);w.resolving=!0;const I=w.injectImpl?an(w.injectImpl):null;tl(s,c,gt.Default);try{f=s[l]=w.factory(void 0,m,s,c),o.firstCreatePass&&l>=c.directiveStart&&function Xy(s,o,l){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:m}=o.type.prototype;if(c){const w=Za(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,w),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,w)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,f),m&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,m),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,m))}(l,m[l],o)}finally{null!==I&&an(I),sl(b),w.resolving=!1,hc()}}return f}function co(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function Cc(s,o){return!(s&gt.Self||s&gt.Host&&o)}class Qn{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,c){return Jl(this._tNode,this._lView,o,c,l)}}function Ro(s){return Ar(()=>{const o=s.prototype.constructor,l=o[B]||ll(o),c=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==c;){const m=f[B]||ll(f);if(m&&m!==l)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function ll(s){return We(s)?()=>{const o=ll(oe(s));return o&&o()}:ks(s)}function Zt(s){return function al(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const c=l.length;let f=0;for(;f<c;){const m=l[f];if(Tn(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<c&&"string"==typeof l[f];)f++;else{if(m===o)return l[f+1];f+=2}}}return null}(Nn(),s)}const es="__parameters__";function Si(s,o,l){return Ar(()=>{const c=function Di(s){return function(...l){if(s){const c=s(...l);for(const f in c)this[f]=c[f]}}}(o);function f(...m){if(this instanceof f)return c.apply(this,m),this;const w=new f(...m);return b.annotation=w,b;function b(I,A,R){const V=I.hasOwnProperty(es)?I[es]:Object.defineProperty(I,es,{value:[]})[es];for(;V.length<=R;)V.push(null);return(V[R]=V[R]||[]).push(w),I}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class vn{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=_n({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Xl=new vn("AnalyzeForEntryComponents");function Fi(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(o===s&&(o=s.slice(0,l)),Fi(c,o)):o!==s&&o.push(c)}return o}function Hs(s,o){s.forEach(l=>Array.isArray(l)?Hs(l,o):o(l))}function qd(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function _a(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function It(s,o,l){let c=ti(s,o);return c>=0?s[1|c]=l:(c=~c,function Ic(s,o,l,c){let f=s.length;if(f==o)s.push(l,c);else if(1===f)s.push(c,s[0]),s[0]=l;else{for(f--,s.push(s[f-1],s[f]);f>o;)s[f]=s[f-2],f--;s[o]=l,s[o+1]=c}}(s,c,o,l)),c}function dl(s,o){const l=ti(s,o);if(l>=0)return s[1|l]}function ti(s,o){return function Tc(s,o,l){let c=0,f=s.length>>l;for(;f!==c;){const m=c+(f-c>>1),w=s[m<<l];if(o===w)return m<<l;w>o?f=m:c=m+1}return~(f<<l)}(s,o,1)}const qn={},Ac="__NG_DI_FLAG__",hl="ngTempTokenPath",nu=/\n/gm,iu="__source",T=Ee({provide:String,useValue:Ee});let S;function P(s){const o=S;return S=s,o}function U(s,o=gt.Default){if(void 0===S)throw new Fe(203,"");return null===S?ai(s,void 0,o):S.get(s,o&gt.Optional?null:void 0,o)}function K(s,o=gt.Default){return(function on(){return Yr}()||U)(oe(s),o)}function Qe(s){const o=[];for(let l=0;l<s.length;l++){const c=oe(s[l]);if(Array.isArray(c)){if(0===c.length)throw new Fe(900,"");let f,m=gt.Default;for(let w=0;w<c.length;w++){const b=c[w],I=Lt(b);"number"==typeof I?-1===I?f=b.token:m|=I:f=b}o.push(K(f,m))}else o.push(K(c))}return o}function ct(s,o){return s[Ac]=o,s.prototype[Ac]=o,s}function Lt(s){return s[Ac]}const Wn=ct(Si("Inject",s=>({token:s})),-1),zn=ct(Si("Optional"),8),is=ct(Si("SkipSelf"),4);class Jd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function fo(s){return s instanceof Jd?s.changingThisBreaksApplicationSecurity:s}const lv=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,th=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Cr=(()=>((Cr=Cr||{})[Cr.NONE=0]="NONE",Cr[Cr.HTML=1]="HTML",Cr[Cr.STYLE=2]="STYLE",Cr[Cr.SCRIPT=3]="SCRIPT",Cr[Cr.URL=4]="URL",Cr[Cr.RESOURCE_URL=5]="RESOURCE_URL",Cr))();function v(s){const o=function Ve(){const s=Me();return s&&s[12]}();return o?o.sanitize(Cr.URL,s)||"":function Nc(s,o){const l=function iv(s){return s instanceof Jd&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}(s,"URL")?fo(s):function nh(s){return(s=String(s)).match(lv)||s.match(th)?s:"unsafe:"+s}(ye(s))}const Pr="__ngContext__";function Zn(s,o){s[Pr]=o}function kc(s){const o=function Ea(s){return s[Pr]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function hv(s){return s.ngOriginalError}function op(s,...o){s.error(...o)}class ap{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),c=function YD(s){return s&&s.ngErrorLogger||op}(o);c(this._console,"ERROR",o),l&&c(this._console,"ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&hv(o);for(;l&&hv(l);)l=hv(l);return l||null}}const eb=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Et))();function gl(s){return s instanceof Function?s():s}var ba=(()=>((ba=ba||{})[ba.Important=1]="Important",ba[ba.DashCase=2]="DashCase",ba))();function gv(s,o){return undefined(s,o)}function Lc(s){const o=s[3];return Zi(o)?o[3]:o}function mv(s){return _v(s[13])}function lp(s){return _v(s[4])}function _v(s){for(;null!==s&&!Zi(s);)s=s[4];return s}function lh(s,o,l,c,f){if(null!=c){let m,w=!1;Zi(c)?m=c:zi(c)&&(w=!0,c=c[0]);const b=$n(c);0===s&&null!==l?null==f?mu(o,l,b):uh(o,l,b,f||null,!0):1===s&&null!==l?uh(o,l,b,f||null,!0):2===s?function fb(s,o,l){const c=Sm(s,o);c&&function gS(s,o,l,c){Pn(s)?s.removeChild(o,l,c):o.removeChild(l)}(s,c,o,l)}(o,b,w):3===s&&o.destroyNode(b),null!=m&&function gb(s,o,l,c,f){const m=l[7];m!==$n(l)&&lh(o,s,c,m,f);for(let b=10;b<l.length;b++){const I=l[b];up(I[1],I,s,o,c,m)}}(o,s,m,l,f)}}function vv(s,o,l){return Pn(s)?s.createElement(o,l):null===l?s.createElement(o):s.createElementNS(l,o)}function Vc(s,o){const l=s[9],c=l.indexOf(o),f=o[3];1024&o[2]&&(o[2]&=-1025,Ya(f,-1)),l.splice(c,1)}function Ev(s,o){if(s.length<=10)return;const l=10+o,c=s[l];if(c){const f=c[17];null!==f&&f!==s&&Vc(f,c),o>0&&(s[l-1][4]=c[4]);const m=_a(s,10+o);!function hS(s,o){up(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const w=m[19];null!==w&&w.detachView(m[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function ob(s,o){if(!(256&o[2])){const l=o[11];Pn(l)&&l.destroyNode&&up(s,o,l,3,null,null),function Cm(s){let o=s[13];if(!o)return Tm(s[1],s);for(;o;){let l=null;if(zi(o))l=o[13];else{const c=o[10];c&&(l=c)}if(!l){for(;o&&!o[4]&&o!==s;)zi(o)&&Tm(o[1],o),o=o[3];null===o&&(o=s),zi(o)&&Tm(o[1],o),l=o&&o[4]}o=l}}(o)}}function Tm(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function ab(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const f=o[l[c]];if(!(f instanceof ir)){const m=l[c+1];if(Array.isArray(m))for(let w=0;w<m.length;w+=2){const b=f[m[w]],I=m[w+1];try{I.call(b)}finally{}}else try{m.call(f)}finally{}}}}(s,o),function pS(s,o){const l=s.cleanup,c=o[7];let f=-1;if(null!==l)for(let m=0;m<l.length-1;m+=2)if("string"==typeof l[m]){const w=l[m+1],b="function"==typeof w?w(o):$n(o[w]),I=c[f=l[m+2]],A=l[m+3];"boolean"==typeof A?b.removeEventListener(l[m],I,A):A>=0?c[f=A]():c[f=-A].unsubscribe(),m+=2}else{const w=c[f=l[m+1]];l[m].call(w)}if(null!==c){for(let m=f+1;m<c.length;m++)c[m]();o[7]=null}}(s,o),1===o[1].type&&Pn(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&Zi(o[3])){l!==o[3]&&Vc(l,o);const c=o[19];null!==c&&c.detachView(s)}}}function bv(s,o,l){return function Dm(s,o,l){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return l[0];if(2&c.flags){const f=s.data[c.directiveStart].encapsulation;if(f===zt.None||f===zt.Emulated)return null}return Hn(c,l)}(s,o.parent,l)}function uh(s,o,l,c,f){Pn(s)?s.insertBefore(o,l,c,f):o.insertBefore(l,c,f)}function mu(s,o,l){Pn(s)?s.appendChild(o,l):o.appendChild(l)}function Cv(s,o,l,c,f){null!==c?uh(s,o,l,c,f):mu(s,o,l)}function Sm(s,o){return Pn(s)?s.parentNode(o):o.parentNode}let db=function cb(s,o,l){return 40&s.type?Hn(s,l):null};function xm(s,o,l,c){const f=bv(s,c,o),m=o[11],b=function ub(s,o,l){return db(s,o,l)}(c.parent||o[6],c,o);if(null!=f)if(Array.isArray(l))for(let I=0;I<l.length;I++)Cv(m,f,l[I],b,!1);else Cv(m,f,l,b,!1)}function Rm(s,o){if(null!==o){const l=o.type;if(3&l)return Hn(o,s);if(4&l)return Iv(-1,s[o.index]);if(8&l){const c=o.child;if(null!==c)return Rm(s,c);{const f=s[o.index];return Zi(f)?Iv(-1,f):$n(f)}}if(32&l)return gv(o,s)()||$n(s[o.index]);{const c=Nm(s,o);return null!==c?Array.isArray(c)?c[0]:Rm(Lc(s[16]),c):Rm(s,o.next)}}return null}function Nm(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Iv(s,o){const l=10+s+1;if(l<o.length){const c=o[l],f=c[1].firstChild;if(null!==f)return Rm(c,f)}return o[7]}function Mm(s,o,l,c,f,m,w){for(;null!=l;){const b=c[l.index],I=l.type;if(w&&0===o&&(b&&Zn($n(b),c),l.flags|=4),64!=(64&l.flags))if(8&I)Mm(s,o,l.child,c,f,m,!1),lh(o,s,f,b,m);else if(32&I){const A=gv(l,c);let R;for(;R=A();)lh(o,s,f,R,m);lh(o,s,f,b,m)}else 16&I?pb(s,o,c,l,f,m):lh(o,s,f,b,m);l=w?l.projectionNext:l.next}}function up(s,o,l,c,f,m){Mm(l,c,s.firstChild,o,f,m,!1)}function pb(s,o,l,c,f,m){const w=l[16],I=w[6].projection[c.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)lh(o,s,f,I[A],m);else Mm(s,o,I,w[3],f,m,!0)}function Lo(s,o,l){Pn(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function Tv(s,o,l){Pn(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function Dv(s,o,l){let c=s.length;for(;;){const f=s.indexOf(o,l);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const m=o.length;if(f+m===c||s.charCodeAt(f+m)<=32)return f}l=f+1}}const mb="ng-template";function mS(s,o,l){let c=0;for(;c<s.length;){let f=s[c++];if(l&&"class"===f){if(f=s[c],-1!==Dv(f.toLowerCase(),o,0))return!0}else if(1===f){for(;c<s.length&&"string"==typeof(f=s[c++]);)if(f.toLowerCase()===o)return!0;return!1}}return!1}function _u(s){return 4===s.type&&s.value!==mb}function yu(s,o,l){return o===(4!==s.type||l?s.value:mb)}function _b(s,o,l){let c=4;const f=s.attrs||[],m=function vb(s){for(let o=0;o<s.length;o++)if(Tn(s[o]))return o;return s.length}(f);let w=!1;for(let b=0;b<o.length;b++){const I=o[b];if("number"!=typeof I){if(!w)if(4&c){if(c=2|1&c,""!==I&&!yu(s,I,l)||""===I&&1===o.length){if(Kn(c))return!1;w=!0}}else{const A=8&c?I:o[++b];if(8&c&&null!==s.attrs){if(!mS(s.attrs,A,l)){if(Kn(c))return!1;w=!0}continue}const V=vu(8&c?"class":I,f,_u(s),l);if(-1===V){if(Kn(c))return!1;w=!0;continue}if(""!==A){let W;W=V>m?"":f[V+1].toLowerCase();const re=8&c?W:null;if(re&&-1!==Dv(re,A,0)||2&c&&A!==W){if(Kn(c))return!1;w=!0}}}}else{if(!w&&!Kn(c)&&!Kn(I))return!1;if(w&&Kn(I))continue;w=!1,c=I|1&c}}return Kn(c)||w}function Kn(s){return 0==(1&s)}function vu(s,o,l,c){if(null===o)return-1;let f=0;if(c||!l){let m=!1;for(;f<o.length;){const w=o[f];if(w===s)return f;if(3===w||6===w)m=!0;else{if(1===w||2===w){let b=o[++f];for(;"string"==typeof b;)b=o[++f];continue}if(4===w)break;if(0===w){f+=4;continue}}f+=m?1:2}return-1}return function wb(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===o)return l;l++}return-1}(o,s)}function yb(s,o,l=!1){for(let c=0;c<o.length;c++)if(_b(s,o[c],l))return!0;return!1}function Sv(s,o){return s?":not("+o.trim()+")":o}function bb(s){let o=s[0],l=1,c=2,f="",m=!1;for(;l<s.length;){let w=s[l];if("string"==typeof w)if(2&c){const b=s[++l];f+="["+w+(b.length>0?'="'+b+'"':"")+"]"}else 8&c?f+="."+w:4&c&&(f+=" "+w);else""!==f&&!Kn(w)&&(o+=Sv(m,f),f=""),c=w,m=m||!Kn(c);l++}return""!==f&&(o+=Sv(m,f)),o}const Ht={};function ch(s){Av(Xt(),Me(),Nr()+s,So())}function Av(s,o,l,c){if(!c)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&la(o,m,l)}else{const m=s.preOrderHooks;null!==m&&ua(o,m,0,l)}Mr(l)}function cp(s,o){return s<<17|o<<2}function go(s){return s>>17&32767}function Pm(s){return 2|s}function Vo(s){return(131068&s)>>2}function Om(s,o){return-131069&s|o<<2}function Fm(s){return 1|s}function kb(s,o){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const f=l[c],m=l[c+1];if(-1!==m){const w=s.data[m];Ao(f),w.contentQueries(2,o[m],m)}}}function hh(s,o,l,c,f,m,w,b,I,A){const R=o.blueprint.slice();return R[0]=f,R[2]=140|c,_s(R),R[3]=R[15]=s,R[8]=l,R[10]=w||s&&s[10],R[11]=b||s&&s[11],R[12]=I||s&&s[12]||null,R[9]=A||s&&s[9]||null,R[6]=m,R[16]=2==o.type?s[16]:R,R}function wu(s,o,l,c,f){let m=s.data[o];if(null===m)m=function fh(s,o,l,c,f){const m=ia(),w=lo(),I=s.data[o]=function Vb(s,o,l,c,f,m){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?m:m&&m.parent,l,o,c,f);return null===s.firstChild&&(s.firstChild=I),null!==m&&(w?null==m.child&&null!==I.parent&&(m.child=I):null===m.next&&(m.next=I)),I}(s,o,l,c,f),function Hl(){return At.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=l,m.value=c,m.attrs=f;const w=function Us(){const s=At.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===w?-1:w.injectorIndex}return ei(m,!0),m}function mp(s,o,l,c){if(0===l)return-1;const f=o.length;for(let m=0;m<l;m++)o.push(c),s.blueprint.push(c),s.data.push(null);return f}function jc(s,o,l){ql(o);try{const c=s.viewQuery;null!==c&&vp(1,c,l);const f=s.template;null!==f&&$c(s,o,f,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&kb(s,o),s.staticViewQueries&&vp(2,s.viewQuery,l);const m=s.components;null!==m&&function wS(s,o){for(let l=0;l<o.length;l++)NS(s,o[l])}(o,m)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,aa()}}function Ia(s,o,l,c){const f=o[2];if(256==(256&f))return;ql(o);const m=So();try{_s(o),function lc(s){return At.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&$c(s,o,l,2,c);const w=3==(3&f);if(!m)if(w){const A=s.preOrderCheckHooks;null!==A&&la(o,A,null)}else{const A=s.preOrderHooks;null!==A&&ua(o,A,0,null),Ud(o,0)}if(function Wb(s){for(let o=mv(s);null!==o;o=lp(o)){if(!o[2])continue;const l=o[9];for(let c=0;c<l.length;c++){const f=l[c],m=f[3];0==(1024&f[2])&&Ya(m,1),f[2]|=1024}}}(o),function xS(s){for(let o=mv(s);null!==o;o=lp(o))for(let l=10;l<o.length;l++){const c=o[l],f=c[1];Ka(c)&&Ia(f,c,f.template,c[8])}}(o),null!==s.contentQueries&&kb(s,o),!m)if(w){const A=s.contentCheckHooks;null!==A&&la(o,A)}else{const A=s.contentHooks;null!==A&&ua(o,A,1),Ud(o,1)}!function dP(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const f=l[c];if(f<0)Mr(~f);else{const m=f,w=l[++c],b=l[++c];uc(w,m),b(2,o[m])}}}finally{Mr(-1)}}(s,o);const b=s.components;null!==b&&function Ov(s,o){for(let l=0;l<o.length;l++)RS(s,o[l])}(o,b);const I=s.viewQuery;if(null!==I&&vp(2,I,c),!m)if(w){const A=s.viewCheckHooks;null!==A&&la(o,A)}else{const A=s.viewHooks;null!==A&&ua(o,A,2),Ud(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),m||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Ya(o[3],-1))}finally{aa()}}function $m(s,o,l,c){const f=o[10],m=!So(),w=wr(o);try{m&&!w&&f.begin&&f.begin(),w&&jc(s,o,c),Ia(s,o,l,c)}finally{m&&!w&&f.end&&f.end()}}function $c(s,o,l,c,f){const m=Nr(),w=2&c;try{Mr(-1),w&&o.length>20&&Av(s,o,20,So()),l(c,f)}finally{Mr(m)}}function kv(s,o,l){!Qa()||(function TS(s,o,l,c){const f=l.directiveStart,m=l.directiveEnd;s.firstCreatePass||ol(l,o),Zn(c,o);const w=l.initialInputs;for(let b=f;b<m;b++){const I=s.data[b],A=Ki(I);A&&gP(o,l,I);const R=di(o,s,b,l);Zn(R,o),null!==w&&qb(0,b-f,R,I,0,w),A&&(Ti(l.index,o)[8]=R)}}(s,o,l,Hn(l,o)),128==(128&l.flags)&&function jb(s,o,l){const c=l.directiveStart,f=l.directiveEnd,w=l.index,b=function oa(){return At.lFrame.currentDirectiveIndex}();try{Mr(w);for(let I=c;I<f;I++){const A=s.data[I],R=o[I];el(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&$b(A,R)}}finally{Mr(-1),el(b)}}(s,o,l))}function _p(s,o,l=Hn){const c=o.localNames;if(null!==c){let f=o.index+1;for(let m=0;m<c.length;m+=2){const w=c[m+1],b=-1===w?l(o,s):s[w];s[f++]=b}}}function Fv(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=gh(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function gh(s,o,l,c,f,m,w,b,I,A){const R=20+c,V=R+f,W=function Fb(s,o){const l=[];for(let c=0;c<o;c++)l.push(c<s?null:Ht);return l}(R,V),re="function"==typeof A?A():A;return W[1]={type:s,blueprint:W,template:l,queries:null,viewQuery:b,declTNode:o,data:W.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:I,consts:re,incompleteFirstPass:!1}}function Lb(s,o,l,c){const f=$v(o);null===l?f.push(c):(f.push(l),s.firstCreatePass&&Yb(s).push(c,f.length-1))}function Lv(s,o,l){for(let c in s)if(s.hasOwnProperty(c)){const f=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(o,f):l[c]=[o,f]}return l}function Bb(s,o,l,c){let f=!1;if(Qa()){const m=function Hb(s,o,l){const c=s.directiveRegistry;let f=null;if(c)for(let m=0;m<c.length;m++){const w=c[m];yb(l,w.selectors,!1)&&(f||(f=[]),da(ol(l,o),s,w.type),Ki(w)?(zm(s,l),f.unshift(w)):f.push(w))}return f}(s,o,l),w=null===c?null:{"":-1};if(null!==m){f=!0,_h(l,s.data.length,m.length);for(let R=0;R<m.length;R++){const V=m[R];V.providersResolver&&V.providersResolver(V)}let b=!1,I=!1,A=mp(s,o,m.length,null);for(let R=0;R<m.length;R++){const V=m[R];l.mergedAttrs=lt(l.mergedAttrs,V.hostAttrs),Gb(s,l,o,A,V),DS(A,V,w),null!==V.contentQueries&&(l.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(l.flags|=128);const W=V.type.prototype;!b&&(W.ngOnChanges||W.ngOnInit||W.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),b=!0),!I&&(W.ngOnChanges||W.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),I=!0),A++}!function Ub(s,o){const c=o.directiveEnd,f=s.data,m=o.attrs,w=[];let b=null,I=null;for(let A=o.directiveStart;A<c;A++){const R=f[A],V=R.inputs,W=null===m||_u(o)?null:SS(V,m);w.push(W),b=Lv(V,A,b),I=Lv(R.outputs,A,I)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=16),b.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=w,o.inputs=b,o.outputs=I}(s,l)}w&&function Zm(s,o,l){if(o){const c=s.localNames=[];for(let f=0;f<o.length;f+=2){const m=l[o[f+1]];if(null==m)throw new Fe(-301,`Export of name '${o[f+1]}' not found!`);c.push(o[f],m)}}}(l,c,w)}return l.mergedAttrs=lt(l.mergedAttrs,l.attrs),f}function IS(s,o,l,c,f,m){const w=m.hostBindings;if(w){let b=s.hostBindingOpCodes;null===b&&(b=s.hostBindingOpCodes=[]);const I=~o.index;(function pP(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(b)!=I&&b.push(I),b.push(c,f,w)}}function $b(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function zm(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function DS(s,o,l){if(l){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)l[o.exportAs[c]]=s;Ki(o)&&(l[""]=s)}}function _h(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function Gb(s,o,l,c,f){s.data[c]=f;const m=f.factory||(f.factory=ks(f.type)),w=new ir(m,Ki(f),null);s.blueprint[c]=w,l[c]=w,IS(s,o,0,c,mp(s,l,f.hostVars,Ht),f)}function gP(s,o,l){const c=Hn(o,s),f=Fv(l),m=s[10],w=Ym(s,hh(s,f,null,l.onPush?64:16,c,o,m,m.createRenderer(c,l),null,null));s[o.index]=w}function Uo(s,o,l,c,f,m){const w=Hn(s,o);!function Uv(s,o,l,c,f,m,w){if(null==m)Pn(s)?s.removeAttribute(o,f,l):o.removeAttribute(f);else{const b=null==w?ye(m):w(m,c||"",f);Pn(s)?s.setAttribute(o,f,b,l):l?o.setAttributeNS(l,f,b):o.setAttribute(f,b)}}(o[11],w,m,s.value,l,c,f)}function qb(s,o,l,c,f,m){const w=m[o];if(null!==w){const b=c.setInput;for(let I=0;I<w.length;){const A=w[I++],R=w[I++],V=w[I++];null!==b?c.setInput(l,V,A,R):l[R]=V}}}function SS(s,o){let l=null,c=0;for(;c<o.length;){const f=o[c];if(0!==f)if(5!==f){if("number"==typeof f)break;s.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,s[f],o[c+1])),c+=2}else c+=2;else c+=4}return l}function Km(s,o,l,c){return new Array(s,!0,!1,o,null,0,c,l,null,null)}function RS(s,o){const l=Ti(o,s);if(Ka(l)){const c=l[1];80&l[2]?Ia(c,l,c.template,l[8]):l[5]>0&&Eu(l)}}function Eu(s){for(let c=mv(s);null!==c;c=lp(c))for(let f=10;f<c.length;f++){const m=c[f];if(1024&m[2]){const w=m[1];Ia(w,m,w.template,m[8])}else m[5]>0&&Eu(m)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const f=Ti(l[c],s);Ka(f)&&f[5]>0&&Eu(f)}}function NS(s,o){const l=Ti(o,s),c=l[1];(function Bv(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(c,l),jc(c,l,l[8])}function Ym(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function yp(s){for(;s;){s[2]|=64;const o=Lc(s);if(Ff(s)&&!o)return s;s=o}return null}function Hc(s,o,l){const c=o[10];c.begin&&c.begin();try{Ia(s,o,s.template,l)}catch(f){throw Qm(o,f),f}finally{c.end&&c.end()}}function Zb(s){!function jv(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],c=kc(l),f=c[1];$m(f,c,f.template,l)}}(s[8])}function vp(s,o,l){Ao(0),o(s,l)}const PS=(()=>Promise.resolve(null))();function $v(s){return s[7]||(s[7]=[])}function Yb(s){return s.cleanup||(s.cleanup=[])}function Qm(s,o){const l=s[9],c=l?l.get(ap,null):null;c&&c.handleError(o)}function Qb(s,o,l,c,f){for(let m=0;m<l.length;){const w=l[m++],b=l[m++],I=o[w],A=s.data[w];null!==A.setInput?A.setInput(I,f,c,b):I[b]=f}}function Ta(s,o,l){const c=Oi(o,s);!function ib(s,o,l){Pn(s)?s.setValue(o,l):o.textContent=l}(s[11],c,l)}function wp(s,o,l){let c=l?s.styles:null,f=l?s.classes:null,m=0;if(null!==o)for(let w=0;w<o.length;w++){const b=o[w];"number"==typeof b?m=b:1==m?f=_e(f,b):2==m&&(c=_e(c,b+": "+o[++w]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=f:s.classesWithoutHost=f}const Hv=new vn("INJECTOR",-1);class Gv{get(o,l=qn){if(l===qn){const c=new Error(`NullInjectorError: No provider for ${de(o)}!`);throw c.name="NullInjectorError",c}return l}}const qv=new vn("Set Injector scope."),bp={},Jm={};let Xm;function Jb(){return void 0===Xm&&(Xm=new Gv),Xm}function Wv(s,o=null,l=null,c){const f=Xb(s,o,l,c);return f._resolveInjectorDefTypes(),f}function Xb(s,o=null,l=null,c){return new eC(s,l,o||Jb(),c)}class eC{constructor(o,l,c,f=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];l&&Hs(l,b=>this.processProvider(b,o,l)),Hs([o],b=>this.processInjectorType(b,[],m)),this.records.set(Hv,Cp(void 0,this));const w=this.records.get(qv);this.scope=null!=w?w.value:null,this.source=f||("object"==typeof o?null:de(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=qn,c=gt.Default){this.assertNotDestroyed();const f=P(this),m=an(void 0);try{if(!(c&gt.SkipSelf)){let b=this.records.get(o);if(void 0===b){const I=function wP(s){return"function"==typeof s||"object"==typeof s&&s instanceof vn}(o)&&Un(o);b=I&&this.injectableDefInScope(I)?Cp(zv(o),bp):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(c&gt.Self?Jb():this.parent).get(o,l=c&gt.Optional&&l===qn?null:l)}catch(w){if("NullInjectorError"===w.name){if((w[hl]=w[hl]||[]).unshift(de(o)),f)throw w;return function Wt(s,o,l,c){const f=s[hl];throw o[iu]&&f.unshift(o[iu]),s.message=function Tt(s,o,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let f=de(o);if(Array.isArray(o))f=o.map(de).join(" -> ");else if("object"==typeof o){let m=[];for(let w in o)if(o.hasOwnProperty(w)){let b=o[w];m.push(w+":"+("string"==typeof b?JSON.stringify(b):de(b)))}f=`{${m.join(", ")}}`}return`${l}${c?"("+c+")":""}[${f}]: ${s.replace(nu,"\n  ")}`}("\n"+s.message,f,l,c),s.ngTokenPath=f,s[hl]=null,s}(w,o,"R3InjectorError",this.source)}throw w}finally{an(m),P(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,f)=>o.push(de(f))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Fe(205,"")}processInjectorType(o,l,c){if(!(o=oe(o)))return!1;let f=Ps(o);const m=null==f&&o.ngModule||void 0,w=void 0===m?o:m,b=-1!==c.indexOf(w);if(void 0!==m&&(f=Ps(m)),null==f)return!1;if(null!=f.imports&&!b){let R;c.push(w);try{Hs(f.imports,V=>{this.processInjectorType(V,l,c)&&(void 0===R&&(R=[]),R.push(V))})}finally{}if(void 0!==R)for(let V=0;V<R.length;V++){const{ngModule:W,providers:re}=R[V];Hs(re,De=>this.processProvider(De,W,re||yt))}}this.injectorDefTypes.add(w);const I=ks(w)||(()=>new w);this.records.set(w,Cp(I,bp));const A=f.providers;if(null!=A&&!b){const R=o;Hs(A,V=>this.processProvider(V,R,A))}return void 0!==m&&void 0!==o.providers}processProvider(o,l,c){let f=yh(o=oe(o))?o:oe(o&&o.provide);const m=function LS(s,o,l){return VS(s)?Cp(void 0,s.useValue):Cp(Zv(s),bp)}(o);if(yh(o)||!0!==o.multi)this.records.get(f);else{let w=this.records.get(f);w||(w=Cp(void 0,bp,!0),w.factory=()=>Qe(w.multi),this.records.set(f,w)),f=o,w.multi.push(o)}this.records.set(f,m)}hydrate(o,l){return l.value===bp&&(l.value=Jm,l.value=l.factory()),"object"==typeof l.value&&l.value&&function vP(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=oe(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function zv(s){const o=Un(s),l=null!==o?o.factory:ks(s);if(null!==l)return l;if(s instanceof vn)throw new Fe(204,"");if(s instanceof Function)return function tC(s){const o=s.length;if(o>0)throw function Po(s,o){const l=[];for(let c=0;c<s;c++)l.push(o);return l}(o,"?"),new Fe(204,"");const l=function bn(s){const o=s&&(s[Vr]||s[Le]);if(o){const l=function En(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Fe(204,"")}function Zv(s,o,l){let c;if(yh(s)){const f=oe(s);return ks(f)||zv(f)}if(VS(s))c=()=>oe(s.useValue);else if(function nC(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Qe(s.deps||[]));else if(function _P(s){return!(!s||!s.useExisting)}(s))c=()=>K(oe(s.useExisting));else{const f=oe(s&&(s.useClass||s.provide));if(!function yP(s){return!!s.deps}(s))return ks(f)||zv(f);c=()=>new f(...Qe(s.deps))}return c}function Cp(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function VS(s){return null!==s&&"object"==typeof s&&T in s}function yh(s){return"function"==typeof s}let bs=(()=>{class s{static create(l,c){var f;if(Array.isArray(l))return Wv({name:""},c,l,"");{const m=null!==(f=l.name)&&void 0!==f?f:"";return Wv({name:m},l.parent,l.providers,m)}}}return s.THROW_IF_NOT_FOUND=qn,s.NULL=new Gv,s.\u0275prov=_n({token:s,providedIn:"any",factory:()=>K(Hv)}),s.__NG_ELEMENT_ID__=-1,s})();function Ai(s,o){rl(kc(s)[1],Nn())}function Qv(s){let o=function oC(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;o;){let f;if(Ki(s))f=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Fe(903,"");f=o.\u0275dir}if(f){if(l){c.push(f);const w=s;w.inputs=r_(s.inputs),w.declaredInputs=r_(s.declaredInputs),w.outputs=r_(s.outputs);const b=f.hostBindings;b&&Jv(s,b);const I=f.viewQuery,A=f.contentQueries;if(I&&jS(s,I),A&&lC(s,A),fe(s.inputs,f.inputs),fe(s.declaredInputs,f.declaredInputs),fe(s.outputs,f.outputs),Ki(f)&&f.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let w=0;w<m.length;w++){const b=m[w];b&&b.ngInherit&&b(s),b===Qv&&(l=!1)}}o=Object.getPrototypeOf(o)}!function aC(s){let o=0,l=null;for(let c=s.length-1;c>=0;c--){const f=s[c];f.hostVars=o+=f.hostVars,f.hostAttrs=lt(f.hostAttrs,l=lt(l,f.hostAttrs))}}(c)}function r_(s){return s===In?{}:s===yt?[]:s}function jS(s,o){const l=s.viewQuery;s.viewQuery=l?(c,f)=>{o(c,f),l(c,f)}:o}function lC(s,o){const l=s.contentQueries;s.contentQueries=l?(c,f,m)=>{o(c,f,m),l(c,f,m)}:o}function Jv(s,o){const l=s.hostBindings;s.hostBindings=l?(c,f)=>{o(c,f),l(c,f)}:o}let wh=null;function Gr(){if(!wh){const s=Et.Symbol;if(s&&s.iterator)wh=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const c=o[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(wh=c)}}}return wh}function Eh(s){return!!s_(s)&&(Array.isArray(s)||!(s instanceof Map)&&Gr()in s)}function s_(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Li(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function Tp(s,o,l,c){const f=Me();return Li(f,Qi(),o)&&(Xt(),Uo(Fn(),f,s,o,l,c)),Tp}function Dp(s,o,l,c,f,m,w,b){const I=Me(),A=Xt(),R=s+20,V=A.firstCreatePass?function $S(s,o,l,c,f,m,w,b,I){const A=o.consts,R=wu(o,s,4,w||null,Yi(A,b));Bb(o,l,R,Yi(A,I)),rl(o,R);const V=R.tViews=gh(2,R,c,f,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,R),V.queries=o.queries.embeddedTView(R)),R}(R,A,I,o,l,c,f,m,w):A.data[R];ei(V,!1);const W=I[11].createComment("");xm(A,I,W,V),Zn(W,I),Ym(I,I[R]=Km(W,I,W,V)),Bn(V)&&kv(A,I,V),null!=w&&_p(I,V,b)}function l_(s){return Vs(function ac(){return At.lFrame.contextLView}(),20+s)}function Rp(s,o=gt.Default){const l=Me();return null===l?K(s,o):Jl(Nn(),l,oe(s),o)}function DC(){throw new Error("invalid")}function wl(s,o,l){const c=Me();return Li(c,Qi(),o)&&function Yn(s,o,l,c,f,m,w,b){const I=Hn(o,l);let R,A=o.inputs;!b&&null!=A&&(R=A[c])?(Qb(s,l,R,c,f),xd(o)&&function mh(s,o){const l=Ti(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(c=function Vv(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),f=null!=w?w(f,o.value||"",c):f,Pn(m)?m.setProperty(I,c,f):js(c)||(I.setProperty?I.setProperty(c,f):I[c]=f))}(Xt(),Fn(),c,s,o,c[11],l,!1),wl}function m_(s,o,l,c,f){const w=f?"class":"style";Qb(s,l,o.inputs[w],w,c)}function y_(s,o,l,c){const f=Me(),m=Xt(),w=20+s,b=f[11],I=f[w]=vv(b,o,function zl(){return At.lFrame.currentNamespace}()),A=m.firstCreatePass?function __(s,o,l,c,f,m,w){const b=o.consts,A=wu(o,s,2,f,Yi(b,m));return Bb(o,l,A,Yi(b,w)),null!==A.attrs&&wp(A,A.attrs,!1),null!==A.mergedAttrs&&wp(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(w,m,f,0,o,l,c):m.data[w];ei(A,!0);const R=A.mergedAttrs;null!==R&&vc(b,I,R);const V=A.classes;null!==V&&Tv(b,I,V);const W=A.styles;null!==W&&Lo(b,I,W),64!=(64&A.flags)&&xm(m,f,I,A),0===function Xr(){return At.lFrame.elementDepthCount}()&&Zn(I,f),function ra(){At.lFrame.elementDepthCount++}(),Bn(A)&&(kv(m,f,A),function ph(s,o,l){if(Ad(o)){const f=o.directiveEnd;for(let m=o.directiveStart;m<f;m++){const w=s.data[m];w.contentQueries&&w.contentQueries(1,l[m],m)}}}(m,A,f)),null!==c&&_p(f,A)}function Yc(){let s=Nn();lo()?function Xa(){At.lFrame.isParent=!1}():(s=s.parent,ei(s,!1));const o=s;!function Bl(){At.lFrame.elementDepthCount--}();const l=Xt();l.firstCreatePass&&(rl(l,s),Ad(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Kl(s){return 0!=(16&s.flags)}(o)&&m_(l,o,Me(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function sm(s){return 0!=(32&s.flags)}(o)&&m_(l,o,Me(),o.stylesWithoutHost,!1)}function gw(s,o,l,c){y_(s,o,l,c),Yc()}function v_(){return Me()}function w_(s){return!!s&&"function"==typeof s.then}function mw(s){return!!s&&"function"==typeof s.subscribe}const Ah=mw;function Mp(s,o,l,c){const f=Me(),m=Xt(),w=Nn();return function Pp(s,o,l,c,f,m,w,b){const I=Bn(c),R=s.firstCreatePass&&Yb(s),V=o[8],W=$v(o);let re=!0;if(3&c.type||b){const et=Hn(c,o),dt=b?b(et):et,Ae=W.length,Dt=b?en=>b($n(en[c.index])):c.index;if(Pn(l)){let en=null;if(!b&&I&&(en=function _w(s,o,l,c){const f=s.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const w=f[m];if(w===l&&f[m+1]===c){const b=o[7],I=f[m+2];return b.length>I?b[I]:null}"string"==typeof w&&(m+=2)}return null}(s,o,f,c.index)),null!==en)(en.__ngLastListenerFn__||en).__ngNextListenerFn__=m,en.__ngLastListenerFn__=m,re=!1;else{m=b_(c,o,V,m,!1);const gn=l.listen(dt,f,m);W.push(m,gn),R&&R.push(f,Dt,Ae,Ae+1)}}else m=b_(c,o,V,m,!0),dt.addEventListener(f,m,w),W.push(m),R&&R.push(f,Dt,Ae,w)}else m=b_(c,o,V,m,!1);const De=c.outputs;let $e;if(re&&null!==De&&($e=De[f])){const et=$e.length;if(et)for(let dt=0;dt<et;dt+=2){const hs=o[$e[dt]][$e[dt+1]].subscribe(m),Bu=W.length;W.push(m,hs),R&&R.push(f,c.index,Bu,-(Bu+1))}}}(m,f,f[11],w,s,o,!!l,c),Mp}function xh(s,o,l,c){try{return!1!==l(c)}catch(f){return Qm(s,f),!1}}function b_(s,o,l,c,f){return function m(w){if(w===Function)return c;const b=2&s.flags?Ti(s.index,o):o;0==(32&o[2])&&yp(b);let I=xh(o,0,c,w),A=m.__ngNextListenerFn__;for(;A;)I=xh(o,0,A,w)&&I,A=A.__ngNextListenerFn__;return f&&!1===I&&(w.preventDefault(),w.returnValue=!1),I}}function xC(s=1){return function nm(s){return(At.lFrame.contextLView=function Vd(s,o){for(;s>0;)o=o[15],s--;return o}(s,At.lFrame.contextLView))[8]}(s)}function D_(s,o,l,c,f){const m=s[l+1],w=null===o;let b=c?go(m):Vo(m),I=!1;for(;0!==b&&(!1===I||w);){const R=s[b+1];Qc(s[b],o)&&(I=!0,s[b+1]=c?Fm(R):Pm(R)),b=c?go(R):Vo(R)}I&&(s[l+1]=c?Pm(m):Fm(m))}function Qc(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ti(s,o)>=0}function Dw(s,o){return function gi(s,o,l,c){const f=Me(),m=Xt(),w=function Bs(s){const o=At.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}(2);m.firstUpdatePass&&function Aw(s,o,l,c){const f=s.data;if(null===f[l+1]){const m=f[Nr()],w=function Sw(s,o){return o>=s.expandoStartIndex}(s,l);(function kC(s,o){return 0!=(s.flags&(o?16:32))})(m,c)&&null===o&&!w&&(o=!1),o=function Oh(s,o,l,c){const f=function uo(s){const o=At.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let m=c?o.residualClasses:o.residualStyles;if(null===f)0===(c?o.classBindings:o.styleBindings)&&(l=kh(l=xw(null,s,o,l,c),o.attrs,c),m=null);else{const w=o.directiveStylingLast;if(-1===w||s[w]!==f)if(l=xw(f,s,o,l,c),null===m){let I=function YS(s,o,l){const c=l?o.classBindings:o.styleBindings;if(0!==Vo(c))return s[go(c)]}(s,o,c);void 0!==I&&Array.isArray(I)&&(I=xw(null,s,o,I[1],c),I=kh(I,o.attrs,c),function QS(s,o,l,c){s[go(l?o.classBindings:o.styleBindings)]=c}(s,o,c,I))}else m=function PC(s,o,l){let c;const f=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<f;m++)c=kh(c,s[m].hostAttrs,l);return kh(c,o.attrs,l)}(s,o,c)}return void 0!==m&&(c?o.residualClasses=m:o.residualStyles=m),l}(f,m,o,c),function Cw(s,o,l,c,f,m){let w=m?o.classBindings:o.styleBindings,b=go(w),I=Vo(w);s[c]=l;let R,A=!1;if(Array.isArray(l)){const V=l;R=V[1],(null===R||ti(V,R)>0)&&(A=!0)}else R=l;if(f)if(0!==I){const W=go(s[b+1]);s[c+1]=cp(W,b),0!==W&&(s[W+1]=Om(s[W+1],c)),s[b+1]=function Db(s,o){return 131071&s|o<<17}(s[b+1],c)}else s[c+1]=cp(b,0),0!==b&&(s[b+1]=Om(s[b+1],c)),b=c;else s[c+1]=cp(I,0),0===b?b=c:s[I+1]=Om(s[I+1],c),I=c;A&&(s[c+1]=Pm(s[c+1])),D_(s,R,c,!0),D_(s,R,c,!1),function Mh(s,o,l,c,f){const m=f?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&ti(m,o)>=0&&(l[c+1]=Fm(l[c+1]))}(o,R,s,c,m),w=cp(b,I),m?o.classBindings=w:o.styleBindings=w}(f,m,o,l,w,c)}}(m,s,w,c),o!==Ht&&Li(f,w,o)&&function Nw(s,o,l,c,f,m,w,b){if(!(3&o.type))return;const I=s.data,A=I[b+1];Fh(function km(s){return 1==(1&s)}(A)?Mw(I,o,l,f,Vo(A),w):void 0)||(Fh(m)||function Tb(s){return 2==(2&s)}(A)&&(m=Mw(I,null,l,f,b,w)),function Uc(s,o,l,c,f){const m=Pn(s);if(o)f?m?s.addClass(l,c):l.classList.add(c):m?s.removeClass(l,c):l.classList.remove(c);else{let w=-1===c.indexOf("-")?void 0:ba.DashCase;if(null==f)m?s.removeStyle(l,c,w):l.style.removeProperty(c);else{const b="string"==typeof f&&f.endsWith("!important");b&&(f=f.slice(0,-10),w|=ba.Important),m?s.setStyle(l,c,f,w):l.style.setProperty(c,f,b?"important":"")}}}(c,w,Oi(Nr(),l),f,m))}(m,m.data[Nr()],f,f[11],s,f[w+1]=function JS(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=de(fo(s)))),s}(o,l),c,w)}(s,o,null,!0),Dw}function xw(s,o,l,c,f){let m=null;const w=l.directiveEnd;let b=l.directiveStylingLast;for(-1===b?b=l.directiveStart:b++;b<w&&(m=o[b],c=kh(c,m.hostAttrs,f),m!==s);)b++;return null!==s&&(l.directiveStylingLast=b),c}function kh(s,o,l){const c=l?1:2;let f=-1;if(null!==o)for(let m=0;m<o.length;m++){const w=o[m];"number"==typeof w?f=w:f===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),It(s,w,!!l||o[++m]))}return void 0===s?null:s}function Mw(s,o,l,c,f,m){const w=null===o;let b;for(;f>0;){const I=s[f],A=Array.isArray(I),R=A?I[1]:I,V=null===R;let W=l[f+1];W===Ht&&(W=V?yt:void 0);let re=V?dl(W,c):R===c?W:void 0;if(A&&!Fh(re)&&(re=dl(I,c)),Fh(re)&&(b=re,w))return b;const De=s[f+1];f=w?go(De):Vo(De)}if(null!==o){let I=m?o.residualClasses:o.residualStyles;null!=I&&(b=dl(I,c))}return b}function Fh(s){return void 0!==s}function FC(s,o=""){const l=Me(),c=Xt(),f=s+20,m=c.firstCreatePass?wu(c,f,1,o,null):c.data[f],w=l[f]=function yv(s,o){return Pn(s)?s.createText(o):s.createTextNode(o)}(l[11],o);xm(c,l,w,m),ei(m,!1)}function Lh(s){return Du("",s,""),Lh}function Du(s,o,l){const c=Me(),f=function bh(s,o,l,c){return Li(s,Qi(),l)?o+ye(l)+c:Ht}(c,s,o,l);return f!==Ht&&Ta(c,Nr(),f),Du}const Su=void 0;var Xc=["en",[["a","p"],["AM","PM"],Su],[["AM","PM"],Su,Su],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Su,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Su,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Su,"{1} 'at' {0}",Su],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function WC(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let ed={};function F_(s){const o=function jh(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=Ts(o);if(l)return l;const c=o.split("-")[0];if(l=Ts(c),l)return l;if("en"===c)return Xc;throw new Error(`Missing locale data for the locale "${s}".`)}function $p(s){return F_(s)[Rt.PluralCase]}function Ts(s){return s in ed||(ed[s]=Et.ng&&Et.ng.common&&Et.ng.common.locales&&Et.ng.common.locales[s]),ed[s]}var Rt=(()=>((Rt=Rt||{})[Rt.LocaleId=0]="LocaleId",Rt[Rt.DayPeriodsFormat=1]="DayPeriodsFormat",Rt[Rt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Rt[Rt.DaysFormat=3]="DaysFormat",Rt[Rt.DaysStandalone=4]="DaysStandalone",Rt[Rt.MonthsFormat=5]="MonthsFormat",Rt[Rt.MonthsStandalone=6]="MonthsStandalone",Rt[Rt.Eras=7]="Eras",Rt[Rt.FirstDayOfWeek=8]="FirstDayOfWeek",Rt[Rt.WeekendRange=9]="WeekendRange",Rt[Rt.DateFormat=10]="DateFormat",Rt[Rt.TimeFormat=11]="TimeFormat",Rt[Rt.DateTimeFormat=12]="DateTimeFormat",Rt[Rt.NumberSymbols=13]="NumberSymbols",Rt[Rt.NumberFormats=14]="NumberFormats",Rt[Rt.CurrencyCode=15]="CurrencyCode",Rt[Rt.CurrencySymbol=16]="CurrencySymbol",Rt[Rt.CurrencyName=17]="CurrencyName",Rt[Rt.Currencies=18]="Currencies",Rt[Rt.Directionality=19]="Directionality",Rt[Rt.PluralCase=20]="PluralCase",Rt[Rt.ExtraData=21]="ExtraData",Rt))();const $h="en-US";let zC=$h;function ad(s,o,l,c,f){if(s=oe(s),Array.isArray(s))for(let m=0;m<s.length;m++)ad(s[m],o,l,c,f);else{const m=Xt(),w=Me();let b=yh(s)?s:oe(s.provide),I=Zv(s);const A=Nn(),R=1048575&A.providerIndexes,V=A.directiveStart,W=A.providerIndexes>>20;if(yh(s)||!s.multi){const re=new ir(I,f,Rp),De=ld(b,o,f?R:R+W,V);-1===De?(da(ol(A,w),m,b),Zw(m,s,o.length),o.push(b),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),l.push(re),w.push(re)):(l[De]=re,w[De]=re)}else{const re=ld(b,o,R+W,V),De=ld(b,o,R,R+W),$e=re>=0&&l[re],et=De>=0&&l[De];if(f&&!et||!f&&!$e){da(ol(A,w),m,b);const dt=function G_(s,o,l,c,f){const m=new ir(s,l,Rp);return m.multi=[],m.index=o,m.componentProviders=0,xa(m,f,c&&!l),m}(f?aI:Qp,l.length,f,c,I);!f&&et&&(l[De].providerFactory=dt),Zw(m,s,o.length,0),o.push(b),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),l.push(dt),w.push(dt)}else Zw(m,s,re>-1?re:De,xa(l[f?De:re],I,!f&&c));!f&&c&&et&&l[De].componentProviders++}}}function Zw(s,o,l,c){const f=yh(o),m=function US(s){return!!s.useClass}(o);if(f||m){const I=(m?oe(o.useClass):o).prototype.ngOnDestroy;if(I){const A=s.destroyHooks||(s.destroyHooks=[]);if(!f&&o.multi){const R=A.indexOf(l);-1===R?A.push(l,[c,I]):A[R+1].push(c,I)}else A.push(l,I)}}}function xa(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function ld(s,o,l,c){for(let f=l;f<c;f++)if(o[f]===s)return f;return-1}function Qp(s,o,l,c){return Ra(this.multi,[])}function aI(s,o,l,c){const f=this.multi;let m;if(this.providerFactory){const w=this.providerFactory.componentProviders,b=di(l,l[1],this.providerFactory.index,c);m=b.slice(0,w),Ra(f,m);for(let I=w;I<b.length;I++)m.push(b[I])}else m=[],Ra(f,m);return m}function Ra(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function Mu(s,o=[]){return l=>{l.providersResolver=(c,f)=>function oI(s,o,l){const c=Xt();if(c.firstCreatePass){const f=Ki(s);ad(l,c.data,c.blueprint,f,!0),ad(o,c.data,c.blueprint,f,!1)}}(c,f?f(s):s,o)}}class qh{}class Yw{resolveComponentFactory(o){throw function Pu(s){const o=Error(`No component factory found for ${de(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let $o=(()=>{class s{}return s.NULL=new Yw,s})();function Qw(){return Ma(Nn(),Me())}function Ma(s,o){return new Wh(Hn(s,o))}let Wh=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=Qw,s})();function lI(s){return s instanceof Wh?s.nativeElement:s}class zh{}let uI=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function bA(){const s=Me(),l=Ti(Nn().index,s);return function EA(s){return s[11]}(zi(l)?l:s)}(),s})(),cI=(()=>{class s{}return s.\u0275prov=_n({token:s,providedIn:"root",factory:()=>null}),s})();class Xw{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const _i=new Xw("13.1.3"),q_={};function kn(s,o,l,c,f=!1){for(;null!==l;){const m=o[l.index];if(null!==m&&c.push($n(m)),Zi(m))for(let b=10;b<m.length;b++){const I=m[b],A=I[1].firstChild;null!==A&&kn(I[1],I,A,c)}const w=l.type;if(8&w)kn(s,o,l.child,c);else if(32&w){const b=gv(l,o);let I;for(;I=b();)c.push(I)}else if(16&w){const b=Nm(o,l);if(Array.isArray(b))c.push(...b);else{const I=Lc(o[16]);kn(I[1],I,b,c,!0)}}l=f?l.projectionNext:l.next}return c}class Xp{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return kn(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Zi(o)){const l=o[8],c=l?l.indexOf(this):-1;c>-1&&(Ev(o,c),_a(l,c))}this._attachedToViewContainer=!1}ob(this._lView[1],this._lView)}onDestroy(o){Lb(this._lView[1],this._lView,null,o)}markForCheck(){yp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Hc(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Kb(s,o,l){sa(!0);try{Hc(s,o,l)}finally{sa(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Fe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function fS(s,o){up(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Fe(902,"");this._appRef=o}}class dI extends Xp{constructor(o){super(o),this._view=o}detectChanges(){Zb(this._view)}checkNoChanges(){!function MS(s){sa(!0);try{Zb(s)}finally{sa(!1)}}(this._view)}get context(){return null}}class Ou extends $o{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=vt(o);return new Z_(l,this.ngModule)}}function hI(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}const W_=new vn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>eb});class Z_ extends qh{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function Cb(s){return s.map(bb).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return hI(this.componentDef.inputs)}get outputs(){return hI(this.componentDef.outputs)}create(o,l,c,f){const m=(f=f||this.ngModule)?function z_(s,o){return{get:(l,c,f)=>{const m=s.get(l,q_,f);return m!==q_||c===q_?m:o.get(l,c,f)}}}(o,f.injector):o,w=m.get(zh,ui),b=m.get(cI,null),I=w.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",R=c?function Gm(s,o,l){if(Pn(s))return s.selectRootElement(o,l===zt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(I,c,this.componentDef.encapsulation):vv(w.createRenderer(null,this.componentDef),A,function eg(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(A)),V=this.componentDef.onPush?576:528,W=function Ip(s,o){return{components:[],scheduler:s||eb,clean:PS,playerHandler:o||null,flags:0}}(),re=gh(0,null,null,1,0,null,null,null,null,null),De=hh(null,re,W,V,null,null,w,I,b,m);let $e,et;ql(De);try{const dt=function sC(s,o,l,c,f,m){const w=l[1];l[20]=s;const I=wu(w,20,2,"#host",null),A=I.mergedAttrs=o.hostAttrs;null!==A&&(wp(I,A,!0),null!==s&&(vc(f,s,A),null!==I.classes&&Tv(f,s,I.classes),null!==I.styles&&Lo(f,s,I.styles)));const R=c.createRenderer(s,o),V=hh(l,Fv(o),null,o.onPush?64:16,l[20],I,c,R,m||null,null);return w.firstCreatePass&&(da(ol(I,l),w,o.type),zm(w,I),_h(I,l.length,1)),Ym(l,V),l[20]=V}(R,this.componentDef,De,w,I);if(R)if(c)vc(I,R,["ng-version",_i.full]);else{const{attrs:Ae,classes:Dt}=function Ib(s){const o=[],l=[];let c=1,f=2;for(;c<s.length;){let m=s[c];if("string"==typeof m)2===f?""!==m&&o.push(m,s[++c]):8===f&&l.push(m);else{if(!Kn(f))break;f=m}c++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Ae&&vc(I,R,Ae),Dt&&Dt.length>0&&Tv(I,R,Dt.join(" "))}if(et=Ls(re,20),void 0!==l){const Ae=et.projection=[];for(let Dt=0;Dt<this.ngContentSelectors.length;Dt++){const en=l[Dt];Ae.push(null!=en?Array.from(en):null)}}$e=function pi(s,o,l,c,f){const m=l[1],w=function fP(s,o,l){const c=Nn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),Gb(s,c,o,mp(s,o,1,null),l));const f=di(o,s,c.directiveStart,c);Zn(f,o);const m=Hn(c,o);return m&&Zn(m,o),f}(m,l,o);if(c.components.push(w),s[8]=w,f&&f.forEach(I=>I(w,o)),o.contentQueries){const I=Nn();o.contentQueries(1,w,I.directiveStart)}const b=Nn();return!m.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Mr(b.index),IS(l[1],b,0,b.directiveStart,b.directiveEnd,o),$b(o,w)),w}(dt,this.componentDef,De,W,[Ai]),jc(re,De,null)}finally{aa()}return new CA(this.componentType,$e,Ma(et,De),De,et)}}class CA extends class Na{}{constructor(o,l,c,f,m){super(),this.location=c,this._rootLView=f,this._tNode=m,this.instance=l,this.hostView=this.changeDetectorRef=new dI(f),this.componentType=o}get injector(){return new Qn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Zh{}class eE{}const Kh=new Map;class tE extends Zh{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ou(this);const c=nn(o);this._bootstrapComponents=gl(c.bootstrap),this._r3Injector=Xb(o,l,[{provide:Zh,useValue:this},{provide:$o,useValue:this.componentFactoryResolver}],de(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=bs.THROW_IF_NOT_FOUND,c=gt.Default){return o===bs||o===Zh||o===Hv?this:this._r3Injector.get(o,l,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class K_ extends eE{constructor(o){super(),this.moduleType=o,null!==nn(o)&&function TA(s){const o=new Set;!function l(c){const f=nn(c,!0),m=f.id;null!==m&&(function pI(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${de(o)} vs ${de(o.name)}`)}(m,Kh.get(m),c),Kh.set(m,c));const w=gl(f.imports);for(const b of w)o.has(b)||(o.add(b),l(b))}(s)}(o)}create(o){return new tE(this.moduleType,o)}}function sE(s,o,l,c,f,m){const w=o+l;return Li(s,w,f)?function Bo(s,o,l){return s[o]=l}(s,w+1,m?c.call(m,f):c(f)):function Tl(s,o){const l=s[o];return l===Ht?void 0:l}(s,w+1)}function _I(s,o){const l=Xt();let c;const f=s+20;l.firstCreatePass?(c=function yI(s,o){if(o)for(let l=o.length-1;l>=0;l--){const c=o[l];if(s===c.name)return c}}(o,l.pipeRegistry),l.data[f]=c,c.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(f,c.onDestroy)):c=l.data[f];const m=c.factory||(c.factory=ks(c.type)),w=an(Rp);try{const b=sl(!1),I=m();return sl(b),function a_(s,o,l,c){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),o[l]=c}(l,Me(),f,I),I}finally{an(w)}}function lE(s,o,l){const c=s+20,f=Me(),m=Vs(f,c);return function Jh(s,o){return s[1].data[o].pure}(f,c)?sE(f,function Rr(){const s=At.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),o,m.transform,l,m):m.transform(l)}function Dl(s){return o=>{setTimeout(s,void 0,o)}}const Ho=class Xh extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,c){var f,m,w;let b=o,I=l||(()=>null),A=c;if(o&&"object"==typeof o){const V=o;b=null===(f=V.next)||void 0===f?void 0:f.bind(V),I=null===(m=V.error)||void 0===m?void 0:m.bind(V),A=null===(w=V.complete)||void 0===w?void 0:w.bind(V)}this.__isAsync&&(I=Dl(I),b&&(b=Dl(b)),A&&(A=Dl(A)));const R=super.subscribe({next:b,error:I,complete:A});return o instanceof $.w0&&o.add(R),R}};function dd(){return this._results[Gr()]()}class X_{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Gr(),c=X_.prototype;c[l]||(c[l]=dd)}get changes(){return this._changes||(this._changes=new Ho)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const c=this;c.dirty=!1;const f=Fi(o);(this._changesDetected=!function Gd(s,o,l){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let f=s[c],m=o[c];if(l&&(f=l(f),m=l(m)),m!==f)return!1}return!0}(c._results,f,l))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Pa=(()=>{class s{}return s.__NG_ELEMENT_ID__=tg,s})();const wI=Pa,EI=class extends wI{constructor(o,l,c){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(o){const l=this._declarationTContainer.tViews,c=hh(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(c[19]=m.createEmbeddedView(l)),jc(l,c,o),new Xp(c)}};function tg(){return ey(Nn(),Me())}function ey(s,o){return 4&s.type?new EI(o,s,Ma(s,o)):null}let ty=(()=>{class s{}return s.__NG_ELEMENT_ID__=fr,s})();function fr(){return ef(Nn(),Me())}const ny=ty,ng=class extends ny{constructor(o,l,c){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=c}get element(){return Ma(this._hostTNode,this._hostLView)}get injector(){return new Qn(this._hostTNode,this._hostLView)}get parentInjector(){const o=jn(this._hostTNode,this._hostLView);if(Xi(o)){const l=il(o,this._hostLView),c=Er(o);return new Qn(l[1].data[c+8],l)}return new Qn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=uE(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,c){const f=o.createEmbeddedView(l||{});return this.insert(f,c),f}createComponent(o,l,c,f,m){const w=o&&!function ma(s){return"function"==typeof s}(o);let b;if(w)b=l;else{const V=l||{};b=V.index,c=V.injector,f=V.projectableNodes,m=V.ngModuleRef}const I=w?o:new Z_(vt(o)),A=c||this.parentInjector;if(!m&&null==I.ngModule&&A){const V=A.get(Zh,null);V&&(m=V)}const R=I.create(A,f,void 0,m);return this.insert(R.hostView,b),R}insert(o,l){const c=o._lView,f=c[1];if(function oo(s){return Zi(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const V=c[3],W=new ng(V,V[6],V[3]);W.detach(W.indexOf(o))}}const m=this._adjustIndex(l),w=this._lContainer;!function wv(s,o,l,c){const f=10+c,m=l.length;c>0&&(l[f-1][4]=o),c<m-10?(o[4]=l[f],qd(l,10+c,o)):(l.push(o),o[4]=null),o[3]=l;const w=o[17];null!==w&&l!==w&&function Im(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(w,o);const b=o[19];null!==b&&b.insertView(s),o[2]|=128}(f,c,w,m);const b=Iv(m,w),I=c[11],A=Sm(I,w[7]);return null!==A&&function ri(s,o,l,c,f,m){c[0]=f,c[6]=o,up(s,c,l,1,f,m)}(f,w[6],I,c,A,b),o.attachToViewContainerRef(),qd(cE(w),m,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=uE(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),c=Ev(this._lContainer,l);c&&(_a(cE(this._lContainer),l),ob(c[1],c))}detach(o){const l=this._adjustIndex(o,-1),c=Ev(this._lContainer,l);return c&&null!=_a(cE(this._lContainer),l)?new Xp(c):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function uE(s){return s[8]}function cE(s){return s[8]||(s[8]=[])}function ef(s,o){let l;const c=o[s.index];if(Zi(c))l=c;else{let f;if(8&s.type)f=$n(c);else{const m=o[11];f=m.createComment("");const w=Hn(s,o);uh(m,Sm(m,w),f,function lb(s,o){return Pn(s)?s.nextSibling(o):o.nextSibling}(m,w),!1)}o[s.index]=l=Km(c,o,f,s),Ym(o,l)}return new ng(l,s,o)}class Go{constructor(o){this.queryList=o,this.matches=null}clone(){return new Go(this.queryList)}setDirty(){this.queryList.setDirty()}}class ry{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const c=null!==o.contentQueries?o.contentQueries[0]:l.length,f=[];for(let m=0;m<c;m++){const w=l.getByIndex(m);f.push(this.queries[w.indexInDeclarationView].clone())}return new ry(f)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==tf(o,l).matches&&this.queries[l].setDirty()}}class dE{constructor(o,l,c=null){this.predicate=o,this.flags=l,this.read=c}}class iy{constructor(o=[]){this.queries=o}elementStart(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let c=0;c<this.length;c++){const f=null!==l?l.length:0,m=this.getByIndex(c).embeddedTView(o,f);m&&(m.indexInDeclarationView=c,null!==l?l.push(m):l=[m])}return null!==l?new iy(l):null}template(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class ku{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new ku(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const m=c[f];this.matchTNodeWithReadOption(o,l,hE(l,m)),this.matchTNodeWithReadOption(o,l,fa(l,o,m,!1,!1))}else c===Pa?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,fa(l,o,c,!1,!1))}matchTNodeWithReadOption(o,l,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===Wh||f===ty||f===Pa&&4&l.type)this.addMatch(l.index,-2);else{const m=fa(l,o,f,!1,!1);null!==m&&this.addMatch(l.index,m)}else this.addMatch(l.index,c)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function hE(s,o){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===o)return l[c+1];return null}function Zr(s,o,l,c){return-1===l?function RA(s,o){return 11&s.type?Ma(s,o):4&s.type?ey(s,o):null}(o,s):-2===l?function pn(s,o,l){return l===Wh?Ma(o,s):l===Pa?ey(o,s):l===ty?ef(o,s):void 0}(s,o,c):di(s,s[1],l,o)}function fE(s,o,l,c){const f=o[19].queries[c];if(null===f.matches){const m=s.data,w=l.matches,b=[];for(let I=0;I<w.length;I+=2){const A=w[I];b.push(A<0?null:Zr(o,m[A],w[I+1],l.metadata.read))}f.matches=b}return f.matches}function sy(s,o,l,c){const f=s.queries.getByIndex(l),m=f.matches;if(null!==m){const w=fE(s,o,f,l);for(let b=0;b<m.length;b+=2){const I=m[b];if(I>0)c.push(w[b/2]);else{const A=m[b+1],R=o[-I];for(let V=10;V<R.length;V++){const W=R[V];W[17]===W[3]&&sy(W[1],W,A,c)}if(null!==R[9]){const V=R[9];for(let W=0;W<V.length;W++){const re=V[W];sy(re[1],re,A,c)}}}}}return c}function Sl(s){const o=Me(),l=Xt(),c=cc();Ao(c+1);const f=tf(l,c);if(s.dirty&&wr(o)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const m=f.crossesNgTemplate?sy(l,o,c,[]):fE(l,o,f,c);s.reset(m,lI),s.notifyOnChanges()}return!0}return!1}function CI(s,o,l){const c=Xt();c.firstCreatePass&&(qo(c,new dE(s,o,l),-1),2==(2&o)&&(c.staticViewQueries=!0)),gE(c,Me(),o)}function us(s,o,l,c){const f=Xt();if(f.firstCreatePass){const m=Nn();qo(f,new dE(o,l,c),m.index),function II(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(f,s),2==(2&l)&&(f.staticContentQueries=!0)}gE(f,Me(),l)}function pE(){return function ig(s,o){return s[19].queries[o].queryList}(Me(),cc())}function gE(s,o,l){const c=new X_(4==(4&l));Lb(s,o,c,c.destroy),null===o[19]&&(o[19]=new ry),o[19].queries.push(new Go(c))}function qo(s,o,l){null===s.queries&&(s.queries=new iy),s.queries.track(new ku(o,l))}function tf(s,o){return s.queries.getByIndex(o)}function ag(...s){}const EE=new vn("Application Initializer");let lf=(()=>{class s{constructor(l){this.appInits=l,this.resolve=ag,this.reject=ag,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,f)=>{this.resolve=c,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(w_(m))l.push(m);else if(Ah(m)){const w=new Promise((b,I)=>{m.subscribe({complete:b,error:I})});l.push(w)}}Promise.all(l).then(()=>{c()}).catch(f=>{this.reject(f)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(K(EE,8))},s.\u0275prov=_n({token:s,factory:s.\u0275fac}),s})();const UI=new vn("AppId"),jA={provide:UI,useFactory:function BA(){return`${bE()}${bE()}${bE()}`},deps:[]};function bE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const BI=new vn("Platform Initializer"),jI=new vn("Platform ID"),$I=new vn("appBootstrapListener");let HI=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=_n({token:s,factory:s.\u0275fac}),s})();const my=new vn("LocaleId"),GI=new vn("DefaultCurrencyCode");class qI{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let _y=(()=>{class s{compileModuleSync(l){return new K_(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),m=gl(nn(l).declarations).reduce((w,b)=>{const I=vt(b);return I&&w.push(new Z_(I)),w},[]);return new qI(c,m)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=_n({token:s,factory:s.\u0275fac}),s})();const vi=(()=>Promise.resolve(0))();function lg(s){"undefined"==typeof Zone?vi.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ds{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ho(!1),this.onMicrotaskEmpty=new Ho(!1),this.onStable=new Ho(!1),this.onError=new Ho(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&l,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function CE(){let s=Et.requestAnimationFrame,o=Et.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function zI(s){const o=()=>{!function GA(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Et,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,uf(s),s.isCheckStableRunning=!0,yy(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),uf(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,f,m,w,b)=>{try{return Lu(s),l.invokeTask(f,m,w,b)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),Vu(s)}},onInvoke:(l,c,f,m,w,b,I)=>{try{return Lu(s),l.invoke(f,m,w,b,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),Vu(s)}},onHasTask:(l,c,f,m)=>{l.hasTask(f,m),c===f&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,uf(s),yy(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(l,c,f,m)=>(l.handleError(f,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ds.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ds.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,c){return this._inner.run(o,l,c)}runTask(o,l,c,f){const m=this._inner,w=m.scheduleEventTask("NgZoneEvent: "+f,o,Fu,ag,ag);try{return m.runTask(w,l,c)}finally{m.cancelTask(w)}}runGuarded(o,l,c){return this._inner.runGuarded(o,l,c)}runOutsideAngular(o){return this._outer.run(o)}}const Fu={};function yy(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function uf(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Lu(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Vu(s){s._nesting--,yy(s)}class fd{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ho,this.onMicrotaskEmpty=new Ho,this.onStable=new Ho,this.onError=new Ho}run(o,l,c){return o.apply(l,c)}runGuarded(o,l,c){return o.apply(l,c)}runOutsideAngular(o){return o()}runTask(o,l,c,f){return o.apply(l,c)}}let cf=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ds.assertNotInAngularZone(),lg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())lg(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,f){let m=-1;c&&c>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==m),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:m,updateCb:f})}whenStable(l,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,c,f){return[]}}return s.\u0275fac=function(l){return new(l||s)(K(ds))},s.\u0275prov=_n({token:s,factory:s.\u0275fac}),s})(),IE=(()=>{class s{constructor(){this._applications=new Map,vy.addToWindow(this)}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return vy.findTestabilityInTree(this,l,c)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=_n({token:s,factory:s.\u0275fac}),s})();class TE{addToWindow(o){}findTestabilityInTree(o,l,c){return null}}function DE(s){vy=s}let wo,vy=new TE;const ug=new vn("AllowMultipleToken");class cg{constructor(o,l){this.name=o,this.token=l}}function KI(s,o,l=[]){const c=`Platform: ${o}`,f=new vn(c);return(m=[])=>{let w=QI();if(!w||w.injector.get(ug,!1))if(s)s(l.concat(m).concat({provide:f,useValue:!0}));else{const b=l.concat(m).concat({provide:f,useValue:!0},{provide:qv,useValue:"platform"});!function pd(s){if(wo&&!wo.destroyed&&!wo.injector.get(ug,!1))throw new Fe(400,"");wo=s.get(JI);const o=s.get(BI,null);o&&o.forEach(l=>l())}(bs.create({providers:b,name:c}))}return function YI(s){const o=QI();if(!o)throw new Fe(401,"");return o}()}}function QI(){return wo&&!wo.destroyed?wo:null}let JI=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const b=function dg(s,o){let l;return l="noop"===s?new fd:("zone.js"===s?void 0:s)||new ds({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),I=[{provide:ds,useValue:b}];return b.run(()=>{const A=bs.create({providers:I,parent:this.injector,name:l.moduleType.name}),R=l.create(A),V=R.injector.get(ap,null);if(!V)throw new Fe(402,"");return b.runOutsideAngular(()=>{const W=b.onError.subscribe({next:re=>{V.handleError(re)}});R.onDestroy(()=>{SE(this._modules,R),W.unsubscribe()})}),function gd(s,o,l){try{const c=l();return w_(c)?c.catch(f=>{throw o.runOutsideAngular(()=>s.handleError(f)),f}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(V,b,()=>{const W=R.injector.get(lf);return W.runInitializers(),W.donePromise.then(()=>(function ZC(s){ut(s,"Expected localeId to be defined"),"string"==typeof s&&(zC=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(my,$h)||$h),this._moduleDoBootstrap(R),R))})})}bootstrapModule(l,c=[]){const f=Uu({},c);return function qA(s,o,l){const c=new K_(l);return Promise.resolve(c)}(0,0,l).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(l){const c=l.injector.get(df);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new Fe(403,"");l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Fe(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(K(bs))},s.\u0275prov=_n({token:s,factory:s.\u0275fac}),s})();function Uu(s,o){return Array.isArray(o)?o.reduce(Uu,s):Object.assign(Object.assign({},s),o)}let df=(()=>{class s{constructor(l,c,f,m,w){this._zone=l,this._injector=c,this._exceptionHandler=f,this._componentFactoryResolver=m,this._initStatus=w,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new O.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),I=new O.y(A=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{ds.assertNotInAngularZone(),lg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{ds.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{R.unsubscribe(),V.unsubscribe()}});this.isStable=(0,se.T)(b,I.pipe((0,he.B)()))}bootstrap(l,c){if(!this._initStatus.done)throw new Fe(405,"");let f;f=l instanceof qh?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(f.componentType);const m=function ZI(s){return s.isBoundToModule}(f)?void 0:this._injector.get(Zh),b=f.create(bs.NULL,[],c||f.selector,m),I=b.location.nativeElement,A=b.injector.get(cf,null),R=A&&b.injector.get(IE);return A&&R&&R.registerApplication(I,A),b.onDestroy(()=>{this.detachView(b.hostView),SE(this.components,b),R&&R.unregisterApplication(I)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new Fe(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;SE(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get($I,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(K(ds),K(bs),K(ap),K($o),K(lf))},s.\u0275prov=_n({token:s,factory:s.\u0275fac}),s})();function SE(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let hg=!0,eT=!1;function tT(){return eT=!0,hg}function fg(){if(eT)throw new Error("Cannot enable prod mode after platform setup.");hg=!1}let nT=(()=>{class s{}return s.__NG_ELEMENT_ID__=As,s})();function As(s){return function rT(s,o,l){if(xd(s)&&!l){const c=Ti(s.index,o);return new Xp(c,c)}return 47&s.type?new Xp(o[16],o):null}(Nn(),Me(),16==(16&s))}class oT{constructor(){}supports(o){return Eh(o)}create(o){return new ex(o)}}const aT=(s,o)=>o;class ex{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||aT}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,c=this._removalsHead,f=0,m=null;for(;l||c;){const w=!c||l&&l.currentIndex<lT(c,f,m)?l:c,b=lT(w,f,m),I=w.currentIndex;if(w===c)f--,c=c._nextRemoved;else if(l=l._next,null==w.previousIndex)f++;else{m||(m=[]);const A=b-f,R=I-f;if(A!=R){for(let W=0;W<A;W++){const re=W<m.length?m[W]:m[W]=0,De=re+W;R<=De&&De<A&&(m[W]=re+1)}m[w.previousIndex]=R-A}}b!==I&&o(w,b,I)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!Eh(o))throw new Fe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let f,m,w,l=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)m=o[b],w=this._trackByFn(b,m),null!==l&&Object.is(l.trackById,w)?(c&&(l=this._verifyReinsertion(l,m,w,b)),Object.is(l.item,m)||this._addIdentityChange(l,m)):(l=this._mismatch(l,m,w,b),c=!0),l=l._next}else f=0,function dC(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Gr()]();let c;for(;!(c=l.next()).done;)o(c.value)}}(o,b=>{w=this._trackByFn(f,b),null!==l&&Object.is(l.trackById,w)?(c&&(l=this._verifyReinsertion(l,b,w,f)),Object.is(l.item,b)||this._addIdentityChange(l,b)):(l=this._mismatch(l,b,w,f),c=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,c,f){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,m,f)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,m,f)):o=this._addAfter(new tx(l,c),m,f),o}_verifyReinsertion(o,l,c,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==m?o=this._reinsertAfter(m,o._prev,f):o.currentIndex!=f&&(o.currentIndex=f,this._addToMoves(o,f)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const f=o._prevRemoved,m=o._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(o,l,c),this._addToMoves(o,c),o}_moveAfter(o,l,c){return this._unlink(o),this._insertAfter(o,l,c),this._addToMoves(o,c),o}_addAfter(o,l,c){return this._insertAfter(o,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,c){const f=null===l?this._itHead:l._next;return o._next=f,o._prev=l,null===f?this._itTail=o:f._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new si),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,c=o._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new si),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class tx{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class UE{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const l=o._prevDup,c=o._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class si{constructor(){this.map=new Map}put(o){const l=o.trackById;let c=this.map.get(l);c||(c=new UE,this.map.set(l,c)),c.add(o)}get(o,l){const f=this.map.get(o);return f?f.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lT(s,o,l){const c=s.previousIndex;if(null===c)return c;let f=0;return l&&c<l.length&&(f=l[c]),c+o+f}class uT{constructor(){}supports(o){return o instanceof Map||s_(o)}create(){return new nx}}class nx{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||s_(o)))throw new Fe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const m=this._getOrCreateRecordForKey(f,c);l=this._insertBeforeOrAppend(l,m)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const c=o._prev;return l._next=o,l._prev=c,o._prev=l,c&&(c._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const f=this._records.get(o);this._maybeAddToChanges(f,l);const m=f._prev,w=f._next;return m&&(m._next=w),w&&(w._prev=m),f._next=null,f._prev=null,f}const c=new rx(o);return this._records.set(o,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(c=>l(o[c],c))}}class rx{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function BE(){return new by([new oT])}let by=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const f=c.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||BE()),deps:[[s,new is,new zn]]}}find(l){const c=this.factories.find(f=>f.supports(l));if(null!=c)return c;throw new Fe(901,"")}}return s.\u0275prov=_n({token:s,providedIn:"root",factory:BE}),s})();function cT(){return new gg([new uT])}let gg=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const f=c.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||cT()),deps:[[s,new is,new zn]]}}find(l){const c=this.factories.find(m=>m.supports(l));if(c)return c;throw new Fe(901,"")}}return s.\u0275prov=_n({token:s,providedIn:"root",factory:cT}),s})();const $E=[new uT],mg=new by([new oT]),Cy=new gg($E),GE=KI(null,"core",[{provide:jI,useValue:"unknown"},{provide:JI,deps:[bs]},{provide:IE,deps:[]},{provide:HI,deps:[]}]),qE=[{provide:df,useClass:df,deps:[ds,bs,ap,$o,lf]},{provide:W_,deps:[ds],useFactory:function sx(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(l){o.push(l)}}},{provide:lf,useClass:lf,deps:[[new zn,EE]]},{provide:_y,useClass:_y,deps:[]},jA,{provide:by,useFactory:function hT(){return mg},deps:[]},{provide:gg,useFactory:function ix(){return Cy},deps:[]},{provide:my,useFactory:function fT(s){return s||function pT(){return"undefined"!=typeof $localize&&$localize.locale||$h}()},deps:[[new Wn(my),new zn,new is]]},{provide:GI,useValue:"USD"}];let gT=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(K(df))},s.\u0275mod=ae({type:s}),s.\u0275inj=Ei({providers:qE}),s})()},3942:(it,Ie,F)=>{F.d(Ie,{Z:()=>Fe});var h=F(2090),$=F(4859),O=F(9681),se=F(1877);class he{constructor(ye,we){this._delegate=ye,this.firebase=we,(0,O._addComponent)(ye,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(ye,we=O._DEFAULT_ENTRY_NAME){var ke;this._delegate.checkDestroyed();const Be=this._delegate.container.getProvider(ye);return!Be.isInitialized()&&"EXPLICIT"===(null===(ke=Be.getComponent())||void 0===ke?void 0:ke.instantiationMode)&&Be.initialize(),Be.getImmediate({identifier:we})}_removeServiceInstance(ye,we=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(we)}_addComponent(ye){(0,O._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,O._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function _e(){const He=function de(He){const ye={},we={__esModule:!0,initializeApp:function je(Xe,Te={}){const q=O.initializeApp(Xe,Te);if((0,h.r3)(ye,q.name))return ye[q.name];const ie=new He(q,we);return ye[q.name]=ie,ie},app:Be,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ne(Xe){const Te=Xe.name,q=Te.replace("-compat","");if(O._registerComponent(Xe)&&"PUBLIC"===Xe.type){const ie=(pe=Be())=>{if("function"!=typeof pe[q])throw fe.create("invalid-app-argument",{appName:Te});return pe[q]()};void 0!==Xe.serviceProps&&(0,h.ZB)(ie,Xe.serviceProps),we[q]=ie,He.prototype[q]=function(...pe){return this._getService.bind(this,Te).apply(this,Xe.multipleInstances?pe:[])}}return"PUBLIC"===Xe.type?we[q]:null},removeApp:function ke(Xe){delete ye[Xe]},useAsService:function at(Xe,Te){return"serverAuth"===Te?null:Te},modularAPIs:O}};function Be(Xe){if(!(0,h.r3)(ye,Xe=Xe||O._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:Xe});return ye[Xe]}return we.default=we,Object.defineProperty(we,"apps",{get:function st(){return Object.keys(ye).map(Xe=>ye[Xe])}}),Be.App=He,we}(he);return He.INTERNAL=Object.assign(Object.assign({},He.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function ye(we){(0,h.ZB)(He,we)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),He}(),z=new se.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const He=self.firebase.SDK_VERSION;He&&He.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Fe=G;!function xe(He){(0,O.registerVersion)("@firebase/app-compat","0.1.28",He)}()},9681:(it,Ie,F)=>{F.r(Ie),F.d(Ie,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Vr,_DEFAULT_ENTRY_NAME:()=>ut,_addComponent:()=>gr,_addOrOverwriteComponent:()=>_n,_apps:()=>ar,_clearComponents:()=>bi,_components:()=>cn,_getProvider:()=>Ei,_registerComponent:()=>lr,_removeServiceInstance:()=>Un,deleteApp:()=>gt,getApp:()=>Le,getApps:()=>ur,initializeApp:()=>Ci,onLog:()=>an,registerVersion:()=>on,setLogLevel:()=>ai});var h=F(5861),$=F(4859),O=F(1877),se=F(2090),he=F(8766);class Ee{constructor(B){this.container=B}getPlatformInfoString(){return this.container.getProviders().map(be=>{if(function fe(ee){const B=ee.getComponent();return"VERSION"===(null==B?void 0:B.type)}(be)){const qe=be.getImmediate();return`${qe.library}/${qe.version}`}return null}).filter(be=>be).join(" ")}}const de="@firebase/app",G=new O.Yd("@firebase/app"),ut="[DEFAULT]",xt={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ar=new Map,cn=new Map;function gr(ee,B){try{ee.container.addComponent(B)}catch(be){G.debug(`Component ${B.name} failed to register with FirebaseApp ${ee.name}`,be)}}function _n(ee,B){ee.container.addOrOverwriteComponent(B)}function lr(ee){const B=ee.name;if(cn.has(B))return G.debug(`There were multiple attempts to register component ${B}.`),!1;cn.set(B,ee);for(const be of ar.values())gr(be,ee);return!0}function Ei(ee,B){const be=ee.container.getProvider("heartbeat").getImmediate({optional:!0});return be&&be.triggerHeartbeat(),ee.container.getProvider(B)}function Un(ee,B,be=ut){Ei(ee,B).clearInstance(be)}function bi(){cn.clear()}const En=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ps{constructor(B,be,qe){this._isDeleted=!1,this._options=Object.assign({},B),this._config=Object.assign({},be),this._name=be.name,this._automaticDataCollectionEnabled=be.automaticDataCollectionEnabled,this._container=qe,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(B){this.checkDestroyed(),this._automaticDataCollectionEnabled=B}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(B){this._isDeleted=B}checkDestroyed(){if(this.isDeleted)throw En.create("app-deleted",{appName:this._name})}}const Vr="9.8.4";function Ci(ee,B={}){"object"!=typeof B&&(B={name:B});const be=Object.assign({name:ut,automaticDataCollectionEnabled:!1},B),qe=be.name;if("string"!=typeof qe||!qe)throw En.create("bad-app-name",{appName:String(qe)});const ht=ar.get(qe);if(ht){if((0,se.vZ)(ee,ht.options)&&(0,se.vZ)(be,ht.config))return ht;throw En.create("duplicate-app",{appName:qe})}const Ft=new $.H0(qe);for(const xn of cn.values())Ft.addComponent(xn);const ln=new Ps(ee,be,Ft);return ar.set(qe,ln),ln}function Le(ee=ut){const B=ar.get(ee);if(!B)throw En.create("no-app",{appName:ee});return B}function ur(){return Array.from(ar.values())}function gt(ee){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,h.Z)(function*(ee){const B=ee.name;ar.has(B)&&(ar.delete(B),yield Promise.all(ee.container.getProviders().map(be=>be.delete())),ee.isDeleted=!0)})).apply(this,arguments)}function on(ee,B,be){var qe;let ht=null!==(qe=xt[ee])&&void 0!==qe?qe:ee;be&&(ht+=`-${be}`);const Ft=ht.match(/\s|\//),ln=B.match(/\s|\//);if(Ft||ln){const xn=[`Unable to register library "${ht}" with version "${B}":`];return Ft&&xn.push(`library name "${ht}" contains illegal characters (whitespace or "/")`),Ft&&ln&&xn.push("and"),ln&&xn.push(`version name "${B}" contains illegal characters (whitespace or "/")`),void G.warn(xn.join(" "))}lr(new $.wA(`${ht}-version`,()=>({library:ht,version:B}),"VERSION"))}function an(ee,B){if(null!==ee&&"function"!=typeof ee)throw En.create("invalid-log-argument");(0,O.Am)(ee,B)}function ai(ee){(0,O.Ub)(ee)}const An="firebase-heartbeat-store";let Ur=null;function Co(){return Ur||(Ur=(0,he.X3)("firebase-heartbeat-database",1,{upgrade:(ee,B)=>{0===B&&ee.createObjectStore(An)}}).catch(ee=>{throw En.create("storage-open",{originalErrorMessage:ee.message})})),Ur}function mt(){return(mt=(0,h.Z)(function*(ee){var B;try{return(yield Co()).transaction(An).objectStore(An).get(Mi(ee))}catch(be){throw En.create("storage-get",{originalErrorMessage:null===(B=be)||void 0===B?void 0:B.message})}})).apply(this,arguments)}function _t(ee,B){return ps.apply(this,arguments)}function ps(){return(ps=(0,h.Z)(function*(ee,B){var be;try{const ht=(yield Co()).transaction(An,"readwrite");return yield ht.objectStore(An).put(B,Mi(ee)),ht.done}catch(qe){throw En.create("storage-set",{originalErrorMessage:null===(be=qe)||void 0===be?void 0:be.message})}})).apply(this,arguments)}function Mi(ee){return`${ee.name}!${ee.options.appId}`}class _r{constructor(B){this.container=B,this._heartbeatsCache=null;const be=this.container.getProvider("app").getImmediate();this._storage=new Y(be),this._heartbeatsCachePromise=this._storage.read().then(qe=>(this._heartbeatsCache=qe,qe))}triggerHeartbeat(){var B=this;return(0,h.Z)(function*(){const qe=B.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ht=In();if(null===B._heartbeatsCache&&(B._heartbeatsCache=yield B._heartbeatsCachePromise),B._heartbeatsCache.lastSentHeartbeatDate!==ht&&!B._heartbeatsCache.heartbeats.some(Ft=>Ft.date===ht))return B._heartbeatsCache.heartbeats.push({date:ht,agent:qe}),B._heartbeatsCache.heartbeats=B._heartbeatsCache.heartbeats.filter(Ft=>{const ln=new Date(Ft.date).valueOf();return Date.now()-ln<=2592e6}),B._storage.overwrite(B._heartbeatsCache)})()}getHeartbeatsHeader(){var B=this;return(0,h.Z)(function*(){if(null===B._heartbeatsCache&&(yield B._heartbeatsCachePromise),null===B._heartbeatsCache||0===B._heartbeatsCache.heartbeats.length)return"";const be=In(),{heartbeatsToSend:qe,unsentEntries:ht}=function yt(ee,B=1024){const be=[];let qe=ee.slice();for(const ht of ee){const Ft=be.find(ln=>ln.agent===ht.agent);if(Ft){if(Ft.dates.push(ht.date),H(be)>B){Ft.dates.pop();break}}else if(be.push({agent:ht.agent,dates:[ht.date]}),H(be)>B){be.pop();break}qe=qe.slice(1)}return{heartbeatsToSend:be,unsentEntries:qe}}(B._heartbeatsCache.heartbeats),Ft=(0,se.L)(JSON.stringify({version:2,heartbeats:qe}));return B._heartbeatsCache.lastSentHeartbeatDate=be,ht.length>0?(B._heartbeatsCache.heartbeats=ht,yield B._storage.overwrite(B._heartbeatsCache)):(B._heartbeatsCache.heartbeats=[],B._storage.overwrite(B._heartbeatsCache)),Ft})()}}function In(){return(new Date).toISOString().substring(0,10)}class Y{constructor(B){this.app=B,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var B=this;return(0,h.Z)(function*(){return(yield B._canUseIndexedDBPromise)&&(yield function zt(ee){return mt.apply(this,arguments)}(B.app))||{heartbeats:[]}})()}overwrite(B){var be=this;return(0,h.Z)(function*(){var qe;if(yield be._canUseIndexedDBPromise){const Ft=yield be.read();return _t(be.app,{lastSentHeartbeatDate:null!==(qe=B.lastSentHeartbeatDate)&&void 0!==qe?qe:Ft.lastSentHeartbeatDate,heartbeats:B.heartbeats})}})()}add(B){var be=this;return(0,h.Z)(function*(){var qe;if(yield be._canUseIndexedDBPromise){const Ft=yield be.read();return _t(be.app,{lastSentHeartbeatDate:null!==(qe=B.lastSentHeartbeatDate)&&void 0!==qe?qe:Ft.lastSentHeartbeatDate,heartbeats:[...Ft.heartbeats,...B.heartbeats]})}})()}}function H(ee){return(0,se.L)(JSON.stringify({version:2,heartbeats:ee})).length}!function X(ee){lr(new $.wA("platform-logger",B=>new Ee(B),"PRIVATE")),lr(new $.wA("heartbeat",B=>new _r(B),"PRIVATE")),on(de,"0.7.27",ee),on(de,"0.7.27","esm2017"),on("fire-js","")}("")},4859:(it,Ie,F)=>{F.d(Ie,{wA:()=>O,H0:()=>de,zt:()=>he});var h=F(5861),$=F(2090);class O{constructor(G,z,oe){this.name=G,this.instanceFactory=z,this.type=oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const se="[DEFAULT]";class he{constructor(G,z){this.name=G,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const z=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(z)){const oe=new $.BH;if(this.instancesDeferred.set(z,oe),this.isInitialized(z)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:z});We&&oe.resolve(We)}catch(We){}}return this.instancesDeferred.get(z).promise}getImmediate(G){var z;const oe=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),We=null!==(z=null==G?void 0:G.optional)&&void 0!==z&&z;if(!this.isInitialized(oe)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:oe})}catch(xe){if(We)return null;throw xe}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function fe(_e){return"EAGER"===_e.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:se})}catch(z){}for(const[z,oe]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(z);try{const xe=this.getOrInitializeService({instanceIdentifier:We});oe.resolve(xe)}catch(xe){}}}}clearInstance(G=se){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,h.Z)(function*(){const z=Array.from(G.instances.values());yield Promise.all([...z.filter(oe=>"INTERNAL"in oe).map(oe=>oe.INTERNAL.delete()),...z.filter(oe=>"_delete"in oe).map(oe=>oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=se){return this.instances.has(G)}getOptions(G=se){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:z={}}=G,oe=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(oe))throw Error(`${this.name}(${oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:oe,options:z});for(const[xe,Fe]of this.instancesDeferred.entries())oe===this.normalizeInstanceIdentifier(xe)&&Fe.resolve(We);return We}onInit(G,z){var oe;const We=this.normalizeInstanceIdentifier(z),xe=null!==(oe=this.onInitCallbacks.get(We))&&void 0!==oe?oe:new Set;xe.add(G),this.onInitCallbacks.set(We,xe);const Fe=this.instances.get(We);return Fe&&G(Fe,We),()=>{xe.delete(G)}}invokeOnInitCallbacks(G,z){const oe=this.onInitCallbacks.get(z);if(oe)for(const We of oe)try{We(G,z)}catch(xe){}}getOrInitializeService({instanceIdentifier:G,options:z={}}){let oe=this.instances.get(G);if(!oe&&this.component&&(oe=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=G,_e===se?void 0:_e),options:z}),this.instances.set(G,oe),this.instancesOptions.set(G,z),this.invokeOnInitCallbacks(oe,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,oe)}catch(We){}var _e;return oe||null}normalizeInstanceIdentifier(G=se){return this.component?this.component.multipleInstances?G:se:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const z=this.getProvider(G.name);if(z.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);z.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const z=new he(G,this);return this.providers.set(G,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(it,Ie,F)=>{F.d(Ie,{in:()=>$,Yd:()=>fe,Ub:()=>de,Am:()=>_e});const h=[];var $=(()=>{return(G=$||($={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",$;var G})();const O={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},se=$.INFO,he={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},Ee=(G,z,...oe)=>{if(z<G.logLevel)return;const We=(new Date).toISOString(),xe=he[z];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[xe](`[${We}]  ${G.name}:`,...oe)};class fe{constructor(z){this.name=z,this._logLevel=se,this._logHandler=Ee,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in $))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?O[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...z),this._logHandler(this,$.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...z),this._logHandler(this,$.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,$.INFO,...z),this._logHandler(this,$.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,$.WARN,...z),this._logHandler(this,$.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...z),this._logHandler(this,$.ERROR,...z)}}function de(G){h.forEach(z=>{z.setLogLevel(G)})}function _e(G,z){for(const oe of h){let We=null;z&&z.level&&(We=O[z.level]),oe.userLogHandler=null===G?null:(xe,Fe,...He)=>{const ye=He.map(we=>{if(null==we)return null;if("string"==typeof we)return we;if("number"==typeof we||"boolean"==typeof we)return we.toString();if(we instanceof Error)return we.message;try{return JSON.stringify(we)}catch(ke){return null}}).filter(we=>we).join(" ");Fe>=(null!=We?We:xe.logLevel)&&G({level:$[Fe].toLowerCase(),message:ye,args:He,type:xe.name})}}}},8766:(it,Ie,F)=>{F.d(Ie,{Lj:()=>je,X3:()=>Be});var h=F(5861);let O,se;const fe=new WeakMap,de=new WeakMap,_e=new WeakMap,G=new WeakMap,z=new WeakMap;let xe={get(Te,q,ie){if(Te instanceof IDBTransaction){if("done"===q)return de.get(Te);if("objectStoreNames"===q)return Te.objectStoreNames||_e.get(Te);if("store"===q)return ie.objectStoreNames[1]?void 0:ie.objectStore(ie.objectStoreNames[0])}return we(Te[q])},set:(Te,q,ie)=>(Te[q]=ie,!0),has:(Te,q)=>Te instanceof IDBTransaction&&("done"===q||"store"===q)||q in Te};function ye(Te){return"function"==typeof Te?function He(Te){return Te!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ee(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Te)?function(...q){return Te.apply(ke(this),q),we(fe.get(this))}:function(...q){return we(Te.apply(ke(this),q))}:function(q,...ie){const pe=Te.call(ke(this),q,...ie);return _e.set(pe,q.sort?q.sort():[q]),we(pe)}}(Te):(Te instanceof IDBTransaction&&function We(Te){if(de.has(Te))return;const q=new Promise((ie,pe)=>{const ve=()=>{Te.removeEventListener("complete",Pe),Te.removeEventListener("error",ue),Te.removeEventListener("abort",ue)},Pe=()=>{ie(),ve()},ue=()=>{pe(Te.error||new DOMException("AbortError","AbortError")),ve()};Te.addEventListener("complete",Pe),Te.addEventListener("error",ue),Te.addEventListener("abort",ue)});de.set(Te,q)}(Te),((Te,q)=>q.some(ie=>Te instanceof ie))(Te,function he(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Te,xe):Te)}function we(Te){if(Te instanceof IDBRequest)return function oe(Te){const q=new Promise((ie,pe)=>{const ve=()=>{Te.removeEventListener("success",Pe),Te.removeEventListener("error",ue)},Pe=()=>{ie(we(Te.result)),ve()},ue=()=>{pe(Te.error),ve()};Te.addEventListener("success",Pe),Te.addEventListener("error",ue)});return q.then(ie=>{ie instanceof IDBCursor&&fe.set(ie,Te)}).catch(()=>{}),z.set(q,Te),q}(Te);if(G.has(Te))return G.get(Te);const q=ye(Te);return q!==Te&&(G.set(Te,q),z.set(q,Te)),q}const ke=Te=>z.get(Te);function Be(Te,q,{blocked:ie,upgrade:pe,blocking:ve,terminated:Pe}={}){const ue=indexedDB.open(Te,q),St=we(ue);return pe&&ue.addEventListener("upgradeneeded",Gt=>{pe(we(ue.result),Gt.oldVersion,Gt.newVersion,we(ue.transaction))}),ie&&ue.addEventListener("blocked",()=>ie()),St.then(Gt=>{Pe&&Gt.addEventListener("close",()=>Pe()),ve&&Gt.addEventListener("versionchange",()=>ve())}).catch(()=>{}),St}function je(Te,{blocked:q}={}){const ie=indexedDB.deleteDatabase(Te);return q&&ie.addEventListener("blocked",()=>q()),we(ie).then(()=>{})}const st=["get","getKey","getAll","getAllKeys","count"],Ne=["put","add","delete","clear"],at=new Map;function Xe(Te,q){if(!(Te instanceof IDBDatabase)||q in Te||"string"!=typeof q)return;if(at.get(q))return at.get(q);const ie=q.replace(/FromIndex$/,""),pe=q!==ie,ve=Ne.includes(ie);if(!(ie in(pe?IDBIndex:IDBObjectStore).prototype)||!ve&&!st.includes(ie))return;const Pe=function(){var ue=(0,h.Z)(function*(St,...Gt){const Xn=this.transaction(St,ve?"readwrite":"readonly");let ut=Xn.store;return pe&&(ut=ut.index(Gt.shift())),(yield Promise.all([ut[ie](...Gt),ve&&Xn.done]))[0]});return function(Gt){return ue.apply(this,arguments)}}();return at.set(q,Pe),Pe}!function Fe(Te){xe=Te(xe)}(Te=>zV(WV({},Te),{get:(q,ie,pe)=>Xe(q,ie)||Te.get(q,ie,pe),has:(q,ie)=>!!Xe(q,ie)||Te.has(q,ie)}))},5861:(it,Ie,F)=>{function h(O,se,he,Ee,fe,de,_e){try{var G=O[de](_e),z=G.value}catch(oe){return void he(oe)}G.done?se(z):Promise.resolve(z).then(Ee,fe)}function $(O){return function(){var se=this,he=arguments;return new Promise(function(Ee,fe){var de=O.apply(se,he);function _e(z){h(de,Ee,fe,_e,G,"next",z)}function G(z){h(de,Ee,fe,_e,G,"throw",z)}_e(void 0)})}}F.d(Ie,{Z:()=>$})}},it=>{it(it.s=7345)}]);